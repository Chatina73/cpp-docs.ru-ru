---
title: Развертывание приложения с помощью распространяемого пакета (C++)
ms.date: 09/17/2018
helpviewer_keywords:
- walkthrough, deploying a Visual C++ application by using the redistributable package
ms.assetid: e59becbf-b8c6-4c8e-bab3-b69cc1ed3e5e
ms.openlocfilehash: ccf6b74096894c2e48258e6e0a60b807c7c6c5b4
ms.sourcegitcommit: dedd4c3cb28adec3793329018b9163ffddf890a4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2019
ms.locfileid: "57743792"
---
# <a name="walkthrough-deploying-a-visual-c-application-by-using-the-visual-c-redistributable-package"></a>Пошаговое руководство. Развертывание приложения Visual C++ с помощью распространяемого пакета Visual C++

Это пошаговое руководство описывает использование распространяемого пакета Visual C++ для развертывания приложения Visual C++.

## <a name="prerequisites"></a>Предварительные требования

Для выполнения данного пошагового руководства необходимо следующее.

- Компьютер, где установлена среда Visual Studio.

- Дополнительный компьютер, где не установлены библиотеки Visual C++.

### <a name="to-use-the-visual-c-redistributable-package-to-deploy-an-application"></a>Использование распространяемого пакета Visual C++ для развертывания приложения

1.  Вы можете создать приложение MFC и выполнить его сборку, следуя инструкциям в разделе [Пошаговое руководство. Развертывание приложения Visual C++ с помощью проекта установки](walkthrough-deploying-a-visual-cpp-application-by-using-a-setup-project.md).

1. Создайте файл, присвойте ему имя setup.bat и добавьте в него приведенные ниже команды. Измените `MyMFCApplication` на имя проекта.

    ```cmd
    @echo off
    vcredist_x86.exe
    mkdir "C:\Program Files\MyMFCApplication"
    copy MyMFCApplication.exe "C:\Program Files\MyMFCApplication"
    ```

1. Создайте самоизвлекающийся файл установки:

   1. В командной строке или в окне **Выполнить** запустите iexpress.exe.

   1. Выберите **Create new Self Extraction Directive file** (Создать самоизвлекающийся файл директивы) и нажмите кнопку **Далее**.

   1. Выберите **Extract files and run an installation command** (Извлечь файлы и запустить программу установки) и нажмите кнопку **Далее**.

   1. В текстовом поле введите имя своего приложения MFC и нажмите кнопку **Далее**.

   1. На странице **Confirmation prompt** (Запрос подтверждения) выберите **No Prompt** (Без запроса) и нажмите кнопку **Далее**.

   1. На странице **Лицензионное соглашение** выберите **Do not display a license** (Не показывать лицензию) и нажмите кнопку **Далее**.

   1. На странице **Packaged files** (Упакованные файлы) добавьте указанные ниже файлы и нажмите кнопку **Далее**.

      - Ваше приложение MFC (файл EXE).

      - vcredist_x86.exe. Этот файл расположен в папке \Program Files (x86)\Microsoft Visual Studio \<версия>\SDK\Bootstrapper\Packages\.. Также его можно скачать из [Центра загрузки Майкрософт](https://www.microsoft.com/download/confirmation.aspx?id=5555).

      - Файл setup.bat, созданный на предыдущем шаге.

   1. На странице **Install Program to Launch** (Запускаемая программа установки) в текстовом поле **Install Program** (Программа установки) введите приведенную ниже команду и нажмите кнопку **Далее**.

      **cmd.exe /c "setup.bat"**

   1. На странице **Show window** (Показывать окно) выберите **По умолчанию** и нажмите кнопку **Далее**.

   1. На странице **Finished message** (Готовое сообщение) выберите **No message** (Нет сообщений) и нажмите кнопку **Далее**.

   1. На странице **Package Name and Options** (Имя и параметры пакета) введите имя своего самоизвлекающегося файла установки, выберите **Store files using Long File Name inside Package** (Хранить файлы с использованием длинного имени внутри пакета) и нажмите кнопку **Далее**. В конце имени файла должно быть указано Setup.exe, например *MyMFCApplicationSetup.exe*.

   1. На странице **Configure restart** (Настройка перезапуска) выберите **No restart** (Без перезапуска) и нажмите кнопку **Далее**.

   1. На странице **Save Self Extraction Directive** (Сохранение самоизвлекающейся директивы) выберите **Save Self Extraction Directive (SED) file** (Сохранить файл самоизвлекающейся директивы) и нажмите кнопку **Далее**.

   1. На странице **Создать пакет** нажмите кнопку **Далее**. Нажмите кнопку **Готово**.

1. Проверьте самоизвлекающийся файл установки на другом компьютере, где нет библиотек Visual C++:

   1. На компьютере скачайте копию этого файла установки, запустите ее для установки и следуйте отображаемым инструкциям. В зависимости от выбранных параметров для установки может потребоваться выбрать команду **Запуск от имени администратора**.

   1. Запустите приложение MFC.

      Самоизвлекающийся файл установки устанавливает приложение MFC, которое находится в папке, указанной в шаге 2. Приложение выполняется успешно, так как в самоизвлекающийся файл установки включен установщик распространяемого пакета Visual C++.

      > [!IMPORTANT]
      > Чтобы определить, какая версия среды выполнения установлена, установщик проверяет раздел реестра \HKLM\SOFTWARE\Microsoft\VisualStudio\\\<версия>\VC\Runtimes\\<platform>. Если установленная сейчас версия новее чем та, которую пытается установить установщик, последний сообщает об успешной операции без установки более ранней версии и оставляет дополнительную запись на странице установленных программ в панели управления.

## <a name="see-also"></a>См. также

[Примеры развертывания](deployment-examples.md)<br/>
