---
title: Предупреждение средств компоновщика LNK4221
ms.date: 11/04/2016
f1_keywords:
- LNK4221
helpviewer_keywords:
- LNK4221
ms.assetid: 8e2eb2de-9532-4b85-908a-8c9ff5c4cccb
ms.openlocfilehash: b44ba8f0b88beda3e81d9baf59e5348ad4949b01
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50460974"
---
# <a name="linker-tools-warning-lnk4221"></a>Предупреждение средств компоновщика LNK4221

Этот файл объекта не определяет все ранее неопределенные открытые символы, поэтому он не будет использоваться никакими операциями компоновки, обращающимися к этой библиотеке

Рассмотрим следующие два фрагмента кода.

```
// a.cpp
#include <atlbase.h>
```

```
// b.cpp
#include <atlbase.h>
int function()
{
   return 0;
}

```

Чтобы скомпилировать файлы и создать два объектных файлов, выполните **cl /c a.cpp b.cpp** в командной строке. При компоновке объектных файлов, выполнив **link/lib /out:test.lib a.obj b.obj**, вы получите предупреждение LNK4221. При связывании объекты, выполнив **link/lib /out:test.lib b.obj a.obj**, вы не будете получать предупреждение.

Предупреждение не выдается во втором сценарии, так как компоновщик работает по принципу последний на входе поступления (LIFO). В первом случае b.obj обрабатывается раньше a.obj и a.obj имеет никаких новых символов для добавления. Указывая компоновщику обработать файл a.obj первым, можно избежать предупреждения.

Вероятная причина этой ошибки — при двух файлов исходного кода задайте параметр [/Yc (создать предкомпилированный заголовочный файл)](../../build/reference/yc-create-precompiled-header-file.md) с тем же именем файла заголовка, указанного в **предкомпилированный заголовок** поля. Распространенной причиной этой проблемы связана с файлом stdafx.h, поскольку по умолчанию включается файл stdafx.h stdafx.cpp и не добавляет новые символы. Если в другом исходном файле включается файл stdafx.h с **/Yc** и связанный OBJ-файл обрабатывается до stdafx.obj, компоновщик выдает предупреждение LNK4221.

Один из способов устранения этой проблемы является убедитесь, что для каждого предкомпилированного заголовка, имеется только один исходный файл, включающий его с **/Yc**. Все исходные файлы необходимо использовать предкомпилированные заголовки. Дополнительные сведения о том, как изменить этот параметр, см. в разделе [/Yu (использование файла предкомпилированного заголовка)](../../build/reference/yu-use-precompiled-header-file.md).