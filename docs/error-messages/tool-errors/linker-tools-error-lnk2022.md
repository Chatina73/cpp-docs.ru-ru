---
title: Ошибка средств компоновщика LNK2022
ms.date: 11/04/2016
f1_keywords:
- LNK2022
helpviewer_keywords:
- LNK2022
ms.assetid: d2128c73-dde3-4b8e-a9b2-0a153acefb3b
ms.openlocfilehash: d30dad6f8ad146ff467eb4eaf32b21dd6950d25f
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80194646"
---
# <a name="linker-tools-error-lnk2022"></a>Ошибка средств компоновщика LNK2022

> Сбой операции с метаданными (*HRESULT*): *ERROR_MESSAGE*

Компоновщик обнаружил ошибку при слиянии метаданных. Ошибки метаданных должны быть разрешены для успешного связывания.

Одним из способов диагностики этой проблемы является выполнение **ildasm-tokens** в объектных файлах для поиска типов, которые имеют маркеры, перечисленные в `error_message`, и поиск различий.  В метаданных два разных типа с одним и тем же именем являются недопустимыми, даже если только атрибут Лайауттипе отличается.

Одна из причин для LNK2022 состоит в том, что тип (например, структура) существует в нескольких компиляндов с тем же именем, но с конфликтующими определениями и при компиляции с параметром [/CLR](../../build/reference/clr-common-language-runtime-compilation.md).  В этом случае убедитесь, что тип имеет идентичное определение во всех компиляндов.  Имя типа указано в `error_message`.

Другая возможная причина для LNK2022 — когда компоновщик находит файл метаданных в другом расположении, чем указано компилятором (с [#using](../../preprocessor/hash-using-directive-cpp.md) ). Убедитесь, что файл метаданных (. dll или. netmodule) находится в том же расположении, что и при передаче компоновщику, так как он был передан компилятору.

При создании приложения ATL использование макроса `_ATL_MIXED` является обязательным для всех компиляндов, если он используется хотя бы в одном.

## <a name="example"></a>Пример

В следующем примере определяется пустой тип.

```cpp
// LNK2022_a.cpp
// compile with: /clr /c
public ref class Test {};
```

## <a name="example"></a>Пример

В этом примере показано, что нельзя связать два файла исходного кода, содержащие типы с одинаковыми именами, но разными определениями.

Следующий пример приводит к возникновению ошибки LNK2022.

```cpp
// LNK2022_b.cpp
// compile with: LNK2022_a.cpp /clr /LD
// LNK2022 expected
public ref class Test {
   void func() {}
   int var;
};
```
