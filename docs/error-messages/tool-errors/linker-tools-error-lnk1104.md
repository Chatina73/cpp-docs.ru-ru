---
title: Ошибка средств компоновщика LNK1104
ms.date: 09/06/2019
f1_keywords:
- LNK1104
helpviewer_keywords:
- LNK1104
ms.assetid: 9ca6f929-0efc-4055-8354-3cf5b4e636dc
ms.openlocfilehash: f3effd9054954a90f69c5b18d8f099e6d705d9a3
ms.sourcegitcommit: 7babce70714242cf498ca811eec3695fad3abd03
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2019
ms.locfileid: "70808838"
---
# <a name="linker-tools-error-lnk1104"></a>Ошибка средств компоновщика LNK1104

> не удается открыть файл "*ИмяФайла*"

Компоновщику не удалось открыть указанный файл. Наиболее распространенными причинами этой проблемы является то, что файл используется или заблокирован другим процессом. Также возможно, что файл не существует или не найден в одном из каталогов, в котором выполняется поиск компоновщика. Или у вас может не быть достаточных разрешений для доступа к файлу. Менее часто, возможно, закончилось место на диске, файл слишком большой или путь к файлу может быть слишком длинным.

## <a name="possible-causes-and-solutions"></a>Возможные причины и решения

Эта ошибка может возникать, когда компоновщик пытается открыть файл для чтения или записи. Чтобы уменьшить возможные причины, сначала проверьте тип файла. Затем используйте следующие разделы для выявления и исправления конкретной проблемы.

### <a name="cant-open-your-app-or-its-pdb-file"></a>Не удается открыть приложение или его PDB-файл

Если имя файла является исполняемым файлом, созданным проектом, или связанным PDB-файлом, наиболее распространенной причиной является то, что приложение уже выполняется при попытке его перестроения или загружается в отладчике. Чтобы устранить эту проблему, перед повторным созданием программы закройте программу и выгрузите ее из отладчика. Если приложение открыто в другой программе, например в редакторе ресурсов, закройте его. В экстремальных случаях может потребоваться завершить процесс с помощью диспетчера задач, остановить и перезапустить Visual Studio.

Антивирусные программы часто временно блокируют доступ к вновь созданным файлам, особенно исполняемым файлам EXE и DLL. Чтобы устранить эту проблему, попробуйте исключить каталоги сборки проекта из антивирусного сканера.

### <a name="cant-open-a-microsoft-library-file"></a>Не удается открыть файл библиотеки Майкрософт

Если файл, который не удается открыть, является одним из стандартных файлов библиотеки, предоставляемых корпорацией Майкрософт, например kernel32. lib, может возникнуть ошибка конфигурации проекта или ошибка установки. Убедитесь, что Windows SDK установлен, и если для проекта требуются другие библиотеки Майкрософт, такие как MFC, убедитесь, что компоненты MFC также были установлены установщиком Visual Studio. Вы можете снова запустить установщик, чтобы добавить дополнительные компоненты в любое время. Дополнительные сведения см. в разделе [изменение Visual Studio](/visualstudio/install/modify-visual-studio). Используйте вкладку отдельные компоненты в установщике, чтобы выбрать конкретные библиотеки и пакеты SDK.

Нет устранением рисков Spectre библиотек для приложений или компонентов универсальной платформы Windows (UWP). Если в отчете об ошибках упоминается файл *vccorlib. lib* , возможно, вы включили [/QSPECTRE](../../build/reference/qspectre.md) в проекте UWP. Отключите параметр компилятора **/Qspectre** , чтобы устранить эту проблему. В Visual Studio измените свойство **устранения рисков устранением рисков Spectre** , которое находится на странице "**Создание кода** **CC++/**  > код" диалогового окна **страницы свойств** проекта.

Если вы создаете проект, созданный с помощью более старой версии Visual Studio, набор инструментов платформы и библиотек для этой версии может быть не установлен. Если сообщение об ошибке возникает для имени библиотеки с версией (например, MSVCR100. lib), это, скорее всего, причина. Чтобы устранить эту проблему, вы можете обновить проект для использования установленного набора инструментов платформы или установить старый набор инструментов и выполнить сборку проекта без изменений. Дополнительные сведения см. в статьях [Обновление проектов из более ранних версий C++ Visual](../../porting/upgrading-projects-from-earlier-versions-of-visual-cpp.md) Studio и [Использование собственного многоплатформенного нацеливания для построения старых проектов](../../porting/use-native-multi-targeting.md).

Если эта ошибка возникает при сборке для новой целевой платформы или конфигурации, то библиотеки для этой конфигурации проекта или набора инструментов платформы могут быть не установлены. Убедитесь, что **набор инструментов платформы** и **версия Windows SDK** , указанные на [странице свойств "Общие](../../build/reference/general-property-page-project.md) " для проекта, установлены, и убедитесь, что необходимые библиотеки доступны в **каталогах библиотек** , указанных в [Страница свойств каталогов VC + +](../../build/reference/vcpp-directories-property-page.md) для параметров конфигурации. Существуют отдельные параметры для конфигураций отладки и розничной торговли, а также 32-разрядных и 64-разрядных конфигураций, поэтому если одна сборка работает, но другая вызывает ошибку, убедитесь, что параметры верны, а необходимые средства и библиотеки установлены для каждого Конфигурация, которую вы создаете.

Если вы используете интегрированную среду разработки Visual Studio для построения проекта, который был скопирован с другого компьютера, расположения установки для библиотек могут отличаться. Проверьте свойство **каталоги библиотеки** на [странице свойств каталогов VC + +](../../build/reference/vcpp-directories-property-page.md) для проекта и при необходимости обновите его. Чтобы просмотреть и изменить текущие пути к библиотекам, заданные в интегрированной среде разработки, выберите элемент управления раскрывающийся список для свойства **каталоги библиотек** и нажмите кнопку **изменить**. В разделе **вычисленное значение** диалогового окна **каталоги библиотек** перечислены текущие пути поиска файлов библиотек.

Эта ошибка также может возникать, если путь к Windows SDK устарел. Если установлена версия Windows SDK более новая, чем версия Visual Studio, убедитесь, что пути, указанные на [странице свойств каталогов VC + +](../../build/reference/vcpp-directories-property-page.md) , обновлены в соответствии с новым пакетом SDK. При использовании Командная строка разработчика убедитесь, что пакетный файл, который инициализирует переменные среды, обновлен для новых путей пакета SDK. Эту проблему можно избежать с помощью установщика Visual Studio для установки обновленных пакетов SDK.

### <a name="cannot-open-a-third-party-library-file"></a>Не удается открыть сторонний файл библиотеки

Существует несколько распространенных причин этой проблемы.

- Возможно, путь к файлу библиотеки неверен или вы не указали его компоновщику.

- Возможно, вы установили 32-разрядную версию библиотеки, но сборка выполняется для 64-бит или наоборот.

- Библиотека может зависеть от других библиотек, которые не установлены.

Чтобы устранить проблему с путем, убедитесь, что переменная среды LIB установлена и содержит все каталоги для используемых библиотек, для каждой создаваемой конфигурации. В интегрированной среде разработки переменная LIB задается свойством **каталоги библиотек** на [странице свойств каталоги VC + +](../../build/reference/vcpp-directories-property-page.md). Убедитесь, что в каждой создаваемой конфигурации указаны все каталоги, содержащие нужные библиотеки.

Если необходимо предоставить каталог библиотеки, переопределяющий каталог стандартной библиотеки, можно использовать параметр [/libpath](../../build/reference/libpath-additional-libpath.md) в командной строке или в интегрированной среде разработки, можно использовать свойство **Дополнительные каталоги библиотеки** в **свойствах конфигурации. > Компоновщик > общую** страницу свойств проекта.

Убедитесь, что установлены все версии библиотеки, необходимые для создаваемых конфигураций. Используйте служебную программу управления пакетами [vcpkg](../../vcpkg.md) , чтобы автоматизировать установку и настройку для многих распространенных библиотек. В этом случае лучше всего создать собственные копии библиотек сторонних производителей, чтобы обеспечить наличие всех локальных зависимостей, требуемых библиотеками, и они созданы для тех же конфигураций, что и проект.

### <a name="cannot-open-a-file-built-by-your-project"></a>Не удается открыть файл, созданный проектом

Эта ошибка может возникать, если файл *имени* файла создан решением, но еще не существует, когда компоновщик пытается получить к нему доступ. Это может произойти, когда один проект зависит от другого проекта, но проекты не строятся в правильном порядке. Чтобы устранить эту проблему, убедитесь, что ссылки проекта заданы в проекте, который использует этот файл, поэтому отсутствующий файл будет создан до того, как он потребуется. Дополнительные сведения см. в статьях [Добавление ссылок в C++ проекты Visual Studio](../../build/adding-references-in-visual-cpp-projects.md) и [Управление ссылками в проекте](/visualstudio/ide/managing-references-in-a-project).

### <a name="cannot-open-file-cprogramobj"></a>Не удается открыть файл "C\\: Program. obj"

Если вы видите эту ошибку или аналогичную ошибку, включающую непредвиденный OBJ-файл в корне диска, проблема почти наверняка является путем к библиотеке, которая не заключена в двойные кавычки.

Чтобы устранить эту проблему для сборок командной строки, проверьте параметры параметра [/libpath](../../build/reference/libpath-additional-libpath.md) , пути, указанные в переменной среды LIB, и пути, указанные в командной строке, и убедитесь, что для всех путей, содержащих пробелы, используются двойные кавычки.

Чтобы устранить эту проблему в интегрированной среде разработки, проверьте свойство **каталоги библиотек** на странице свойств [конфигурации > свойства каталогов VC + +](../../build/reference/vcpp-directories-property-page.md) , свойства **Дополнительные каталоги библиотек** в окне **Свойства конфигурации > компоновщика. > Общая** страница свойств и свойство **Дополнительные зависимости** в **свойствах конфигурации > компоновщик > входные** свойства для вашего проекта. Убедитесь, что все пути к каталогам, которые содержат нужные библиотеки, заключены в двойные кавычки при необходимости.

### <a name="other-common-issues"></a>Другие распространенные проблемы

Эта ошибка может возникать, если имя файла библиотеки или путь, указанный для компоновщика в командной строке или в директиве [#pragma Comment (lib, "library_name")](../../preprocessor/comment-c-cpp.md) , неверны или путь содержит недопустимую спецификацию диска. Проверьте правильность написания и расширение файла и убедитесь, что файл существует в указанном расположении.

Файл мог быть открыт в другой программе, и компоновщик не может вести запись в него. Антивирусные программы часто временно блокируют доступ к вновь созданным файлам. Чтобы устранить эту проблему, попробуйте исключить каталоги сборки проекта из антивирусного сканера.

Если используется параллельная сборка, Visual Studio может заблокировать файл в другом потоке. Чтобы устранить эту проблему, убедитесь, что вы не создаете один и тот же объект кода или библиотеку в нескольких проектах и используете зависимости сборки или ссылки на проекты для выбора в проекте созданных двоичных файлов.

При указании отдельных библиотек в свойстве **Дополнительные зависимости** используйте пробелы для разделения имен библиотек, а не запятых или точек с запятой. При использовании пункта меню **Правка** для открытия диалогового окна **Дополнительные зависимости** используйте символы новой строки для разделения имен, а не запятых, точек с запятой или пробелов. Также используйте символы новой строки при указании путей к библиотекам в **папках библиотек** и **дополнительных каталогах библиотек** .

Эта ошибка может появиться, когда *путь к файлу расширяется* до 260 символов. При необходимости измените имена и структуру каталогов, чтобы сократить пути к нужным файлам.

Эта ошибка может возникать из-за слишком большого размера файла. Библиотеки или объектные файлы, размер которых превышает гигабайт, может вызвать проблемы для 32-разрядного компоновщика. Возможным исправлением этой проблемы является использование 64-разрядного набора инструментов. Дополнительные сведения о том, как это сделать в командной строке, см. [в разделе как Включите в командной строке C++ ](../../build/how-to-enable-a-64-bit-visual-cpp-toolset-on-the-command-line.md)64-разрядный набор инструментов. Сведения о том, как это сделать в интегрированной среде разработки, см. в разделе [Использование MSBuild с 64-разрядным компилятором и инструментами](../../build/walkthrough-using-msbuild-to-create-a-visual-cpp-project.md#using-msbuild-to-build-your-project) и Stack overflow записи: [Как сделать так, чтобы в Visual Studio использовалась собственная цепочки инструментов AMD64](https://stackoverflow.com/questions/19820718/how-to-make-visual-studio-use-the-native-amd64-toolchain/23793055).

Эта ошибка может возникать, если у вас недостаточно разрешений для доступа к файлу *filename*. Это может произойти, если используется обычная учетная запись пользователя и попытается получить доступ к файлам библиотеки в защищенных системных каталогах или использовать файлы, скопированные с других пользователей, для которых заданы исходные разрешения. Чтобы устранить эту проблему, переместите файл в каталог проекта с возможностью записи. Если файл находится в доступном для записи каталоге, но имеет недоступные разрешения, можно использовать командную строку администратора и выполнить команду takeown. exe, чтобы стать владельцем файла.

Эта ошибка может возникать, если на диске недостаточно места. Компоновщик использует временные файлы в нескольких ситуациях. Даже если на диске достаточно места, очень большая ссылка может выпустить или фрагментировать свободное место на диске. Рассмотрите возможность использования параметра [/OPT (оптимизация)](../../build/reference/opt-optimizations.md) . выполнение транзитного исключения COMDAT считывает все объектные файлы несколько раз.

Если *имя файла* LNK*nnn*, то есть имя файла, созданного компоновщиком для временного файла, то каталог, указанный в переменной среды TMP, может не существовать, или для переменной среды TMP может быть указана более одного каталога. Для переменной среды TMP должен быть указан только один путь к каталогу.
