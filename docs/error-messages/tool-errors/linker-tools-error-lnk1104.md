---
title: Ошибка средств компоновщика LNK1104
ms.date: 05/17/2017
f1_keywords:
- LNK1104
helpviewer_keywords:
- LNK1104
ms.assetid: 9ca6f929-0efc-4055-8354-3cf5b4e636dc
ms.openlocfilehash: eadeeb7ac19e3975a37a1364502b33400018cb05
ms.sourcegitcommit: 8105b7003b89b73b4359644ff4281e1595352dda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2019
ms.locfileid: "57818275"
---
# <a name="linker-tools-error-lnk1104"></a>Ошибка средств компоновщика LNK1104

> не удается открыть файл "*filename*"

Компоновщик не удалось открыть указанный файл. Наиболее распространенных причин этой проблемы, что файл используется или заблокирован другим процессом, не существует, не удается найти в одном из каталогов, компоновщик ищет ее или не может иметь разрешение на доступ к файлу. Реже вам может быть вызвано нехваткой места на диске, возможно, файл слишком большой или возможно, слишком длинный путь к файлу.

## <a name="possible-causes-and-solutions"></a>Возможные причины и решения

Эта ошибка может возникать, когда компоновщик пытается открыть файл для чтения или для записи. Чтобы сузить возможные причины, сначала проверьте какого рода файл, это и используйте следующие разделы для поиска и устранения конкретной проблемы.

### <a name="cannot-open-your-app-or-its-pdb-file"></a>Не удается открыть в ваше приложение или его PDB-файл

Если имя файла — исполняемый файл проекта построения или связанный файл PDB, наиболее распространенной причиной является приложение уже запущено при попытке выполнить повторную сборку, или он загружается в отладчике. Чтобы устранить эту проблему, остановите программу и выгрузить его из отладчика перед повторной сборкой. Если приложение открыто в другой программе, например редактор ресурсов, закройте его. В некоторых случаях может потребоваться завершить процесс, или остановить и перезапустить Visual Studio с помощью диспетчера задач.

Антивирусные программы часто временно блокировать доступ к новым файлам, особенно .exe и .dll исполняемые файлы. Чтобы устранить эту проблему, попробуйте исключение каталогов сборки проекта из антивирусной программы.

### <a name="cannot-open-a-microsoft-library-file"></a>Не удается открыть файл библиотеки Microsoft

Если файл, который не удается открыть является одним из файлов стандартной библиотеки, предоставляемые корпорацией Майкрософт, таких как kernel32.lib, возможно, ошибка конфигурации проекта или Ошибка установки. Убедитесь, что был установлен пакет Windows SDK и если проект требует других библиотек Майкрософт, таких как MFC, убедитесь, что компоненты MFC также были установлены с помощью установщика Visual Studio. Можно запустить установщик еще раз, чтобы добавить дополнительные компоненты в любое время. Дополнительные сведения см. в разделе [изменение Visual Studio](/visualstudio/install/modify-visual-studio). Используйте вкладку отдельные компоненты в установщик для выбора определенных библиотек и пакетов SDK.

Если вы создаете проект, который был создан с помощью более старой версии Visual Studio, набор инструментов платформы и библиотеки для этой версии может отсутствовать. Если отображается сообщение об ошибке касается имени библиотеки с версиями, такие как msvcr100.lib, возможно, это причины. Чтобы устранить эту проблему, можно двумя способами: можно обновить проект для использования текущего набор инструментов платформы, установки, или можно установить старого набора инструментов и сборки проекта без изменений. Дополнительные сведения см. в разделе [обновление проектов, созданных в более ранних версий Visual C++](../../porting/upgrading-projects-from-earlier-versions-of-visual-cpp.md) и [использование собственного многоплатформенного нацеливания в Visual Studio для сборки старых проектов](../../porting/use-native-multi-targeting.md).

Если вы видите эту ошибку при выполнении сборки для новой целевой платформы или конфигурации, могут не установлены библиотеки для этого набора инструментов проекта конфигурации или платформы. Убедитесь, что **набор инструментов платформы** и **версия пакета SDK для Windows** указано в [странице общих свойств](../../build/reference/general-property-page-project.md) проекта устанавливаются и убедитесь, что необходимая библиотеки можно найти в **каталоги библиотек** указано в [страница свойств каталогов VC ++](../../build/reference/vcpp-directories-property-page.md) набора параметров. Существуют отдельные настройки для отладки и конфигураций розничной торговли, а также 32-разрядных и 64-разрядные конфигурации, поэтому если один эта сборка работает, но другой вызывает ошибку, убедитесь, что параметры указаны правильно, и необходимые средства и библиотеки устанавливаются для каждого конфигурации, которые вы создаете.

Если вы используете Visual Studio IDE для сборки проекта, который был скопирован с другого компьютера, место установки для библиотеки могут отличаться. Проверьте **каталоги библиотек** свойство [страница свойств каталогов VC ++](../../build/reference/vcpp-directories-property-page.md) для проекта и при необходимости обновите его. Для просмотра и редактирования текущих путей к библиотеке, в интегрированной среде разработки, выберите элемент управления раскрывающегося списка для **каталоги библиотек** свойство и выберите **изменить**. **Вычисляется значение** раздел **каталоги библиотек** диалоговом окне отображается список текущих путей, для поиска файлов библиотеки.

Эта ошибка может возникнуть, если путь к пакету Windows SDK устарела. Если вы установили версию пакета SDK Windows, который новее, чем версия Visual Studio, убедитесь, что в расположениях, указанных в [страница свойств каталогов VC ++](../../build/reference/vcpp-directories-property-page.md) обновляются в соответствии с новым пакетом SDK. При использовании командной строки разработчика, убедитесь, что пакетный файл, который инициализирует переменные среды обновляется для нового пакета SDK для путей. Этой проблемы можно избежать с помощью установщика Visual Studio, чтобы установить обновленные пакеты SDK.

### <a name="cannot-open-a-third-party-library-file"></a>Не удается открыть файл сторонние библиотеки

Существует несколько распространенных причин этой проблемы:

- Путь к файлу библиотеки может быть неправильным, либо не указан его компоновщику.

- Вы установили 32-разрядной версии библиотеки, но при построении для 64-бит, или наоборот.

- Библиотеки могут иметь зависимости от других библиотек, которые не установлены.

Чтобы устранить проблему с пути, убедитесь, что переменной среды LIB устанавливается и содержит все каталоги для библиотек, которые вы используете, для каждого конфигурации, которые вы создаете. В Интегрированной среде разработки переменная LIB устанавливается **каталоги библиотек** свойство [страница свойств каталогов VC ++](../../build/reference/vcpp-directories-property-page.md). Убедитесь, что для каждой конфигурации, создаваемые здесь отображаются все каталоги, содержащие необходимые библиотеки.

Если вам нужно указать каталог библиотеки, переопределяющий directory стандартной библиотеки, можно использовать [/LIBPATH](../../build/reference/libpath-additional-libpath.md) параметр в командной строке или в интегрированной среде разработки, можно использовать **Дополнительные каталоги библиотек** свойство в **свойства конфигурации > компоновщик > Общие** страницу свойств проекта.

Убедитесь, что вы установили каждой версии библиотеки, необходимые для конфигураций, которые вы создаете. Рассмотрите возможность использования [vcpkg](../../vcpkg.md) пакет управления для автоматизации установки и настройки для многих общих библиотек. По возможности лучше создавать собственные копии сторонних библиотек, чтобы Вы действительно хотите иметь локальные зависимости, из-за того, они создаются для одной конфигурации проекта, и эти библиотеки занимают.

### <a name="cannot-open-a-file-built-by-your-project"></a>Не удается открыть файл, созданный вашим проектом

Эта ошибка может возникать, если файл *filename* собранном решении, но еще не существует когда компоновщик пытается получить доступ к нему. Это может произойти, если один проект зависит от другого проекта, но не проекты построены в правильном порядке. Чтобы устранить эту проблему, убедитесь, что ссылки проекта задаются в проекте, который использует файл, поэтому отсутствующий файл является встроенной, прежде чем это требуется. Дополнительные сведения см. в разделе [Добавление ссылок в проектах Visual C++](../../build/adding-references-in-visual-cpp-projects.md) и [управление ссылками в проекте](/visualstudio/ide/managing-references-in-a-project).

### <a name="cannot-open-file-cprogramobj"></a>Не удается открыть файл "C:\\Program.obj"

Если вы видите эту ошибку, или такая же ошибка, включающих Непредвиденная OBJ-файл в корневом каталоге диска, проблема заключается в почти наверняка путь к библиотеке, которая не заключены в двойные кавычки.

Чтобы устранить эту проблему, для построения из командной строки, установите флажок [/LIBPATH](../../build/reference/libpath-additional-libpath.md) параметр параметров, указанных в переменной среды LIB путей и пути, указанные в командной строке и обязательно использовать двойные кавычки вокруг всех путей содержащие пробелы.

Чтобы устранить эту проблему в интегрированной среде разработки, установите флажок **каталоги библиотек** свойство [свойства конфигурации > каталоги VC ++](../../build/reference/vcpp-directories-property-page.md) страницу свойств **Дополнительные каталоги библиотек** свойство в **свойства конфигурации > компоновщик > Общие** страницу свойств и **Дополнительные зависимости** свойство в **конфигурации Свойства > компоновщика > ввода** страницу свойств проекта. Убедитесь, что все пути, содержащие необходимые библиотеки заключены в двойные кавычки, при необходимости.

### <a name="other-common-issues"></a>Другие распространенные проблемы

Эта ошибка может возникать, когда имя файла библиотеки или путь к компоновщику в командной строке или в [#pragma comment (lib, «library_name»)](../../preprocessor/comment-c-cpp.md) директива является неправильным, или путь имеет спецификацию недопустимый диск. Проверьте правописание и расширение файла и убедитесь, что файл существует в указанном расположении.

Файл мог быть открыт в другой программе, и компоновщик не может вести запись в него. Антивирусные программы часто временно заблокировать доступ к новым файлам. Чтобы устранить эту проблему, попробуйте исключение каталогов сборки проекта из антивирусной программы.

Если вы используете параметр параллельной сборки, это возможно, что Visual Studio заблокировал файл в другом потоке. Чтобы устранить эту проблему, убедитесь, что не проходят сборку тот же объект кода или библиотеки в несколько проектов и использовать зависимостей построения или ссылки проекта для выбора сборки двоичных файлов в проекте.

При указании индивидуальных библиотеках в **Дополнительные зависимости** свойства напрямую, используйте пробелы для разделения имен библиотек, не запятые или точки с запятой. Если вы используете **изменить** элемент меню, чтобы открыть **Дополнительные зависимости** диалоговое окно, используйте символы новой строки для разделения имен, не запятые, точки с запятой или пробелы. Также используйте символы новой строки, при указании путей к библиотеке в **каталоги библиотек** и **Дополнительные каталоги библиотек** диалоговым окнам.

Эта ошибка может возникать при путь *filename* при развертывании более 260 символов. Изменить имена или изменить структуру каталогов, при необходимости для сокращения путей к необходимым файлам.

Эта ошибка может возникать из-за слишком большого файла. Библиотеки или объекта файлов больше, чем гигабайта размер может вызвать проблемы для 32-разрядным компоновщиком. Возможные варианты исправления этой проблемы является использование 64-разрядного набора инструментов. Дополнительные сведения о том, как это сделать в командной строке см. в разделе [как: Включить 64-разрядных набора инструментов Visual C++ в командной строке](../../build/how-to-enable-a-64-bit-visual-cpp-toolset-on-the-command-line.md). Сведения о том, как это сделать в интегрированной среде разработки, см. в разделе [использование MSBuild с 64-разрядных компилятора и инструментов](../../build/walkthrough-using-msbuild-to-create-a-visual-cpp-project.md#using-msbuild-to-build-your-project) и блога Stack Overflow: [Как сделать Visual Studio использовать цепочки инструментов машинного amd64](http://stackoverflow.com/questions/19820718/how-to-make-visual-studio-use-the-native-amd64-toolchain/23793055).

Эта ошибка может возникать при наличии файла недостаточно разрешений для доступа к *filename*. Это может произойти, если вы используете учетную запись обычного пользователя и попытка получить доступ к файлам библиотеки в защищенные системные каталоги, или файлов, скопированных из другие пользователи, обладающие их первоначальные разрешения значение. Чтобы устранить эту проблему, переместите файл в каталог для записи проекта. Если файл находится в каталоге, для записи, но имеет разрешения недоступным, можно использовать командную строку администратора и выполните команду takeown.exe, чтобы стать владельцем файла.

Эта ошибка может возникать, если у вас нет места на диске. Компоновщик использует временные файлы в нескольких ситуациях. Даже если у вас есть достаточно места на диске, масштабная компоновка может поглотить всю или фрагментом доступное место на диске. Рассмотрите возможность использования [/OPT (оптимизации)](../../build/reference/opt-optimizations.md) параметр; это транзитивное COMDAT исключения чтения всех объектных файлов несколько раз.

Если *filename* называется LNK*nnn*, это имя файла, сформирован компоновщиком временным файлам, каталог, указанный в переменной среды TMP не существует или может быть задано несколько каталогов указанное для переменной среды TMP. Только один путь к каталогу должен быть назначен для переменной среды TMP.
