---
title: Предупреждение средств компоновщика LNK4049
ms.date: 04/15/2019
f1_keywords:
- LNK4049
helpviewer_keywords:
- LNK4049
ms.assetid: 5fd5fb24-c860-4149-a557-0ac26a65d97c
ms.openlocfilehash: b527d15310dba70c1bae21e601db17db2900e219
ms.sourcegitcommit: 72583d30170d6ef29ea5c6848dc00169f2c909aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59674257"
---
# <a name="linker-tools-warning-lnk4049"></a>Предупреждение средств компоновщика LNK4049

> символ "*символ*«определен в»*filename.obj*" импортируется

[__declspec(dllimport)](../../cpp/dllexport-dllimport.md) был указан для *символ* несмотря на то, что этот символ определен в объектном файле *filename.obj* в одном образе. Удалить `__declspec(dllimport)` модификатор, чтобы устранить это предупреждение.

## <a name="remarks"></a>Примечания

Это предупреждение создается компоновщиком при определении символа в файле одного объекта и сослаться на него с помощью `__declspec(dllimport)` модификатора объявления в другом.

Предупреждение LNK4049 является более Общая версия [Предупреждение средств компоновщика LNK4217](linker-tools-warning-lnk4217.md). Компоновщик создает предупреждение LNK4049, когда он не может определить, какие функции или объекта ссылки на файл импортируемого символа.

Распространенные примеры LNK4049 выводится вместо LNK4217 являются:

- При использовании [/INCREMENTAL](../../build/reference/incremental-link-incrementally.md) параметр.

- При использовании [/LTCG](../../build/reference/ltcg-link-time-code-generation.md) параметр.

Для устранения LNK4049, воспользуйтесь одним из следующих процедур:

- Удалить `__declspec(dllimport)` модификатор из опережающего объявления символа, который инициировал LNK4049. Можно поиск символов в двоичный образ с помощью **DUMPBIN** служебной программы. **DUMPBIN/Symbols** отображает таблицей символов COFF изображения. Дополнительные сведения о **DUMPBIN** служебной программы, см. в разделе [Справочник DUMPBIN](../../build/reference/dumpbin-reference.md).

- Временное отключение инкрементная компоновка и оптимизации всей программы. При перекомпиляции, приложение выдает предупреждение LNK4217, включающее имя функции, которая ссылается на импортированный символ. Удалить `__declspec(dllimport)` модификатора объявления из импортируемого символа и повторно включить инкрементную компоновку или оптимизации всей программы при необходимости.

Несмотря на то, что последний созданный код работает правильно, код, созданный для вызова импортированной функции является менее эффективным, чем непосредственный вызов функции. Это предупреждение не отображается при компиляции с помощью [/CLR](../../build/reference/clr-common-language-runtime-compilation.md) параметр.

Дополнительные сведения о импорта и экспорта данных объявления, см. в разделе [dllexport, dllimport](../../cpp/dllexport-dllimport.md).

## <a name="example"></a>Пример

Компоновка следующих двух модулей будет предупреждение LNK4049. Первый модуль создает объектный файл, содержащий одну экспортированную функцию.

```cpp
// LNK4049a.cpp
// compile with: /c

__declspec(dllexport) int func()
{
   return 3;
}
```

Второй модуль создает объектный файл, содержащий опережающее объявление для функции, экспортированной в первый модуль, а также вызов данной функции в `main` функции. Компоновка этого модуля с первый модуль создаст LNK4049. Удалить `__declspec(dllimport)` модификатор из объявления, чтобы устранить это предупреждение.

```cpp
// LNK4049b.cpp
// compile with: /link /WX /LTCG LNK4049a.obj
// LNK4049 expected

__declspec(dllimport) int func();
// try the following line instead
// int func();

int main()
{
   return func();
}
```

## <a name="see-also"></a>См. также

[Предупреждение средств компоновщика LNK4217](linker-tools-warning-lnk4217.md) \
[Предупреждение LNK4286 средств компоновщика](linker-tools-warning-lnk4286.md) \
[dllexport, dllimport](../../cpp/dllexport-dllimport.md)