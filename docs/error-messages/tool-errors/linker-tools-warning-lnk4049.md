---
title: Предупреждение средств компоновщика LNK4049
ms.date: 11/04/2016
f1_keywords:
- LNK4049
helpviewer_keywords:
- LNK4049
ms.assetid: 5fd5fb24-c860-4149-a557-0ac26a65d97c
ms.openlocfilehash: ed17a6014ddf420256848c87a90a37f190a0663e
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50429085"
---
# <a name="linker-tools-warning-lnk4049"></a>Предупреждение средств компоновщика LNK4049

локально определенный символ «символ» импортирован

Символ был и экспортировать из импортирован в программу.

Это предупреждение создается компоновщиком при объявлении символа с помощью `__declspec(dllexport)` класс хранения атрибута в один объект файла и ссылаться на него с помощью `__declspec(dllimport)` атрибут в другом.

Предупреждение LNK4049 является более Общая версия [Предупреждение средств компоновщика LNK4217](../../error-messages/tool-errors/linker-tools-warning-lnk4217.md). Компоновщик создает LNK4049 предупреждение, когда не удается определить, из которого функция была ссылка на импортированный символ.

Распространенные примеры LNK4049 выводится вместо LNK4217 являются:

- Выполнение инкрементную компоновку с помощью [/INCREMENTAL](../../build/reference/incremental-link-incrementally.md) параметр.

- Выполнение оптимизации всей программы с использованием [/LTCG](../../build/reference/ltcg-link-time-code-generation.md) параметр.

Для устранения LNK4049, воспользуйтесь одним из следующих:

- Удалить `__declspec(dllimport)` объявление из опережающего объявления символа, что активировало LNK4049 имени. Можно поиск символов в двоичный образ с помощью **DUMPBIN** служебной программы. **DUMPBIN/СИМВОЛАМ** отображает таблицей символов COFF изображения. Дополнительные сведения о **DUMPBIN** служебной программы, см. в разделе [Справочник DUMPBIN](../../build/reference/dumpbin-reference.md).

- Временное отключение инкрементная компоновка и оптимизации всей программы. Повторной компиляции приложения создаст Предупреждение LNK4217, которая будет включать имя функции, из которого была ссылка на импортированный символ. Удалить `__declspec(dllimport)` объявление из импортируемого символа и Включить инкрементную компоновку или оптимизации всей программы при необходимости.

Несмотря на то, что последний созданный код будет работать корректно, код, созданный для вызова импортированной функции менее эффективны, чем непосредственный вызов функции. Это предупреждение не будет отображаться при компиляции с помощью параметра [/CLR](../../build/reference/clr-common-language-runtime-compilation.md).

Дополнительные сведения о импорта и экспорта данных объявления, см. в разделе [dllexport, dllimport](../../cpp/dllexport-dllimport.md).

## <a name="example"></a>Пример

Компоновка следующих двух модулей будет предупреждение LNK4049. Первый модуль создает объектный файл, содержащий одну экспортированную функцию.

```
// LNK4049a.cpp
// compile with: /c

__declspec(dllexport) int func()
{
   return 3;
}
```

## <a name="example"></a>Пример

Второй модуль создает объектный файл, содержащий опережающее объявление для функции, экспортированной в первый модуль, а также вызов данной функции в `main` функции. Компоновка этого модуля с первый модуль создаст LNK4049. Удаление `__declspec(dllimport)` объявление будет устранить это предупреждение.

```
// LNK4049b.cpp
// compile with: /link /WX /LTCG LNK4049a.obj
// LNK4049 expected

__declspec(dllimport) int func();
// try the following line instead
// int func();

int main()
{
   return func();
}
```

## <a name="see-also"></a>См. также

[Предупреждение средств компоновщика LNK4217](../../error-messages/tool-errors/linker-tools-warning-lnk4217.md)<br/>
[dllexport, dllimport](../../cpp/dllexport-dllimport.md)