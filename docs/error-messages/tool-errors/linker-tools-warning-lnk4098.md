---
title: Предупреждение средств компоновщика LNK4098
ms.date: 03/26/2019
f1_keywords:
- LNK4098
helpviewer_keywords:
- LNK4098
ms.assetid: 1f1b1408-1316-4e34-80f5-6a02f2db0ac1
ms.openlocfilehash: 66cf1a1bc75405ffc9bae8158bfc8682776a8228
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62408099"
---
# <a name="linker-tools-warning-lnk4098"></a>Предупреждение средств компоновщика LNK4098

> DEFAULTLIB "*библиотеки*" противоречит использованию других библиотек; используйте параметр/NODEFAULTLIB:*библиотеки*

Вы пытаетесь подключить несовместимые библиотеки.

> [!NOTE]
> Библиотеки времени выполнения теперь содержат директивы для предотвращения смешать различные типы. Вы получите это предупреждение, если вы попытаетесь использовать разные типы или отладке и неотладочные версии библиотеки времени выполнения в одной программе. Например, если компиляция выполнялась один файл для использования одного вида библиотеки времени выполнения и другой файл для использования другого типа (например, отладки и для розничной торговли) либо пытался скомпоновать их, вы сможете получать это предупреждение. Следует компилировать все исходные файлы для использования той же библиотеке времени выполнения. Дополнительные сведения см. в разделе [/MD, / MT, /LD (использование библиотеки времени выполнения)](../../build/reference/md-mt-ld-use-run-time-library.md) параметры компилятора.

Можно использовать компоновщика [/verbose: LIB](../../build/reference/verbose-print-progress-messages.md) коммутатора, чтобы узнать, какие библиотеки, компоновщик ищет ее. Например если исполняемый файл используется несколькими потоками, не предназначенных для отладки библиотеки времени выполнения, список должен включать LIBCMT.lib и не LIBCMTD.lib, MSVCRT.lib или библиотеки MSVCRTD.lib. Можно указать компоновщику игнорировать некорректные библиотеки времени выполнения с помощью [/NODEFAULTLIB](../../build/reference/nodefaultlib-ignore-libraries.md) для каждой библиотеки, которую следует игнорировать.

В следующей таблице показано, какие библиотеки должны игнорироваться в зависимости от того, какие библиотеки времени выполнения, вы хотите использовать. В командной строке, используйте один **/NODEFAULTLIB** параметр для каждой библиотеки игнорировать. В Visual Studio IDE, разделите их точкой с запятой в игнорируемых библиотек **игнорировать определенные стандартные библиотеки** свойство.

| Чтобы использовать эту библиотеку времени выполнения | Игнорировать эти библиотеки |
|-----------------------------------|----------------------------|
| Многопоточный (libcmt.lib) | msvcrt.lib; libcmtd.lib; msvcrtd.lib |
| Многопоточные с использованием библиотеки DLL (msvcrt.lib) | libcmt.lib; libcmtd.lib; msvcrtd.lib |
| Отладка многопоточных (libcmtd.lib) | libcmt.lib; msvcrt.lib; msvcrtd.lib |
| Отладочные многопоточные с использованием библиотеки DLL (msvcrtd.lib) | libcmt.lib; msvcrt.lib; libcmtd.lib |

Например если получено это предупреждение, и вы хотите создать исполняемый файл, использующий версию библиотеки DLL без отладки библиотеки времени выполнения, вы сможете использовать следующие параметры компоновщика:

```cmd
/NODEFAULTLIB:libcmt.lib NODEFAULTLIB:libcmtd.lib /NODEFAULTLIB:msvcrtd.lib
```