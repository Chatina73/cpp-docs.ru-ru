---
title: Предупреждение средств компоновщика LNK4098
description: Описывает, как несовместимые библиотеки вызывают средства компоновщика LNK4098 и как использовать параметр/NODEFAULTLIB для их исправления.
ms.date: 12/02/2019
f1_keywords:
- LNK4098
helpviewer_keywords:
- LNK4098
ms.assetid: 1f1b1408-1316-4e34-80f5-6a02f2db0ac1
ms.openlocfilehash: 9d0c7da0614651a98d5ed4f3bd3676c7d837ce67
ms.sourcegitcommit: d0504e2337bb671e78ec6dd1c7b05d89e7adf6a7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74682945"
---
# <a name="linker-tools-warning-lnk4098"></a>Предупреждение средств компоновщика LNK4098

> DEFAULTLIB "*Library*" конфликтует с использованием других библиотек; Использование/NODEFAULTLIB:*Library*

Выполняется связывание с несовместимыми библиотеками.

> [!NOTE]
> Библиотеки времени выполнения теперь содержат директивы для предотвращения смешивания разных типов. Это предупреждение появляется при попытке использовать различные типы или отладочные и неотладочные версии библиотеки времени выполнения в одной программе. Например, если один файл был скомпилирован для использования одной разновидности библиотеки времени выполнения, а другой файл — для использования другого типа (например, отладка и розничная торговля) и предпринята попытка связать их, это предупреждение будет выдано. Для использования одной библиотеки времени выполнения следует компилировать все исходные файлы. Дополнительные сведения см. в разделе Параметры компилятора [/MD,/MT,/LD (использование библиотеки времени выполнения)](../../build/reference/md-mt-ld-use-run-time-library.md) .

Вы можете использовать параметр компоновщика [/verbose: lib](../../build/reference/verbose-print-progress-messages.md) , чтобы узнать, какие библиотеки ищет компоновщик. Например, если исполняемый файл использует многопоточные неотладочные библиотеки времени выполнения, список отчетов должен включать LIBCMT. lib, а не LIBCMTD. lib, MSVCRT. lib или MSVCRTD. lib. Можно указать компоновщику игнорировать неправильные библиотеки времени выполнения, используя параметр [/NODEFAULTLIB](../../build/reference/nodefaultlib-ignore-libraries.md) для каждой библиотеки, которую нужно игнорировать.

В таблице ниже показано, какие библиотеки следует игнорировать в зависимости от используемой библиотеки времени выполнения. В командной строке используйте один параметр **/NODEFAULTLIB** для всех игнорируемых библиотек. В интегрированной среде разработки Visual Studio разделите библиотеки на игнорируемые точками с запятой в свойстве **игнорировать конкретные библиотеки по умолчанию** .

| Использование библиотеки времени выполнения | Игнорировать эти библиотеки |
|-----------------------------------|----------------------------|
| Многопоточная (LIBCMT. lib) | msvcrt. lib; LIBCMTD. lib; MSVCRTD. lib |
| Многопоточная с использованием библиотеки DLL (msvcrt. lib) | LIBCMT. lib; LIBCMTD. lib; MSVCRTD. lib |
| Отладка многопоточных (LIBCMTD. lib) | LIBCMT. lib; msvcrt. lib; MSVCRTD. lib |
| Отладка многопоточного использования с помощью библиотеки DLL (MSVCRTD. lib) | LIBCMT. lib; msvcrt. lib; LIBCMTD. lib |

Например, если вы получили это предупреждение и хотите создать исполняемый файл, который использует неотладочную версию библиотек времени выполнения, можно использовать следующие параметры со компоновщиком:

```cmd
/NODEFAULTLIB:libcmt.lib /NODEFAULTLIB:libcmtd.lib /NODEFAULTLIB:msvcrtd.lib
```
