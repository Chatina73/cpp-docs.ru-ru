---
description: 'Дополнительные сведения: предупреждение компилятора (уровень 4) C4121'
title: Предупреждение компилятора (уровень 4) C4121
ms.date: 11/04/2016
f1_keywords:
- C4121
helpviewer_keywords:
- C4121
ms.assetid: 8c5b85c9-2543-426b-88bc-319c50158c7e
ms.openlocfilehash: 7639bb6f5905fd1fdb782770feccf03b69d594b4
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97261961"
---
# <a name="compiler-warning-level-4-c4121"></a>Предупреждение компилятора (уровень 4) C4121

"символ" : выравнивание члена чувствительно к упаковке

Компилятор добавил заполнение для выравнивания члена структуры по границе упаковки, но упаковочный размер меньше размера члена. Например, следующий фрагмент код приводит к появлению предупреждения C4121:

```cpp
// C4121.cpp
// compile with: /W4 /c
#pragma pack(2)
struct s
{
   char a;
   int b; // C4121
   long long c;
};
```

Чтобы устранить эту проблему, внесите одно из следующих изменений.

- Задайте для упаковочного размера значение, большее или равное размеру члена, который вызвал предупреждение. Например, в этом фрагменте кода измените `pack(2)` на `pack(4)` или `pack(8)`.

- Измените порядок объявления членов в соответствии с их размером, в порядке убывания. В фрагменте кода измените порядок элементов структуры таким, чтобы **`long long`** элемент предшествовал **`int`** , а **`int`** перед элементом **`char`** .

Это предупреждение возникает только в случае, когда компилятор добавляет заполнение перед членами данных. Оно не возникает, если при упаковке данные были помещены в расположение в памяти, не выровненное для этого типа данных, но при этом заполнение перед членом данных не добавлялось. Если данные не выровнены по границе, кратной размеру данных, возможно снижение производительности. При чтении и записи невыровненных данных на процессорах с некоторым архитектурами возникают ошибки, на устранение которых может потребоваться на 2–3 порядка больше времени. Доступ к невыровненным данным невозможно перенести на некоторые архитектуры RISC.

Для указания выравнивания структуры можно использовать [#pragma pack](../../preprocessor/pack.md) или [/Zp](../../build/reference/zp-struct-member-alignment.md) . (При указании **/Zp1** компилятор не создает это предупреждение.)
