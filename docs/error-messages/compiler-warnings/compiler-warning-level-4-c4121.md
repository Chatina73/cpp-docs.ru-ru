---
title: Предупреждение компилятора (уровень 4) C4121
ms.date: 11/04/2016
f1_keywords:
- C4121
helpviewer_keywords:
- C4121
ms.assetid: 8c5b85c9-2543-426b-88bc-319c50158c7e
ms.openlocfilehash: bafa16cbad2cb0a2475cae5a98c608096e296442
ms.sourcegitcommit: 3ee06ec53153cf21910fc8cfef78a4f25f9633f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2019
ms.locfileid: "74541618"
---
# <a name="compiler-warning-level-4-c4121"></a>Предупреждение компилятора (уровень 4) C4121

"символ" : выравнивание члена чувствительно к упаковке

Компилятор добавил заполнение для выравнивания члена структуры по границе упаковки, но упаковочный размер меньше размера члена. Например, следующий фрагмент код приводит к появлению предупреждения C4121:

```cpp
// C4121.cpp
// compile with: /W4 /c
#pragma pack(2)
struct s
{
   char a;
   int b; // C4121
   long long c;
};
```

Чтобы устранить эту проблему, внесите одно из следующих изменений.

- Задайте для упаковочного размера значение, большее или равное размеру члена, который вызвал предупреждение. Например, в этом фрагменте кода измените `pack(2)` на `pack(4)` или `pack(8)`.

- Измените порядок объявления членов в соответствии с их размером, в порядке убывания. В этом фрагменте кода расположите члены структуры так, чтобы член `long long` предшествовал члену `int`, а член `int` предшествовал члену `char`.

Это предупреждение возникает только в случае, когда компилятор добавляет заполнение перед членами данных. Оно не возникает, если при упаковке данные были помещены в расположение в памяти, не выровненное для этого типа данных, но при этом заполнение перед членом данных не добавлялось. Если данные не выровнены по границе, кратной размеру данных, возможно снижение производительности. При чтении и записи невыровненных данных на процессорах с некоторым архитектурами возникают ошибки, на устранение которых может потребоваться на 2–3 порядка больше времени. Доступ к невыровненным данным невозможно перенести на некоторые архитектуры RISC.

Для указания выравнивания структуры можно использовать [#pragma pack](../../preprocessor/pack.md) или [/Zp](../../build/reference/zp-struct-member-alignment.md) . (При указании **/Zp1** компилятор не создает это предупреждение.)