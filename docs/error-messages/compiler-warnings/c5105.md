---
title: Предупреждение компилятора C5105
description: Предупреждение компилятора C5105 описание и решение.
ms.date: 09/22/2019
helpviewer_keywords:
- C5105
ms.openlocfilehash: 8e3744faebea389eb7b249ae832e62489e200c3c
ms.sourcegitcommit: 389c559918d9bfaf303d262ee5430d787a662e92
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2019
ms.locfileid: "71241135"
---
# <a name="compiler-warning-level-1-c5105"></a>Предупреждение компилятора (уровень 1) C5105

> расширение макроса, создающее "defined", имеет неопределенное поведение

## <a name="remarks"></a>Примечания

Препроцессор обнаружил `defined` оператор в выходных данных расширения макроса. `defined` Если оператор отображается в результате расширения макроса, стандарт C задает поведение как неопределенное. Предупреждение C5105 — это предупреждение о соответствии стандартам переносимости и стандартов, выдаваемое из-за того, что другие совместимые компиляторы могут иметь различное поведение. Чтобы устранить эту проблему, переместите `defined` оператор из макроса или отключите предупреждение C5105.

Поведение, характерное для Майкрософт: Компилятор компилятором MSVC вычисляет `defined` оператор в обычном режиме даже в разделе `/permissive-`.

Это предупреждение является новым в Visual Studio 2017 версии 15,8. Он создается только новым стандартным препроцессором, который определяется `/experimental:preprocessor` параметром компилятора.

### <a name="to-turn-off-the-warning-without-code-changes"></a>Отключение предупреждения без изменения кода

Предупреждение для определенной строки кода можно отключить с помощью директивы pragma [warning](../../preprocessor/warning.md) , `#pragma warning(suppress : 5105)`. Вы также можете отключить предупреждение в файле с помощью директивы pragma warning, `#pragma warning(disable : 5105)`. Предупреждение можно отключить глобально в сборках командной строки с помощью параметра командной строки **/wd5105** .

Чтобы отключить предупреждение для всего проекта в интегрированной среде разработки Visual Studio, сделайте следующее:

1. Откройте диалоговое окно **страницы свойств** для проекта. Сведения об использовании диалогового окна страницы свойств см. в разделе [страницы свойств](../../build/reference/property-pages-visual-cpp.md).
1. Выберите страницу **Свойства** > конфигурации**C/C++**  > **Дополнительно** .
1. Измените свойство **Отключить определенные предупреждения** , чтобы добавить `5105`. Нажмите кнопку **ОК** , чтобы применить изменения.

## <a name="example"></a>Пример

В этом образце программы показано, как создать предупреждение C5105 и как исправить его.

```cpp
// C5105.cpp
// To demonstrate the warning,
// compile by using: cl /EHsc /experimental:preprocessor /DTEST C5105.cpp
// To fix the warning, change the DEFINED_TEST
// definition to the commented version.

#include <iostream>

#define DEFINED_TEST defined TEST
//#if defined TEST
//#define DEFINED_TEST 1
//#else
//#define DEFINED_TEST 0
//#endif

int main()
{
#if DEFINED_TEST  // C5105
    std::cout << "TEST defined\n";
#else
    std::cout << "TEST not defined\n";
#endif
}
```
