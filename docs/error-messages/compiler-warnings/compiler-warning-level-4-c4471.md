---
title: Компилятор предупреждение (уровень 4) C4471
ms.date: 04/24/2017
f1_keywords:
- C4471
helpviewer_keywords:
- C4471
ms.assetid: ccfd8bd5-bc1b-4be7-a6ea-0e3a7add6607
ms.openlocfilehash: 0345b730b8fc37329f632bb5d8486c67efd8e3b8
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62400790"
---
# <a name="compiler-warning-level-4-c4471"></a>Компилятор предупреждение (уровень 4) C4471

"*перечисления*": у прямого объявления неограниченного перечисления должен иметь базовый тип (предполагается int)

У прямого объявления неограниченного перечисления обнаружен без спецификатор для базового типа. По умолчанию Visual C++ предполагает `int` является базовым типом для перечисления. Это может вызвать проблемы, если другой тип используется в определении перечисления, например, если указан другой явный тип, или другой тип неявно задал инициализатор. Может также вызывать проблемы переносимости; Не рассчитывайте на другие компиляторы `int` является базовым типом перечисления.

Это предупреждение отключено по умолчанию. Вы можете использовать/Wall или /w*N*4471 для включения его в командной строке, или используйте директиву #pragma [предупреждение](../../preprocessor/warning.md) в файле исходного кода.

В некоторых случаях это предупреждение является случайной. Опережающее объявление перечисления в открывшемся после определения могут срабатывать данное предупреждение. Например этот код является допустимым, несмотря на то, что может привести к C4471:

```cpp
// C4471a.cpp
// Compile with: cl /c /w14471 C4471a.cpp
enum Example { item = 0x80000000UL };
enum Example;    // Spurious C4471
// ...
```

## <a name="example"></a>Пример

Как правило это безопасно использовать полное определение для вместо прямого объявления неограниченного перечисления. Можно поместить определение в файле заголовка и включить его в исходные файлы, ссылающиеся на него. Эта процедура работает код, написанный для C ++ 98 и более поздних версий. Мы рекомендуем использовать это решение для обеспечения переносимости и простотой обслуживания.

```cpp
// C4471b.cpp
// Compile with: cl /c /w14471 C4471b.cpp
enum Example;    // C4471
// To fix, replace the line above with the enumeration definition:
// enum Example { item = 0x80000000UL };
// ...
```

## <a name="example"></a>Пример

В C ++ 11 можно добавить явный тип для неограниченное перечисление и его опережающего объявления. Это решение рекомендуется только в том случае, если логика включения complex-заголовок предотвращает использование вместо опережающего объявления определения. Это решение может привести к задачу обслуживания: Если изменить базовый тип, используемый для определения перечисления, необходимо также изменить все опережающие объявления для сопоставления или имеется автоматическая ошибки в коде. Опережающее объявление можно поместить в файл заголовка, чтобы свести к минимуму эту проблему.

```cpp
// C4471c.cpp
// Client code for enumeration defined in C4471d.cpp
// Compile with: cl /c /w14471 C4471c.cpp C4471d.cpp
enum Example;    // C4471, int assumed
// To fix, replace the lines above with the forward declarations:
// enum Example : unsigned;
// ...
```

```cpp
// C4471d.cpp
// Definition for enumeration used in C4471c.cpp
// Compile with: cl /c /w14471 C4471c.cpp C4471d.cpp
enum Example : unsigned { item = 0x80000000 }; // explicit type
// ...
```

Если указать явный тип для перечисления, рекомендуется также включить предупреждение [C4369](compiler-warning-level-1-C4369.md), включенном по умолчанию. Это определяется случаев, где элементу перечисления необходимо присвоить тип, отличный от явно указанного типа.

## <a name="example"></a>Пример

Можно изменить код, чтобы использовать перечисление с ограниченной областью, что новые возможности C ++ 11. Использовать перечисление с ограниченной областью необходимо изменить определение и код клиента, использующий тип перечисления. Мы рекомендуем использовать перечисление с ограниченной областью при возникновении проблем с загрязнением пространства имен, как имена элементов определенное перечисление ограничены в область действия перечисления. Другой особенностью перечисление с ограниченной областью является то, что его члены нельзя неявно преобразовать в другой целочисленный тип или перечисление, который может быть источником незначительные ошибки.

```cpp
// C4471e.cpp
// Client code for scoped enumeration defined in C4471f.cpp
// Compile with: cl /c /w14471 C4471e.cpp C4471f.cpp
enum Example;    // C4471
// To fix, replace the line above with the forward declaration:
// enum class Example;
// ...
```

```cpp
// C4471f.cpp
// Definition for scoped enumeration used in C4471e.cpp
// Compile with: cl /c /w14471 C4471e.cpp C4471f.cpp
enum class Example { item = 0 };
// ...
```

