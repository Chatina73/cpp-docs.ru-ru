---
title: Предупреждение компилятора (уровень 1) C4838
ms.date: 11/04/2016
f1_keywords:
- C4838
helpviewer_keywords:
- C4838
ms.assetid: fea07924-5feb-4ed4-99b5-1a8c41d28db6
ms.openlocfilehash: c3ddc861e5da271903372eac1ef1e8f6916e06df
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80199372"
---
# <a name="compiler-warning-level-1-c4838"></a>Предупреждение компилятора (уровень 1) C4838

для преобразования из "type_1" в "type_2" требуется понижающие преобразования

При использовании инициализации агрегата или списка обнаружено неявное понижающие преобразование.

Язык C позволяет неявным сужающим преобразованиям в назначениях и инициализации и C++ соответствует масти, несмотря на то, что непредвиденное сокращение является причиной многих ошибок в коде. Для повышения безопасности кода в C++ стандарте требуется диагностическое сообщение, когда в списке инициализации происходит сужение преобразования. В визуальном C++элементе диагностика является [ошибкой компилятора C2397](../../error-messages/compiler-errors-1/compiler-error-c2397.md) при использовании синтаксиса унифицированной инициализации, поддерживаемого начиная с Visual Studio 2015. Компилятор создает предупреждение C4838 при использовании синтаксиса List или агрегатной инициализации, поддерживаемой Visual Studio 2013.

Сужение преобразования может быть допустимо, если известно, что допустимый диапазон преобразованных значений может помещаться в целевом объекте. В этом случае вы узнаете больше, чем делает компилятор. Если вы сделаете сужение преобразования намеренно, сделайте свои намерения явными с помощью статического приведения. В противном случае это предупреждающее сообщение почти всегда указывает на наличие ошибки в коде. Его можно исправить, убедившись, что объекты, которые вы инициализируют, имеют типы, которые достаточно велики для работы с входными данными.

Следующий пример приводит к возникновению ошибки C4838 и демонстрирует один из способов его исправления:

```cpp
// C4838.cpp -- C++ narrowing conversion diagnostics
// Compile by using: cl /EHsc C4838.cpp

struct S1 {
    int m1;
    double m2, m3;
};

void function_C4838(double d1) {
    double ad[] = { 1, d1 }; // OK
    int ai[] = { 1, d1 };    // warning C4838
    S1 s11 = { 1, 2, d1 };   // OK
    S1 s12 { d1, 2, 3 };     // warning C4838
    S1 s13 { static_cast<int>(d1), 2, 3 }; // possible fix for C4838
}
```
