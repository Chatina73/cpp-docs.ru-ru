---
description: 'Дополнительные сведения: предупреждение компилятора (уровень 1) C4251'
title: Предупреждение компилятора (уровень 1) C4251
ms.date: 04/21/2020
f1_keywords:
- C4251
helpviewer_keywords:
- C4251
ms.assetid: a9992038-f0c2-4fc4-a9be-4509442cbc1e
ms.openlocfilehash: 4d08462442fd64ebef85573f5d538d6a884c8131
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97266238"
---
# <a name="compiler-warning-level-1-c4251"></a>Предупреждение компилятора (уровень 1) C4251

> "*тип*": класс "*тип1*" должен иметь DLL-интерфейс для использования клиентами класса "*тип2*"

## <a name="remarks"></a>Комментарии

Для снижения вероятности повреждения данных при экспорте класса, объявленного как [__declspec (dllexport)](../../cpp/dllexport-dllimport.md), убедитесь в том, что:

- Доступ ко всем статическим данным осуществляется через функции, экспортированные из библиотеки DLL.

- Встроенные методы класса не могут изменять статические данные.

- Ни один из встроенных методов класса не использует функции CRT или другие библиотечные функции, использующие статические данные. Дополнительные сведения см. в разделе [потенциальные ошибки при передаче объектов CRT через границы DLL](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md).

- Ни один из методов класса (встроенных или нет) может использовать типы, в которых экземпляры в EXE и DLL имеют статические различия данных.

Вы можете избежать проблем при экспорте класса из библиотеки DLL: Определите класс для работы с виртуальными функциями, а также функции для создания экземпляров и удаления объектов типа. Затем можно просто вызвать виртуальные функции для типа.

C4251 можно пропустить, если ваш класс является производным от типа в стандартной библиотеке C++, вы компилируете отладочный выпуск (**/MTD**) и на который ссылается сообщение об ошибке компилятора `_Container_base` .

## <a name="example"></a>Пример

В этом примере экспортируется специализированный класс, `VecWrapper` производный от `std::vector` .

```cpp
// C4251.cpp
// compile with: /EHsc /MTd /W2 /c
#include <vector>
using namespace std;
class Node;
class __declspec(dllexport) VecWrapper : vector<Node *> {};   // C4251
```
