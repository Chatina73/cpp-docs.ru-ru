---
title: Предупреждение компилятора (уровень 1) C4251
ms.date: 11/04/2016
f1_keywords:
- C4251
helpviewer_keywords:
- C4251
ms.assetid: a9992038-f0c2-4fc4-a9be-4509442cbc1e
ms.openlocfilehash: 8a723b7ce7fc79fb6be9c9dd2b500631098622b0
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80163223"
---
# <a name="compiler-warning-level-1-c4251"></a>Предупреждение компилятора (уровень 1) C4251

"идентификатор": класс "тип" должен иметь DLL-интерфейс для использования клиентами класса "тип2"

Чтобы избежать повреждения данных при экспорте класса с [__declspec (dllexport)](../../cpp/dllexport-dllimport.md), убедитесь в том, что:

- Все статические данные доступны через функции, экспортированные из библиотеки DLL.

- Встроенные методы класса не могут изменять статические данные.

- Ни один из встроенных методов класса не использует функции CRT или другие библиотечные функции используют статические данные (Дополнительные сведения см. [в статье потенциальные ошибки при передаче объектов CRT через границы DLL](../../c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries.md) ).

- Ни один из методов класса (вне зависимости от встраивания) не может использовать типы, в которых экземпляры в EXE и DLL имеют статические различия данных.

Вы можете избежать экспорта классов, определив библиотеку DLL, определяющую класс с виртуальными функциями, и функции, которые можно вызывать для создания и удаления объектов типа.  Затем можно просто вызвать виртуальные функции для типа.

C4251 можно игнорировать при наследовании от типа в C++ стандартной библиотеке, компиляции отладочного выпуска ( **/MTD**) и расположения сообщения об ошибке компилятора на _Container_base.

```cpp
// C4251.cpp
// compile with: /EHsc /MTd /W2 /c
#include <vector>
using namespace std;
class Node;
class __declspec(dllimport) VecWrapper : vector<Node *> {};   // C4251
```
