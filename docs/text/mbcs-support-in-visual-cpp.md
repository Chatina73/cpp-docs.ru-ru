---
title: Поддержка многобайтовой кодировки MBCS в Visual C++
ms.date: 11/04/2016
helpviewer_keywords:
- tools [C++], MBCS support
- Asian languages [C++]
- Code Editor [C++], MBCS support
- IME [C++]
- Chinese characters [C++]
- Input Method Editor [C++], MBCS
- resource editors [C++], MBCS support
- debugger [C++], MBCS support
- character sets [C++], multibyte
- Japanese characters [C++]
- multibyte characters [C++]
- Kanji character support [C++]
- NMAKE program, MBCS support
- double-byte character sets [C++]
- IME [C++], MBCS
- Input Method Editor [C++]
- MBCS [C++], enabling
ms.assetid: 6179f6b7-bc61-4a48-9267-fb7951223e38
ms.openlocfilehash: b5f2b6dd56d3a755ee73058c024152e12157a6bd
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69501949"
---
# <a name="mbcs-support-in-visual-c"></a>Поддержка многобайтовой кодировки MBCS в Visual C++

При запуске в версии Windows, поддерживающей многобайтовую версию, C++ система разработки визуальных элементов (включая интегрированный редактор исходного кода, отладчик и средства командной строки) поддерживает многобайтовую кодировку, за исключением окна памяти.

Окно памяти не интерпретирует байты данных как символы MBCS, даже если они могут интерпретировать их как символы ANSI или Unicode. Символы ANSI всегда имеют размер 1 байт, а символы Юникода имеют размер 2 байта. В многобайтовой кодировке символы могут иметь размер 1 или 2 байта, а их интерпретация зависит от того, какая кодовая страница используется. По этой причине окно памяти затрудняет отображение символов MBCS. Окно памяти не может точно понять, какой байт является началом символа. Разработчик может просматривать байтовые значения в окне памяти и искать значение в таблицах, чтобы определить символьное представление. Это возможно, поскольку разработчик знает начальный адрес строки на основе исходного кода.

Визуальный C++ элемент принимает двухбайтовые символы везде, где это уместно. Сюда входят имена путей и имена файлов в диалоговых окнах и текстовые записи в C++ редакторе визуальных ресурсов (например, статический текст в редакторе диалоговых окон и статические текстовые записи в редакторе значков). Кроме того, препроцессор распознает некоторые двухбайтовые директивы (например, имена файлов в `#include` инструкциях и аргументы `code_seg` прагма-директивы и `data_seg` ). В редакторе исходного кода символы в виде двухбайтовых символов в комментариях и строковых литералах принимаются, хотя и не находятся вC++ элементах языка C/Language (например, имена переменных).

##  <a name="_core_support_for_the_input_method_editor_.28.ime.29"></a>Поддержка редактора методов ввода (IME)

Приложения, написанные для восточно-азиатских рынков, использующих многобайтовую кодировку (например, Япония), обычно поддерживают Windows IME для ввода как однобайтовых, так и двухбайтовых символов. Среда визуальной C++ разработки содержит полную поддержку IME.

Японские клавиатуры не поддерживают символы кандзи напрямую. Редактор IME преобразует фонетическую строку, которая указывается в одном из других японских алфавитов (ромадзи, катакана или хирагана), в возможные представления канджи. В случае неоднозначности можно выбрать несколько вариантов. После выбора предполагаемого символа кандзи редактор IME передает два `WM_CHAR` сообщения в управляющее приложение.

Редактор IME, активируемый сочетанием клавиш\` Alt + клавиша, отображается как набор кнопок (индикатор) и окно преобразования. Приложение размещает окно в точке вставки текста. Приложение должно выполнять обработку `WM_MOVE` и `WM_SIZE` сообщения, переведя окно преобразования в соответствие с новым расположением или размером целевого окна.

Если вы хотите, чтобы пользователи вашего приложения могли вводить символы кандзи, приложение должно работать с сообщениями IME в Windows. Дополнительные сведения о программировании IME см. в разделе [Диспетчер методов ввода](/windows/win32/intl/input-method-manager).

## <a name="visual-c-debugger"></a>Визуальный C++ отладчик

Визуальный C++ отладчик предоставляет возможность устанавливать точки останова в сообщениях IME. Кроме того, окно памяти может отображать двухбайтовые символы.

## <a name="command-line-tools"></a>Программы командной строки

Визуальные C++ средства командной строки, включая КОМПИЛЯТОР, NMAKE и компилятор ресурсов (RC. EXE), поддерживает многобайтовую кодировку. Для изменения кодовой страницы по умолчанию при компиляции ресурсов приложения можно использовать параметр компилятора ресурсов/c.

Чтобы изменить языковой стандарт по умолчанию во время компиляции исходного кода, используйте [#pragma setlocale](../preprocessor/setlocale.md).

## <a name="graphical-tools"></a>Графические инструменты

Средства Visual C++ на основе Windows, такие как Spy + + и средства редактирования ресурсов, полностью поддерживают строки IME.

## <a name="see-also"></a>См. также

[Поддержка многобайтовых кодировок](../text/support-for-multibyte-character-sets-mbcss.md)<br/>
[Советы по программированию многобайтовой кодировки](../text/mbcs-programming-tips.md)
