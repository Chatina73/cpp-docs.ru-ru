---
description: Дополнительные сведения об pragma директиве execution_character_set в Microsoft C/C++
title: execution_character_set pragma
ms.date: 01/22/2021
f1_keywords:
- execution_character_set
- vc-pragma.execution_character_set
helpviewer_keywords:
- pragma, execution_character_set
- execution_character_set pragma
no-loc:
- pragma
ms.openlocfilehash: cc768aa0d35fffc9c387b31870adf47f35073f35
ms.sourcegitcommit: a26a66a3cf479e0e827d549a9b850fad99b108d1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98712860"
---
# <a name="execution_character_set-no-locpragma"></a>`execution_character_set` pragma

Указывает кодировку выполнения, используемую для строковых и символьных литералов. Эта директива не требуется для литералов, помеченных `u8` префиксом.

## <a name="syntax"></a>Синтаксис

> **`#pragma execution_character_set(`** "*целевой объект*" **`)`**

### <a name="parameters"></a>Параметры

*мишень*\
Указывает целевую кодировку выполнения. В настоящее время поддерживается только целевой набор выполнения "UTF-8".

## <a name="remarks"></a>Примечания

Эта директива компилятора является устаревшей, начиная с Visual Studio 2015 с обновлением 2. Рекомендуется использовать **`/execution-charset:utf-8`** **`/utf-8`** параметры компилятора или вместе с `u8` префиксом для узких символьных и строковых литералов, содержащих расширенные символы. Дополнительные сведения о `u8` префиксе см. в разделе [строковые и символьные литералы](../cpp/string-and-character-literals-cpp.md). Дополнительные сведения о параметрах компилятора см. в разделе [ `/execution-charset` (установка кодировки выполнения)](../build/reference/execution-charset-set-execution-character-set.md) и [ `/utf-8` (установка в кодировке UTF-8 для исходных и исполняемых символов)](../build/reference/utf-8-set-source-and-executable-character-sets-to-utf-8.md).

`#pragma execution_character_set("utf-8")`Директива сообщает компилятору о необходимости кодирования узких символов и узких строковых литералов в исходном коде как UTF-8 в исполняемом объекте. Эта кодировка вывода не зависит от используемой кодировки исходного файла.

По умолчанию компилятор кодирует узкие символы и узкие строки, используя текущую кодовую страницу в качестве кодировки выполнения. Это означает, что символы Юникода или DBCS за пределами диапазона текущей кодовой страницы преобразуются в символ замены по умолчанию в выходных данных. Символы Юникода и DBCS усекаются до байтов нижнего порядка, что почти никогда не требуется. Для литералов в исходном файле можно указать кодировку UTF-8 с помощью `u8` префикса. Компилятор передает эти строки в формате UTF-8 в выходные данные без изменений. Узкие символьные литералы с префиксом U8 должны соответствовать байтам или усечены при выходе.

По умолчанию Visual Studio использует текущую кодовую страницу в качестве исходной кодировки, используемой для интерпретации исходного кода для выходных данных. Когда файл считывается в, Visual Studio интерпретирует его в соответствии с текущей кодовой страницей, если не была задана кодовая страница файла или если в начале файла не обнаружена метка порядка байтов (BOM) или символы UTF-16. Кодировку UTF-8 нельзя задать в качестве текущей кодовой страницы в некоторых версиях Windows. Если автоматическое обнаружение находит исходные файлы в кодировке UTF-8 без спецификации в этих версиях, Visual Studio предполагает, что они кодируются с использованием текущей кодовой страницы. Символы в исходном файле, которые выходят за пределы диапазона указанной или автоматически обнаруженной кодовой страницы, могут вызвать предупреждения и ошибки компилятора.

## <a name="see-also"></a>См. также раздел

[Директивы pragma и `__pragma` `_Pragma` Ключевые слова и](./pragma-directives-and-the-pragma-keyword.md)\
[`/execution-charset` (Задать набор символов выполнения)](../build/reference/execution-charset-set-execution-character-set.md)\
[`/utf-8` (Задайте кодировку UTF-8 в качестве исходных и исполняемых наборов символов).](../build/reference/utf-8-set-source-and-executable-character-sets-to-utf-8.md)
