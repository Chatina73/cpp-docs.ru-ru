---
title: Прагма warning
ms.date: 08/29/2019
f1_keywords:
- warning_CPP
- vc-pragma.warning
helpviewer_keywords:
- pragmas, warning
- push pragma warning
- pop warning pragma
- warning pragma
ms.assetid: 8e9a0dec-e223-4657-b21d-5417ebe29cc8
ms.openlocfilehash: 9a79f0c4a9eed6b62e42f056f9d1994b44b57297
ms.sourcegitcommit: 6e1c1822e7bcf3d2ef23eb8fac6465f88743facf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2019
ms.locfileid: "70216471"
---
# <a name="warning-pragma"></a>Прагма warning

Включает выборочное изменение поведения предупреждающих сообщений компилятора.

## <a name="syntax"></a>Синтаксис

> **предупреждение #pragma (** \
> &nbsp;&nbsp;&nbsp;&nbsp;*описатель "предупреждение* " **:** *список "warning-number-list* "\
> &nbsp;&nbsp;&nbsp;&nbsp;[ **;** *описатель "предупреждение* " **:** *warning-number-list* ...] **)** \
> **предупреждение #pragma (Push** [ **,** *n* ] **)** \
> **предупреждение #pragma (POP)**

## <a name="remarks"></a>Примечания

Доступны следующие параметры описателей предупреждений.

|Описатель предупреждения|Значение|
|------------------------|-------------|
|*1, 2, 3, 4*|Применение данного уровня к определенным предупреждениям. Также включает указанное предупреждение, которое по умолчанию отключено.|
|*default*|Сброс поведения предупреждения до значения по умолчанию. Также включает указанное предупреждение, которое по умолчанию отключено. Предупреждение создается на документированном уровне по умолчанию.<br /><br /> Дополнительные сведения см. [в разделе предупреждения компилятора, которые](../preprocessor/compiler-warnings-that-are-off-by-default.md)по умолчанию отключены.|
|*включен*|Не выдавать указанные предупреждающие сообщения.|
|*план*|Сообщение об указанных предупреждениях как об ошибках.|
|*once*|Отображение указанных сообщений только один раз.|
|*подавляющ*|Помещение текущего состояния директивы pragma в стек, отключение указанного предупреждения для следующей строки, и отображение стека предупреждений для сброса состояния директивы pragma.|

В приведенном ниже операторе кода показано, что параметр `warning-number-list` может содержать несколько номеров предупреждений и что в одной директиве pragma можно указать несколько параметров `warning-specifier`.

```cpp
#pragma warning( disable : 4507 34; once : 4385; error : 164 )
```

Эта директива функционально эквивалентна следующему коду:

```cpp
// Disable warning messages 4507 and 4034.
#pragma warning( disable : 4507 34 )

// Issue warning 4385 only once.
#pragma warning( once : 4385 )

// Report warning 4164 as an error.
#pragma warning( error : 164 )
```

Компилятор добавляет 4000 к любому номеру предупреждения от 0 до 999.

Для номеров предупреждений в диапазоне от 4700 до 4999, связанных с созданием кода, состояние предупреждения, действующее на момент обнаружения компилятором открывающей фигурной скобки функции, будет действовать для остальной части функции. Использование директивы pragma **warning** в функции для изменения состояния предупреждения, размер которого превышает 4699, вступает в силу только после завершения функции. В следующем примере показано правильное размещение Прагма- директив предупреждений, чтобы отключить предупреждающее сообщение о создании кода, а затем восстановить его.

```cpp
// pragma_warning.cpp
// compile with: /W1
#pragma warning(disable:4700)
void Test() {
   int x;
   int y = x;   // no C4700 here
   #pragma warning(default:4700)   // C4700 enabled after Test ends
}

int main() {
   int x;
   int y = x;   // C4700
}
```

Обратите внимание, что в теле функции Последнее значение прагма-директивы **warning** будет действовать для всей функции.

## <a name="push-and-pop"></a>Отправка и отображение

Прагма-директива **warning** также поддерживает следующий синтаксис, где *n* представляет уровень предупреждений (от 1 до 4).

`#pragma warning( push [ , n ] )`

`#pragma warning( pop )`

Директива `warning( push )` pragma хранит текущее состояние предупреждения для каждого предупреждения. Директива `warning( push, n )` pragma хранит текущее состояние для каждого предупреждения и устанавливает для глобального уровня предупреждений значение *n*.

Директива `warning( pop )` pragma извлекает Последнее состояние предупреждения, отправленное в стек. Все изменения, внесенные в состояние предупреждения между *принудительной* отправкой и *точкой* подключения, отменяются. Рассмотрим следующий пример.

```cpp
#pragma warning( push )
#pragma warning( disable : 4705 )
#pragma warning( disable : 4706 )
#pragma warning( disable : 4707 )
// Some code
#pragma warning( pop )
```

В конце этого кода *POP* восстанавливает состояние каждого предупреждения (включает 4705, 4706 и 4707) в то, что было в начале кода.

При записи файлов заголовков можно использовать *Push-уведомления* и *POP* , чтобы гарантировать, что изменения состояния предупреждения, вносимые пользователем, не препятствуют правильной компиляции заголовков. Используйте *Push-уведомления* в начале заголовка и *POP* в конце. Например, если имеется заголовок, который не компилируется на уровне предупреждения 4, следующий код изменяет уровень предупреждения на 3, а затем восстанавливает исходный уровень предупреждений в конце заголовка.

```cpp
#pragma warning( push, 3 )
// Declarations/definitions
#pragma warning( pop )
```

Дополнительные сведения о параметрах компилятора, помогающих отключить предупреждения, см. в разделе [/Fi](../build/reference/fi-name-forced-include-file.md) и [/w](../build/reference/compiler-option-warning-level.md).

## <a name="see-also"></a>См. также

[Директивы pragma и ключевое слово __pragma](../preprocessor/pragma-directives-and-the-pragma-keyword.md)
