---
title: '! pragma'
description: Дополнительные сведения о предупреждении pragma в Microsoft C/C++
ms.date: 01/22/2021
f1_keywords:
- warning_CPP
- vc-pragma.warning
helpviewer_keywords:
- pragma, warning
- push pragma warning
- pop warning pragma
- warning pragma
no-loc:
- pragma
ms.openlocfilehash: 97d48acc3c0e4651d3b05c0a6405d5c9c2031cf6
ms.sourcegitcommit: a26a66a3cf479e0e827d549a9b850fad99b108d1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98712847"
---
# <a name="warning-no-locpragma"></a>`warning` pragma

Включает выборочное изменение поведения предупреждающих сообщений компилятора.

## <a name="syntax"></a>Синтаксис

> **`#pragma warning(`**\
> &nbsp;&nbsp;&nbsp;&nbsp;*`warning-specifier`* **`:`** *`warning-number-list`*\
> &nbsp;&nbsp;&nbsp;&nbsp;[**`;`** *`warning-specifier`* **`:`** *`warning-number-list`* ... ] **`)`**\
> **`#pragma warning( push`** [ **`,`** *n* ] **`)`**\
> **`#pragma warning( pop )`**

## <a name="remarks"></a>Примечания

Доступны следующие параметры описателей предупреждений.

| Описатель предупреждения | Значение |
|--|--|
| `1`, `2`, `3`, `4` | Применить заданный уровень к указанным предупреждениям. Также включает указанное предупреждение, которое по умолчанию отключено. |
| `default` | Сброс поведения предупреждения до значения по умолчанию. Также включает указанное предупреждение, которое по умолчанию отключено. Предупреждение создается на документированном уровне по умолчанию.<br /><br /> Дополнительные сведения см. [в разделе предупреждения компилятора, которые по умолчанию отключены](../preprocessor/compiler-warnings-that-are-off-by-default.md). |
| `disable` | Не выдавать указанные предупреждающие сообщения. |
| `error` | Сообщение об указанных предупреждениях как об ошибках. |
| `once` | Отображение указанных сообщений только один раз. |
| `suppress` | Помещает текущее состояние объекта pragma в стек, отключает указанное предупреждение для следующей строки, а затем выводит стек предупреждений, чтобы pragma состояние сброшено. |

Приведенная ниже инструкция Code показывает, что *`warning-number-list`* параметр может содержать несколько номеров предупреждений, и *`warning-specifier`* в одной директиве можно указать несколько параметров pragma .

```cpp
#pragma warning( disable : 4507 34; once : 4385; error : 164 )
```

Эта директива функционально эквивалентна следующему коду:

```cpp
// Disable warning messages 4507 and 4034.
#pragma warning( disable : 4507 34 )

// Issue warning C4385 only once.
#pragma warning( once : 4385 )

// Report warning C4164 as an error.
#pragma warning( error : 164 )
```

Компилятор добавляет 4000 к любому номеру предупреждения от 0 до 999.

Номера предупреждений в диапазоне 4700-4999 связаны с созданием кода. Для этих предупреждений состояние предупреждения, действующего при достижении компилятором определения функции, остается действительным для остальной части функции. Использование **`warning`** pragma в функции для изменения состояния предупреждения, значение которого превышает 4699, вступает в силу только после завершения функции. В следующем примере показано правильное размещение, **`warning`** pragma чтобы отключить предупреждающее сообщение о создании кода, а затем восстановить его.

```cpp
// pragma_warning.cpp
// compile with: /W1
#pragma warning(disable:4700)
void Test() {
   int x;
   int y = x;   // no C4700 here
   #pragma warning(default:4700)   // C4700 enabled after Test ends
}

int main() {
   int x;
   int y = x;   // C4700
}
```

Обратите внимание, что во всем теле функции Последнее значение параметра **`warning`** pragma будет действовать для всей функции.

## <a name="push-and-pop"></a>Push-уведомления и POP

**`warning`** pragma Также поддерживает следующий синтаксис, где необязательный параметр *n* представляет уровень предупреждений (от 1 до 4).

`#pragma warning( push [ , n ] )`

`#pragma warning( pop )`

pragma `warning( push )` Сохраняет текущее состояние предупреждения для каждого предупреждения. pragma `warning( push, n )` Сохраняет текущее состояние для каждого предупреждения и устанавливает для глобального уровня предупреждений значение *n*.

pragma `warning( pop )` Извлекает Последнее состояние предупреждения, отправленное в стек. Все изменения, внесенные в состояние предупреждения между `push` и `pop` , будут отменены. Рассмотрим следующий пример.

```cpp
#pragma warning( push )
#pragma warning( disable : 4705 )
#pragma warning( disable : 4706 )
#pragma warning( disable : 4707 )
// Some code
#pragma warning( pop )
```

В конце этого кода `pop` восстанавливается состояние каждого предупреждения (включающее 4705, 4706 и 4707) в то, что было в начале кода.

При написании файлов заголовков можно использовать `push` и, `pop` чтобы гарантировать, что изменения состояния предупреждения, вносимые пользователем, не препятствуют правильной компиляции заголовков. Используйте `push` в начале заголовка и `pop` в конце. Например, у вас может быть заголовок, который не компилируется чисто на уровне предупреждений 4. Следующий код изменяет уровень предупреждения на 3, а затем восстанавливает исходный уровень предупреждений в конце заголовка.

```cpp
#pragma warning( push, 3 )
// Declarations/definitions
#pragma warning( pop )
```

Дополнительные сведения о параметрах компилятора, помогающих отключить предупреждения, см. в статьях [`/FI`](../build/reference/fi-name-forced-include-file.md) и [`/w`](../build/reference/compiler-option-warning-level.md) .

## <a name="see-also"></a>См. также раздел

[Директивы pragma и `__pragma` `_Pragma` Ключевые слова и](./pragma-directives-and-the-pragma-keyword.md)
