---
title: Предустановленные макросы
ms.custom: update_every_version
ms.date: 10/01/2019
f1_keywords:
- _ATL_VER
- __ATOM__
- __AVX__
- __AVX2__
- __AVX512BW__
- __AVX512CD__
- __AVX512DQ__
- __AVX512F__
- __AVX512VL__
- _CHAR_UNSIGNED
- __CLR_VER
- _CONTROL_FLOW_GUARD
- __COUNTER__
- __cplusplus
- __cplusplus_cli
- __cplusplus_winrt
- _CPPRTTI
- _CPPUNWIND
- __DATE__
- _DEBUG
- _DLL
- __FILE__
- __FUNCDNAME__
- __FUNCSIG__
- __FUNCTION__
- _INTEGRAL_MAX_BITS
- _ISO_VOLATILE
- _KERNEL_MODE
- __LINE__
- _M_AMD64
- _M_ARM
- _M_ARM_ARMV7VE
- _M_ARM_FP
- _M_ARM64
- _M_CEE
- _M_CEE_PURE
- _M_CEE_SAFE
- _M_FP_EXCEPT
- _M_FP_FAST
- _M_FP_PRECISE
- _M_FP_STRICT
- _M_IX86
- _M_IX86_FP
- _M_X64
- _MANAGED
- _MFC_VER
- _MSC_BUILD
- _MSC_EXTENSIONS
- _MSC_FULL_VER
- _MSC_VER
- _MSVC_LANG
- __MSVC_RUNTIME_CHECKS
- _MT
- _NATIVE_WCHAR_T_DEFINED
- _NO_SIZED_DEALLOCATION
- _OPENMP
- _PREFAST_
- _RESUMABLE_FUNCTIONS_SUPPORTED
- _RTC_CONVERSION_CHECKS_ENABLED
- __STDC__
- __STDC_HOSTED__
- __STDCPP_THREADS__
- __TIME__
- __TIMESTAMP__
- __VA_ARGS__
- _VC_NODEFAULTLIB
- _WCHAR_T_DEFINED
- _WIN32
- _WIN64
- _WINRT_DLL
- __func__
helpviewer_keywords:
- timestamps, preprocessor macro
- cl.exe compiler, version number
- version numbers, C/C++ compiler (cl.exe)
- macros, predefined C++
- preprocessor, macros
- predefined macros
- _ATL_VER macro
- __ATOM__ macro
- __AVX__ macro
- __AVX2__ macro
- __AVX512BW__ macro
- __AVX512CD__ macro
- __AVX512DQ__ macro
- __AVX512F__ macro
- __AVX512VL__ macro
- _CHAR_UNSIGNED macro
- __CLR_VER macro
- _CONTROL_FLOW_GUARD macro
- __COUNTER__ macro
- __cplusplus macro
- __cplusplus_cli macro
- __cplusplus_winrt macro
- _CPPRTTI macro
- _CPPUNWIND macro
- __DATE__ macro
- _DEBUG macro
- _DLL macro
- __FILE__ macro
- __FUNCDNAME__ macro
- __FUNCSIG__ macro
- __FUNCTION__ macro
- _INTEGRAL_MAX_BITS macro
- _ISO_VOLATILE macro
- _KERNEL_MODE macro
- __LINE__ macro
- _M_AMD64 macro
- _M_ARM macro
- _M_ARM_ARMV7VE macro
- _M_ARM_FP macro
- _M_ARM64 macro
- _M_CEE macro
- _M_CEE_PURE macro
- _M_CEE_SAFE macro
- _M_FP_EXCEPT macro
- _M_FP_FAST macro
- _M_FP_PRECISE macro
- _M_FP_STRICT macro
- _M_IX86 macro
- _M_IX86_FP macro
- _M_X64 macro
- _MANAGED macro
- _MFC_VER macro
- _MSC_BUILD macro
- _MSC_EXTENSIONS macro
- _MSC_FULL_VER macro
- _MSC_VER macro
- _MSVC_LANG macro
- __MSVC_RUNTIME_CHECKS macro
- _MT macro
- _NATIVE_WCHAR_T_DEFINED macro
- _NO_SIZED_DEALLOCATION macro
- _OPENMP macro
- _PREFAST_ macro
- _RESUMABLE_FUNCTIONS_SUPPORTED macro
- _RTC_CONVERSION_CHECKS_ENABLED macro
- __STDC__ macro
- __STDC_HOSTED__ macro
- __STDCPP_THREADS__ macro
- __TIME__ macro
- __TIMESTAMP__ macro
- __VA_ARGS__ macro
- _VC_NODEFAULTLIB macro
- _WCHAR_T_DEFINED macro
- _WIN32 macro
- _WIN64 macro
- _WINRT_DLL macro
- __func__ identifier
ms.assetid: 1cc5f70a-a225-469c-aed0-fe766238e23f
ms.openlocfilehash: eb75273bc8cbe5ccbf62edc82a1e7deccc605757
ms.sourcegitcommit: 4517932a67bbf2db16cfb122d3bef57a43696242
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2019
ms.locfileid: "71816606"
---
# <a name="predefined-macros"></a>Предустановленные макросы

Microsoft C/C++ COMPILER (компилятором MSVC) предварительно определяет определенные макросы препроцессора в зависимости от языка (C или C++), цели компиляции и выбранных параметров компилятора.

КОМПИЛЯТОРОМ MSVC поддерживает предопределенные макросы препроцессора, требуемые стандартом ANSI/ISO C99, а также стандарты ISO C++ 14 и C++ 17. Реализация также поддерживает несколько дополнительных макросов препроцессора, характерных для Microsoft. Некоторые макросы определяются только для определенных сред сборки или параметров компилятора. За исключением указанных случаев, макросы определяются по всему блоку преобразования, как если бы они были указаны как аргументы параметра компилятора **/d** . При определении макросы развертываются до указанных значений препроцессором перед компиляцией. Предопределенные макросы не принимают аргументов и не могут быть переопределены.

## <a name="standard-predefined-identifier"></a>Стандартный предопределенный идентификатор

Компилятор поддерживает этот предопределенный идентификатор, заданный с помощью ISO C99 и C++ 11.

- **&#95; Func &#95; &#95;** Неполное и недекорированное имя включающей функции в виде локального **статического массива константы** **типа Function.**

    ```cpp
    void example(){
        printf("%s\n", __func__);
    } // prints "example"
    ```

## <a name="standard-predefined-macros"></a>Стандартные стандартные макросы

Компилятор поддерживает эти предопределенные макросы, заданные стандартом ISO C99 и ISO C++ 17.

- **&#95;кплусплус &#95;** Определяется как целочисленное литеральное значение, если запись преобразования компилируется C++как. В противном случае — не определяется.

- **&#95;&#95;DATE&#95;&#95;** Дата компиляции текущего файла исходного кода. Дата — строковой литерал постоянной длины в формате *ммм дд гггг*. Название месяца *MMM* совпадает с сокращенным названием месяца, созданным функцией [asctime](../c-runtime-library/reference/asctime-wasctime.md) в библиотеке времени выполнения C (CRT). Первый символ даты *дд* — это пробел, если значение меньше 10. Этот макрос определяется всегда. Этот макрос определяется всегда.

- **&#95; Файл &#95; &#95;** Имя текущего исходного файла. Файл расширяется до литерала символьной строки. **&#95; &#95;&#95;** Чтобы убедиться, что полный путь к файлу отображается, используйте [/FC (полный путь к файлу исходного кода в Diagnostics)](../build/reference/fc-full-path-of-source-code-file-in-diagnostics.md). Этот макрос определяется всегда.

- **&#95; Строка &#95; &#95;** Определяется как целочисленный номер строки в текущем исходном файле. Значение **&#95; &#95;&#95;** макроса Line можно изменить с помощью директивы `#line`. Этот макрос определяется всегда.

- **&#95; STDC &#95; &#95;** Определяется как 1 только при компиляции как C и при указании параметра компилятора [/Za](../build/reference/za-ze-disable-language-extensions.md) . В противном случае — не определяется.

- **&#95;&#95;STDC&#95;HOSTED&#95;&#95;** определяется как 1, если реализация является *размещенной реализацией*, полностью поддерживающей необходимую стандартную библиотеку. В противном случае определяется как 0.

- **&#95;&#95;STDCPP&#95;THREADS&#95;&#95;** определяется как 1, только если программа может иметь только один поток выполнения и cкомпилирована как C++. В противном случае — не определяется.

- **&#95;&#95;TIME&#95;&#95;** Время, в течение которого выполняется преобразование предварительно обработанного блока трансляции. Время представляет собой символьный строковый литерал в формате *чч: мм: СС*, то же, что и время, возвращенное функцией CRT [asctime](../c-runtime-library/reference/asctime-wasctime.md) . Этот макрос определяется всегда.

## <a name="microsoft-specific-predefined-macros"></a>Предварительно определенные макросы Майкрософт

КОМПИЛЯТОРОМ MSVC поддерживает эти дополнительные предопределенные макросы.

- **&#95;&#95;ATOM&#95;&#95;** определяется как 1, если занят параметр компилятора [/favor:ATOM](../build/reference/favor-optimize-for-architecture-specifics.md), а целевой объект компилятора — x86 или x64. В противном случае — не определяется.

- **&#95; AVX &#95; &#95;** Определяется как 1, если заданы параметры компилятора [/arch: AVX](../build/reference/arch-x86.md), [/arch: AVX2](../build/reference/arch-x86.md) или [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX2 &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX2](../build/reference/arch-x86.md) или [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX512BW &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX512CD &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX512DQ &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX512F &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95; AVX512VL &#95; &#95;** Определяется как 1, если задан параметр компилятора [/arch: AVX512](../build/reference/arch-x86.md) , а целевым объектом компилятора является x86 или x64. В противном случае — не определяется.

- **&#95;CHAR&#95;UNSIGNED** определяется как 1, если значение по умолчанию типа для **char** это тип без знака(**unsigned**). Это значение определяется, если задан параметр компилятора [/j (тип char по умолчанию — неподписанный)](../build/reference/j-default-char-type-is-unsigned.md) . В противном случае — не определяется.

- **&#95;CLR ver &#95;&#95;** Определяется как целочисленный литерал, представляющий версию среды CLR, используемую для компиляции приложения. Значение кодируется в виде `Mmmbbbbb`, где `M` является основным номером версии среды выполнения, `mm` — это дополнительный номер версии среды выполнения, а `bbbbb` — номер сборки. **&#95;&#95;CLR&#95;VER** определяется, если задан параметр компилятора [/CLR](../build/reference/clr-common-language-runtime-compilation.md). В противном случае — не определяется.

    ```cpp
    // clr_ver.cpp
    // compile with: /clr
    using namespace System;
    int main() {
       Console::WriteLine(__CLR_VER);
    }
    ```

- **&#95;CONTROL&#95;FLOW&#95;GUARD** определяется как 1, если задан параметр компилятора [/Guard: CF (Включение защиты потока управления)](../build/reference/guard-enable-control-flow-guard.md). В противном случае — не определяется.

- **&#95; Счетчик &#95; &#95;** Разворачивается до целочисленного литерала, начинающегося с 0. Значение увеличивается на 1 каждый раз, когда оно используется в исходном файле или в включенных заголовках исходного файла. Счетчик запоминает свое состояние при использовании предварительно скомпилированных заголовков. **&#95; &#95;&#95;** Этот макрос определяется всегда.

  В этом примере `__COUNTER__` используется для назначения уникальных идентификаторов трем различным объектам одного типа. Конструктор `exampleClass` принимает целое число в качестве параметра. В `main` приложение объявляет три объекта типа `exampleClass` с использованием `__COUNTER__` в качестве параметра уникального идентификатора:

    ```cpp
    // macro__COUNTER__.cpp
    // Demonstration of __COUNTER__, assigns unique identifiers to
    // different objects of the same type.
    // Compile by using: cl /EHsc /W4 macro__COUNTER__.cpp
    #include <stdio.h>

    class exampleClass {
        int m_nID;
    public:
        // initialize object with a read-only unique ID
        exampleClass(int nID) : m_nID(nID) {}
        int GetID(void) { return m_nID; }
    };

    int main()
    {
        // __COUNTER__ is initially defined as 0
        exampleClass e1(__COUNTER__);

        // On the second reference, __COUNTER__ is now defined as 1
        exampleClass e2(__COUNTER__);

        // __COUNTER__ is now defined as 2
        exampleClass e3(__COUNTER__);

        printf("e1 ID: %i\n", e1.GetID());
        printf("e2 ID: %i\n", e2.GetID());
        printf("e3 ID: %i\n", e3.GetID());

        // Output
        // ------------------------------
        // e1 ID: 0
        // e2 ID: 1
        // e3 ID: 2

        return 0;
    }
    ```

- **&#95;&#95;кплусплус&#95;CLI** , определенный как целочисленное литеральное значение 200406 при C++ компиляции как, и установлен параметр компилятора [/CLR](../build/reference/clr-common-language-runtime-compilation.md) . В противном случае — не определяется. При определении  **&#95; &#95;кплусплус&#95;CLI** действует на всю единицу преобразования.

    ```cpp
    // cplusplus_cli.cpp
    // compile by using /clr
    #include "stdio.h"
    int main() {
       #ifdef __cplusplus_cli
          printf("%d\n", __cplusplus_cli);
       #else
          printf("not defined\n");
       #endif
    }
    ```

- **&#95;&#95;кплусплус&#95;WinRT** определяется как целочисленное литеральное значение 201009 при компиляции C++ как, а параметр компилятора [/ZW (среда выполнения Windows compilation)](../build/reference/zw-windows-runtime-compilation.md) установлен. В противном случае — не определяется.

- **&#95;Кппртти** Определяется как 1, если задан параметр компилятора [/GR (включение сведений о типе времени выполнения)](../build/reference/gr-enable-run-time-type-information.md) . В противном случае — не определяется.

- **&#95;Кппунвинд** Определяется как 1, если одна или несколько параметров типа [/GX (включить обработку исключений)](../build/reference/gx-enable-exception-handling.md), [/CLR (CLR compilation)](../build/reference/clr-common-language-runtime-compilation.md)или [/EH (модель обработки исключений)](../build/reference/eh-exception-handling-model.md) установлены. В противном случае — не определяется.

- **&#95;DEBUG** определяется как 1, если задан параметр компилятора [/LDd](../build/reference/md-mt-ld-use-run-time-library.md), [/MDd](../build/reference/md-mt-ld-use-run-time-library.md), или [/MTd](../build/reference/md-mt-ld-use-run-time-library.md). В противном случае — не определяется.

- **&#95;DLL** определяется как 1, если задан параметр компилятора (многопоточный DLL) [/MD](../build/reference/md-mt-ld-use-run-time-library.md) или [/MDd](../build/reference/md-mt-ld-use-run-time-library.md). В противном случае — не определяется.

- **&#95;&#95;FUNCDNAME&#95;&#95;** определяется как строковый литерал, содержащий [декорированное имя](../build/reference/decorated-names.md) включающей функции. Макрос определен только в пределах функции. **&#95;Макрос функднаме&#95;** не разворачивается, если используется параметр [/EP](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) или &#95; [/p](../build/reference/p-preprocess-to-a-file.md) компилятора.

   В этом примере используются `__FUNCDNAME__`макросы, `__FUNCTION__` `__FUNCSIG__`и для вывода сведений о функции.

   [!code-cpp[NVC_Predefined_Macros_Examples#1](../preprocessor/codesnippet/CPP/predefined-macros_1.cpp)]

- **&#95;&#95;FUNCSIG&#95;&#95;** определен как строковый литерал, содержащий сигнатуру включающей функции. Макрос определен только в пределах функции. **&#95;Макрос функсиг&#95;** не разворачивается, если используется  [/E](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) P [или /p](../build/reference/p-preprocess-to-a-file.md) параметр компилятора . При компиляции для 64-разрядных конечных вызовов — это `__cdecl` по умолчанию. Пример использования см. в разделе для макроса `__FUNCDNAME__`.

- **&#95;&#95;FUNCTION&#95;&#95;** определяется как строковый литерал, содержащий внешнее имя включающей функции. Макрос определен только в пределах функции. **&#95;Макрос функции&#95;** не разворачивается, если используется [ /EP](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) или &#95; [/p](../build/reference/p-preprocess-to-a-file.md) параметр компилятора. Пример использования см. в разделе для макроса `__FUNCDNAME__`.

- **&#95;INTEGRAL&#95;MAX&#95;BITS** определяется как целочисленное литеральное значение 64, максимальный размер (в битах) для целочисленного типа без вектора. Этот макрос определяется всегда.

   ```cpp
   // integral_max_bits.cpp
   #include <stdio.h>
   int main() {
      printf("%d\n", _INTEGRAL_MAX_BITS);
   }
   ```

- **&#95;&#95;INTELLISENSE&#95;&#95;** определяется как 1 во время прохода компилятором IntelliSense в интегрированной среде разработки Visual Studio. В противном случае — не определяется. Этот макрос можно использовать для защиты кода, который компилятор IntelliSense не понимает, или использовать для переключения между сборкой и компилятором IntelliSense. Дополнительные сведения см. в разделе [советы по устранению неполадок при медленной работе IntelliSense](https://devblogs.microsoft.com/cppblog/troubleshooting-tips-for-intellisense-slowness/).

- **&#95;ISO&#95;volatile** определяется как 1, если задан параметр компилятора [/volatile: ISO](../build/reference/volatile-volatile-keyword-interpretation.md) . В противном случае — не определяется.

- **&#95;KERNEL&#95;MODE** определяется как 1, если задан параметр компилятора [/kernel (Создание двоичного режима ядра)](../build/reference/kernel-create-kernel-mode-binary.md). В противном случае — не определяется.

- **&#95;M&#95;AMD64** Определяется как целочисленное литеральное значение 100 для компиляций, предназначенных для процессоров x64. В противном случае — не определяется.

- **&#95;M&#95;ARM** Определяется как целочисленное литеральное значение 7 для компиляций, предназначенных для процессоров ARM. В противном случае — не определяется.

- **&#95;M&#95;ARM&#95;ARMV7VE** определяется как 1, если для компиляций, ПРЕДНАЗНАЧЕНных для процессоров ARM, задан параметр компилятора [/arch: ARMV7VE](../build/reference/arch-arm.md) . В противном случае — не определяется.

- **&#95;M&#95;ARM&#95;FP** определен как целочисленное литеральное значение, указывающее, какой параметр компилятора [/Arch](../build/reference/arch-arm.md) был задан для целевых объектов процессора ARM. В противном случае — не определяется.

  - Значение в диапазоне 30-39, если не `/arch` был указан параметр ARM, указывающий архитектуру по умолчанию для ARM (`VFPv3`).

  - Значение в диапазоне 40-49, если `/arch:VFPv4` было задано.

  - Дополнительные сведения см. в разделе [/Arch (ARM)](../build/reference/arch-arm.md).

- **&#95;M&#95;ARM64** Определяется как 1 для компиляций, предназначенных для 64-разрядных процессоров ARM. В противном случае — не определяется.

- **&#95;M&#95;CEE** определен как 001, если задан любой параметр компилятора [/CLR (CLR compilation)](../build/reference/clr-common-language-runtime-compilation.md) . В противном случае — не определяется.

- **&#95;M&#95;CEE&#95;PURE** устаревший, начиная с Visual Studio 2015. Определяется как 001, если задан параметр компилятора [/CLR: pure](../build/reference/clr-common-language-runtime-compilation.md). В противном случае — не определяется.

- **&#95;M&#95;CEE&#95;SAFE** устаревший, начиная с Visual Studio 2015. Определяется как 001, если задан параметр компилятора [/CLR: safe](../build/reference/clr-common-language-runtime-compilation.md). В противном случае — не определяется.

- **&#95;M&#95;FP&#95;, кроме** определенного как 1, если задан параметр компилятора [/FP: except](../build/reference/fp-specify-floating-point-behavior.md) или [/FP: Option](../build/reference/fp-specify-floating-point-behavior.md) . В противном случае — не определяется.

- **&#95;M&#95;FP&#95;FAST** определяется как 1, если задан параметр компилятора [/fp:fast](../build/reference/fp-specify-floating-point-behavior.md). В противном случае — не определяется.

- **&#95;M&#95;FP&#95;PRECISE** определяется как 1, если задан параметр компилятора [/fp: точное](../build/reference/fp-specify-floating-point-behavior.md). В противном случае — не определяется.

- **&#95;M&#95;FP&#95;** , определенный как 1, если задан параметр компилятора [/FP: Option](../build/reference/fp-specify-floating-point-behavior.md) . В противном случае — не определяется.

- **&#95;M&#95;IX86** Определяется как целочисленное литеральное значение 600 для компиляций, нацеленных на процессоры x86. Этот макрос не определен для целевых объектов компиляции x64 или ARM.

- **&#95;M&#95;IX86&#95;FP** определяется как целочисленное литеральное значение, указывающее параметр компилятора [/Arch](../build/reference/arch-arm.md) , который был задан, или значение по умолчанию. Этот макрос всегда определяется, если целью компиляции является процессор x86. В противном случае — не определяется. Если определено, значение равно:

  - 0, `/arch:IA32` если был задан параметр компилятора.

  - 1, `/arch:SSE` если был задан параметр компилятора.

  - 2, если задан параметр компилятора `/arch:SSE2`, `/arch:AVX`, `/arch:AVX2` или `/arch:AVX512`. Это значение используется по умолчанию, `/arch` если не указан параметр компилятора. При указании `/arch:AVX` также определяется макрос **&#95; &#95;AVX&#95;** . Если задано значение `/arch:AVX2`, **&#95; &#95;также&#95;** определяются и AVX, и **&#95; &#95;AVX2&#95;** . При указании  **&#95; &#95;&#95;** `/arch:AVX512`, AVX,  **&#95; &#95;AVX2&#95;** ,  **&#95; &#95;AVX512BW&#95;** ,  **&#95;&#95;AVX512CD, &#95;**  **&#95;Также определяются&#95;AVX512DQ, AVX512F и AVX512VL. &#95;** **&#95; &#95;&#95;** **&#95; &#95;&#95;**

  - Дополнительные сведения см. в разделе [/arch (x86)](../build/reference/arch-x86.md).

- **&#95;M&#95;x64** Определяется как целочисленное литеральное значение 100 для компиляций, предназначенных для процессоров x64. В противном случае — не определяется.

- **&#95;MANAGED** определяется как 1, если задан параметр компилятора [/CLR](../build/reference/clr-common-language-runtime-compilation.md). В противном случае — не определяется.

- **&#95;MSC&#95;BUILD** определяется как целочисленный литерал, содержащий элемент номера редакции номера версии компилятора. Номер редакции — четвертый элемент номера версии с разделителями-точками. Например, если номер версии Microsoft C/C++ Compiler — 15.00.20706.01, макрос  **&#95;Build MSC&#95;** возвращает значение 1. Этот макрос определяется всегда.

- **&#95;Расширения&#95;MSC** определяются как 1, если установлен параметр компилятора по умолчанию [(включить расширения языка)](../build/reference/za-ze-disable-language-extensions.md) . В противном случае — не определяется.

- **&#95;MSC&#95;FULL&#95;VER** определяется как целочисленный литерал, кодирующий элементы основного и вспомогательного номера версии компилятора, а также номера сборки. Основной номер — это первый элемент номера версии с разделителями точками, дополнительный номер — второй элемент, а номер сборки — третий. Например, если номер версии MicrosoftC++ C/Compiler — 15.00.20706.01,  **&#95;макрос&#95;Full&#95;ver** возвращает значение 150020706. Введите `cl /?` в командной строке, чтобы просмотреть номер версии компилятора. Этот макрос определяется всегда.

- **&#95;версия&#95;MSC** Определяется как целочисленный литерал, который кодирует основные и вспомогательные элементы номера версии компилятора. Основной номер — это первый элемент в номере версии с разделителями-точками, а дополнительный номер — второй элемент. Например, если номер версии Microsoft C/C++ Compiler — 17.00.51106.1, макрос  **&#95;MSC&#95;ver** возвращает значение 1700. Введите `cl /?` в командной строке, чтобы просмотреть номер версии компилятора. Этот макрос определяется всегда.

   |Версия Visual Studio|**&#95;ВЕРСИЯ&#95;MSC**|
   |-|-|
   |Visual Studio 6.0|1200|
   |Visual Studio .NET 2002 (7,0)|1300|
   |Visual Studio .NET 2003 (7,1)|1310|
   |Visual Studio 2005 (8,0)|1400|
   |Visual Studio 2008 (9,0)|1500|
   |Visual Studio 2010 (10,0)|1600|
   |Visual Studio 2012 (11,0)|1700|
   |Visual Studio 2013 (12,0)|1800|
   |Visual Studio 2015 (14,0)|1900|
   |Visual Studio 2017 RTW (15,0)|1910|
   |Visual Studio 2017 версия 15.3|1911|
   |Visual Studio 2017 версии 15.5|1912|
   |Visual Studio 2017 версии 15.6|1913|
   |Visual Studio 2017 версии 15.7|1914|
   |Visual Studio 2017 версии 15.8|1915|
   |Visual Studio 2017 версии 15,9|1916|
   |Visual Studio 2019 RTW (16,0)|1920|
   |Visual Studio 2019 версии 16.1|1921|
   |Visual Studio 2019 версии 16.2|1922|
   |Visual Studio 2019 версии 16,3|1923|

   Чтобы проверить наличие выпусков или обновлений компилятора в заданной версии Visual Studio или после, используйте оператор **>=** . Его можно использовать в условной директиве для сравнения  **&#95;версии&#95;MSC** с этой известной версией. Если у вас есть несколько взаимоисключающих версий для сравнения, упорядочивайте сравнения в порядке убывания номера версии. Например, этот код проверяет наличие компиляторов, выпущенных в Visual Studio 2017 и более поздних версиях. Затем он проверяет наличие компиляторов, выпущенных в или после Visual Studio 2015. Затем он проверяет наличие всех компиляторов, выпущенных до Visual Studio 2015:

   ```cpp
   #if _MSC_VER >= 1910
   // . . .
   #elif _MSC_VER >= 1900
   // . . .
   #else
   // . . .
   #endif
   ```

   Дополнительные сведения см. в [разделе C++ версия визуального компилятора](https://devblogs.microsoft.com/cppblog/visual-c-compiler-version/) в C++ блоге Microsoft Team.

- **&#95;КОМПИЛЯТОРОМ MSVC&#95;lang** , определенный как целочисленный литерал, указывающий стандарт C++ языка, который используется компилятором. Он задается только в коде, C++скомпилированном как. Макрос представляет собой целочисленное литеральное значение, 201402L по умолчанию или при указании параметра компилятора [/std: c++ 14](../build/reference/std-specify-language-standard-version.md) . Для макроса задается значение 201703L, если указан параметр компилятора [/std: c++ 17](../build/reference/std-specify-language-standard-version.md) . Если указан параметр [/std: c + + Latest](../build/reference/std-specify-language-standard-version.md) , ему присваивается более высокое, неопределенное значение. В противном случае макрос не определен. **&#95;MSVC&#95;LANG** макрос и [/STD (укажите стандартной версии языка)](../build/reference/std-specify-language-standard-version.md) параметры компилятора, доступные, начиная с Visual Studio 2015 с обновлением 3.

- **&#95;&#95;MSVC&#95;RUNTIME&#95;CHECKS** определяется как 1, если задан один из параметров компилятора [/RTC](../build/reference/rtc-run-time-error-checks.md). В противном случае — не определяется.

- **&#95;КОМПИЛЯТОРОМ MSVC&#95;традиционная** определена как 0, если установлен режим соответствия препроцессора/експериментал: задан параметр компилятора [препроцессора](../build/reference/rtc-run-time-error-checks.md) . Определяется как 1 по умолчанию или, если задан параметр [/експериментал: препроцессор-](../build/reference/rtc-run-time-error-checks.md) Compiler, который указывает на использование традиционного препроцессора. В Visual Studio 2017 версии 15,8 доступен параметр компилятора  **&#95;компилятором MSVC&#95;традиционный** макрос и [/експериментал: препроцессор (включить режим соответствия препроцессора)](../build/reference/experimental-preprocessor.md) .

   ```cpp
   #if defined(_MSVC_TRADITIONAL) && _MSVC_TRADITIONAL
   // Logic using the traditional preprocessor
   #else
   // Logic using cross-platform compatible preprocessor
   #endif
   ```

- **&#95;MT** Определяется как 1 при указании [/MD или/MDd](../build/reference/md-mt-ld-use-run-time-library.md) (Многопоточная DLL) или [/MT или/MTD](../build/reference/md-mt-ld-use-run-time-library.md) (многопоточность). В противном случае — не определяется.

- **&#95;NATIVE&#95;WCHAR&#95;T&#95;DEFINED** определяется как 1, если задан параметр компилятора [/Zc: wchar_t](../build/reference/zc-wchar-t-wchar-t-is-native-type.md). В противном случае — не определяется.

- **&#95;OPENMP** Определяется как целочисленный литерал 200203, если установлен параметр компилятора [/OpenMP (включить поддержку openmp 2,0)](../build/reference/openmp-enable-openmp-2-0-support.md) . Это значение представляет дату спецификации OpenMP, реализуемой КОМПИЛЯТОРОМ MSVC. В противном случае — не определяется.

   ```cpp
   // _OPENMP_dir.cpp
   // compile with: /openmp
   #include <stdio.h>
   int main() {
      printf("%d\n", _OPENMP);
   }
   ```

- **С быстрой&#95; скоростью &#95;** Определяется как 1, если задан параметр компилятора [/Analyze](../build/reference/analyze-code-analysis.md) . В противном случае — не определяется.

- **&#95;&#95; Метка &#95;времени** Определяется как строковый литерал, который содержит дату и время последнего изменения текущего исходного файла, в сокращенной форме с постоянной длиной, возвращаемой функцией CRT [asctime](../c-runtime-library/reference/asctime-wasctime.md) , например `Fri 19 Aug 13:32:58 2016`. Этот макрос определяется всегда.

- **&#95;При&#95;** задании параметра компилятора [/Zl (опущено имя библиотеки по умолчанию)](../build/reference/zl-omit-default-library-name.md) в VC нодефаултлиб определено значение 1. В противном случае — не определяется.

- **&#95;WCHAR&#95;T&#95;DEFINED** определяется как 1, если задан параметр компилятора [/Zc: wchar_t](../build/reference/zc-wchar-t-wchar-t-is-native-type.md), используемый по умолчанию. Макрос **&#95;WCHAR&#95;T&#95;DEFINED** определен, но не имеет значения, если задан параметр компилятора `/Zc:wchar_t-`, а в системном файле заголовка, включенного в ваш проект, определен **wchar_t** . В противном случае — не определяется. В противном случае — не определяется.

- **&#95;Win32** определяется как 1, если целевой объект компиляции — 32-разрядная архитектура ARM, 64-разрядная архитектура ARM, x86 или x64. В противном случае — не определяется.

- **&#95;Win64** определяется как 1, если целевой объект компиляции — 64-разрядная архитектура ARM или x64. В противном случае — не определяется.

- **&#95;DLL&#95;-библиотека WINRT** , определенная как C++ 1 при компиляции как, и параметры компилятора [/ZW (среда выполнения Windows compilation)](../build/reference/zw-windows-runtime-compilation.md) , [/LD или/LDD](../build/reference/md-mt-ld-use-run-time-library.md) заданы. В противном случае — не определяется.

Нет макросов препроцессора, которые определяют версию библиотеки ATL или MFC, предопределенной компилятором. Заголовки библиотек ATL и MFC определяют эти макросы для внутренних целей. Они не определены в директивах препроцессора, выполняемых до включения обязательного заголовка.

- **&#95;версия&#95;ATL** Определяется в \<atldef. h > как целочисленный литерал, который кодирует номер версии ATL.

- **&#95;MFC&#95;ver** Определяется в \<afxver_. h > как целочисленный литерал, который кодирует номер версии MFC.

## <a name="see-also"></a>См. также

[Макросы (C/C++)](../preprocessor/macros-c-cpp.md)<br/>
[Операторы препроцессора](../preprocessor/preprocessor-operators.md)<br/>
[Директивы препроцессора](../preprocessor/preprocessor-directives.md)
