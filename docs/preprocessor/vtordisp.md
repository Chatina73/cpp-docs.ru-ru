---
title: Прагма vtordisp
ms.date: 08/29/2019
f1_keywords:
- vc-pragma.vtordisp
- vtordisp_CPP
helpviewer_keywords:
- pragmas, vtordisp
- vtordisp pragma
ms.assetid: 05b7d73c-43fa-4b62-8c8a-170a9e427391
ms.openlocfilehash: 3c676ab2bfee1b6cf3caff3ab456a4f23f2744c3
ms.sourcegitcommit: 6e1c1822e7bcf3d2ef23eb8fac6465f88743facf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2019
ms.locfileid: "70216478"
---
# <a name="vtordisp-pragma"></a>Прагма vtordisp

**C++Зависящ**

Управляет добавлением скрытого `vtordisp` элемента смещения создания или уничтожения.

## <a name="syntax"></a>Синтаксис

> **#pragma vtordisp (** [ **Push,** ] *n* **)** \
> **#pragma vtordisp (POP)** \
> **#pragma vtordisp ()** \
> **#pragma vtordisp (** [ **Push,** ] { **On** | **Off** } **)**

### <a name="parameters"></a>Параметры

**распространение**\
Помещает текущий `vtordisp` параметр во внутренний стек компилятора и устанавливает для нового `vtordisp` параметра значение *n*.  Если *n* не указан, текущий `vtordisp` параметр не изменяется.

**Рор**\
Удаляет верхнюю запись из внутреннего стека компилятора и восстанавливает `vtordisp` значение удаленного параметра.

*n*\
Задает новое значение для `vtordisp` параметра. Возможные значения: 0, 1 или 2, соответствующие `/vd0`параметрам компилятора, `/vd1`и `/vd2` . Дополнительные сведения см. в разделе [/ВД (отключение замещения конструкций)](../build/reference/vd-disable-construction-displacements.md).

**on**\
Аналогично параметру `#pragma vtordisp(1)`.

**автоном**\
Аналогично параметру `#pragma vtordisp(0)`.

## <a name="remarks"></a>Примечания

Директива pragma **vtordisp** применима только к коду, который использует виртуальные базовые базы. Если в производном классе переопределена виртуальная функция, которую он унаследовал от виртуального базового класса, и если конструктор или деструктор производного класса вызывает эту функцию при помощи указателя на виртуальный базовый класс, то компилятор может вставлять поля `vtordisp` в классы с виртуальными базовыми классами.

Директива pragma **vtordisp** влияет на макет классов, которые следуют за ним. Параметры `/vd0`, `/vd1` и`/vd2` указывают одинаковое поведение для полных модулей. Указание 0 или **Off** подавляет скрытые `vtordisp` члены. Отключите **vtordisp** , только если нет возможности, чтобы конструкторы и деструкторы класса вызывали виртуальные функции для объекта, `this` на который указывает указатель.

При указании значения 1 или **On**значение по умолчанию `vtordisp` включает скрытые члены, где это необходимо.

Указание 2 включает скрытые `vtordisp` члены для всех виртуальных баз с виртуальными функциями.  `#pragma vtordisp(2)`может потребоваться обеспечить правильную производительность **dynamic_cast** для частично сконструированного объекта. Дополнительные сведения см. в разделе [Предупреждение компилятора (уровень 1) C4436](../error-messages/compiler-warnings/compiler-warning-level-1-c4436.md).

`#pragma vtordisp()`без аргументов восстанавливает `vtordisp` первоначальный параметр.

```cpp
#pragma vtordisp(push, 2)
class GetReal : virtual public VBase { ... };
#pragma vtordisp(pop)
```

**КОНЕЦ C++ конкретного**

## <a name="see-also"></a>См. также

[Директивы pragma и ключевое слово __pragma](../preprocessor/pragma-directives-and-the-pragma-keyword.md)
