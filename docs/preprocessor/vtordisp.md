---
description: Дополнительные сведения о vtordisp pragma в Microsoft C++
title: vtordisp pragma
ms.date: 01/22/2021
f1_keywords:
- vc-pragma.vtordisp
- vtordisp_CPP
helpviewer_keywords:
- pragma, vtordisp
- vtordisp pragma
no-loc:
- pragma
ms.openlocfilehash: f8956aa892aae0472001b007137e6f978d91500e
ms.sourcegitcommit: a26a66a3cf479e0e827d549a9b850fad99b108d1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98713146"
---
# <a name="vtordisp-no-locpragma"></a>`vtordisp` pragma

Управляет добавлением скрытого `vtordisp` элемента смещения создания или уничтожения. `vtordisp` pragma Относится только к C++.

## <a name="syntax"></a>Синтаксис

> **`#pragma vtordisp(`**[ **`push,`** ] *n***`)`**\
> **`#pragma vtordisp(pop)`**\
> **`#pragma vtordisp()`**\
> **`#pragma vtordisp(`** [ **`push,`** ] { **`on`** | **`off`** } **`)`**

### <a name="parameters"></a>Параметры

**`push`**\
Помещает текущий `vtordisp` параметр во внутренний стек компилятора и устанавливает `vtordisp` для нового параметра значение *n*.  Если *n* не указан, текущий `vtordisp` параметр не изменяется.

**`pop`**\
Удаляет верхнюю запись из внутреннего стека компилятора и восстанавливает `vtordisp` значение удаленного параметра.

*\n*\
Задает новое значение для `vtordisp` параметра. Возможные значения: **`0`** , **`1`** или **`2`** , соответствующие **`/vd0`** **`/vd1`** **`/vd2`** параметрам компилятора, и. Дополнительные сведения см. в разделе [ `/vd` (отключение замещения конструкций)](../build/reference/vd-disable-construction-displacements.md).

**`on`**\
Эквивалент `#pragma vtordisp(1)`.

**`off`**\
Эквивалент `#pragma vtordisp(0)`.

## <a name="remarks"></a>Примечания

**`vtordisp`** pragma Применяется только к коду, который использует виртуальные базовые базы. Если производный класс переопределяет виртуальную функцию, которая наследуется от виртуального базового класса, и если конструктор или деструктор производного класса вызывает эту функцию, используя указатель на виртуальный базовый класс, компилятор может добавить дополнительные скрытые `vtordisp` поля в классы с виртуальными базовыми классами.

Объект **`vtordisp`** pragma влияет на разметку классов, которые следуют за ним. **`/vd0`** **`/vd1`** Параметры компилятора, и **`/vd2`** задают одинаковое поведение для полных модулей. Указание **`0`** или **`off`** запрет скрытия `vtordisp` членов. Отключите **`vtordisp`** , только если нет возможности, чтобы конструкторы и деструкторы класса вызывали виртуальные функции для объекта, на который указывает **`this`** указатель.

Указание **`1`** или **`on`** , по умолчанию, включает скрытые `vtordisp` члены, где они необходимы.

Указание **`2`** включает скрытые `vtordisp` элементы для всех виртуальных баз с виртуальными функциями. `#pragma vtordisp(2)` может потребоваться обеспечить правильную производительность для **`dynamic_cast`** частично сконструированного объекта. Дополнительные сведения см. в разделе [Предупреждение компилятора (уровень 1) C4436](../error-messages/compiler-warnings/compiler-warning-level-1-c4436.md).

`#pragma vtordisp()`без аргументов восстанавливает `vtordisp` первоначальный параметр.

```cpp
#pragma vtordisp(push, 2)
class GetReal : virtual public VBase { ... };
#pragma vtordisp(pop)
```

## <a name="see-also"></a>См. также раздел

[Директивы pragma и `__pragma` `_Pragma` Ключевые слова и](./pragma-directives-and-the-pragma-keyword.md)
