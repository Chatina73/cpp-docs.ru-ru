---
title: Программы и компоновка (C++)
ms.date: 04/09/2018
ms.assetid: a6493ba0-24e2-4c89-956e-9da1dea660cb
ms.openlocfilehash: 4f509979a293f194333e610fbdae7be9d32ec121
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62301517"
---
# <a name="program-and-linkage-c"></a>Программа и компоновка (C++)

В программе на C++ *символ*, например имя переменной или функции, можно объявить любое количество раз в своей области действия, но он может быть определен только один раз. Это правило одного определения (ODR). Объект *объявление* вводит (или повторно вводит) имя в программу. Объект *определение* вводит имя и, в случае с переменной, явным образом инициализирует его. Объект *определение функции* состоит из сигнатура и тело функции.

Ниже приведены объявления.

```cpp
int i;
int f(int x);
```

Ниже приведены определения.

```cpp
int i{42};
int f(int x){ return x * i; }
```

Программа состоит из одного или нескольких *записей преобразования*. Записи преобразования состоит в файле реализации (.cpp, .cxx и т.д.) и всех заголовков (.h, .hpp т. д.), которые он содержит, прямо или косвенно. Каждый блок трансляции независимо друг от друга компилируется компилятором, после чего компоновщик выполняет слияние единиц трансляции, который компилируется в один *программы*. Нарушение правила с операционными данными обычно отображаются как ошибки компоновщика после двух разных определений тем же именем в разных записях преобразования.

Вообще говоря, чтобы сделать переменную видимой в нескольких файлах рекомендуется поместить его в файл заголовка и добавление #include в каждый CPP-файле, который требует объявления. Добавив *защита включения* вокруг содержимое заголовка, убедитесь, что имена, он объявляет определены только один раз.

Однако в некоторых случаях может потребоваться объявлять глобальную переменную или класс в CPP-файле. В таких случаях необходимо заставляют компилятор и компоновщик, применяется ли имя объекта только в один файл, или ко всем файлам.

## <a name="linkage-vs-scope"></a>Компоновка и области

Концепция *компоновка* ссылается на видимость глобальные символы (например, переменные, имена типов и имена функций) в рамках программы в целом в записях преобразования. Концепция *область* относится к символам, объявленные в блоке, например пространство имен, класс или тело функции. Такие символы являются видимыми только в пределах области, в котором они определены; Концепция компоновка не применяется к ним.

## <a name="external-vs-internal-linkage"></a>Внешние и внутренние связи

Объект *свободная функция* — это функция, которая определена в глобальной или области видимости пространства имен. Неконстантный глобальные переменные и функции по умолчанию имеют *внешнюю компоновку*; они видимы из любой записи преобразования в программе. Таким образом нет других глобальных объектов (переменной, определение класса, и т.д.) может иметь это имя. Символ с *внутреннюю компоновку* или *без компоновки* видимы только в пределах блока трансляции, в котором она объявлена. Если имя имеет внутреннюю компоновку, в другой записи преобразования может существовать тем же именем. Переменные, объявленные с помощью определений класса или тело функции не имеют компоновки.

Вы можете принудительно на глобальное имя внутренней компоновкой, явно объявив ее в качестве **статических**. Это ограничивает его видимость для той же записи преобразования, в котором она объявлена. Обратите внимание, что в этом контексте **статического** означает нечто иное, чем при применяться к локальным переменным.

По умолчанию следующие объекты имеют внутреннюю компоновку:
- объекты const
- объекты constexpr
- определения типов
- статические объекты в области видимости пространства имен

Чтобы предоставить const внешнюю компоновку объекта, он объявляется как **extern** и присвойте ему значение:

```cpp
extern const int value = 42;
```

См. в разделе [extern](extern-cpp.md) Дополнительные сведения.

## <a name="see-also"></a>См. также

[Основные понятия](../cpp/basic-concepts-cpp.md)