---
title: явное создание экземпляра
ms.date: 11/04/2016
helpviewer_keywords:
- templates, instantiation
- explicit instantiation
- instantiation, explicit
ms.assetid: 8b0d4e32-45a6-49d5-8041-1ebdd674410e
ms.openlocfilehash: 0b1290bc23c56c0f35ddd3bb93e37ce4f5f0d2ed
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81361962"
---
# <a name="explicit-instantiation"></a>явное создание экземпляра

Явное создание экземпляров можно использовать для создания шаблонного класса или функции, чтобы обойтись без их использования в коде. Поскольку это полезно для создания файлов библиотек (.lib), в которых шаблоны используются для распространения, то определения шаблонов без создания экземпляров не включаются в объектные файлы (.obj).

Этот код явно мгновенно `MyStack` для **int** переменных и шесть элементов:

```cpp
template class MyStack<int, 6>;
```

Этот оператор создает экземпляр класса `MyStack`, но не резервирует пространство в памяти для полученного объекта. Код создается для всех членов.

В следующей строке явное создание экземпляра выполняется только для функции-члена конструктора.

```cpp
template MyStack<int, 6>::MyStack( void );
```

Вы можете явно мгновенно использовать шаблоны функций, используя аргумент определенного типа, чтобы повторно объявить их, как показано на примере в [Instantiation Шаблона функций.](../cpp/function-template-instantiation.md)

Вы можете использовать ключевое слово **extern** для предотвращения автоматического мгновенного воспроизведения членов. Пример:

```cpp
extern template class MyStack<int, 6>;
```

Аналогично, определенные элементы можно пометить как внешние, для которых не был создан экземпляр.

```cpp
extern template MyStack<int, 6>::MyStack( void );
```

Вы можете использовать ключевое слово **extern,** чтобы сохранить компилятор от генерации одного и того же кода мгновенного воспроизведения в нескольких модульных объектах. Если функция вызывается, то экземпляр шаблонной функции должен быть создан с использованием заданных явных параметров шаблона по меньшей мере в одном связанном модуле; в противном случае при сборке программы возникнет ошибка компоновщика.

> [!NOTE]
> Ключевое слово **extern** в специализации применяется только к функциям членов, определенным вне тела класса. Функции, определенные внутри объявления класса, рассматриваются как встраиваемые; для них всегда создаются экземпляры.

## <a name="see-also"></a>См. также раздел

[Шаблоны функций](../cpp/function-templates.md)
