---
title: Использование wmain вместо main
ms.date: 11/04/2016
f1_keywords:
- wmain
helpviewer_keywords:
- main function, vs. wmain
- wmain function
ms.assetid: 7abb1257-b85c-413a-b913-d45b1582a71d
ms.openlocfilehash: f47d7219a54b197ec59f109cf08879774b48e6f7
ms.sourcegitcommit: a6d63c07ab9ec251c48bc003ab2933cf01263f19
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2019
ms.locfileid: "74857220"
---
# <a name="using-wmain-instead-of-main"></a>Использование wmain вместо main

**Блок, относящийся только к системам Майкрософт**

В модели программирования Юникода можно определить версию функции `main` для расширенных символов. Используйте **wmain** вместо `main`, если требуется написать переносимый код, который соответствует спецификации Юникода.

Формальные параметры можно объявить в **wmain** с помощью аналогичного формата для `main`. Затем можно передать в качестве аргументов "широкие" символы и указатель среды кодировки Юникод (необязательно) в программу. Параметры *argv* и *envp* для **wmain** имеют тип `wchar_t*`.

Если программа использует функцию `main`, среда многобайтовых символов создается операционной системой при запуске программы. Копия среды с расширенными символами создается только при необходимости (например, путем вызова функций [_wgetenv](../c-runtime-library/reference/getenv-wgetenv.md) или [_wputenv](../c-runtime-library/reference/putenv-wputenv.md) ). При первом вызове `_wputenv` или `_wgetenv`, если среда многобайтовой кодировки (MBCS) уже существует, создается соответствующая среда широкосимвольной строки, на которую затем указывает глобальная переменная `_wenviron`, представляющая собой широкосимвольную версию глобальной переменной `_environ`. В этот момент две копии среды (для многобайтовой кодировки и Юникода) существуют одновременно и поддерживаются операционной системой в течение всего срока жизни программы.

Аналогично, если программа использует функцию **wmain** , то при первом вызове `_putenv` или `getenv`создается среда MBCS (ASCII), на которую указывает `_environ` глобальная переменная.

Дополнительные сведения о среде MBCS см. в разделе [однобайтовые и многобайтовые наборы символов](../c-runtime-library/single-byte-and-multibyte-character-sets.md) в *справочнике по библиотеке времени выполнения.*

**Завершение блока, относящегося только к системам Майкрософт**

## <a name="see-also"></a>См. также:

[Функция main: запуск программы](../cpp/main-program-startup.md)