---
title: Перегрузка операторов
ms.date: 11/04/2016
f1_keywords:
- operator_cpp
- operator
helpviewer_keywords:
- redefinable operators [C++]
- non-redefinable operators [C++]
- operator keyword [C++]
- operators [C++], overloading
- operator overloading
ms.assetid: 56ad4c4f-dd0c-45e0-adaa-08fe98cb1f8e
ms.openlocfilehash: d6a294af3ea7ef6085eae0f7069ea2d1fdbb30e4
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50621745"
---
# <a name="operator-overloading"></a>Перегрузка операторов

Ключевое слово **operator** объявляет функцию, которая указывает, что означает *символ оператора* при применении к экземплярам класса. Это дает оператору более одного значения — "перегружает" его. Компилятор различает разные значения оператора, проверяя типы его операндов.

## <a name="syntax"></a>Синтаксис

> *Тип* **operator** *символ оператора* **(** *список параметров* **)**

## <a name="remarks"></a>Примечания

Функцию большинства встроенных операторов можно переопределить глобально или для отдельных классов. Перегруженные операторы реализуются в виде функции.

Перегруженный оператор имеет имя вида **operator** *x*, где *x* — это оператор из приведенной ниже таблицы. Например, для перегрузки оператора сложения следует определить функцию с именем **operator +**. Аналогичным образом, для перегрузки оператора сложения с присваиванием, **+=**, следует определить функцию с именем **operator +=**.

### <a name="redefinable-operators"></a>Переопределяемые операторы

|Оператор|Имя|Тип|
|--------------|----------|----------|
|**,**|Запятая|Бинарный|
|**\!**|Логическое НЕ|Унарный|
|**\!=**|Неравенство|Бинарный|
|**%**|Остаток|Бинарный|
|**%=**|Присваивание остатка|Бинарный|
|**&**|Побитовое И|Бинарный|
|**&**|Взятие адреса|Унарный|
|**&&**|Логическое И|Бинарный|
|**&=**|Побитовое И с присваиванием|Бинарный|
|**( )**|Вызов функции |—|
|**( )**|Оператор приведения типа|Унарный|
|**&#42;**|Умножение|Бинарный|
|**&#42;**|Разыменование указателя|Унарный|
|**&#42;=**|Умножение с присваиванием|Бинарный|
|**+**|Сложение|Бинарный|
|**+**|Унарный плюс|Унарный|
|**++**|Приращение <sup>1</sup>|Унарный|
|**+=**|Сложение с присваиванием|Бинарный|
|**-**|Вычитание|Бинарный|
|**-**|Унарное отрицание|Унарный|
|**--**|Уменьшение <sup>1</sup>|Унарный|
|**-=**|Вычитание с присваиванием|Бинарный|
|**->**|Выбор члена|Бинарный|
|**"->"&#42;**|Выбор указателя на член|Бинарный|
|**/**|Деление|Бинарный|
|**/=**|Деление с присваиванием|Бинарный|
|**\<**|Меньше|Бинарный|
|**<<**|Сдвиг влево|Бинарный|
|**<<=**|Сдвиг влево с присваиванием|Бинарный|
|**<=**|Меньше или равно|Бинарный|
|**=**|Присваивание|Бинарный|
|**==**|Равенство|Бинарный|
|**>**|Больше|Бинарный|
|**>=**|Больше или равно|Бинарный|
|**>>**|Сдвиг вправо|Бинарный|
|**>>=**|Сдвиг вправо с присваиванием|Бинарный|
|**[ ]**|Нижний индекс массива|—|
|**^**|Исключающее ИЛИ|Бинарный|
|**^=**|Исключающее ИЛИ с присваиванием|Бинарный|
|**&#124;**|Побитовое включающее ИЛИ|Бинарный|
|**&#124;=**|Побитовое включающее ИЛИ с присваиванием|Бинарный|
|**&#124;&#124;**|Логическое ИЛИ|Бинарный|
|**~**|Дополнение до единицы|Унарный|
|**delete**|Оператор delete|—|
|**new**|Оператор new|—|
|операторы преобразования|операторы преобразования|Унарный|

<sup>1</sup> Существуют две версии унарных операторов увеличения и уменьшения: префиксная и постфиксная.

Дополнительные сведения см. в разделе [Общие правила перегрузки операторов](../cpp/general-rules-for-operator-overloading.md). Ограничения для разных категорий перегруженных операторов описываются в следующих разделах:

- [Унарные операторы](../cpp/overloading-unary-operators.md)

- [Бинарные операторы](../cpp/binary-operators.md)

- [Присваивание](../cpp/assignment.md)

- [Вызов функции](../cpp/function-call-cpp.md)

- [Индексация](../cpp/subscripting.md)

- [Доступ к членам класса](../cpp/member-access.md)

- [Увеличение и уменьшение](../cpp/increment-and-decrement-operator-overloading-cpp.md).

- [Пользовательские преобразования типов](../cpp/user-defined-type-conversions-cpp.md)

Операторы, перечисленные в следующей таблице, не могут быть перегружены. В таблице содержатся символы препроцессора **#** и **##**.

### <a name="nonredefinable-operators"></a>Непереопределяемые операторы

|Оператор|name|
|-|-|
|**.**|Выбор члена|
|**.&#42;**|Выбор указателя на член|
|**::**|Разрешение области|
|**? :**|Условие|
|**#**|Препроцессор: преобразование в строку|
|**##**|Препроцессор: конкатенация|

Хотя перегруженные операторы обычно вызываются компилятором неявным образом при их появлении в коде, их можно вызывать и явным образом — точно так же, как и любую функцию-член или функцию, не являющуюся членом.

```cpp
Point pt;
pt.operator+( 3 );  // Call addition operator to add 3 to pt.
```

## <a name="example"></a>Пример

В следующем примере показана перегрузка оператора **+**, складывающая два комплексных числа и возвращающая результат.

```cpp
// operator_overloading.cpp
// compile with: /EHsc
#include <iostream>
using namespace std;

struct Complex {
   Complex( double r, double i ) : re(r), im(i) {}
   Complex operator+( Complex &other );
   void Display( ) {   cout << re << ", " << im << endl; }
private:
   double re, im;
};

// Operator overloaded using a member function
Complex Complex::operator+( Complex &other ) {
   return Complex( re + other.re, im + other.im );
}

int main() {
   Complex a = Complex( 1.2, 3.4 );
   Complex b = Complex( 5.6, 7.8 );
   Complex c = Complex( 0.0, 0.0 );

   c = a + b;
   c.Display();
}
```

```Output
6.8, 11.2
```

## <a name="in-this-section"></a>Содержание раздела

- [Общие правила перегрузки операторов](../cpp/general-rules-for-operator-overloading.md)

- [Перегрузка унарных операторов](../cpp/overloading-unary-operators.md)

- [Бинарные операторы](../cpp/binary-operators.md)

- [Присваивание](../cpp/assignment.md)

- [Вызов функции](../cpp/function-call-cpp.md)

- [Индексация](../cpp/subscripting.md)

- [Доступ к членам](../cpp/member-access.md)

## <a name="see-also"></a>См. также

[Встроенные операторы C++, приоритет и ассоциативность](../cpp/cpp-built-in-operators-precedence-and-associativity.md)<br/>
[Ключевые слова](../cpp/keywords-cpp.md)
