---
title: Указание времени и места применения примечания
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- _Group_
- _At_
- _When_
- _At_buffer_
ms.assetid: 8e4f4f9c-5dfa-4835-87df-ecd1698fc650
ms.openlocfilehash: af1f5a454659cad6584d63b5de23223f27170198
ms.sourcegitcommit: 7bea0420d0e476287641edeb33a9d5689a98cb98
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2020
ms.locfileid: "79467153"
---
# <a name="specifying-when-and-where-an-annotation-applies"></a>Указание времени и места применения примечания

Если примечание условно, оно может требовать, чтобы другие примечания указали на это анализатору.  Например, если функция имеет переменную, которая может быть синхронной или асинхронной, функция ведет себя следующим образом: в синхронном случае она всегда выполняется успешно, но в асинхронном случае она сообщает об ошибке, если она не может быть выполнена немедленно. Когда функция вызывается синхронно, проверка значения результата не представляет никакого значения для анализатора кода, поскольку оно не было возвращено.  Однако если функция вызывается асинхронно и результат функции не проверяется, может возникнуть серьезная ошибка. Этот пример иллюстрирует ситуацию, в которой можно использовать примечание `_When_` для включения проверки, как описано далее в этой статье.

## <a name="structural-annotations"></a>Структурные заметки

Для того, чтобы контролировать, когда и в каких местах применяются примечания, используйте следующие структурные примечания.

|Заметка|Description|
|----------------|-----------------|
|`_At_(expr, anno-list)`|`expr` — это выражение, возвращающее lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.|
|`_At_buffer_(expr, iter, elem-count, anno-list)`|`expr` — это выражение, возвращающее lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.<br /><br /> `iter` — это имя переменной, область которой задается в заметке (включая `anno-list`). `iter` имеет неявный тип `long`. Переменные с одинаковыми именами в любой включающей области скрыты от оценки.<br /><br /> `elem-count` — это выражение, результатом вычисления которого является целое число.|
|`_Group_(anno-list)`|Примечания в `anno-list` рассматриваются как имеющие любой квалификатор, который применяется к групповому примечанию, применяемому к каждому примечанию.|
|`_When_(expr, anno-list)`|`expr` — это выражение, которое можно преобразовать в `bool`. Если он не равен нулю (`true`), то примечания, определенные в `anno-list`, считаются применимыми.<br /><br /> По умолчанию для каждого примечания в `anno-list`, `expr` интерпретируется с использованием входных значений, если это примечание с предусловием, и выходных значений, если это примечание с постусловием. Чтобы переопределить настройки по умолчанию, вы можете использовать встроенный `_Old_` для проверки постусловия, чтобы указать, что должны использоваться входные значения. **Примечание.**  Различные аннотации могут быть включены как следствие использования `_When_` если изменяемое значение, например `*pLength`, является вовлеченным, так как вычисленный результат `expr` в предусловии может отличаться от результата, полученного после выполнения условия.|

## <a name="see-also"></a>См. также раздел

- [Использование аннотаций SAL для уменьшения количества дефектов в коде C/C++](../code-quality/using-sal-annotations-to-reduce-c-cpp-code-defects.md)
- [Основные сведения о языке SAL](../code-quality/understanding-sal.md)
- [Создание примечаний к параметрам и возвращаемым значениям функций](../code-quality/annotating-function-parameters-and-return-values.md)
- [Аннотация поведения функций](../code-quality/annotating-function-behavior.md)
- [Аннотация структур и классов](../code-quality/annotating-structs-and-classes.md)
- [Аннотация поведения блокировки](../code-quality/annotating-locking-behavior.md)
- [Встроенные функции](../code-quality/intrinsic-functions.md)
- [Рекомендации и примеры](../code-quality/best-practices-and-examples-sal.md)
