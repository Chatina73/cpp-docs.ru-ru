---
title: Краткое руководство. Анализ кода для C/C++
description: Выполнение статического анализа C++ кода в Visual Studio для обнаружения распространенных проблем кода и дефектов.
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
ms.openlocfilehash: 5ee8f702ddf489732f664ae73eed75b18dc46e86
ms.sourcegitcommit: 7bea0420d0e476287641edeb33a9d5689a98cb98
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2020
ms.locfileid: "79467177"
---
# <a name="quickstart-code-analysis-for-cc"></a>Краткое руководство. Анализ кода для C/C++

Качество приложения можно улучшить путем регулярного выполнения анализа кода C или C++. Это может помочь найти распространенные проблемы, нарушения рекомендаций по программированию или ошибки, которые трудно обнаружить в процессе тестирования. Предупреждения, возникающие в ходе анализа кода, отличаются от ошибок и предупреждений компилятора, потому что при анализе кода выполняется поиск конкретных шаблонов кода, которые являются допустимыми, но, тем не менее, могут вызвать проблемы при использовании кода вами или другими специалистами.

## <a name="configure-rule-sets-for-a-project"></a>Настройка наборов правил для проекта

1. В **Обозреватель решений**откройте контекстное меню для имени проекта и выберите пункт **свойства**.

1. При необходимости в списках **Конфигурация** и **платформа** выберите конфигурацию сборки и целевую платформу.

1. Для выполнения анализа кода при каждом построении проекта с использованием выбранной конфигурации установите флажок **Включить анализ кода при сборке** . Вы также можете запустить анализ кода вручную, открыв меню **анализ** , а затем выбрав **выполнить анализ кода в** *имя_проекта* или **выполнив анализ кода в файле**.

1. Выберите [набор правил](using-rule-sets-to-specify-the-cpp-rules-to-run.md) , который вы хотите использовать, или создайте [Настраиваемый набор правил](using-rule-sets-to-specify-the-cpp-rules-to-run.md#to-create-a-rule-set-in-a-text-editor). Если вы используете LLVM/Clang-CL, см. раздел [Использование Clang в Visual Studio](../code-quality/clang-tidy.md) для настройки параметров анализа Clang.

### <a name="standard-cc-rule-sets"></a>Стандартные наборы правил C/C++

Visual Studio включает два стандартных набора правил для машинного кода.

|Набор правил|Description|
|--------------|-----------------|
|Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода|Этот набор правил ориентирован на наиболее важные проблемы в машинном коде, включая возможные уязвимости безопасности и случаи аварийного завершения работы приложений. Этот набор правил можно включить в любой настраиваемый набор правил, созданный для собственных проектов машинного кода.|
|Рекомендуемые Майкрософт правила для машинного кода|Этот набор правил охватывает широкий спектр проблем. Он включает все правила из набора "Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода".|

## <a name="run-code-analysis"></a>Запуск анализа кода

На странице анализ кода страницы свойств проекта можно настроить выполнение анализа кода при каждом построении проекта. Кроме того, можно запустить анализ кода вручную.

Чтобы запустить анализ кода для решения, выполните следующие действия.

- В меню **Сборка** выберите пункт **запустить анализ кода для решения**.

Чтобы запустить анализ кода для проекта, выполните следующие действия.

1. В обозреватель решений выберите имя проекта.

1. В меню **Сборка** выберите **выполнить анализ кода для** *имени проекта*.

Выполнение анализа кода для файла:

1. В обозреватель решений выберите имя файла.

1. В меню **Сборка** выберите пункт **запустить анализ кода для файла** или нажмите клавиши **CTRL + SHIFT + ALT + F7**.

   Будет выполнена компиляция проекта или решения и запуск анализа кода. Результаты отображаются в Список ошибок.

## <a name="analyze-and-resolve-code-analysis-warnings"></a>Анализ и устранение предупреждений функции анализа кода

Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в Список ошибок. Предупреждение будет развернуто для отображения дополнительных сведений о проблеме. По возможности функция анализа кода выводит на экран номера строк и логику анализа, вызвавшие предупреждение. Для получения подробных сведений о предупреждении, включая возможные решения проблемы, выберите идентификатор предупреждения, чтобы отобразить соответствующий раздел справки в Интернете.

При выборе предупреждения строка кода, вызвавшая предупреждение, выделяется в редакторе кода Visual Studio.

Поняв, в чем заключается проблема, можно разрешить ее в коде. Затем повторно запустите анализ кода, чтобы убедиться, что предупреждение больше не отображается в Список ошибок и что ваше исправление не породило новых предупреждений.

## <a name="suppress-code-analysis-warnings"></a>Подавлять предупреждения анализа кода

В некоторых случаях разработчик может принять решение не разрешать предупреждение анализа кода. Возможно, разрешение предупреждения требует слишком значительного переписывания кода в сравнении с вероятностью того, что проблема проявит себя в какой-либо реальной его реализации. Или, например, разработчик может посчитать, что используемая в предупреждении логика анализа не соответствует данному контексту. Можно отключить отдельные предупреждения, чтобы они больше не отображались в Список ошибок.

### <a name="to-suppress-a-warning"></a>Отключение предупреждения

1. Если подробные сведения не отображаются, выберите заголовок предупреждения, чтобы развернуть его.

1. Выберите ссылку **Действия** внизу предупреждения.

1. Выберите **подавить сообщение** , а затем выберите **в списке Источник**.

   Подавление сообщения вставляет `#pragma warning (disable:[warning ID])`, которое подавляет предупреждение для строки кода.

## <a name="create-work-items-for-code-analysis-warnings"></a>Создание рабочих элементов для предупреждений анализа кода

Для регистрации ошибок в журнале из среды Visual Studio можно использовать функцию отслеживания рабочих элементов. Чтобы использовать эту возможность, необходимо подключиться к экземпляру Team Foundation Server.

### <a name="to-create-a-work-item-for-one-or-more-cc-code-warnings"></a>Создание рабочего элемента для одного или нескольких предупреждений кода C/C++

1. В Список ошибок разверните и выберите предупреждения.

1. В контекстном меню предупреждений выберите команду **создать рабочий элемент**, а затем выберите тип рабочего элемента.

1. Visual Studio создает один рабочий элемент для выбранных предупреждений и отображает рабочий элемент в окне документа интегрированной среды разработки.

1. Добавьте дополнительные сведения, а затем выберите **сохранить рабочий элемент**.

## <a name="search-and-filter-code-analysis-results"></a>Поиск и фильтрация результатов анализа кода

Можно выполнять поиск в длинных списках предупреждений, а также фильтровать предупреждения в решениях, состоящих из нескольких проектов.

- **Чтобы отфильтровать предупреждения по названию или идентификатору предупреждения**: введите ключевое слово в поле поиска.

- **Для фильтрации предупреждений по серьезности**: по умолчанию сообщениям анализа кода присваивается серьезность **предупреждения**. Можно назначить серьезность одного или нескольких сообщений как **ошибку** в настраиваемом наборе правил. В столбце **серьезность** **Список ошибок**выберите стрелку раскрывающегося списка и щелкните значок фильтра. Выберите **предупреждение** или **Ошибка** , чтобы отобразить только те сообщения, которым назначен соответствующий уровень серьезности. Щелкните **выбрать все** , чтобы отобразить все сообщения.

## <a name="see-also"></a>См. также раздел

- [Анализ кода для C/C++](../code-quality/code-analysis-for-c-cpp-overview.md)
