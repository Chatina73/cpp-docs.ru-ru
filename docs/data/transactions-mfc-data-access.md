---
title: Транзакции (доступ к данным MFC)
ms.date: 11/04/2016
helpviewer_keywords:
- transactions [C++], support for
- transactions [C++]
- databases [C++], transactions
ms.assetid: f80afbfe-1517-4fec-8870-9ffc70a58b05
ms.openlocfilehash: e3dc5b9319a8745ddb446ae7dbe895bfcd446c37
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62152661"
---
# <a name="transactions--mfc-data-access"></a>Транзакции (доступ к данным MFC)

Концепция транзакции была разработана для обработки случаев, в которых результирующее состояние базы данных зависит от общей успешности выполнения ряда операций. Это может происходить потому, что последующие операции могут изменять результаты предыдущих операций. В таких случаях, если какая либо операция завершается ошибкой, результирующее состояние может быть неопределенным.

Чтобы решить эту проблему, в транзакциях группируются серии операций таким образом,  что гарантируется целостность конечного результата. Все операции должны завершиться успешно и затем быть подтверждены (записаны в базу данных), либо вся транзакция завершается ошибкой. Отмена транзакции называется откатом. Откат позволяет отказаться от изменений и вернуть базу данных в предыдущее состояние.

Например, в автоматизированной банковской транзакции, при переводе денег со счета A на счет B, как снятие с А, так и зачисление на B должны успешно завершиться, чтобы корректно обработать денежные средства, или вся транзакция должна закончиться откатом.

Транзакция должна иметь набор свойств ACID, что означает следующее:

- **Атомарность** транзакции является неделимой единицей работы и выполняется только один раз; все работу или ни одна из них.

- **Согласованность** -транзакция сохраняет согласованность данных, преобразуя одно согласованное состояние данных в другое согласованное состояние данных. Данные в транзакции должны иметь семантическую сохранность.

- **Изоляция** транзакции — это единица изоляции и каждая возникает отдельно и независимо от параллельных транзакций. Транзакция никогда не должна включать промежуточные стадии другой транзакции.

- **Устойчивость** транзакция является единицей восстановления. Если транзакция выполнена успешно, ее изменения сохраняются даже в том случае, если система зависает или завершает работы. Если транзакция дает сбой, система остается в предыдущем состоянии, которое было до подтверждения транзакции.

Можно выполнять поддержку транзакций в OLE DB (см. в разделе [поддержка транзакций в OLE DB](../data/oledb/supporting-transactions-in-ole-db.md)) или ODBC (см. в разделе [транзакции (ODBC)](../data/odbc/transaction-odbc.md)).

Распределенная транзакция предназначена для обновления распределенных данных, т.е., данных на нескольких компьютерах в сети. Если требуется для поддержки транзакций в распределенной системе, следует использовать ADO.NET, а не поддержку транзакций OLE DB.

## <a name="see-also"></a>См. также

[Доступ к данным, программирование (MFC/ATL)](../data/data-access-programming-mfc-atl.md)