---
title: __crtLCMapStringW
ms.date: 11/04/2016
apiname:
- __crtLCMapStringW
apilocation:
- msvcr90.dll
- msvcr110_clr0400.dll
- msvcr100.dll
- msvcrt.dll
- msvcr120.dll
- msvcr110.dll
- msvcr80.dll
apitype: DLLExport
f1_keywords:
- __crtLCMapStringW
helpviewer_keywords:
- __crtLCMapStringW
ms.assetid: 45b4ac0e-438c-4fa3-b4d1-34195f4467d9
ms.openlocfilehash: 0c3752baba05e18903c32919505d702081d09dca
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50468423"
---
# <a name="crtlcmapstringw"></a>__crtLCMapStringW

Сопоставляет одну строку символов другой, выполняя указанное преобразование, зависящее от языкового стандарта. Эту функцию можно также использовать для создания ключа сортировки для входной строки.

## <a name="syntax"></a>Синтаксис

```cpp
int __crtLCMapStringW(
   LCID    Locale,
   DWORD   dwMapFlags,
   LPCWSTR lpSrcStr,
   int     cchSrc,
   LPWSTR  lpDestStr,
   int     cchDest)
```

#### <a name="parameters"></a>Параметры

*Языковой стандарт*<br/>
Идентификатор языкового стандарта. Языковой стандарт предоставляет контекст для сопоставления строк или создания ключа сортировки. Приложение может использовать макрос `MAKELCID` для создания идентификатора языкового стандарта.

*dwMapFlags*<br/>
Тип преобразования, который будет использоваться при сопоставлении строк или создании ключа сортировки.

*lpSrcStr*<br/>
Указатель на исходную строку, которая используется функцией для сопоставления или создания ключа сортировки. Предполагается, что этот параметр будет строкой в Юникоде.

*cchSrc*<br/>
Размер (в символах) строки, на которую указывает параметр `lpSrcStr` . Это число может содержать или не содержать символ конца строки NULL.

Значение `cchSrc`, равное –1, означает, что строка, на которую указывает параметр `lpSrcStr`, оканчивается нуль-символом. Если это так, и эта функция используется в режиме сопоставления строк, то функция сама вычисляет длину строки и ставит в конец сопоставленной строки, хранящейся в `*lpDestStr`, нуль-символ.

*lpDestStr*<br/>
Длинный указатель на буфер, в котором функция хранит сопоставленную строку или ключ сортировки.

*cchDest*<br/>
Размер, в символах, буфера, на который указывает параметр `lpDestStr`.

## <a name="return-value"></a>Возвращаемое значение

Если значение `cchDest` отлично от нуля, число символов (или байтов, если указан `LCMAP_SORTKEY` ), записанных в буфер, указывает на успех. Это число включает место для символа конца строки NULL.

Если значение `cchDest` равно нулю, то размер буфера в символах (или байтах, если указан `LCMAP_SORTKEY` ), требуемый для получения преобразованной строки или ключа сортировки, указывает на успех. Этот размер включает место для символа конца строки NULL.

Нулевое значение означает сбой. Чтобы получить расширенные сведения об ошибке, следует вызвать функцию `GetLastError` .

## <a name="remarks"></a>Примечания

Если значение `cchSrc` больше нуля и параметр `lpSrcStr` представляет собой строку, завершающуюся нуль-символом, то функция `__crtLCMapStringW` устанавливает для параметра `cchSrc` значение, равное длине строки. Затем функция `__crtLCMapStringW` вызывает версию для расширенных символов (Юникод) функции `LCMapString` с указанными параметрами. Дополнительные сведения о параметрах и значениях, возвращаемых этой функцией, см. в разделе о функции [LCMapString](/windows/desktop/api/winnls/nf-winnls-lcmapstringa).

## <a name="requirements"></a>Требования

|Подпрограмма|Обязательный заголовок|
|-------------|---------------------|
|__crtLCMapStringW|awint.h|