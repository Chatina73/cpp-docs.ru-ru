---
title: Текстовые и двоичные потоки
ms.date: 11/04/2016
helpviewer_keywords:
- binary streams
- text streams
ms.assetid: 57035e4a-955d-4e04-a560-fcf67ce68b4e
ms.openlocfilehash: a47c0b79b10f685c1f43ae4bfbfc6e1b9ea2b508
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50664910"
---
# <a name="text-and-binary-streams"></a>Текстовые и двоичные потоки

Текстовый поток состоит из одной или нескольких строк текста, которые можно вывести на ориентированный на текст дисплей, чтобы их можно было прочитать. При чтении из текстового потока программа считывает символ `NL` (новая строка) в конце каждой строки. При записи в текстовый поток программа записывает символ `NL` для обозначения конца строки. Для сопоставления различных соглашений о представлении текста в файлах в различных целевых средах библиотечные функции могут изменять количество и представление символов, передаваемых между программой и текстовым потоком.

Таким образом, перемещение в текстовом потоке ограничено. Индикатор текущей позиции в файле можно получить с помощью функции [fgetpos](../c-runtime-library/reference/fgetpos.md) или [ftell](../c-runtime-library/reference/ftell-ftelli64.md). Функции [fsetpos](../c-runtime-library/reference/fsetpos.md) или [fseek](../c-runtime-library/reference/fseek-fseeki64.md) позволяют установить позицию в текстовом потоке на позицию, полученную описанным выше образом, либо на начало или конец потока. Любое другое изменение позиции может не поддерживаться.

Для максимальной переносимости программа не должна записывать следующее.

- Пустые файлы.

- Пробельные символы в конце строки.

- Частичные строки (опуская символ `NL` в конце файла).

- Символы, отличные от печатных символов, NL и `HT` (горизонтальной табуляции).

При выполнении этих правил последовательность символов, считываемых из текстового потока (как однобайтовые или многобайтовые символы) будет соответствовать последовательности символов, записанной в текстовый поток при создании файла. В противном случае библиотечные функции могут удалить создаваемый файл, если в момент закрытия он был пуст. Либо они могут изменять или удалять символы, записываемые в файл.

Двоичный поток состоит из одного или нескольких байтов произвольных данных. Можно записать значение, хранящееся в произвольном объекте, в двоичный (ориентированный на байты) поток и считать в точности те данные, которые хранились в объекте при его записи. Библиотечные функции не изменяют байты, передаваемые между программой и двоичным потоком. Они могут, однако, добавить произвольное число нулевых байтов в конец файла, записанного с использованием двоичного потока. Программа должна уметь работать с этими дополнительными нулевыми байтами в конце любого двоичного потока.

Таким образом, позиционирование в двоичном потоке хорошо определено, за исключением позиционирования относительно конца потока. Можно получить и изменить текущий индикатор позиции в файле тем же образом, что и для текстового потока. Более того, в функциях [ftel](../c-runtime-library/reference/ftell-ftelli64.md) и [fseek](../c-runtime-library/reference/fseek-fseeki64.md) отсчет смещений начинается от начала потока (первый байт в потоке имеет нулевой номер), поэтому целочисленная арифметика дает для этих смещений предсказуемые результаты.

Байтовый поток обрабатывает файл как последовательность байтов. В рамках программы поток выглядит как та же последовательность байтов, за исключением возможных изменений, описанных выше.

## <a name="see-also"></a>См. также

[Файлы и потоки](../c-runtime-library/files-and-streams.md)