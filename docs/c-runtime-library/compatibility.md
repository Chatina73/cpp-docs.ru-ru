---
title: Совместимость
description: Описывает совместимость библиотеки Microsoft универсального времени выполнения C (UCRT) со стандартной библиотекой C, POSIX, безопасностью CRT и приложениями Магазина.
ms.date: 9/11/2020
helpviewer_keywords:
- CRT, compatibility
- compatibility, C runtime libraries
- compatibility
ms.assetid: 346709cb-edda-4909-9a19-3d253eddb6b7
ms.openlocfilehash: 711d5b3c95269413a0d94f568d3e3cb7b7dff721
ms.sourcegitcommit: a1676bf6caae05ecd698f26ed80c08828722b237
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91506875"
---
# <a name="compatibility"></a>Совместимость

Универсальная библиотека времени выполнения C (UCRT) поддерживает большинство стандартных библиотек C, необходимых для соответствия C++. Он реализует библиотеку C99 (ISO/IEC 9899:1999) с определенными исключениями:

- строгое совместимость типов в \<complex.h> .
- `aligned_alloc`, который, вероятно, не будет реализован, так как операционная система Windows не поддерживает выделенные распределения. Вместо этого используйте не стандартный `_aligned_malloc` .
- `strerrorlen_s`
- Атомарная поддержка в \<stdatomic.h>
- Поддержка потоков в \<threads.h>

UCRT также реализует большое подмножество библиотеки POSIX. 1 (ISO/IEC 9945-1:1996, интерфейс прикладного программного интерфейса POSIX) C. Однако он не полностью соответствует ни одному конкретному стандарту POSIX. UCRT также реализует несколько функций и макросов, относящихся к Microsoft, не входящих в стандарт.

Функции, относящиеся к реализации Майкрософт Visual C++, находятся в библиотеке vcruntime.  Многие из этих функций предназначены для внутреннего использования и не могут быть вызваны пользовательским кодом. Некоторые предназначены для использования при отладке и проверке совместимости реализаций.

Стандартная библиотека C++ резервирует имена, которые начинаются с символа подчеркивания в глобальном пространстве имен, в реализации. Функции POSIX и библиотека времени выполнения Microsoft относятся к глобальному пространству имен, но не являются частью стандартной библиотеки времени выполнения C. Вот почему предпочтительные реализации этих функций Майкрософт имеют подчеркивание в начале. Для переносимости библиотека UCRT также поддерживает имена по умолчанию, но компилятор Microsoft C++ выдает предупреждение об устаревании при компиляции кода, который использует их. Только имена по умолчанию являются устаревшими, а не сами функции. Чтобы подавить предупреждение, задайте `_CRT_NONSTDC_NO_WARNINGS` перед включением каких-либо заголовков в код, использующий исходные имена POSIX.

Про некоторые функции в стандартной библиотеке C известно, что имеется тенденция к их небезопасному использованию из-за неправильно используемых параметров и непроверенных буферов. Эти функции часто являются источником проблем с безопасностью в коде. Корпорация Майкрософт создала набор более безопасных версий этих функций, которые проверяют использование параметров. Они вызывают обработчик недопустимых параметров при обнаружении проблемы во время выполнения.  По умолчанию компилятор Microsoft C++ выдает предупреждение об устаревании, когда используется функция, для которой имеется более безопасный вариант. При компиляции кода как C++ можно определить `_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES` как 1, чтобы устранить большинство предупреждений. Этот макрос включает перегрузки шаблонов для вызова более безопасных вариантов при сохранении переносимого исходного кода. Чтобы подавить предупреждение, определите `_CRT_SECURE_NO_WARNINGS` перед тем, как включить какие-либо заголовки в код, который использует эти функции. Дополнительные сведения см. в разделе [Функции безопасности в CRT](../c-runtime-library/security-features-in-the-crt.md).

За исключением указанного в документации по конкретным функциям библиотека UCRT совместима с Windows API.  Некоторые функции не поддерживаются в приложениях Магазина Windows или универсальная платформа Windows ([UWP](/uwp)). Эти функции перечислены в [функциях CRT, которые не поддерживаются в универсальная платформа Windows приложениях](../cppcx/crt-functions-not-supported-in-universal-windows-platform-apps.md).

## <a name="related-articles"></a>Связанные статьи

|Заголовок|Описание|
|-----------|-----------------|
|[Приложения UWP, среда выполнения Windows и среда выполнения C](../c-runtime-library/windows-store-apps-the-windows-runtime-and-the-c-run-time.md)|Описывает, когда подпрограммы UCRT несовместимы с универсальными приложениями Windows или приложениями Microsoft Store.|
|[Соответствие стандарту ANSI C](../c-runtime-library/ansi-c-compliance.md)|Описывает именования, соответствующие стандартам, в UCRT.|
|[UNIX](../c-runtime-library/unix.md)|Рекомендации по переносу программ в UNIX.|
|[Платформы Windows (CRT)](../c-runtime-library/windows-platforms-crt.md)|Перечисление операционных систем, поддерживающих CRT.|
|[Обратная совместимость](../c-runtime-library/backward-compatibility.md)|Описание сопоставлений старых имен CRT с новыми.|
|[Возможности библиотеки CRT](../c-runtime-library/crt-library-features.md)|Общие сведения о файлах библиотеки CRT (LIB) и соответствующих параметрах компилятора.|
