---
title: strftime, wcsftime, _strftime_l, _wcsftime_l
ms.date: 4/2/2020
api_name:
- strftime
- _wcsftime_l
- _strftime_l
- wcsftime
- _o__strftime_l
- _o__wcsftime_l
- _o_strftime
- _o_wcsftime
api_location:
- msvcrt.dll
- msvcr80.dll
- msvcr90.dll
- msvcr100.dll
- msvcr100_clr0400.dll
- msvcr110.dll
- msvcr110_clr0400.dll
- msvcr120.dll
- msvcr120_clr0400.dll
- ucrtbase.dll
- api-ms-win-crt-time-l1-1-0.dll
- api-ms-win-crt-private-l1-1-0
api_type:
- DLLExport
topic_type:
- apiref
f1_keywords:
- _tcsftime
- strftime
- wcsftime
- _strftime_l
- _wcsftime_l
helpviewer_keywords:
- _strftime_l function
- strftime function
- tcsftime function
- _wcsftime_l function
- wcsftime function
- _tcsftime function
- time strings
ms.assetid: 6330ff20-4729-4c4a-82af-932915d893ea
ms.openlocfilehash: 5da2c128c54fd88bb874b360f5a966f17b14a935
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81350016"
---
# <a name="strftime-wcsftime-_strftime_l-_wcsftime_l"></a>strftime, wcsftime, _strftime_l, _wcsftime_l

Форматируют строку времени.

## <a name="syntax"></a>Синтаксис

```C
size_t strftime(
   char *strDest,
   size_t maxsize,
   const char *format,
   const struct tm *timeptr
);
size_t _strftime_l(
   char *strDest,
   size_t maxsize,
   const char *format,
   const struct tm *timeptr,
   _locale_t locale
);
size_t wcsftime(
   wchar_t *strDest,
   size_t maxsize,
   const wchar_t *format,
   const struct tm *timeptr
);
size_t _wcsftime_l(
   wchar_t *strDest,
   size_t maxsize,
   const wchar_t *format,
   const struct tm *timeptr,
   _locale_t locale
);
```

### <a name="parameters"></a>Параметры

*strDest*<br/>
Выходная строка.

*Maxsize*<br/>
Размер *буфера strDest,* измеряемый в символах **(символ** или **wchar_t).**

*Формат*<br/>
Строка управления форматом.

*timeptr*<br/>
**тм** структуры данных.

*Языкового стандарта*<br/>
Используемый языковой стандарт.

## <a name="return-value"></a>Возвращаемое значение

**strftime** возвращает количество символов, помещенных в *strDest,* и **wcsftime** возвращает соответствующее количество широких символов.

Если общее количество символов, включая терминnulling null, больше, чем *максимальное,* то как **strftime,** так и **wcsftime** return 0 и содержимое *strDest* неопределенны.

Количество символов в *strDest* равно количеству буквальных символов в *формате,* а также любых символов, которые могут быть добавлены в *формат* с помощью кодов форматирования. нуль-символ, завершающий строку, не учитывается в возвращаемом значении.

## <a name="remarks"></a>Remarks

**Strftime** и **wcsftime** функции **формата тм** время значение в *timeptr* в соответствии с поставленным *аргументом формата* и хранить результат в *буфере strDest*. В лучшем случае в строку помещаются *символы максразмера.* Для описания полей в структуре *timeptr,* [см.](asctime-wasctime.md) **wcsftime** является широкохарактерным эквивалентом **strftime;** аргумент строки-указателя указывает на широкохарактерную строку. В остальном эти функции ведут себя одинаково.

Эта функция проверяет свои параметры. Если *strDest,* *формат*или *timeptr* является нулевой указателем, или если структура данных **тм,** адресованная *timeptr,* недействительна (например, если она содержит значения за диапазоном времени или даты), или если строка *формата* содержит недействительный код форматирования, вызывается недействительный обработчик параметров, как описано в [проверке параметра.](../../c-runtime-library/parameter-validation.md) Если выполнение разрешено продолжать, функция возвращает 0 и устанавливает **errno** к **EINVAL**.

По умолчанию глобальное состояние этой функции приспозировано к приложению. Чтобы изменить это, [см. Глобальное состояние в CRT](../global-state.md).

### <a name="generic-text-routine-mappings"></a>Универсальное текстовое сопоставление функций

|Подпрограмма TCHAR.H|_UNICODE и _MBCS не определены|_MBCS определено|_UNICODE определено|
|---------------------|------------------------------------|--------------------|-----------------------|
|**_tcsftime**|**strftime**|**strftime**|**wcsftime**|

Аргумент *формата* состоит из одного или нескольких кодов; как в **printf**, коды форматирования предшествуют процент знак ().**%** Персонажи, которые не **%** начинаются с копируются без изменений в *strDest*. Категория **LC_TIME** текущего локализации влияет на форматирование **вывода strftime.** (Для получения дополнительной информации о **LC_TIME,** [см. setlocale](setlocale-wsetlocale.md).) Функции **strftime** и **wcsftime** используют установленный в настоящее время локал. **_strftime_l** и **_wcsftime_l** версии этих функций идентичны, за исключением того, что они принимают локал из них в качестве параметра и используют его вместо установленного в настоящее время локаль. Для получения дополнительной информации см. [Locale](../../c-runtime-library/locale.md).

Функции **strftime** поддерживают эти коды форматирования:

|||
|-|-|
|Код|Строка замены|
|**%a**|Сокращенное название будний день в локали|
|**%A**|Полное название будний день в локализуе|
|**%b**|Сокращенное название месяца в локали|
|**%B**|Имя полного месяца в локализуе|
|**%c**|Представление даты и времени, соответствующее языковому стандарту|
|**%C**|Год, разделенный на 100 и усеченный до целых, как десятичное число (00–99)|
|**%d**|День месяца как десятичное число (01 - 31)|
|**%D**|Эквиваленто **%m/%d/%y**|
|**%e**|День месяца как десятичное число (1 - 31), где однозначным цифрам предшествует пространство|
|**%F**|Эквивалентный **%Y-%m-%d**|
|**%g**|Последние 2 цифры ISO 8601 недельного года в виде десятичной номера (00 - 99)|
|**%G**|Недельный год ISO 8601 как десятичное число|
|**%h**|Сокращенное название месяца (эквивалент **%b)**|
|**%H**|Час в круглосуточном формате (00 - 23)|
|**%I**|Час в 12-часовом формате (01 - 12)|
|**%j**|День года как десятичное число (001 - 366)|
|**%m**|Месяц как десятичная цифра (01 - 12)|
|**%M**|Минута как десятичная цифра (00 - 59)|
|**%n**|Новый персонаж **(n**)|
|**%p**|Местность A.M./P.M. для 12-часового формата|
|**%r**|12-часовое время часы в локализуе|
|**%R**|Эквивалент **о %H:%M**|
|**%S**|Второй в десятичном номере (00 - 59)|
|**%t**|Горизонтальный символ вкладки **(ЗТ)**|
|**%T**|Эквиваленто **%H:%M:%S**, формат времени ISO 8601|
|**%u**|ISO 8601 будний день как десятичное число (1 - 7; Понедельник 1)|
|**%U**|Номер недели года как десятичное число (00 - 53), где первое воскресенье является первым днем недели 1|
|**%V**|Номер недели ISO 8601 как десятичное число (00 - 53)|
|**%w**|Будний день как десятичная цифра (0 - 6; Воскресенье 0)|
|**%W**|Номер недели года как десятичное число (00 - 53), где первый понедельник является первым днем недели 1|
|**%x**|Представление даты для локализовать|
|**%X**|Представление времени для локализовать|
|**%y**|Год без века, как десятичное число (00 - 99)|
|**%Y**|Год с веком как десятичное число|
|**%z**|Смещение от UTC в формате ISO 8601; нет символов, если часовой пояс неизвестен|
|**%**|Либо название часового пояса локали, либо аббревиатура часового пояса, в зависимости от настроек реестра; нет символов, если часовой пояс неизвестен|
|**%%**|Знак процента|

Как и в функции **#** **printf,** флаг может префиксировать любой код форматирования. В этом случае значение кода формата изменяется следующим образом.

|Код формата|Значение|
|-----------------|-------------|
|**%#a,** **%#A, %** **#b,** **% #B,**% **#g,**% **#G,** **% #h,** **% #n,** **% #p,** **% #t, %** **#u,** **% #w,** **% #X, % #z,** **% #Z,** **%#z****%#%**|**#** флаг игнорируется.|
|**%#c**|Длинное представление даты и времени, подходящее для локализов. Например: "Tuesday, March 14, 1995, 12:41:29".|
|**%#x**|Длинное представление даты, соответствующее локалю. Например: "Tuesday, March 14, 1995".|
|**%#d,** **%#D, %** **#e,** **% #F, % #H,** **% #I,**% **#j,** **% #m #M,**% **#M,** **% #r,** **% #R,**% #T **#S,** **% #U,** **% #U**, % **#V,**% **#W,** **% #y, %** **#Y** **%#H**|Удалите ведущие нули или пробелы (если таковые имеется).|

ISO 8601 недели и недели год производится **%V**, **%g**, и **%G**, использует неделю, которая начинается в понедельник, где неделя 1 является неделей, которая содержит 4 января, которая является первой неделей, которая включает в себя по крайней мере четыре дня в году. Если первый понедельник года является 2-м, 3-м или 4-м, то предыдущие дни являются частью последней недели предыдущего года. Для тех **дней, %V** заменяется 53, и как **%g** и **%G** заменяются цифрами предыдущего года.

## <a name="requirements"></a>Требования

|Подпрограмма|Обязательный заголовок|
|-------------|---------------------|
|**strftime**|\<time.h>|
|**wcsftime**|\<time.h> или \<wchar.h>|
|**_strftime_l**|\<time.h>|
|**_wcsftime_l**|\<time.h> или \<wchar.h>|

**Функции _strftime_l** и **_wcsftime_l** специфичны для майкрософт. Дополнительные сведения о совместимости см. в статье [Compatibility](../../c-runtime-library/compatibility.md).

## <a name="example"></a>Пример

См. пример для [time](time-time32-time64.md).

## <a name="see-also"></a>См. также раздел

[Локаль](../../c-runtime-library/locale.md) <br/>
[Операции управления временем](../../c-runtime-library/time-management.md) <br/>
[Манипуляция строками](../../c-runtime-library/string-manipulation-crt.md) <br/>
[localeconv](localeconv.md) <br/>
[setlocale, _wsetlocale](setlocale-wsetlocale.md) <br/>
[strcoll Functions](../../c-runtime-library/strcoll-functions.md) <br/>
[strxfrm, wcsxfrm, _strxfrm_l, _wcsxfrm_l](strxfrm-wcsxfrm-strxfrm-l-wcsxfrm-l.md)<br/>
