---
title: mbrtoc16, mbrtoc323
ms.date: 11/04/2016
api_name:
- mbrtoc16
- mbrtoc32
api_location:
- msvcrt.dll
- msvcr80.dll
- msvcr90.dll
- msvcr100.dll
- msvcr100_clr0400.dll
- msvcr110.dll
- msvcr110_clr0400.dll
- msvcr120.dll
- msvcr120_clr0400.dll
- ucrtbase.dll
- api-ms-win-crt-convert-l1-1-0.dll
api_type:
- DLLExport
topic_type:
- apiref
f1_keywords:
- mbrtoc16
- mbrtoc32
- uchar/mbrtoc16
- uchar/mbrtoc32
helpviewer_keywords:
- mbrtoc16 function
- mbrtoc32 function
ms.assetid: 099ade4d-56f7-4e61-8b45-493f1d7a64bd
ms.openlocfilehash: 52bcec5911fdc2ecbb073ae0042777aa4eb2b963
ms.sourcegitcommit: f19474151276d47da77cdfd20df53128fdcc3ea7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2019
ms.locfileid: "70952447"
---
# <a name="mbrtoc16-mbrtoc32"></a>mbrtoc16, mbrtoc32

Преобразует первый многобайтовый символ в строке обычных символов в эквивалентный символ в кодировке UTF-16 или UTF-32.

## <a name="syntax"></a>Синтаксис

```C
size_t mbrtoc16(
   char16_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);

size_t mbrtoc32(
   char32_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);
```

### <a name="parameters"></a>Параметры

*местоназначение*<br/>
Указатель на **char16_t** или **char32_t** , эквивалентный многобайтовой кодировке для преобразования. Если значение равно null, функция не сохраняет значение.

*source*<br/>
Указатель на строку многобайтовых символов, которую нужно преобразовать.

*max_bytes*<br/>
Максимальное число байтов в *источнике* , которое необходимо проверить для преобразуемого символа. Это должно быть значение от одного до числа байтов, включая нулевой знак завершения, остающийся в *источнике*.

*state*<br/>
Указатель на объект состояния преобразования **mbstate_t** , используемый для интерпретации многобайтовой строки до одного или нескольких выходных символов.

## <a name="return-value"></a>Возвращаемое значение

При успешном выполнении возвращает значение первого из этих условий, которое применяется, учитывая текущее значение *состояния* :

|Значение|Условие|
|-----------|---------------|
|0|Следующий *max_bytes* или меньше символов, преобразованных из *источника* , соответствует расширенному символу null, который является значением, хранимым, если значение параметра *Destination* не равно null.<br /><br /> *State* содержит начальное состояние сдвига.|
|От 1 до *max_bytes*включительно|Возвращаемое значение — это число байтов *источника* , которые завершают допустимый многобайтовый символ. Преобразованный расширенный символ сохраняется, если *значение Destination* не равно null.|
|-3|Следующий расширенный символ, полученный при предыдущем вызове функции, был сохранен в *месте назначения* , если *значение Destination* не равно null. Этот вызов функции не использует байты из *источника* .<br /><br /> Когда *источник* указывает на многобайтовый символ, для представления которого требуется более одного расширенного символа (например, суррогатная пара), значение *State* обновляется таким образом, чтобы следующий вызов функции записывал дополнительный символ.|
|-2|Следующие *max_bytes* байты представляют неполный, но потенциально допустимый многобайтовый символ. В *месте назначения*не хранится значение. Этот результат может произойти, если *max_bytes* равен нулю.|
|-1|Произошла ошибка кодирования. Следующий *max_bytes* или меньше байтов не вносит вклад в полный и допустимый многобайтовый символ. В *месте назначения*не хранится значение.<br /><br /> **Еилсек** **хранится в состоянии** пересчета *и состояние преобразования не указано* .|

## <a name="remarks"></a>Примечания

Функция **mbrtoc16** считывает до *max_bytes* байт из *источника* , чтобы найти первый полный, допустимый многобайтовый символ, а затем сохраняет эквивалентный символ UTF-16 в *назначении*. Исходные байты интерпретируются в соответствии с многобайтовым языковым стандартом текущего потока. Если многобайтовый символ требует более одного выходного символа UTF-16, например суррогатной пары, то значение *состояния* задается для сохранения следующего символа UTF-16 в *месте назначения* при следующем вызове метода **mbrtoc16**. Функция **mbrtoc32** идентична, но выходные данные ХРАНЯТСЯ в кодировке UTF-32.

Если *Source* имеет значение null, эти функции возвращают эквивалент вызова с помощью аргументов **null** для *Destination*, **""** для *Source*и 1 для *max_bytes*. Переданные значения *Destination* и *max_bytes* игнорируются.

Если *Source* не равен null, функция начинается в начале строки и проверяет до *max_bytes* байт, чтобы определить число байтов, необходимых для завершения следующего многобайтового символа, включая любые последовательности сдвигов. Если проверяемые байты содержат допустимый и полный многобайтовый символ, функция преобразует его в эквивалентный 16- или 32-битовый расширенный символ (либо несколько символов). Если значение *Destination* не равно null, функция сохраняет первый (и, возможно, только) результирующий символ в назначении. Если требуются дополнительные выходные символы, значение задается в *состоянии*, поэтому последующие вызовы функции выводят дополнительные символы и возвращают значение-3. Если больше не требуются выходные символы, то для *State* задается начальное состояние сдвига.

## <a name="requirements"></a>Требования

|Функция|Заголовок C|Заголовок C++|
|--------------|--------------|------------------|
|**mbrtoc16**, **mbrtoc32**|\<uchar.h>|\<cuchar>|

Дополнительные сведения о совместимости см. в разделе [Совместимость](../../c-runtime-library/compatibility.md).

## <a name="see-also"></a>См. также

[Преобразование данных](../../c-runtime-library/data-conversion.md)<br/>
[Языковой стандарт](../../c-runtime-library/locale.md)<br/>
[Интерпретация последовательностей многобайтовых символов](../../c-runtime-library/interpretation-of-multibyte-character-sequences.md)<br/>
[c16rtomb, c32rtomb](c16rtomb-c32rtomb1.md)<br/>
[mbrtowc](mbrtowc.md)<br/>
[mbsrtowcs](mbsrtowcs.md)<br/>
[mbsrtowcs_s](mbsrtowcs-s.md)<br/>
