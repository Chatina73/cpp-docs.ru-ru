---
title: abort
ms.date: 1/02/2018
apiname:
- abort
apilocation:
- msvcrt.dll
- msvcr80.dll
- msvcr90.dll
- msvcr100.dll
- msvcr100_clr0400.dll
- msvcr110.dll
- msvcr110_clr0400.dll
- msvcr120.dll
- msvcr120_clr0400.dll
- ucrtbase.dll
- api-ms-win-crt-runtime-l1-1-0.dll
apitype: DLLExport
f1_keywords:
- Abort
helpviewer_keywords:
- aborting current process
- abort function
- processes, aborting
ms.openlocfilehash: d8cb190e36a64e8bd8cfcb75bc9a19c2a394fc48
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62342202"
---
# <a name="abort"></a>abort

Прерывает текущий процесс и возвращает код ошибки.

> [!NOTE]
> Не используйте этот метод, чтобы завершить работу, приложение Microsoft Store или приложение универсальной платформы Windows (UWP), за исключением сценариев тестирования или отладки. Закрытие приложения Store способов программным способом или пользовательского интерфейса не разрешены согласно [политики Microsoft Store](/legal/windows/agreements/store-policies). Дополнительные сведения см. в разделе [жизненный цикл приложения UWP](/windows/uwp/launch-resume/app-lifecycle).

## <a name="syntax"></a>Синтаксис

```C
void abort( void );
```

## <a name="return-value"></a>Возвращаемое значение

**Прервать** не возвращает управление вызывающему процессу. По умолчанию он проверяет наличие обработчика прерывания сигнала и вызывает `SIGABRT`, если он задан. Затем **прервать** завершает текущий процесс и возвращает код выхода для родительского процесса.

## <a name="remarks"></a>Примечания

**Блок, относящийся только к системам Microsoft**

По умолчанию при построении приложения с помощью библиотеки времени выполнения отладки **прервать** подпрограмма отображает сообщение об ошибке, прежде чем `SIGABRT` возникает. Для консольных приложений, работающих в режиме консоли, отправляется сообщение в `STDERR`. Классические приложения Windows и консольные приложения, запускаемые в окнах, отображают сообщение в окне сообщений. Чтобы отключить сообщение, снимите флаг `_WRITE_ABORT_MSG` с помощью функции [_set_abort_behavior](set-abort-behavior.md). Отображаемое сообщение зависит от версии используемой среды выполнения. Для приложений, созданных с помощью самых последних версий Visual C++ сообщение выглядит следующим образом:

> R6010 - abort() вызова

В предыдущих версиях библиотеки среды выполнения C отображается следующее сообщение:

> Это приложение запросило завершение среды выполнения необычным способом. За дополнительной информацией обращайтесь в службу поддержки приложения.

При компиляции программы в режиме отладки в окне сообщения отображаются параметры **Прервать**, **Повторить** или **Пропустить**. Если пользователь выбирает параметр **Прервать**, программа немедленно завершается и возвращает код выхода 3. Если пользователь выбирает параметр **Повторить**, вызывается отладчик (если он доступен) для JIT-отладки. Если пользователь выбирает **пропустить**, **прервать** продолжает нормальную обработку.

В розничной торговли и в отладочной сборке **прервать** проверяет, задано ли обработчик прерывания сигнала. Если обработчик сигналов не по умолчанию, **прервать** вызовы `raise(SIGABRT)`. С помощью функции [signal](signal.md) свяжите функцию обработчика сигналов прерывания с сигналом `SIGABRT`. Вы можете выполнить пользовательские действия — например, освободить ресурсы или записать данные сведений — и завершить работу приложения с кодом ошибки в функции обработчика. Если определен пользовательский обработчик сигналов, **прервать** не вызывает `SIGABRT` сигнала.

По умолчанию в неотладочных сборках классических и консольных приложений **прервать** затем вызывает механизм Windows Error Reporting Service (прежнее название аварийного восстановления. Watson), передающий корпорации Майкрософт отчеты о сбоях. Это поведение можно включить или отключить, вызвав `_set_abort_behavior` и задав или замаскировав флаг `_CALL_REPORTFAULT`. Если флаг установлен, в Windows появится окно сообщения, содержащее текст вида "Возникшая проблема привела к прекращению работы программы". Пользователь может вызвать отладчик с помощью кнопки **Отладка** или нажать кнопку **Закрыть программу**, чтобы завершить приложение с кодом ошибки, который определяется операционной системой.

Если обработчик отчетов об ошибках Windows не вызывается, затем **прервать** вызовы [_exit](exit-exit-exit.md) чтобы завершить процесс с выхода кода 3 и возвращает управление родительскому процессу или операционной системы. `_exit` не очищает буферы потоков и не выполняет обработку `atexit`/`_onexit`.

Дополнительные сведения об отладке CRT см. в разделе [Методы отладки CRT](/visualstudio/debugger/crt-debugging-techniques).

**Завершение блока, относящегося только к системам Майкрософт**

## <a name="requirements"></a>Требования

|Подпрограмма|Обязательный заголовок|
|-------------|---------------------|
|**abort**|\<process.h> или \<stdlib.h>|

## <a name="example"></a>Пример

Следующая программа пытается открыть файл и прерывается, если попытка завершается неудачей.

```C
// crt_abort.c
// compile with: /TC
// This program demonstrates the use of
// the abort function by attempting to open a file
// and aborts if the attempt fails.

#include  <stdio.h>
#include  <stdlib.h>

int main( void )
{
    FILE    *stream = NULL;
    errno_t err = 0;

    err = fopen_s(&stream, "NOSUCHF.ILE", "r" );
    if ((err != 0) || (stream == NULL))
    {
        perror( "File could not be opened" );
        abort();
    }
    else
    {
        fclose( stream );
    }
}
```

```Output
File could not be opened: No such file or directory
```

## <a name="see-also"></a>См. также

[Использование abort](../../cpp/using-abort.md)<br/>
[Функция abort](../../c-language/abort-function-c.md)<br/>
[Управление процессами и средой](../../c-runtime-library/process-and-environment-control.md)<br/>
[Функции _exec, _wexec](../../c-runtime-library/exec-wexec-functions.md)<br/>
[exit, _Exit, _exit](exit-exit-exit.md)<br/>
[raise](raise.md)<br/>
[signal](signal.md)<br/>
[Функции _spawn, _wspawn](../../c-runtime-library/spawn-wspawn-functions.md)<br/>
[_DEBUG](../../c-runtime-library/debug.md)<br/>
[_set_abort_behavior](set-abort-behavior.md)