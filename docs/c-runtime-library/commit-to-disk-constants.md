---
description: 'Дополнительные сведения: константы фиксации на диск'
title: Константы фиксации на диске
ms.date: 11/04/2016
f1_keywords:
- vc.constants
helpviewer_keywords:
- commit-to-disk constants
ms.assetid: 0b903b23-b4fa-431e-a937-51d95f695ecf
ms.openlocfilehash: 416729f4b3b7bfdfdcb0ba11193f6c2a52691e6e
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97322650"
---
# <a name="commit-to-disk-constants"></a>Константы фиксации на диске

**Блок, относящийся только к системам Microsoft**

## <a name="syntax"></a>Синтаксис

```
#include <stdio.h>
```

## <a name="remarks"></a>Remarks

Эти константы, используемые корпорацией Майкрософт, определяют, куда сохраняется связанный с открытым файлом буфер: в буферы операционной системы или на диск. Режим содержится в строке, указывающей тип доступа на чтение или запись (**"r"**, **"w"**, **"a"**, **"r+"**, **"w+"**, **"a+"**).

Существуют следующие режимы фиксации на диске:

- **c**

   Записывает на диск несохраненное содержимое указанного буфера. Такая фиксация на диск выполняется только при явном вызове функций [fflush](../c-runtime-library/reference/fflush.md) и [_flushall](../c-runtime-library/reference/flushall.md). Этот режим полезен при работе с конфиденциальными данными. Например, если программа завершит работу после вызова `fflush` или `_flushall`, данные гарантированно достигнут буферов операционной системы. Но если при открытии файла не использовался параметр **c**, данные могут не сохраниться на диск, если работа операционной системы завершится.

- **n**

   Записывает в буферы операционной системы несохраненное содержимое указанного буфера. Операционная система может кэшировать данные и самостоятельно выбирать оптимальное время для записи на диск. Во многих случаях это повышает эффективность работы программы. Но если сохранность данных имеет для вас критическую важность (например, если это данные банковских транзакций или билетов авиакомпании), мы рекомендуем использовать параметр **c**. По умолчанию применяется режим **n**.

> [!NOTE]
> Параметры **c** и **n** не входят в стандарт ANSI для `fopen`, а представляют собой расширения корпорации Майкрософт, и их не следует использовать, если требуется обеспечить переносимость ANSI.

## <a name="using-the-commit-to-disk-feature-with-existing-code"></a>Использование фиксации на диск для существующего кода

По умолчанию вызов функций библиотеки [fflush](../c-runtime-library/reference/fflush.md) или [_flushall](../c-runtime-library/reference/flushall.md) приводит к записи данных в буферы, поддерживаемые операционной системой. Операционная система самостоятельно определяет оптимальное время для фактической записи данных на диск. Функция фиксации на диск, реализованная в библиотеке среды выполнения, позволяет выполнять запись критически важных данных непосредственно на диск, а не в буферы операционной системы. Эту возможность для существующей программы можно предоставить, не переписывая код программы. Для этого свяжите ее объектные файлы с файлом COMMODE.OBJ.

После этого в исполняемом файле все вызовы функции `fflush` сохраняют содержимое буфера непосредственно на диск, а вызовы функции `_flushall` сохраняют на диск содержимое всех буферов. COMMODE.OBJ влияет только на работу этих двух функций.

**Завершение блока, относящегося только к системам Майкрософт**

## <a name="see-also"></a>См. также

[Потоковый ввод-вывод](../c-runtime-library/stream-i-o.md)<br/>
[_fdopen, _wfdopen](../c-runtime-library/reference/fdopen-wfdopen.md)<br/>
[fopen, _wfopen](../c-runtime-library/reference/fopen-wfopen.md)<br/>
[Глобальные константы](../c-runtime-library/global-constants.md)
