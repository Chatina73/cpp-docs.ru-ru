---
title: Реализация многопоточности на языке C++ с помощью классов MFC
ms.date: 08/27/2018
helpviewer_keywords:
- MFC [C++], multithreading
- threading [C++], MFC
- worker threads [C++]
- synchronization classes [C++]
- synchronization [C++], multithreading
- threading [MFC], about threading
- CWinThread class, purpose of
- multithreading [C++], MFC
- threading [MFC]
- user interface threads [C++]
ms.assetid: 979605f8-3988-44b5-ac9c-b8cce7fcce14
ms.openlocfilehash: bcffc2964d8e15fd47f437366863748175e12622
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62407670"
---
# <a name="multithreading-with-c-and-mfc"></a>Реализация многопоточности на языке C++ с помощью классов MFC

Библиотека Microsoft Foundation Class (MFC) предоставляет поддержку для многопоточных приложений. В этом разделе описываются процессы и потоки, а также подход MFC к многопоточности.

Процесс является выполняющимся экземпляром приложения. Например при двойном щелчке значка "Блокнот", можно запустить процесс, который выполняет программу Блокнот.

Поток — это ветвь выполнения внутри процесса. При запуске программы Блокнот операционная система создает процесс и начинает выполнение основного потока этого процесса. Когда поток прекращается, завершается и процесс. Этот основной поток передается операционной системе кодом запуска в форме адреса функции. Обычно это адрес `main` или `WinMain` предоставляется.

Если требуется, можно создать дополнительные потоки в приложении. Вы можете сделать для обработки фоновых или обслуживающих задач, если вы не хотите пользователя подождать их завершения. Все потоки в приложениях MFC представлены [CWinThread](../mfc/reference/cwinthread-class.md) объектов. В большинстве случаев у вас еще нет для явного создания этих объектов. Вместо этого вызовите вспомогательную функцию [AfxBeginThread](../mfc/reference/application-information-and-management.md#afxbeginthread), который создает `CWinThread` объект.

MFC различает два типа потоков: потоки пользовательского интерфейса и рабочие потоки. Потоки пользовательского интерфейса обычно используются для обработки введенных пользователем данных и реагирования на события и сообщения, создаваемые пользователем. Рабочие потоки часто используются для выполнения таких задач, например повторное вычисление, которых не требуется ввод данных пользователем. Win32 API не делается различия между типами потоков; он просто должен знать начальный адрес потока чтобы начать его обработку. MFC обрабатывает потоки пользовательского интерфейса, предоставляя конвейер сообщений для событий в пользовательском интерфейсе. `CWinApp` является примером объекта потока пользовательского интерфейса, так как он является производным от `CWinThread` и обрабатывает события и сообщения, создаваемые пользователем.

Особое внимание следует уделить ситуациях, где только один поток может потребоваться доступ к тому же объекту. [Многопоточность. Советы по программированию](multithreading-programming-tips.md) описаны методы, которые можно использовать для устранения проблем, которые могут возникнуть в подобных ситуациях. [Многопоточность. Практическое использование классов синхронизации](multithreading-how-to-use-the-synchronization-classes.md) описывается использование классов, доступных для синхронизации доступа нескольких потоков к одному объекту.

Написание и отладка многопоточного программирования по своей сути является довольно сложная и непредсказуемая задача, так как необходимо убедиться, что объекты не осуществляется более чем одним потоком за раз. В разделах, посвященных многопоточности, не описываются основы многопоточного программирования, только то, как использовать MFC в многопоточных программах. Примеры многопоточных приложений MFC, включенные в Visual C++ иллюстрируют несколько возможности многопоточности и API-интерфейсов Win32, не включенные в MFC; Тем не менее они предназначены только в качестве отправной точки.

Дополнительные сведения о том, как операционная система обрабатывает процессы и потоки, см. в разделе [процессы и потоки](/windows/desktop/ProcThread/processes-and-threads) в пакете Windows SDK.

Дополнительные сведения о поддержке многопоточности MFC см. в разделах:

- [Многопоточность. Создание потоков, обрабатывающих события от пользовательского интерфейса](multithreading-creating-user-interface-threads.md)

- [Многопоточность. Создание рабочих потоков](multithreading-creating-worker-threads.md)

- [Многопоточность. Принцип использования классов синхронизации](multithreading-how-to-use-the-synchronization-classes.md)

- [Многопоточность. Завершение работы с потоками](multithreading-terminating-threads.md)

- [Многопоточность. Советы по программированию](multithreading-programming-tips.md)

- [Многопоточность. Сценарии использования классов синхронизации](multithreading-when-to-use-the-synchronization-classes.md)

## <a name="see-also"></a>См. также

[Поддержка многопоточности для устаревшего кода (Visual C++)](multithreading-support-for-older-code-visual-cpp.md)
