---
title: Практическое руководство. Создание агентов, использующих определенные политики планировщика
ms.date: 11/04/2016
helpviewer_keywords:
- scheduler policies, agents [Concurrency Runtime]
- creating agents that use specific policies [Concurrency Runtime]
ms.assetid: 46a3e265-0777-4ec3-a142-967bafc49d67
ms.openlocfilehash: 955b1043800c8c10a24abff71a7764d0878b89d9
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50663376"
---
# <a name="how-to-create-agents-that-use-specific-scheduler-policies"></a>Практическое руководство. Создание агентов, использующих определенные политики планировщика

Агент — это компонент приложения, который работает асинхронно, с другими компонентами для решения более крупными вычислительными задачами. Как правило, агент имеет заданный жизненный цикл и сохраняет сведения о состоянии.

Каждый агент может иметь уникальные требования к приложению. Например агент, который обеспечивает взаимодействие с пользователем (извлечение входных данных или отображения выходных данных) может потребоваться более приоритетный доступ к вычислительным ресурсам. Политики планировщика позволяют управлять стратегией, которую планировщик применяет при управлении задачами. В этом разделе демонстрируется создание агентов, использующих определенные политики планировщика.

Простой пример, использующий пользовательский планировщик политики вместе с асинхронные блоки сообщений, см. в разделе [как: укажите конкретные политики планировщика](../../parallel/concrt/how-to-specify-specific-scheduler-policies.md).

В этом разделе используются функции из библиотеки асинхронных агентов, такие как агенты, блоки сообщений и функции передачи сообщений для выполнения работы. Дополнительные сведения о библиотеке асинхронных агентов, см. в разделе [Asynchronous Agents Library](../../parallel/concrt/asynchronous-agents-library.md).

## <a name="example"></a>Пример

В следующем примере определяется два класса, которые являются производными от [concurrency::agent](../../parallel/concrt/reference/agent-class.md): `permutor` и `printer`. `permutor` Класс вычисляет все перестановки заданной входной строки. `printer` Класс печатает сообщения хода выполнения на консоль. `permutor` Класс выполняет операцию с большим объемом, которая может использовать все доступные вычислительные ресурсы. Чтобы быть полезным, `printer` класс выводит каждое сообщение о ходе выполнения своевременно.

Для предоставления `printer` класс адекватный доступ к вычислительным ресурсам, в этом примере используется действия, описанные в [как: управление экземпляром планировщика](../../parallel/concrt/how-to-manage-a-scheduler-instance.md) создать экземпляр планировщика с пользовательской политикой. Пользовательская политика задает приоритет потока, чтобы быть с наивысшим приоритетом.

Чтобы продемонстрировать преимущества использования планировщика с пользовательской политикой, в этом примере вся задача выполняется два раза. В примере сначала используется планировщик по умолчанию для планирования обе задачи. Затем в примере используется планировщик по умолчанию для планирования `permutor` объекта и планировщик с пользовательской политикой, чтобы запланировать `printer` объекта.

[!code-cpp[concrt-permute-strings#1](../../parallel/concrt/codesnippet/cpp/how-to-create-agents-that-use-specific-scheduler-policies_1.cpp)]

В этом примере формируются следующие данные:

```Output
With default scheduler:
Computing all permutations of 'Grapefruit'...
100% complete...

With higher context priority:
Computing all permutations of 'Grapefruit'...
100% complete...
```

Несмотря на то, что оба набора задач дают одинаковый результат, версии, использующей настраиваемую политику позволяет `printer` объекта для запуска с повышенными приоритетом, таким образом, он надежнее.

## <a name="compiling-the-code"></a>Компиляция кода

Скопируйте код примера и вставьте его в проект Visual Studio или вставьте его в файл с именем `permute-strings.cpp` и выполните следующую команду в окне командной строки Visual Studio.

**permute CL.exe/EHsc-strings.cpp**

## <a name="see-also"></a>См. также

[Политики планировщика](../../parallel/concrt/scheduler-policies.md)<br/>
[Асинхронные агенты](../../parallel/concrt/asynchronous-agents.md)

