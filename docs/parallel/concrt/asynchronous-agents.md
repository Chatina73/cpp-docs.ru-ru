---
description: 'Дополнительные сведения: асинхронные агенты'
title: Асинхронные агенты
ms.date: 11/19/2018
helpviewer_keywords:
- asynchronous agents
- agents [Concurrency Runtime]
ms.assetid: 6cf6ccc6-87f1-4e14-af15-ea8ba58fef1a
ms.openlocfilehash: 38d2325404d83443ed0bd054793ca200a562359f
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97338298"
---
# <a name="asynchronous-agents"></a>Асинхронные агенты

*Асинхронный агент* (или просто *Агент*) — это компонент приложения, который асинхронно работает с другими агентами для решения больших вычислительных задач. Агент следует рассматривать как задачу с заданным жизненным циклом. Например, один агент может считывать данные с входного или выходного устройства (например, с клавиатуры, с помощью файла на диске или сетевого подключения), а другой агент может выполнять действия с этими данными по мере их поступления. Первый агент использует передачу сообщений для информирования второго агента о наличии дополнительных данных. Планировщик заданий среда выполнения с параллелизмом предоставляет эффективный механизм, который позволяет агентам блокироваться и выдаваться в оперативном виде без необходимости менее эффективного прерывания.

Библиотека агентов определяет класс [Concurrency:: Agent](../../parallel/concrt/reference/agent-class.md) , который представляет асинхронный агент. `agent` является абстрактным классом, который объявляет параллелизм виртуального метода [:: Agent:: Run](reference/agent-class.md#run). `run`Метод выполняет задачу, выполняемую агентом. Поскольку `run` является абстрактным, необходимо реализовать этот метод в каждом классе, производном от `agent` .

## <a name="agent-life-cycle"></a>Жизненный цикл агента

Агенты имеют заданный жизненный цикл. Перечисление [Concurrency:: agent_status](reference/concurrency-namespace-enums.md#agent_status) определяет различные состояния агента. На следующем рисунке показана схема состояний, показывающая, как агенты выполняются из одного состояния в другое. На этом рисунке сплошные линии представляют методы, которые вызываются из приложения. пунктирные линии представляют методы, которые вызываются из среды выполнения.

![Схема состояния агента](../../parallel/concrt/media/agentstate.png "Схема состояния агента")

В следующей таблице описаны все состояния в `agent_status` перечислении.

|Состояние агентов|Описание|
|-----------------|-----------------|
|`agent_created`|Агент не запланирован к выполнению.|
|`agent_runnable`|Среда выполнения планирует агент для выполнения.|
|`agent_started`|Агент запущен и запущен.|
|`agent_done`|Агент завершен.|
|`agent_canceled`|Агент был отменен до того, как он перешел в `started` состояние.|

`agent_created` является начальным состоянием агента, `agent_runnable` а `agent_started` — активными состояниями, а `agent_done` `agent_canceled` — состояниями терминала.

Используйте метод [Concurrency:: Agent:: Status](reference/agent-class.md#status) , чтобы получить текущее состояние `agent` объекта. Несмотря на то `status` , что метод является типобезопасным, состояние агента может измениться на время `status` возвращения метода. Например, агент может находиться в `agent_started` состоянии при вызове `status` метода, но переместить в `agent_done` состояние сразу после `status` возврата метода.

## <a name="methods-and-features"></a>Методы и функции

В следующей таблице показаны некоторые важные методы, принадлежащие `agent` классу. Дополнительные сведения о всех `agent` методах класса см. в разделе [класс агента](../../parallel/concrt/reference/agent-class.md).

|Метод|Описание|
|------------|-----------------|
|[start](reference/agent-class.md#start)|Планирует `agent` объект для выполнения и задает для него `agent_runnable` состояние.|
|[запуска](reference/agent-class.md#run)|Выполняет задачу, которая должна быть выполнена `agent` объектом.|
|[готово](reference/agent-class.md#done)|Перемещает агент в `agent_done` состояние.|
|[cancel](../../parallel/concrt/cancellation-in-the-ppl.md#cancel)|Если агент не запущен, этот метод отменяет выполнение агента и устанавливает его в `agent_canceled` состояние.|
|[status](reference/agent-class.md#status)|Извлекает текущее состояние `agent` объекта.|
|[ожидания](reference/agent-class.md#wait)|Ожидает `agent` перехода объекта в `agent_done` `agent_canceled` состояние или.|
|[wait_for_all](reference/agent-class.md#wait_for_all)|Ожидает, пока все предоставленные `agent` объекты не перейдет в `agent_done` `agent_canceled` состояние или.|
|[wait_for_one](reference/agent-class.md#wait_for_one)|Ожидает, по крайней мере, один из указанных `agent` объектов для перехода `agent_done` в `agent_canceled` состояние или.|

После создания объекта агента вызовите метод [Concurrency:: Agent:: Start](reference/agent-class.md#start) , чтобы запланировать его выполнение. Среда выполнения вызывает `run` метод после того, как он планирует агент и устанавливает его в `agent_runnable` состояние.

Среда выполнения не управляет исключениями, создаваемыми асинхронными агентами. Дополнительные сведения об обработке исключений и агентах см. в разделе [обработка исключений](../../parallel/concrt/exception-handling-in-the-concurrency-runtime.md).

## <a name="example"></a>Пример

Пример создания базового приложения на основе агента см. в разделе [Пошаговое руководство. Создание приложения Agent-Based](../../parallel/concrt/walkthrough-creating-an-agent-based-application.md).

## <a name="see-also"></a>См. также раздел

[библиотеку асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md)
