---
title: Практическое руководство. Использование преобразователя в конвейере данных
ms.date: 11/04/2016
helpviewer_keywords:
- transformer class, example
- data pipelines, using transformer [Concurrency Runtime]
- using transformer in data pipelines [Concurrency Runtime]
ms.assetid: ca49cb3f-4dab-4b09-a9c9-d3a109ae4c29
ms.openlocfilehash: 59c4854eea985b3c91fad6e7dc6c47ca9b07d333
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62375591"
---
# <a name="how-to-use-transformer-in-a-data-pipeline"></a>Практическое руководство. Использование преобразователя в конвейере данных

В этом разделе содержится базовый пример, показывающий, как использовать [concurrency::transformer](../../parallel/concrt/reference/transformer-class.md) класс в конвейере данных. Более полный пример, в котором для выполнения обработки изображений используется конвейер данных, см. в разделе [Пошаговое руководство: Создание сети обработки изображений](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md).

*Конвейеризация данных* — это общий шаблон в программировании параллельной обработки. Конвейер данных состоит из ряда этапов, где каждый этап выполняет работу и затем передает результат такой работы на следующий этап. `transformer` Является ключевым компонентом в данных конвейеров, так как он получает входное значение, класс выполняет работу на основе этого значения, а затем создает результат для другим компонентом.

## <a name="example"></a>Пример

В этом примере используется следующий конвейер данных для выполнения ряда преобразований с начальным входным значением:

1. Первый этап Вычисляет абсолютное значение входных данных.

1. На втором этапе вычисляется квадратный корень введенного значения.

1. На третьем этапе вычисляется квадрат введенного значения.

1. Далее этап инвертирует входных данных.

1. Пятый этап окончательный результат записывается в буфер сообщений.

Наконец в примере выводится результат конвейера на консоль.

[!code-cpp[concrt-data-pipeline#1](../../parallel/concrt/codesnippet/cpp/how-to-use-transformer-in-a-data-pipeline_1.cpp)]

В этом примере выводятся следующие данные:

```Output
The result is -42.
```

Довольно часто для этапа в конвейере данных для вывода значения, тип которого отличается от его входное значение. В этом примере второй этап принимает значение типа `int` в качестве входных данных и создает квадратный корень из этого значения ( `double`) в качестве результата.

> [!NOTE]
>  Конвейер данных в этом примере приведен для иллюстрации. Так как каждая операция преобразования выполняет небольшую работу, дополнительная нагрузка, необходимая для выполнения передачи сообщений, могут перевесить преимущества использования конвейера данных.

## <a name="compiling-the-code"></a>Компиляция кода

Скопируйте код примера и вставьте его в проект Visual Studio или вставьте его в файл с именем `data-pipeline.cpp` и выполните следующую команду в окне командной строки Visual Studio.

**/ EHsc CL.exe data-pipeline.cpp**

## <a name="see-also"></a>См. также

[Библиотека асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md)<br/>
[Асинхронные блоки сообщений](../../parallel/concrt/asynchronous-message-blocks.md)<br/>
[Пошаговое руководство: Создание сети обработки изображений](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)
