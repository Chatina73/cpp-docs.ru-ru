---
description: Дополнительные сведения см. в статье как использовать преобразователь в конвейере данных.
title: Практическое руководство. Использование преобразователя в конвейере данных
ms.date: 11/04/2016
helpviewer_keywords:
- transformer class, example
- data pipelines, using transformer [Concurrency Runtime]
- using transformer in data pipelines [Concurrency Runtime]
ms.assetid: ca49cb3f-4dab-4b09-a9c9-d3a109ae4c29
ms.openlocfilehash: 97b0af16a3ce89b940952117bb8639d281363a23
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97205620"
---
# <a name="how-to-use-transformer-in-a-data-pipeline"></a>Практическое руководство. Использование преобразователя в конвейере данных

Этот раздел содержит простой пример, демонстрирующий использование класса [Concurrency:: transformer](../../parallel/concrt/reference/transformer-class.md) в конвейере данных. Более полный пример использования конвейера данных для обработки изображений см. в разделе [Пошаговое руководство. создание Image-Processing сети](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md).

*Конвейер данных* — это распространенный шаблон в параллельном программировании. Конвейер данных состоит из последовательности этапов, где каждый этап выполняет работу, а затем передает результат этой работы на следующий этап. `transformer`Класс является ключевым компонентом в конвейерах данных, поскольку он получает входное значение, выполняет работу над этим значением, а затем создает результат для использования другим компонентом.

## <a name="example"></a>Пример

В этом примере для выполнения ряда преобразований с учетом первоначального входного значения используется следующий конвейер данных:

1. На первом этапе вычисляется абсолютное значение входных данных.

1. На втором этапе вычисляется квадратный корень из его входных данных.

1. Третий этап вычисляет квадрат входных данных.

1. На четвертом этапе его входные данные отменяются.

1. Пятый этап записывает окончательный результат в буфер сообщений.

Наконец, в примере выводится результат конвейера на консоль.

[!code-cpp[concrt-data-pipeline#1](../../parallel/concrt/codesnippet/cpp/how-to-use-transformer-in-a-data-pipeline_1.cpp)]

В этом примере выводятся следующие данные:

```Output
The result is -42.
```

Обычно для этапа в конвейере данных выводится значение, тип которого отличается от входного значения. В этом примере второй этап принимает значение типа **`int`** в качестве входных данных и выдает квадратный корень из этого значения (a **`double`** ) в качестве выходных данных.

> [!NOTE]
> В этом примере конвейер данных предназначен для иллюстрации. Поскольку каждая операция преобразования выполняет небольшие усилия, затраты, необходимые для передачи сообщений, могут перевешивают преимущества использования конвейера данных.

## <a name="compiling-the-code"></a>Компиляция кода

Скопируйте пример кода и вставьте его в проект Visual Studio или вставьте в файл с именем, `data-pipeline.cpp` а затем выполните следующую команду в окне командной строки Visual Studio.

> **cl.exe/EHsc Дата-пипелине. cpp**

## <a name="see-also"></a>См. также раздел

[библиотеку асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md)<br/>
[Асинхронные блоки сообщений](../../parallel/concrt/asynchronous-message-blocks.md)<br/>
[Пошаговое руководство. Создание Image-Processing сети](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)
