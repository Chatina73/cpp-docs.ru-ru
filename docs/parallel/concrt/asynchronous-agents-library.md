---
description: 'Дополнительные сведения: Библиотека асинхронных агентов'
title: библиотеку асинхронных агентов
ms.date: 11/19/2018
helpviewer_keywords:
- Agents Library
- Asynchronous Agents Library
ms.assetid: d2a72a31-8ba6-4220-ad7a-e403a6acaa42
ms.openlocfilehash: 5d56bd84078d4c1a89fc489fba37edeb03b3739f
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97338311"
---
# <a name="asynchronous-agents-library"></a>библиотеку асинхронных агентов

Библиотека асинхронных агентов (или просто *Библиотека агентов*) предоставляет модель программирования, которая позволяет повысить надежность разработки приложений с поддержкой параллелизма. Библиотека агентов — это библиотека шаблонов C++, которая обеспечивает модель программирования на основе субъектов и передачу сообщений внутри процесса для недетализированного потока данных и задач конвейеризации. Библиотека агентов основана на компонентах планирования и управления ресурсами среда выполнения с параллелизмом.

## <a name="programming-model"></a>Модель программирования

Библиотека агентов предоставляет альтернативы общему состоянию, позволяя подключать изолированные компоненты через модель асинхронного взаимодействия, основанную на потоке данных, а не потоке управления. *Поток* данных — это модель программирования, в которой вычисления выполняются, когда доступны все необходимые данные. *поток управления* — это модель программирования, в которой вычисления выполняются в предварительно определенном порядке.

Модель программирования на основе потоков данных связана с понятием *передача сообщений*, так как в этой модели независимые компоненты программы взаимодействуют друг с другом посредством отправки сообщений.

Библиотека агентов состоит из трех компонентов: *асинхронных агентов*, *асинхронных блоков сообщений* и *функций передачи сообщений*. Агенты сохраняют состояние и используют блоки сообщений и функции передачи сообщений для взаимодействия друг с другом и с внешними компонентами. Функции передачи сообщений позволяют агентам отправлять и получать сообщения от внешних компонентов. Асинхронные блоки сообщений содержат сообщения и позволяют агентам обмениваться данными синхронизированным образом.

На следующем рисунке показано, как два агента используют блоки сообщений и функции передачи сообщений для обмена данными. На этом рисунке `agent1` отправляется сообщение с `agent2` помощью функции [Concurrency:: send](reference/concurrency-namespace-functions.md#send) и объекта [Concurrency:: unbounded_buffer](reference/unbounded-buffer-class.md) . `agent2` использует функцию [Concurrency:: Receive](reference/concurrency-namespace-functions.md#receive) для чтения сообщения. `agent2` использует тот же метод для отправки сообщения `agent1` . Пунктирные стрелки обозначают поток данных между агентами. Сплошные стрелки соединяют агенты с блоками сообщений, в которых они записываются или считываются.

![Компоненты библиотеки агентов](../../parallel/concrt/media/agent_librarycomp.png "Компоненты библиотеки агентов")

Пример кода, который реализует эту иллюстрацию, показан далее в этом разделе.

Модель программирования агента имеет несколько преимуществ по сравнению с другими механизмами параллелизма и синхронизации, например событиями. Одно из преимуществ заключается в том, что с помощью передачи сообщений для передачи изменений состояния между объектами можно изолировать доступ к общим ресурсам и, таким образом, повысить масштабируемость. Преимуществом передачи сообщений является то, что он связывает синхронизацию с данными, а не привязывает ее к внешнему объекту синхронизации. Это упрощает передачу данных между компонентами и позволяет устранять ошибки программирования в приложениях.

## <a name="when-to-use-the-agents-library"></a>Когда следует использовать библиотеку агентов

Используйте библиотеку агентов при наличии нескольких операций, которые должны взаимодействовать друг с другом асинхронно. Блоки сообщений и функции передачи сообщений позволяют создавать параллельные приложения без использования механизмов синхронизации, таких как блокировки. Это позволяет сосредоточиться на логике приложения.

Модель программирования агента часто используется для создания *конвейеров данных* или *сетей*. Конвейер данных — это серия компонентов, каждая из которых выполняет определенную задачу, которая участвует в более крупной цели. Каждый компонент в конвейере потока данных выполняет работу при получении сообщения от другого компонента. Результат этой работы передается в другие компоненты конвейера или сети. Компоненты могут использовать более детализированную функциональность параллелизма из других библиотек, например [библиотеку параллельных шаблонов (PPL)](../../parallel/concrt/parallel-patterns-library-ppl.md).

## <a name="example"></a>Пример

В следующем примере реализуется иллюстрация, показанная ранее в этом разделе.

[!code-cpp[concrt-basic-agents#1](../../parallel/concrt/codesnippet/cpp/asynchronous-agents-library_1.cpp)]

В этом примере выводятся следующие данные:

```Output
agent1: sending request...
agent2: received 'request'.
agent2: sending response...
agent1: received '42'.
```

В следующих разделах описываются функциональные возможности, используемые в этом примере.

## <a name="related-topics"></a>См. также

[Асинхронные агенты](../../parallel/concrt/asynchronous-agents.md)<br/>
Описание роли асинхронных агентов при решении более крупных вычислительных задач.

[Асинхронные блоки сообщений](../../parallel/concrt/asynchronous-message-blocks.md)<br/>
Описывает различные типы блоков сообщений, предоставляемые библиотекой агентов.

[Функции передачи сообщений](../../parallel/concrt/message-passing-functions.md)<br/>
Описывает различные подпрограммы передачи сообщений, предоставляемые библиотекой агентов.

[Практические рекомендации. Реализация различных шаблонов Producer-Consumer](../../parallel/concrt/how-to-implement-various-producer-consumer-patterns.md)<br/>
Описание реализации шаблона "производитель-получатель" в приложении.

[Руководство. предоставление рабочих функций классам Call и transformer](../../parallel/concrt/how-to-provide-work-functions-to-the-call-and-transformer-classes.md)<br/>
Демонстрирует несколько способов предоставления рабочих функций классам [Concurrency:: Call](../../parallel/concrt/reference/call-class.md) и [Concurrency:: transformer](../../parallel/concrt/reference/transformer-class.md) .

[Как использовать преобразователь в конвейере данных](../../parallel/concrt/how-to-use-transformer-in-a-data-pipeline.md)<br/>
Показывает, как использовать класс [Concurrency:: transformer](../../parallel/concrt/reference/transformer-class.md) в конвейере данных.

[Практические руководства. Выбор между завершенными задачами](../../parallel/concrt/how-to-select-among-completed-tasks.md)<br/>
Показывает, как использовать классы [Concurrency:: Choice](../../parallel/concrt/reference/choice-class.md) и [Concurrency:: Join](../../parallel/concrt/reference/join-class.md) , чтобы выбрать первую задачу для завершения алгоритма поиска.

[Как отправить сообщение с постоянным интервалом](../../parallel/concrt/how-to-send-a-message-at-a-regular-interval.md)<br/>
Показывает, как использовать класс [Concurrency:: Timer](../../parallel/concrt/reference/timer-class.md) для отправки сообщения с постоянным интервалом.

[Как использовать фильтр блоков сообщений](../../parallel/concrt/how-to-use-a-message-block-filter.md)<br/>
Демонстрирует использование фильтра для включения асинхронного блока сообщений для приема или отклонения сообщений.

[Библиотека параллельных шаблонов](../../parallel/concrt/parallel-patterns-library-ppl.md)<br/>
Описывает использование различных параллельных шаблонов, таких как параллельные алгоритмы, в приложениях.

[Среда выполнения с параллелизмом](../../parallel/concrt/concurrency-runtime.md)<br/>
Описывает среду выполнения с параллелизмом, которая упрощает процесс параллельного программирования и содержит ссылки на соответствующие разделы.
