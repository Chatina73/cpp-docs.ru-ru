---
description: 'Дополнительные сведения: Библиотека параллельных шаблонов (PPL)'
title: Библиотека параллельных шаблонов
ms.date: 11/04/2016
helpviewer_keywords:
- Parallel Patterns Library (PPL)
ms.assetid: 40fd86b2-69fa-45e5-93d8-98a75636c242
ms.openlocfilehash: ea5719e8ebaacf8f181678ef7af8aae9c900fbe6
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97172353"
---
# <a name="parallel-patterns-library-ppl"></a>Библиотека параллельных шаблонов

Библиотека параллельных шаблонов (PPL) предоставляет императивную модель программирования, обеспечивающую масштабируемость и повышающую удобство разработки параллельных приложений. Библиотека PPL основана на компонентах планирования и управления ресурсами среды выполнения с параллелизмом. Она создает уровень абстракции между кодом приложения и базовым потоковым механизмом, предоставляя универсальные типобезопасные алгоритмы и контейнеры, работающие с данными параллельно. Кроме того, PPL позволяет разрабатывать приложения с возможностью масштабирования, предоставляя альтернативы состоянию с общим доступом.

PPL обеспечивает следующие возможности.

- *Параллелизм задач*. механизм, который работает поверх Windows ThreadPool для выполнения нескольких рабочих элементов (задач) в параллельном режиме

- *Параллельные алгоритмы*: универсальные алгоритмы, которые работают поверх среда выполнения с параллелизмом для параллельного использования коллекций данных

- *Параллельные контейнеры и объекты*: универсальные типы контейнеров, которые обеспечивают одновременный доступ к их элементам

## <a name="example"></a>Пример

PPL предоставляет модель программирования, похожую на стандартную библиотеку C++. В следующем примере показаны различные функции PPL. В нем последовательно и параллельно вычисляется несколько чисел Фибоначчи. Оба вычисления работают с объектом [std:: Array](../../standard-library/array-class-stl.md) . В этом примере в консоль также выводится время, необходимое на выполнение обоих вычислений.

В последовательной версии используется алгоритм [std:: For_each](../../standard-library/algorithm-functions.md#for_each) стандартной библиотеки C++ для прохода по массиву и сохранения результатов в объекте [std:: Vector](../../standard-library/vector-class.md) . Параллельная версия выполняет ту же задачу, но использует алгоритм [Concurrency::p arallel_for_each](reference/concurrency-namespace-functions.md#parallel_for_each) и сохраняет результаты в объекте [concurrency:: concurrent_vector](../../parallel/concrt/reference/concurrent-vector-class.md) . Класс `concurrent_vector` позволяет каждой итерации цикла одновременно добавлять элементы, не требуя синхронизации доступа на запись в контейнер.

Поскольку `parallel_for_each` действует одновременно, версия программы для параллельного вычисления, используемая в данном примере, должна выполнить сортировку объекта `concurrent_vector`, чтобы получить те же результаты, что и версия программы для последовательного вычисления.

Обратите внимание, что в примере используется упрощенный метод вычисления чисел Фибоначчи, однако этот метод показывает, как с помощью среды выполнения с параллелизмом можно повысить производительность системы при выполнении длинных вычислений.

[!code-cpp[concrt-parallel-fibonacci#1](../../parallel/concrt/codesnippet/cpp/parallel-patterns-library-ppl_1.cpp)]

В следующем примере показаны выходные данные, полученные на четырехпроцессорном компьютере.

```Output
serial time: 9250 ms
parallel time: 5726 ms

fib(24): 46368
fib(26): 121393
fib(41): 165580141
fib(42): 267914296
```

Все итерации цикла различаются по продолжительности. Производительность `parallel_for_each` ограничивается операцией, которая завершается последней. Следовательно, не стоит ожидать линейного повышения производительности системы в зависимости от версий, используемых в данном примере (для последовательных и параллельных вычислений).

## <a name="related-topics"></a>См. также

|Заголовок|Описание|
|-----------|-----------------|
|[Параллельное выполнение задач](../../parallel/concrt/task-parallelism-concurrency-runtime.md)|Описывает роль задач и групп задач в PPL.|
|[Параллельные алгоритмы](../../parallel/concrt/parallel-algorithms.md)|Описывает способы использования алгоритмов параллельной обработки, таких как `parallel_for` и `parallel_for_each`.|
|[Параллельные контейнеры и объекты](../../parallel/concrt/parallel-containers-and-objects.md)|Описывает различные параллельные контейнеры и объекты, предоставляемые PPL.|
|[Отмена в библиотеке параллельных шаблонов](cancellation-in-the-ppl.md)|Объясняет, как отменить работу, выполняемую алгоритмом параллельной обработки.|
|[Среда выполнения с параллелизмом](../../parallel/concrt/concurrency-runtime.md)|Описывает среду выполнения с параллелизмом, которая упрощает процесс параллельного программирования и содержит ссылки на соответствующие разделы.|
