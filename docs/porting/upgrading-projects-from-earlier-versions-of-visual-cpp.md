---
title: Обновление C++ проектов с более ранних версий Visual Studio
description: Обновление проектов Microsoft C++ с предыдущих версий Visual Studio.
ms.date: 10/29/2019
helpviewer_keywords:
- 32-bit code porting
- upgrading Visual C++ applications, 32-bit code
ms.assetid: 18cdacaa-4742-43db-9e4c-2d9e73d8cc84
ms.openlocfilehash: b317271a9cd0873e60a6dd9acd1b73a766aaea19
ms.sourcegitcommit: 0cfc43f90a6cc8b97b24c42efcf5fb9c18762a42
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73627166"
---
# <a name="upgrade-c-projects-from-earlier-versions-of-visual-studio"></a>Обновление C++ проектов с более ранних версий Visual Studio

Чтобы обновить проект, созданный в Visual Studio 2008 или более ранней версии, необходимо сначала использовать Visual Studio 2010 для преобразования проекта из формата VCBuild (VCPROJ) в формат MSBuild (VCXPROJ). Дополнительные сведения см. в [статье инструкции для Visual Studio 2008](use-native-multi-targeting.md#instructions-for-visual-studio-2008).

Чтобы обновить проект, созданный в Visual Studio 2010 или более поздней версии, просто откройте проект в последней версии Visual Studio. Visual Studio предлагает обновить проект до текущей схемы. Если вы выберете " **нет**" и на компьютере установлена более старая версия Visual Studio, вы можете работать в проекте в более новой версии Visual Studio и продолжать использовать старый набор инструментов. Например, если проект должен продолжать работать в Windows XP, можно обновить его до Visual Studio 2019, но необходимо указать набор инструментов как v141 или более раннюю версию. Дополнительные сведения см. в разделе [Использование собственного многоплатформенного нацеливания в Visual Studio для сборки старых проектов](use-native-multi-targeting.md). При выборе варианта **Да**проект будет преобразован и не сможет быть преобразован в более раннюю версию. Поэтому в сценариях обновления рекомендуется создать копию существующих файлов проекта и решения.

## <a name="upgrade-reports"></a>Обновление отчетов

При обновлении проекта вы получаете отчет об обновлении, который также сохраняется в папке проекта под именем UpgradeLog.htm. В отчете об обновлении отображается сводка проблем, возникших при выполнении, и некоторые сведения о внесенных изменениях, включая:

1. Свойства проекта

2. Включаемые файлы

3. Код, который больше не компилируется в неясном виде из-за улучшения соответствия компилятора или изменений в стандарте

4. Код, основанный на возможностях Visual Studio или Windows, которые больше не доступны, или на файлах заголовков, которые не включены в установку Visual Studio по умолчанию или были удалены из продукта.

5. Код, который больше не компилируется из-за изменений в API-интерфейсах, например из-за изменения имен API-интерфейсов, изменения сигнатур функций или устаревания функций.

6. Код, который больше не компилируется из-за изменений в диагностике, например предупреждение об ошибке

7. Ошибки компоновщика из-за библиотек, которые были изменены, особенно в случае, если используется параметр /NODEFAULTLIB.

8. Ошибки среды выполнения или непредвиденные результаты из-за изменения в поведении.

9. Ошибки, появившиеся в средствах. В случае обнаружения проблемы сообщите о ней разработчикам Visual C++ через обычные каналы технической поддержки или на странице [Сообщества разработчиков Visual Studio C++](https://developercommunity.visualstudio.com/spaces/62/index.html).

Некоторые обновленные проекты и решения могут быть успешно собраны без изменений. Однако большинству проектов, скорее всего, потребуется внести изменения в параметры проекта, а также в исходный код. Не существует единого правильного способа исправления этих данных, но рекомендуется какой-либо поэтапный подход. Прежде чем начать, ознакомьтесь с [обзором возможных проблем с обновлением](../porting/overview-of-potential-upgrade-issues-visual-cpp.md) , чтобы получить дополнительные сведения о различных типичных ошибках.

 1. Задайте нужные версии набора инструментов C++ платформы, стандартного языка и Windows SDK версии (если применимо). ( **Свойства > ** **проекта** > **Свойства конфигурации** > **Общие**)
 1. При наличии большого количества ошибок отключите параметр " [разрешительное](../build/reference/permissive-standards-conformance.md) " ( **Свойства** > **проекта** > **Свойства конфигурации** > **язык** **C/C++**  > ) и [анализ кода. ](/visualstudio/code-quality/code-analysis-for-c-cpp-overview)( **Свойства > ** **проекта** > **Свойства конфигурации** > **анализ кода**) временное значение, чтобы сократить число ошибок.
 1. Убедитесь, что все зависимости существуют и что пути к включаемым файлам или папкам библиотеки указаны правильно. ( **Свойства** > **проекта** > **Свойства конфигурации** > **каталоги VC + +** )
 1. Выявление и исправление ошибок из-за ссылок на интерфейсы API, которые больше не существуют.
 1. Устраните все оставшиеся ошибки, препятствующие компиляции. Сведения об устранении распространенных ошибок см. в статье [Обзор возможных проблем с обновлением](../porting/overview-of-potential-upgrade-issues-visual-cpp.md) .
 1. Снова **включите параметр** "разрешить" и исправьте все новые ошибки, появившиеся в результате несогласованного кода, который ранее был СКОМПИЛИРОВАН в компилятором MSVC.
 1. Включите анализ кода, чтобы выявление потенциальных проблем или устаревших шаблонов кода, которые больше не считаются приемлемыми. Если анализ кода помечает много ошибок, можно отключить некоторые предупреждения, чтобы сосредоточиться на наиболее важных. Интегрированная среда разработки может помочь быстро устранить проблемы некоторых типов.
 1. Рассмотрим другие возможности для модернизации кода, например, путем замены пользовательских структур данных и алгоритмов на основе C++ стандартных библиотек или библиотеки с открытым исходным кодом. Используя стандартные функции, вы упростите другим разработчикам поддержку кода, а также имеете уверенность в том, что код хорошо протестирован и проверен многими экспертами по стандартам и широкому C++ сообществу.

Чтобы устранить ошибки, попробуйте найти или опубликовать вопрос в Stack overflow или [ C++ сообществе разработчиков](https://developercommunity.visualstudio.com/spaces/62/index.html).

## <a name="in-this-section"></a>В данном разделе

[Общие сведения о возможных проблемах, возникающих при обновлении](overview-of-potential-upgrade-issues-visual-cpp.md)<br/>
[Обновление кода для универсальной среды выполнения](upgrade-your-code-to-the-universal-crt.md)<br/>
[Обновление WINVER и _WIN32_WINNT](modifying-winver-and-win32-winnt.md)<br/>
[Исправление зависимостей от внутренних компонентов библиотеки](fix-your-dependencies-on-library-internals.md)<br/>
[Проблемы при миграции с плавающей запятой](floating-point-migration-issues.md)<br/>
[C++функции, устаревшие в Visual Studio 2019](features-deprecated-in-visual-studio.md)<br/>
[VCBuild и MSBuild](build-system-changes.md)<br/>
[Сторонние библиотеки портов](porting-third-party-libraries.md)<br/>

## <a name="see-also"></a>См. также

[What's New for Visual C++ in Visual Studio](../overview/what-s-new-for-visual-cpp-in-visual-studio.md) (Новые возможности Visual C++ в Visual Studio)<br/>
[Журнал изменений Visual C++ 2003–2015](../porting/visual-cpp-change-history-2003-2015.md)<br/>
[Нестандартное поведение](../cpp/nonstandard-behavior.md)<br/>
[Перенос приложений данных](../data/data-access-programming-mfc-atl.md)<br/>
