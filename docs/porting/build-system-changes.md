---
title: VCBuild и MSBuild
description: Система сборки VIsual C++ Studio изменилась с VCBuild на MSBuild в VIsual Studio 2010.
ms.date: 10/25/2019
helpviewer_keywords:
- Build system changes, project file (.vcxprog)
- Build system changes, custom build rules
- Build system changes, MSBuild
- MSBuild, build system changes
- Build system changes, .vsprops
- Build system changes, $(Inherit)
- Build system changes, $(NoInherit)
ms.assetid: e564d95f-a6cc-4d97-b57e-1a71daf66f4a
ms.openlocfilehash: ce3eb9e51a103aa54b74c7b5b4f775eb402269f1
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80076949"
---
# <a name="vcbuild-vs-msbuild-build-system-changes-in-visual-studio-2010"></a>VCBuild и MSBuild: изменения системы сборки в Visual Studio 2010

Система MSBuild для C++ проектов появилась в Visual Studio 2010. В Visual Studio 2008 и более ранних выпусках использовалась система VCBuild. Некоторые типы файлов и понятия, зависящие от VCBuild, либо не существуют, либо представлены по-разному в MSBuild. В этом документе описываются различия в текущей системе сборки. Чтобы преобразовать проект Visual Studio 2008 в MSBuild, необходимо использовать Visual Studio 2010. После преобразования проекта следует использовать последнюю версию Visual Studio для обновления до текущего набора инструментов IDE и компилятора. Дополнительные сведения, в том числе о получении Visual Studio 2010, см. в разделе [инструкции для Visual studio 2008](use-native-multi-targeting.md#instructions-for-visual-studio-2008).

В следующих разделах приводится сводка изменений из VCBuild в MSBuild. Если проект VCBuild содержит настраиваемые правила сборки или макросы, которые не распознаются MSBuild, см. статью [ C++ проекты Visual Studio](../build/creating-and-managing-visual-cpp-projects.md) , чтобы узнать, как преобразовать эти инструкции в систему MSBuild. Начальное преобразование из VCBuild в MSBuild — это только промежуточный шаг. Нет необходимости полностью исправить файл проекта или заставить программу компилироваться без ошибок. Visual Studio 2010 используется только для преобразования проекта в формат MSBuild, чтобы вы могли получить проект, работающий в последней версии Visual Studio.

## <a name="vcproj-is-now-vcxproj"></a>Вместо VCPROJ теперь используется VCXPROJ

Файлы проекта больше не имеют расширение имени файла VCPROJ. Visual Studio 2010 автоматически преобразует файлы проекта, созданные в более раннем выпуске C++ Visual, в формат MSBuild, который использует расширение VCXPROJ для файлов проекта.

## <a name="vsprops-is-now-props"></a>VSPROPS заменен на PROPS

В Visual Studio 2008 и более ранних версиях *Страница свойств проекта* — это файл на основе XML с расширением VSPROPS. Страница свойств проекта позволяет указывать параметры для средств сборки, например, параметры компилятора или компоновщика, и создавать пользовательские макросы. В MSBuild расширение имени файла для страницы свойств проекта — PROPS.

## <a name="custom-build-rules-and-rules-files"></a>Пользовательские правила сборки и файлы Rules

В Visual Studio 2008 и более ранних версиях *файл правил* представляет собой XML-файл с расширением RULES. Файл правил позволяет определять настраиваемые правила сборки и внедрять их в процесс сборки проекта Visual Studio C++. Настраиваемое правило сборки, которое может быть связано с одним или несколькими расширениями файлов, позволяет передавать входные файлы в средство, которое создает один или несколько выходных файлов.

В системе MSBuild пользовательские правила сборки представлены тремя типами файлов, XML, PROPS и targets, а не файлом Rules. Когда файл с расширением RULES, созданный с помощью более ранней версии Visual C++ Studio, переносится в visual Studio 2010, соответствующие файлы XML, PROPS и Targets создаются и сохраняются в проекте вместе с исходным RULES-файлом.

> [!IMPORTANT]
> В Visual Studio 2010 интегрированная среда разработки не поддерживает создание новых правил. По этой причине самый простой способ использовать файл правил из проекта, созданного с помощью более ранней версии Visual C++ Studio, — перенести проект в visual Studio 2010.

## <a name="inheritance-macros"></a>Макросы наследования

В Visual Studio 2008 и более ранних версиях макрос **$ (Inherit)** задает порядок, в котором наследуемые свойства появляются в командной строке, которая состоит из системы сборки проекта. Макрос **$(NoInherit)** указывает, что нужно пропускать все вхождения $(Inherit) и не наследовать свойства, которые наследовались бы в противном случае. Например, по умолчанию макрос $(Inherit) добавляет к командной строке файлы, указанные с помощью параметра компилятора [/I (дополнительные каталоги включаемых файлов)](../build/reference/i-additional-include-directories.md).

В Visual Studio 2010 Наследование поддерживается путем указания значения свойства в виде объединения одного или нескольких литеральных значений и макросов свойств. Макросы **$(Inherit)** и **$(NoInherit)** не поддерживаются.

В следующем примере список с разделением точкой с запятой назначается свойству на странице свойств. Список состоит из объединения литерала *\<значения>* и значения свойства `MyProperty`, которое используется с помощью нотации макроса **$(** <em>MyProperty</em> **)** .

```
Property=<value>;$(MyProperty)
```

## <a name="vcxprojuser-files"></a>файлы vcxproj. User

Файл пользователя (VCXPROJ.USER) хранит свойства конкретного пользователя, например, параметры отладки и развертывания. Файл *vcxproj. User* применяется ко всем проектам для конкретного пользователя.

## <a name="vcxprojfilters-file"></a>файл. vcxproj. Filters

Когда **Обозреватель решений** используется для добавления файла в проект, файл фильтров (*vcxproj. Filters*) определяет, где в древовидном представлении **Обозреватель решений** добавляется файл на основе расширения имени файла.

## <a name="vc-directories-settings"></a>Параметры каталогов VC + +

Параметры каталогов Visual C++ указываются на [странице свойств каталогов VC ++](../ide/vcpp-directories-property-page.md). В Visual Studio 2008 и более ранних версиях параметры каталогов применяются для каждого пользователя, а список исключенных каталогов указывается в файле *сисинкл. dat* .

Невозможно изменить параметры каталогов VC++ при запуске [devenv/resetsettings](/visualstudio/ide/reference/resetsettings-devenv-exe) в командной строке. Также нельзя изменить параметры в меню **Сервис**, **Импорт и экспорт параметров**, **Сбросить все параметры**.

Чтобы перенести параметры каталогов VC + + из *VSSETTINGS* -файла, созданного в более раннем выпуске Visual Studio, выполните следующие действия.

1. Откройте меню **Сервис** , выберите **Импорт и экспорт параметров** .
2. Выберите **Импорт выбранных параметров окружения**
3. Следуйте указаниям мастера.

## <a name="see-also"></a>См. также:

[MSBuild в командной строке — C++](../build/msbuild-visual-cpp.md)
