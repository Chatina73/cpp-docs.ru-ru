---
description: 'Дополнительные сведения: потокобезопасность в стандартной библиотеке C++'
title: Потокобезопасность в стандартной библиотеке C++
ms.date: 11/04/2016
helpviewer_keywords:
- thread safety
- C++ Standard Library, thread safety
- thread safety, C++ Standard Library
ms.assetid: 9351c8fb-4539-4728-b0e9-226e2ac4284b
ms.openlocfilehash: 21b4575a217182ef90f8ee506064aab868b9cda9
ms.sourcegitcommit: a89eac9acdbd54a181e3bd5d5bc71a3ef3c1abca
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2021
ms.locfileid: "106506082"
---
# <a name="thread-safety-in-the-c-standard-library"></a>Потокобезопасность в стандартной библиотеке C++

Следующие правила потокобезопасности применяются ко всем классам в стандартной библиотеке C++, включая `shared_ptr`, как описано ниже.  Иногда предоставляются более надежные гарантии, например стандартные объекты iostream, как описано ниже, и типы, предназначенные для многопоточности, такие как [`<atomic>`](../standard-library/atomic.md) .

Объект является потокобезопасным при чтении из нескольких потоков. Например, объект А можно безопасно считать из потока 1 и потока 2 одновременно.

Если объект записывается одним потоком, то все операции чтения и записи в этот объект в одном или других потоках должны быть защищены. Например, если поток 1 записывает данные в объект А, потоку 2 следует запретить чтение из объекта А и запись в него.

Чтение и запись в один экземпляр типа можно получить, даже если другой поток считывает или записывает в другой экземпляр того же типа. Например, при наличии объектов A и B одного и того же типа можно обезопасить, когда в потоке 1 записывается, а B считывается в потоке 2.

## <a name="shared_ptr"></a>shared_ptr

Несколько потоков могут одновременно считывать и записывать различные [`shared_ptr`](../standard-library/shared-ptr-class.md) объекты, даже если эти объекты являются копиями, которые совместно используют владение.

## <a name="iostream"></a>iostream

Стандартные объекты iostream,,,,,, `cin` `cout` `cerr` `clog` `wcin` `wcout` `wcerr` и следуют тем `wclog` же правилам, что и другие классы, за исключением того, что можно выполнить запись в объект из нескольких потоков. Например, поток 1 может выполнять запись в [`cout`](../standard-library/iostream.md#cout) то же время, что и поток 2. Однако это может привести к смешиванию выходных данных двух потоков.

> [!NOTE]
> Чтение из буфера потока считается не операцией чтения, Вместо этого считается операцией записи, так как изменилось состояние класса.

## <a name="see-also"></a>См. также раздел

[Общие сведения о стандартной библиотеке C++](../standard-library/cpp-standard-library-overview.md)
