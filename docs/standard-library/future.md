---
title: '&lt;future&gt;'
ms.date: 11/04/2016
f1_keywords:
- <future>
ms.assetid: 2f5830fc-455d-44f9-9e3d-94ea051596a2
ms.openlocfilehash: d33b67ed17a95b6717878aaca2f61682b1807c15
ms.sourcegitcommit: 0dcab746c49f13946b0a7317fc9769130969e76d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68454010"
---
# <a name="ltfuturegt"></a>&lt;future&gt;

Включить стандартный заголовок \<future> для определения классов шаблонов и вспомогательных шаблонов, которые упрощают работу функции — возможно, в отдельном потоке — и получение результата. Результатом является значение, возвращаемое функцией, или исключение, которое вызывается функцией, но не перехватывается в функции.

Этот заголовок использует среду выполнения с параллелизмом (ConcRT), чтобы ее можно было использовать вместе с другими механизмами ConcRT. Дополнительные сведения о ConcRT см. в статье [Среда выполнения с параллелизмом](../parallel/concrt/concurrency-runtime.md).

## <a name="syntax"></a>Синтаксис

```cpp
#include <future>
```

## <a name="remarks"></a>Примечания

> [!NOTE]
> В коде, компилируемом с помощью **/CLR**, этот заголовок блокируется.

*Асинхронный поставщик* сохраняет результат вызова функции. *Асинхронный возвращаемый объект* используется для получения результата вызова функции. *Связанное асинхронное состояние* обеспечивает связь между асинхронным поставщиком и одним или несколькими асинхронными возвращаемыми объектами.

Сама программа не создает объекты связанного асинхронного состояния. Программа создает асинхронного поставщика каждый раз, когда он необходим, и из него она создает асинхронный возвращаемый объект, который использует свое связанное асинхронное состояние совместно с поставщиком. Асинхронные поставщики и асинхронные возвращаемые объекты управляют объектами, содержащими свои общие связанные асинхронные состояния. Когда последний объект, который ссылается на связанное асинхронное состояние, освобождает его, объект, содержащий связанное асинхронное состояние, уничтожается.

Асинхронный поставщик или асинхронный возвращаемый объект, у которого нет связанного асинхронного состояния, является *пустым*.

Связанное асинхронное состояние имеет значение *ready*, только если его асинхронный поставщик сохранил возвращаемое значение или исключение.

Функция-шаблон `async` и классы шаблонов `promise` и `packaged_task` являются асинхронными поставщиками. Классы шаблонов `future` и `shared_future` описывают асинхронные возвращаемые объекты.

Каждый из классов `promise`шаблонов, `future`и `shared_future` имеет специализацию для типа **void** и частичную специализацию для хранения и извлечения значения по ссылке. Эти специализации отличаются от первичного шаблона только сигнатурами и семантикой функций, которые хранят и извлекают возвращаемое значение.

Классы `future` шаблонов и `shared_future` никогда не блокируют их деструкторы, за исключением случаев, когда они сохраняются для обеспечения обратной совместимости: В отличие от всех прочих фьючерсов, для `future`или последнего `shared_future`объекта, присоединенного к задаче, запущенной с `std::async`помощью, деструктор блокируется, если задача не завершена, то есть блокирует, если этот поток еще не вызывал `.get()` или `.wait()`и задача все еще выполняется. В описание `std::async` в черном стандарте добавлено следующее примечание по удобству использования: "[Примечание. Если будущее, полученное из std:: async, перемещается вне локальной области, другой код, использующий будущее, должен иметь в виду, что в будущем деструктор может блокироваться, чтобы общее состояние стало готово. — Заметка] " `future` во `shared_future` всех остальных случаях. деструкторы являются обязательными и никогда не блокируются.

## <a name="members"></a>Участники

### <a name="classes"></a>Классы

|name|Описание|
|----------|-----------------|
|[Класс future](../standard-library/future-class.md)|Описывает асинхронный возвращаемый объект.|
|[Класс future_error](../standard-library/future-error-class.md)|Описывает объект исключения, который можно вызывать методами типов, управляющих объектами `future`.|
|[Класс packaged_task](../standard-library/packaged-task-class.md)|Описывает асинхронного поставщика, который является оболочкой вызова с сигнатурой вызова `Ty(ArgTypes...)`. Его связанное асинхронное состояние содержит копию его вызываемого объекта, помимо возможных результатов.|
|[Класс promise](../standard-library/promise-class.md)|Описывает асинхронного поставщика.|
|[Класс shared_future](../standard-library/shared-future-class.md)|Описывает асинхронный возвращаемый объект. В отличие от объекта `future`, асинхронный поставщик может быть связан с любым количеством объектов `shared_future`.|

### <a name="structures"></a>Структуры

|name|Описание|
|----------|-----------------|
|[Структура is_error_code_enum](../standard-library/is-error-code-enum-structure.md)|Специализация, которая указывает, что `future_errc` подходит для хранения `error_code`.|
|[Структура uses_allocator](../standard-library/uses-allocator-structure.md)|Специализация, которая всегда содержит значение true.|

### <a name="functions"></a>Функции

|name|Описание|
|----------|-----------------|
|[async](../standard-library/future-functions.md#async)|Представляет асинхронного поставщика.|
|[future_category](../standard-library/future-functions.md#future_category)|Возвращает ссылку на объект `error_category`, характеризующий ошибки, связанные с объектами `future`.|
|[make_error_code](../standard-library/future-functions.md#make_error_code)|Создает `error_code`, который имеет объект `error_category`, характеризующий ошибки `future`.|
|[make_error_condition](../standard-library/future-functions.md#make_error_condition)|Создает `error_condition`, который имеет объект `error_category`, характеризующий ошибки `future`.|
|[swap](../standard-library/future-functions.md#swap)|Меняет местами связанное асинхронное состояние одного объекта `promise` с состоянием другого объекта.|

### <a name="enumerations"></a>Перечисления

|name|Описание|
|----------|-----------------|
|[future_errc](../standard-library/future-enums.md#future_errc)|Предоставляет символические имена для всех ошибок, о которых сообщает класс `future_error`.|
|[future_status](../standard-library/future-enums.md#future_status)|Предоставляет символические имена по причинам, которые может возвращать привязанная по времени функция wait.|
|[перехода](../standard-library/future-enums.md#launch)|Представляет тип битовой маски, который описывает возможные режимы для функции-шаблона `async`.|

## <a name="see-also"></a>См. также

[Справочник по файлам заголовков](../standard-library/cpp-standard-library-header-files.md)
