---
title: '&lt;future&gt;'
ms.date: 11/04/2016
f1_keywords:
- <future>
ms.assetid: 2f5830fc-455d-44f9-9e3d-94ea051596a2
ms.openlocfilehash: c852b3040a94035f6a84b1f717c3583fababbb2c
ms.sourcegitcommit: 590e488e51389066a4da4aa06d32d4c362c23393
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2019
ms.locfileid: "72688022"
---
# <a name="ltfuturegt"></a>&lt;future&gt;

Включите стандартный заголовок \<future >, чтобы определить шаблоны классов и вспомогательные шаблоны, которые упрощают выполнение функции (возможно, в отдельном потоке) и получение результата. Результатом является значение, возвращаемое функцией, или исключение, которое вызывается функцией, но не перехватывается в функции.

Этот заголовок использует среду выполнения с параллелизмом (ConcRT), чтобы ее можно было использовать вместе с другими механизмами ConcRT. Дополнительные сведения о ConcRT см. в статье [Среда выполнения с параллелизмом](../parallel/concrt/concurrency-runtime.md).

## <a name="syntax"></a>Синтаксис

```cpp
#include <future>
```

## <a name="remarks"></a>Заметки

> [!NOTE]
> В коде, компилируемом с помощью **/CLR**, этот заголовок блокируется.

*Асинхронный поставщик* сохраняет результат вызова функции. *Асинхронный возвращаемый объект* используется для получения результата вызова функции. *Связанное асинхронное состояние* обеспечивает связь между асинхронным поставщиком и одним или несколькими асинхронными возвращаемыми объектами.

Сама программа не создает объекты связанного асинхронного состояния. Программа создает асинхронного поставщика каждый раз, когда он необходим, и из него она создает асинхронный возвращаемый объект, который использует свое связанное асинхронное состояние совместно с поставщиком. Асинхронные поставщики и асинхронные возвращаемые объекты управляют объектами, содержащими свои общие связанные асинхронные состояния. Когда последний объект, который ссылается на связанное асинхронное состояние, освобождает его, объект, содержащий связанное асинхронное состояние, уничтожается.

Асинхронный поставщик или асинхронный возвращаемый объект, у которого нет связанного асинхронного состояния, является *пустым*.

Связанное асинхронное состояние имеет значение *ready*, только если его асинхронный поставщик сохранил возвращаемое значение или исключение.

Функция шаблона `async` и шаблоны классов `promise` и `packaged_task` являются асинхронными поставщиками. Шаблоны классов `future` и `shared_future` описывают асинхронные возвращаемые объекты.

Каждый из шаблонов классов `promise`, `future` и `shared_future` имеет специализацию для типа **void** и частичную специализацию для хранения и получения значения по ссылке. Эти специализации отличаются от первичного шаблона только сигнатурами и семантикой функций, которые хранят и извлекают возвращаемое значение.

Шаблоны классов `future` и `shared_future` никогда не блокируют их деструкторы, за исключением случаев, когда они сохраняются в целях обратной совместимости: в отличие от всех прочих фьючерсов, для `future` — или последней `shared_future`, которая присоединяется к задаче, запущенной с `std::async` , деструктор блокирует, если задача не завершена. то есть он блокируется, если этот поток еще не вызывал `.get()` или `.wait()` и задача все еще выполняется. Следующее примечание по удобству использования было добавлено в описание `std::async` в проекте стандарта: "[Примечание: если фьючерс, полученный из std::async, перемещен за пределы локальной области, другой код, использующий данный фьючерс, должен знать, что деструктор может заблокировать переход в общее состояние "ready" — конец примечания]". Во всех остальных случаях деструкторы `future` и `shared_future` являются обязательными и гарантированно никогда не будут выполнять блокировку.

## <a name="members"></a>Члены

### <a name="classes"></a>Классы

|Название|Описание|
|----------|-----------------|
|[Класс future](../standard-library/future-class.md)|Описывает асинхронный возвращаемый объект.|
|[Класс future_error](../standard-library/future-error-class.md)|Описывает объект исключения, который можно вызывать методами типов, управляющих объектами `future`.|
|[Класс packaged_task](../standard-library/packaged-task-class.md)|Описывает асинхронного поставщика, который является оболочкой вызова с сигнатурой вызова `Ty(ArgTypes...)`. Его связанное асинхронное состояние содержит копию его вызываемого объекта, помимо возможных результатов.|
|[Класс promise](../standard-library/promise-class.md)|Описывает асинхронного поставщика.|
|[Класс shared_future](../standard-library/shared-future-class.md)|Описывает асинхронный возвращаемый объект. В отличие от объекта `future`, асинхронный поставщик может быть связан с любым количеством объектов `shared_future`.|

### <a name="structures"></a>Структуры

|Название|Описание|
|----------|-----------------|
|[Структура is_error_code_enum](../standard-library/is-error-code-enum-structure.md)|Специализация, которая указывает, что `future_errc` подходит для хранения `error_code`.|
|[Структура uses_allocator](../standard-library/uses-allocator-structure.md)|Специализация, которая всегда содержит значение true.|

### <a name="functions"></a>Функции

|Название|Описание|
|----------|-----------------|
|[async](../standard-library/future-functions.md#async)|Представляет асинхронного поставщика.|
|[future_category](../standard-library/future-functions.md#future_category)|Возвращает ссылку на объект `error_category`, характеризующий ошибки, связанные с объектами `future`.|
|[make_error_code](../standard-library/future-functions.md#make_error_code)|Создает `error_code`, который имеет объект `error_category`, характеризующий ошибки `future`.|
|[make_error_condition](../standard-library/future-functions.md#make_error_condition)|Создает `error_condition`, который имеет объект `error_category`, характеризующий ошибки `future`.|
|[swap](../standard-library/future-functions.md#swap)|Меняет местами связанное асинхронное состояние одного объекта `promise` с состоянием другого объекта.|

### <a name="enumerations"></a>Перечисления

|Название|Описание|
|----------|-----------------|
|[future_errc](../standard-library/future-enums.md#future_errc)|Предоставляет символические имена для всех ошибок, о которых сообщает класс `future_error`.|
|[future_status](../standard-library/future-enums.md#future_status)|Предоставляет символические имена по причинам, которые может возвращать привязанная по времени функция wait.|
|[перехода](../standard-library/future-enums.md#launch)|Представляет тип битовой маски, который описывает возможные режимы для функции-шаблона `async`.|

## <a name="see-also"></a>См. также

[Справочник по файлам заголовков](../standard-library/cpp-standard-library-header-files.md)
