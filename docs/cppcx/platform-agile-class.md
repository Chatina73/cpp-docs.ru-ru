---
title: Класс Platform::Agile
ms.date: 12/30/2016
ms.topic: reference
f1_keywords:
- AGILE/Platform::Platform
- AGILE/Platform::Platform::Agile::Agile
- AGILE/Platform::Platform::Agile::Get
- AGILE/Platform::Platform::Agile::GetAddressOf
- AGILE/Platform::Platform::Agile::GetAddressOfForInOut
- AGILE/Platform::Platform::Agile::Release
helpviewer_keywords:
- Platform::Agile
ms.assetid: e34459a9-c429-4c79-97fd-030c43ca4155
ms.openlocfilehash: 0822cef10b199a5bc3b33f116065816e380bf8a8
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81376499"
---
# <a name="platformagile-class"></a>Класс Platform::Agile

Представляет объект, имеющий MashalingBehavior = Standard, как объект Agile, который значительно снижает вероятность возникновения в среде выполнения исключений, связанных с потоками. `Agile<T>` позволяет объекту, отличному от Agile, вызывать тот же или другой поток или быть вызванным из этих потоков. Для получения дополнительной [информации см.](../cppcx/threading-and-marshaling-c-cx.md)

## <a name="syntax"></a>Синтаксис

```cpp
template <typename T>
class Agile;
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Имя типа для класса, отличного от Agile.

### <a name="remarks"></a>Remarks

Большинство классов в Windows Runtime являются гибкими. Объект Agile может вызывать внутрипроцессный или внепроцессный объект либо быть вызванным таким объектом в том же или другом потоке. Если объект не является объектом гибкой разработки, заключите его в объект `Agile<T>` , который является объектом гибкой разработки. После этого объект `Agile<T>` можно маршалировать, используя таким образом базовый объект, отличный от Agile.

Класс `Agile<T>` — это стандартный класс неуправляемого кода C++, для которого требуется включаемый файл `agile.h`. Он представляет объект, отличный от Agile, и *контекст*объекта Agile. Контекст задает потоковую модель объекта Agile и поведение маршалинга. Операционная система использует контекст для определения способа маршалирования объекта.

### <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[Гибкость::Agile](#ctor)|Инициализирует новый экземпляр класса Agile.|
|[Деструктор Agile::~Agile](#dtor)|Ликвидирует текущий экземпляр класса Agile.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[Agile::Get](#get)|Возвращает дескриптор объекта, представленного текущим объектом Agile.|
|[Agile::GetAddressOf](#getaddressof)|Повторно инициализирует текущий объект Agile и возвращает адрес дескриптора для объекта типа `T`.|
|[Agile::GetAddressOfForInOut](#getaddressofforinout)|Возвращает адрес дескриптора объекта, представленного текущим объектом Agile.|
|[Agile::Release](#release)|Отменяет базовый объект и контекст текущего объекта Agile.|

### <a name="public-operators"></a>Открытые операторы

|Имя|Описание|
|----------|-----------------|
|[Гибкость::оператор->](#operator-arrow)|Извлекает дескриптор объекта, представленного текущим объектом Agile.|
|[Agile::operator=](#operator-assign)|Присваивает указанное значение текущему объекту Agile.|

## <a name="inheritance-hierarchy"></a>Иерархия наследования

`Object`

`Agile`

### <a name="requirements"></a>Требования

**Минимальный поддерживаемый клиент:** Windows 8

**Минимальный поддерживаемый сервер:** Windows Server 2012

**Пространство имен:** Platform

**Заголовок:** agile.h

## <a name="agileagile-constructor"></a><a name="ctor"></a>Гибкость::Гибкий конструктор

Инициализирует новый экземпляр класса Agile.

## <a name="syntax"></a>Синтаксис

```cpp
Agile();
Agile(T^ object);
Agile(const Agile<T>& object);
Agile(Agile<T>&& object);
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

*Объекта*<br/>
Во второй версии данного конструктора: объект, используемый для инициализации нового экземпляра класса Agile. В третьей версии: объект, который копируется в новый экземпляр класса Agile. В четвертой версии: объект, который перемещается в новый экземпляр класса Agile.

### <a name="remarks"></a>Remarks

Первая версия этого конструктора является конструктором по умолчанию. Вторая версия инициализирует новый экземпляра класса Agile из объекта, указанного параметром `object`. Третья версия является конструктором копирования. Четвертая версия является конструктором перемещения. Этот конструктор не может вызывать исключения.

## <a name="agileagile-destructor"></a><a name="dtor"></a>Гибкость:::Agile Destructor

Ликвидирует текущий экземпляр класса Agile.

## <a name="syntax"></a>Синтаксис

```cpp
~Agile();
```

### <a name="remarks"></a>Remarks

Этот деструктор также освобождает объект, представленный текущим объектом Agile.

## <a name="agileget-method"></a><a name="get"></a>Гибкость::Получить метод

Возвращает дескриптор объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^ Get() const;
```

### <a name="return-value"></a>Возвращаемое значение

Дескриптор объекта, представленного текущим объектом Agile.

Тип возвращаемого значения фактически является скрытым внутренним типом. Удобный способ удерживать значение возврата — присвоить его переменной, которая задекларирована с помощью ключевого слова **автоматического** типа вычета. Например, `auto x = myAgileTvariable->Get();`.

## <a name="agilegetaddressof-method"></a><a name="getaddressof"></a>Гибкость::GetAddressOf Метод

Повторно инициализирует текущий объект Agile и возвращает адрес дескриптора для объекта типа `T`.

## <a name="syntax"></a>Синтаксис

```cpp
T^* GetAddressOf() throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

### <a name="return-value"></a>Возвращаемое значение

Адрес дескриптора для объекта типа `T`.

### <a name="remarks"></a>Remarks

Эта операция освобождает текущее представление объекта типа `T` при его наличии, повторно инициализирует данные-члены объекта Agile, получает текущий контекст потока, а затем возвращает адрес переменной дескриптора для объекта, который может представлять объект, отличный от Agile. Чтобы привести экземпляр класса Agile к отопризнакиванию объекта, используйте оператора назначения[(Agile::operator)](#operator-assign)для присвоения объекта экземпляру класса Agile.

## <a name="agilegetaddressofforinout-method"></a><a name="getaddressofforinout"></a>Гибкость::GetAddressOfForInOut Метод

Возвращает адрес дескриптора объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^* GetAddressOfForInOut()  throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

### <a name="return-value"></a>Возвращаемое значение

Адрес дескриптора объекта, представленного текущим объектом Agile.

### <a name="remarks"></a>Remarks

Эта операция получает текущий контекст потоков, затем возвращает адрес дескриптора основного объекта.

## <a name="agilerelease-method"></a><a name="release"></a>Гибкость::Метод выпуска

Отменяет базовый объект и контекст текущего объекта Agile.

## <a name="syntax"></a>Синтаксис

```cpp
void Release() throw();
```

### <a name="remarks"></a>Remarks

Выполняется отмена базового объекта и контекста текущего объекта Agile, если они существуют, а затем значению объекта Agile присваивается NULL.

## <a name="agileoperator-gt-operator"></a><a name="operator-arrow"></a>Гибкость:Оператор-оператор&gt;

Извлекает дескриптор объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^ operator->() const throw();
```

### <a name="return-value"></a>Возвращаемое значение

Дескриптор объекта, представленного текущим объектом Agile.

Этот оператор фактически возвращает скрытый внутренний тип. Удобный способ удерживать значение возврата — присвоить его переменной, которая задекларирована с помощью ключевого слова **автоматического** типа вычета.

## <a name="agileoperator-operator"></a><a name="operator-assign"></a>Гибкость::Оператор оператор

Присваивает указанный объект текущему объекту Agile.

## <a name="syntax"></a>Синтаксис

```cpp
Agile<T> operator=( T^ object ) throw();
Agile<T> operator=( const Agile<T>& object ) throw();
Agile<T> operator=( Agile<T>&& object ) throw();
T^ operator=( IUnknown* lp ) throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в имени типа шаблона.

*Объекта*<br/>
Объект или дескриптор объекта, который копируется или перемещается в текущий объект Agile.

*Lp*<br/>
Указатель интерфейса IUnknown объекта.

### <a name="return-value"></a>Возвращаемое значение

Дескриптор для объекта типа `T`

### <a name="remarks"></a>Remarks

Первая версия оператора присваивания копирует дескриптор ссылочного типа в текущий объект Agile. Вторая версия копирует ссылку на тип Agile в текущий объект Agile. Третья версия перемещает тип Agile в текущий объект Agile. Четвертая версия перемещает указатель на COM-объект в текущий объект Agile.

Операция присваивания автоматически сохраняет контекст текущего объекта Agile.

## <a name="see-also"></a>См. также раздел

[Название платформы](platform-namespace-c-cx.md)
