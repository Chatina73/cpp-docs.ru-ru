---
title: Класс Platform::Agile
ms.date: 12/30/2016
ms.topic: reference
f1_keywords:
- AGILE/Platform::Platform
- AGILE/Platform::Platform::Agile::Agile
- AGILE/Platform::Platform::Agile::Get
- AGILE/Platform::Platform::Agile::GetAddressOf
- AGILE/Platform::Platform::Agile::GetAddressOfForInOut
- AGILE/Platform::Platform::Agile::Release
helpviewer_keywords:
- Platform::Agile
ms.assetid: e34459a9-c429-4c79-97fd-030c43ca4155
ms.openlocfilehash: 86a535bc106e17b276dc5f42a59773aa0de8c361
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62161674"
---
# <a name="platformagile-class"></a>Класс Platform::Agile

Представляет объект, имеющий MashalingBehavior = Standard, как объект Agile, который значительно снижает вероятность возникновения в среде выполнения исключений, связанных с потоками. `Agile<T>` позволяет объекту, отличному от Agile, вызывать тот же или другой поток или быть вызванным из этих потоков. Дополнительные сведения см. в разделе [работа с потоками и маршалинг](../cppcx/threading-and-marshaling-c-cx.md).

## <a name="syntax"></a>Синтаксис

```cpp
template <typename T>
class Agile;
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Имя типа для класса, отличного от Agile.

### <a name="remarks"></a>Примечания

Большинство классов в среде выполнения Windows являются гибкими. Объект Agile может вызывать внутрипроцессный или внепроцессный объект либо быть вызванным таким объектом в том же или другом потоке. Если объект не является объектом гибкой разработки, заключите его в объект `Agile<T>` , который является объектом гибкой разработки. После этого объект `Agile<T>` можно маршалировать, используя таким образом базовый объект, отличный от Agile.

Класс `Agile<T>` — это стандартный класс неуправляемого кода C++, для которого требуется включаемый файл `agile.h`. Он представляет объект, отличный от Agile, и *контекст*объекта Agile. Контекст задает потоковую модель объекта Agile и поведение маршалинга. Операционная система использует контекст для определения способа маршалирования объекта.

### <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[Agile::Agile](#ctor)|Инициализирует новый экземпляр класса Agile.|
|[Деструктор Agile::~Agile](#dtor)|Ликвидирует текущий экземпляр класса Agile.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Agile::Get](#get)|Возвращает дескриптор объекта, представленного текущим объектом Agile.|
|[Agile::GetAddressOf](#getaddressof)|Повторно инициализирует текущий объект Agile и возвращает адрес дескриптора для объекта типа `T`.|
|[Agile::GetAddressOfForInOut](#getaddressofforinout)|Возвращает адрес дескриптора объекта, представленного текущим объектом Agile.|
|[Agile::Release](#release)|Отменяет базовый объект и контекст текущего объекта Agile.|

### <a name="public-operators"></a>Открытые операторы

|name|Описание|
|----------|-----------------|
|[Agile::operator->](#operator-arrow)|Извлекает дескриптор объекта, представленного текущим объектом Agile.|
|[Agile::operator=](#operator-assign)|Присваивает указанное значение текущему объекту Agile.|

## <a name="inheritance-hierarchy"></a>Иерархия наследования

`Object`

`Agile`

### <a name="requirements"></a>Требования

**Минимальный поддерживаемый клиент:** Windows 8

**Минимальный поддерживаемый сервер:** Windows Server 2012

**Пространство имен:** Platform

**Заголовок:** agile.h

## <a name="ctor"></a>  Конструктор Agile::Agile

Инициализирует новый экземпляр класса Agile.

## <a name="syntax"></a>Синтаксис

```cpp
Agile();
Agile(T^ object);
Agile(const Agile<T>& object);
Agile(Agile<T>&& object);
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

*object*<br/>
Во второй версии данного конструктора: объект, используемый для инициализации нового экземпляра класса Agile. В третьей версии: объект, который копируется в новый экземпляр класса Agile. В четвертой версии: объект, который перемещается в новый экземпляр класса Agile.

### <a name="remarks"></a>Примечания

Первая версия этого конструктора является конструктором по умолчанию. Вторая версия инициализирует новый экземпляра класса Agile из объекта, указанного параметром `object`. Третья версия является конструктором копирования. Четвертая версия является конструктором перемещения. Этот конструктор не может вызывать исключения.

## <a name="dtor"></a>  Agile:: ~ Agile деструктор

Ликвидирует текущий экземпляр класса Agile.

## <a name="syntax"></a>Синтаксис

```cpp
~Agile();
```

### <a name="remarks"></a>Примечания

Этот деструктор также освобождает объект, представленный текущим объектом Agile.

## <a name="get"></a>   Метод Agile::Get

Возвращает дескриптор объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^ Get() const;
```

### <a name="return-value"></a>Возвращаемое значение

Дескриптор объекта, представленного текущим объектом Agile.

Тип возвращаемого значения фактически является скрытым внутренним типом. Удобный способ сохранения возвращаемого значения — присвоить его переменной, объявленной с **автоматически** ключевым словом вывода типа. Например, `auto x = myAgileTvariable->Get();`.

## <a name="getaddressof"></a>  Метод Agile::GetAddressOf

Повторно инициализирует текущий объект Agile и возвращает адрес дескриптора для объекта типа `T`.

## <a name="syntax"></a>Синтаксис

```cpp
T^* GetAddressOf() throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

### <a name="return-value"></a>Возвращаемое значение

Адрес дескриптора для объекта типа `T`.

### <a name="remarks"></a>Примечания

Эта операция освобождает текущее представление объекта типа `T` при его наличии, повторно инициализирует данные-члены объекта Agile, получает текущий контекст потока, а затем возвращает адрес переменной дескриптора для объекта, который может представлять объект, отличный от Agile. Чтобы экземпляр класса Agile для представления объекта, используйте оператор присваивания ([Agile::operator =](#operator-assign)) для назначения объекта экземпляру класса Agile.

## <a name="getaddressofforinout"></a>  Метод Agile::GetAddressOfForInOut

Возвращает адрес дескриптора объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^* GetAddressOfForInOut()  throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в параметре имени типа шаблона.

### <a name="return-value"></a>Возвращаемое значение

Адрес дескриптора объекта, представленного текущим объектом Agile.

### <a name="remarks"></a>Примечания

Эта операция получает текущий контекст потоков, затем возвращает адрес дескриптора основного объекта.

## <a name="release"></a>  Метод Agile::Release

Отменяет базовый объект и контекст текущего объекта Agile.

## <a name="syntax"></a>Синтаксис

```cpp
void Release() throw();
```

### <a name="remarks"></a>Примечания

Выполняется отмена базового объекта и контекста текущего объекта Agile, если они существуют, а затем значению объекта Agile присваивается NULL.

## <a name="operator-arrow"></a>  Agile::operator -&gt; оператор

Извлекает дескриптор объекта, представленного текущим объектом Agile.

## <a name="syntax"></a>Синтаксис

```cpp
T^ operator->() const throw();
```

### <a name="return-value"></a>Возвращаемое значение

Дескриптор объекта, представленного текущим объектом Agile.

Этот оператор фактически возвращает скрытый внутренний тип. Удобный способ сохранения возвращаемого значения — присвоить его переменной, объявленной с **автоматически** ключевым словом вывода типа.

## <a name="operator-assign"></a>  Agile::operator =-оператор

Присваивает указанный объект текущему объекту Agile.

## <a name="syntax"></a>Синтаксис

```cpp
Agile<T> operator=( T^ object ) throw();
Agile<T> operator=( const Agile<T>& object ) throw();
Agile<T> operator=( Agile<T>&& object ) throw();
T^ operator=( IUnknown* lp ) throw();
```

#### <a name="parameters"></a>Параметры

*T*<br/>
Тип, указанный в имени типа шаблона.

*object*<br/>
Объект или дескриптор объекта, который копируется или перемещается в текущий объект Agile.

*к пулу журналов*<br/>
Указатель интерфейса IUnknown объекта.

### <a name="return-value"></a>Возвращаемое значение

Дескриптор для объекта типа `T`

### <a name="remarks"></a>Примечания

Первая версия оператора присваивания копирует дескриптор ссылочного типа в текущий объект Agile. Вторая версия копирует ссылку на тип Agile в текущий объект Agile. Третья версия перемещает тип Agile в текущий объект Agile. Четвертая версия перемещает указатель на COM-объект в текущий объект Agile.

Операция присваивания автоматически сохраняет контекст текущего объекта Agile.

## <a name="see-also"></a>См. также

[Пространство имен Platform](platform-namespace-c-cx.md)
