---
title: Статические библиотеки (C++/CX)
ms.date: 02/03/2017
ms.assetid: 7faf53c8-fa21-42cc-8246-d32533ef9dfa
ms.openlocfilehash: 3c4bfd28b805903a2e596ef6d648ff31b0b8261c
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81358111"
---
# <a name="static-libraries-ccx"></a>Статические библиотеки (C++/CX)

Статическая библиотека, используемая в приложении Universal Windows Platform (UWP), может содержать стандартный Код ИСО, включая типы STL, а также звонки на AI Win32, которые не исключены из платформы приложения Windows Runtime. Статическая библиотека потребляет компоненты Windows Runtime и может создавать компоненты Windows Runtime с определенными ограничениями.

## <a name="creating-static-libraries"></a>Создание статических библиотек

Инструкции по созданию нового проекта варьируются в зависимости от того, какую версию Visual Studio вы установили. Чтобы просмотреть документацию для предпочтительной версии Visual Studio, используйте элемент управления селектора **версии.** Он находится в верхней части таблицы содержимого на этой странице.

::: moniker range="vs-2019"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2019"></a>Создание статической библиотеки UWP в Visual Studio 2019

1. В строке меню выберите **Файл** > **Создать** > **Проект**, чтобы открыть диалоговое окно **Создание проекта**.

1. В верхней части диалога установите **Язык** на **СЗ,** установите **платформу** для **Windows**и установите **тип проекта** в **UWP.**

1. Из отфильтрованного списка типов проектов выберите **Статическую библиотеку (Универсальная Windows - C'/CX),** а затем выберите **Следующий**. На следующей странице укажите название проекта и при желании укажите местоположение проекта.

1. Нажмите кнопку **Создать**, чтобы создать проект.

::: moniker-end

::: moniker range="<=vs-2017"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2017-or-visual-studio-2015"></a>Создание статической библиотеки UWP в Visual Studio 2017 или Visual Studio 2015

1. В меню-баре выберите **File** > **New** > **Project.** В **рамках визуального C '** > **Windows Universal** выберите **Статическую библиотеку (Универсальная Windows).**

1. В **Solution Explorer**откройте меню ярлыка для проекта, а затем выберите **Свойства.** В диалоговом поле **Properties** на странице **Configuration Properties** > **C/C''** установите **поглощение расширения продолжительности работы Windows** до Yes **(/ЗВ).**

::: moniker-end

При составлении новой статической библиотеки, если вы сделаете вызов API Win32, который исключен для приложений UWP, компилятор повысит ошибку C3861, "Идентификатор не найден". Чтобы найти альтернативный метод, который поддерживается для Windows Runtime, [см.](/uwp/win32-and-com/alternatives-to-windows-apis-uwp)

Если вы добавите проект статической библиотеки КЗ в решение приложения UWP, возможно, придется обновить параметры свойств проекта библиотеки, чтобы свойство uWP было настроено на **Yes.** Без этой настройки код строится и связывается, но при попытке проверить приложение в Microsoft Store возникает ошибка. Статическая библиотека должна компилироваться с теми же параметрами компилятора, что и проект, в котором она используется.

При использовании статической библиотеки, которая создает открытые классы `ref` , открытые классы интерфейсов или открытые классы значений, компоновщик выдает следующее предупреждение:

> **предупреждение LNK4264:** архивирование файла объектов, составленного с помощью / ЗВ в статическую библиотеку; обратите внимание, что при авторизации типов Windows Runtime не рекомендуется связываться со статичной библиотекой, содержащей метаданные Windows Runtime.

Предупреждение можно безопасно игнорировать только в том случае, если статическая библиотека не производит компоненты Windows Runtime, потребляемые за пределами самой библиотеки. Если библиотека не использует компонент, который она определяет, то компоновщик может оптимизировать реализацию, даже если открытые метаданные содержат сведения о типе. Это означает, что открытые компоненты в статической библиотеке будут скомпилированы, но не активируются во время выполнения. По этой причине любой компонент Windows Runtime, предназначенный для потребления другими компонентами или приложениями, должен быть реализован в библиотеке динамических ссылок (DLL).

## <a name="see-also"></a>См. также раздел

[Работа с потоками и маршалинг](../cppcx/threading-and-marshaling-c-cx.md)
