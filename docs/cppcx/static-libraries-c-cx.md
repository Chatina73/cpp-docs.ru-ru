---
title: Статические библиотеки (C++/CX)
ms.date: 02/03/2017
ms.assetid: 7faf53c8-fa21-42cc-8246-d32533ef9dfa
ms.openlocfilehash: 188ba06518bf6cdd154b7d6bd61216ed1e4ffad3
ms.sourcegitcommit: 18d3b1e9cdb4fc3a76f7a650c31994bdbd2bde64
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2019
ms.locfileid: "64877246"
---
# <a name="static-libraries-ccx"></a>Статические библиотеки (C++/CX)

Статическая библиотека, которая используется в приложении универсальной платформы Windows (UWP) может содержать код C++ стандарта ISO, включая Типы STL, а также вызовы API-интерфейсов Win32, которые не исключены из платформы приложений среды выполнения Windows. Статическая библиотека использует компоненты среды выполнения Windows и может создавать компоненты среды выполнения Windows с некоторыми ограничениями.

## <a name="creating-static-libraries"></a>Создание статических библиотек


Инструкции по созданию нового проекта зависит от установленной версии Visual Studio. Убедитесь, что у вас есть выбора версий в верхнем левом углу задайте правильную версию.

::: moniker range="vs-2019"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2019"></a>Для создания статической библиотеки UWP в Visual Studio 2019 г.

1. В строке меню выберите **файл** > **New** > **проекта** открыть **создайте новый проект** диалоговое окно.

1. В верхней части диалогового окна, задайте **языка** для **C++**, задайте **платформы** для **Windows**и задайте **типпроекта** для **UWP**. 

1. В отфильтрованном списке типов проектов выберите **статической библиотеки (универсальных Windows - C++/CX)** выберите **Далее**. На следующей странице укажите имя проекта и указать расположение проекта, при необходимости.

1. Выберите **создать** кнопку, чтобы создать проект.

::: moniker-end

::: moniker range="<=vs-2017"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2017-or-visual-studio-2015"></a>Для создания статической библиотеки UWP в Visual Studio 2017 или Visual Studio 2015

1. В строке меню выберите **Файл** > **Создать** > **Проект**. В разделе **Visual C++** > **универсальной Windows** выберите **статическая библиотека (универсальные Windows)**.

1. В области **Обозреватель решений**откройте контекстное меню для проекта и выберите пункт **Свойства**. В **свойства** диалоговом окне **свойства конфигурации** > **C/C++** странице **использовать Windows расширение среды выполнения** для **Да (/ZW)**.

::: moniker-end

При компиляции новой статической библиотеки, если вызов API-интерфейса Win32, исключенного для приложений универсальной платформы Windows, компилятор вызовет ошибки C3861 «Идентификатор не найден». Чтобы найти альтернативный метод, который поддерживается для среды выполнения Windows, см. в разделе [альтернативы интерфейсов API Windows в приложениях UWP](/uwp/win32-and-com/alternatives-to-windows-apis-uwp).

При добавлении проекта статической библиотеки C++ в решение приложения универсальной платформы Windows, может потребоваться обновить параметры свойств проекта библиотеки, чтобы присвоено свойство поддержки UWP **Да**. Без этого параметра выполняется сборка кода и ссылки, но ошибка возникает при попытке проверить приложение для Microsoft Store. Статическая библиотека должна компилироваться с теми же параметрами компилятора, что и проект, в котором она используется.

При использовании статической библиотеки, которая создает открытые классы `ref` , открытые классы интерфейсов или открытые классы значений, компоновщик выдает следующее предупреждение:

> **warning LNK4264:** объектный файл, скомпилированный с параметром/zw, в статическую библиотеку; Обратите внимание, что при создании типов среды выполнения Windows не рекомендуется для связывания с статическую библиотеку, содержащую метаданные среды выполнения Windows.

Можно проигнорировать предупреждение, только в том случае, если статическая библиотека не создает компоненты среды выполнения Windows, используемые вне этой библиотеки. Если библиотека не использует компонент, который она определяет, то компоновщик может оптимизировать реализацию, даже если открытые метаданные содержат сведения о типе. Это означает, что открытые компоненты в статической библиотеке будут скомпилированы, но не активируются во время выполнения. По этой причине для любой среды выполнения Windows компонент, предназначенный для использования другими компонентами или приложений должен быть реализован в библиотеке динамической компоновки (DLL).

## <a name="see-also"></a>См. также

[Работа с потоками и маршалинг](../cppcx/threading-and-marshaling-c-cx.md)
