---
description: 'Дополнительные сведения: связывание с CRT в проекте ATL'
title: Связывание с CRT в проекте ATL
ms.date: 11/04/2016
helpviewer_keywords:
- CRT, linking with ATL
- WinMainCRTStartup method
- DllMainCRTStartup method
- wWinMainCRTStartup method
- ATL, C Run-Time library (CRT)
ms.assetid: 650957ae-362c-4ecf-8b03-5d49138e8b5b
ms.openlocfilehash: e54301332d9a83546e41ab42169f06d305bbc6a2
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97147632"
---
# <a name="linking-to-the-crt-in-your-atl-project"></a>Связывание с CRT в проекте ATL

[Библиотеки C Run-Time](../c-runtime-library/crt-library-features.md) (CRT) предоставляют множество полезных функций, которые значительно упрощают программирование во время разработки ATL. Все проекты ATL связаны с библиотекой CRT. Вы можете увидеть преимущества и недостатки метода связывания в [преимуществах и компромиссах метода, используемого для связывания с CRT](../atl/benefits-and-tradeoffs-of-the-method-used-to-link-to-the-crt.md).

## <a name="effects-of-linking-to-the-crt-on-your-program-image"></a>Влияние связывания с CRT в образе программы

При статической компоновке с CRT код из CRT помещается в исполняемый образ, и для запуска образа не требуется наличие DLL-библиотеки CRT в системе. При динамической компоновке с CRT ссылки на код в библиотеке DLL CRT помещаются в образ, но не в сам код. Чтобы образ выполнялся в заданной системе, DLL-библиотека CRT должна присутствовать в этой системе. Даже при динамической компоновке с CRT может оказаться, что некоторый код может быть связан статически (например, `DllMainCRTStartup` ).

При связывании изображения можно явно или неявно указать точку входа, которая будет вызываться операционной системой после загрузки изображения. Для библиотеки DLL точка входа по умолчанию — `DllMainCRTStartup` . Для EXE-файла это `WinMainCRTStartup` . Вы можете переопределить значение по умолчанию с помощью параметра компоновщика/ENTRY. CRT предоставляет реализацию для `DllMainCRTStartup` , `WinMainCRTStartup` и `wWinMainCRTStartup` (точка входа в Юникод для EXE-файла). Эти точки входа, предоставляемые CRT, вызывают конструкторы для глобальных объектов и инициализируют другие структуры данных, используемые некоторыми функциями CRT. Этот код запуска добавляет сведения о 25K в образ, если он связан статически. Если он связан динамически, большая часть кода находится в библиотеке DLL, поэтому размер изображения останется небольшим.

Дополнительные сведения см. в разделе «/Entry» раздела компоновщика [(символ точки входа)](../build/reference/entry-entry-point-symbol.md).

## <a name="optimization-options"></a>Параметры оптимизации

Использование параметра компоновщика/OPT: функция WIN98 позволяет дополнительно сократить элемент управления ATL по умолчанию на 10000, за счет увеличения времени загрузки в системах Windows 98. Дополнительные сведения о параметрах связывания см. в разделе [/OPT (оптимизация)](../build/reference/opt-optimizations.md).

## <a name="see-also"></a>См. также раздел

[Программирование с помощью ATL и кода Run-Time C](../atl/programming-with-atl-and-c-run-time-code.md)<br/>
[Библиотеки DLL и поведение библиотеки времени выполнения Visual C++](../build/run-time-library-behavior.md)
