---
title: структура ATL_DRAWINFO
ms.date: 11/04/2016
f1_keywords:
- ATL::ATL_DRAWINFO
- ATL_DRAWINFO
- ATL.ATL_DRAWINFO
helpviewer_keywords:
- ATL_DRAWINFO structure
ms.assetid: dd2e2aa8-e8c5-403b-b4df-35c0f6f57fb7
ms.openlocfilehash: fb50f49d387e8620f3d5bbb41263738adbd8b437
ms.sourcegitcommit: 7a6116e48c3c11b97371b8ae4ecc23adce1f092d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81748807"
---
# <a name="atl_drawinfo-structure"></a>структура ATL_DRAWINFO

Содержит информацию, используемую для визуализации различных целей, таких как принтер, метафилили или управление ActiveX.

## <a name="syntax"></a>Синтаксис

```
struct ATL_DRAWINFO {
    UINT cbSize;
    DWORD dwDrawAspect;
    LONG lindex;
    DVTARGETDEVICE* ptd;
    HDC hicTargetDev;
    HDC hdcDraw;
    LPCRECTL prcBounds;
    LPCRECTL prcWBounds;
    BOOL bOptimize;
    BOOL bZoomed;
    BOOL bRectInHimetric;
    SIZEL ZoomNum;
    SIZEL ZoomDen;
};
```

## <a name="members"></a>Участники

`cbSize`<br/>
Размер структуры, в байтах.

`dwDrawAspect`<br/>
Определяет, как должна быть представлена цель. Представления могут включать содержимое, значок, миниатюру или печатный документ. Список возможных значений можно узнать на примере [DVASPECT](/windows/win32/api/wtypes/ne-wtypes-dvaspect) и [DVASPECT2.](/windows/win32/api/ocidl/ne-ocidl-dvaspect2)

`lindex`<br/>
Часть цели, которая представляет интерес для операции рисования. Его толкование варьируется в зависимости от значения в члене. `dwDrawAspect`

`ptd`<br/>
Указатель на структуру [DVTARGETDEVICE,](/windows/win32/api/objidl/ns-objidl-dvtargetdevice) которая позволяет оптимизацию рисования в зависимости от указанного аспекта. Обратите внимание, что новые объекты и контейнеры, поддерживающие оптимизированные интерфейсы рисования, также поддерживают этот участник. Старые объекты и контейнеры, не поддерживающие оптимизированные интерфейсы рисования, всегда указывают NULL для этого участника.

`hicTargetDev`<br/>
Информационный контекст для целевого `ptd` устройства, на который указывается, из которого объект может извлекать метрики устройства и тестировать возможности устройства. Если `ptd` объект NULL, объект должен игнорировать `hicTargetDev` значение в члене.

`hdcDraw`<br/>
Контекст устройства, на котором можно рисовать. Для объекта без окон `hdcDraw` участник находится `MM_TEXT` в режиме отображения с его логическими координатами, соответствующими координатам клиента содержащегося окна. Кроме того, контекст устройства должен находиться в том же `WM_PAINT` состоянии, что и обычно передается сообщением.

`prcBounds`<br/>
Указатель на структуру [RECTL,](/windows/win32/api/windef/ns-windef-rectl) определяющую `hdcDraw` прямоугольник и в котором объект должен быть нарисован. Этот элемент контролирует позиционирование и растяжение объекта. Этот участник должен быть NULL, чтобы нарисовать без окон на месте активного объекта. В любой другой ситуации NULL не является юридическим `E_INVALIDARG` значением и должен привести к коду ошибки. Если контейнер передает значение, не не являющееся НУЛ, объекту, не созначеным для окон, объект должен передать запрашиваемый аспект в указанный контекст устройства и прямоугольник. Контейнер может запросить это с объекта без окон для визуализации второго, неактивного представления объекта или для печати объекта.

`prcWBounds`<br/>
Если `hdcDraw` это контекст метафайлного устройства (см. [GetDeviceCaps](/windows/win32/api/wingdi/nf-wingdi-getdevicecaps) в SDK `RECTL` Windows), это указатель на структуру, определяющую прямоугольник в базовом метафайле. Структура прямоугольника содержит размер окна и происхождение окон. Эти значения полезны для рисования метафайлов. Прямоугольник, указанный, `prcBounds` вложен `prcWBounds` внутри этого прямоугольника; они находятся в одном пространстве координат.

`bOptimize`<br/>
Nonzero, если рисунок элемента должен быть оптимизирован, в противном случае 0. Если рисунок оптимизирован, состояние контекста устройства автоматически восстанавливается после завершения визуализации.

`bZoomed`<br/>
Nonzero, если цель имеет коэффициент масштабирования, в противном случае 0. Коэффициент масштабирования хранится `ZoomNum`в .

`bRectInHimetric`<br/>
Nonzero, если `prcBounds` размеры находятся в HIMETRIC, в противном случае 0.

`ZoomNum`<br/>
Ширина и высота прямоугольника, в который визуалируется объект. Коэффициент масштабирования вдоль оси x (доля естественного размера объекта в его текущей степени) цели является значением, разделенным `ZoomNum.cx` на значение `ZoomDen.cx`. Коэффициент масштабирования вдоль оси y достигается аналогичным образом.

`ZoomDen`<br/>
Фактическая ширина и высота цели.

## <a name="remarks"></a>Remarks

Типичным использованием этой структуры будет получение информации во время визуализации целевого объекта. Например, можно получить значения из ATL_DRAWINFO внутри перегрузки [CComControlBase::OnDrawAdvanced](ccomcontrolbase-class.md#ondrawadvanced).

Эта структура хранит соответствующую информацию, используемую для визуализации внешнего вида объекта для целевого устройства. Предоставленная информация может быть использована при рисовании на экране, принтере или даже метафайле.

## <a name="requirements"></a>Требования

**Заголовок:** atlctl.h

## <a name="see-also"></a>См. также раздел

[Классы и структуры](../../atl/reference/atl-classes.md)<br/>
[IViewObject::Draw](/windows/win32/api/oleidl/nf-oleidl-iviewobject-draw)<br/>
[CComControlBase::OnDrawAdvanced](../../atl/reference/ccomcontrolbase-class.md#ondrawadvanced)
