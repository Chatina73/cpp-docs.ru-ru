---
title: Класс Кдебугрепорсук
ms.date: 11/04/2016
f1_keywords:
- CDebugReportHook
- ATLUTIL/ATL::CDebugReportHook
- ATLUTIL/ATL::CDebugReportHook::CDebugReportHook
- ATLUTIL/ATL::CDebugReportHook::CDebugReportHookProc
- ATLUTIL/ATL::CDebugReportHook::RemoveHook
- ATLUTIL/ATL::CDebugReportHook::SetHook
- ATLUTIL/ATL::CDebugReportHook::SetPipeName
- ATLUTIL/ATL::CDebugReportHook::SetTimeout
helpviewer_keywords:
- CDebugReportHook class
ms.assetid: 798076c3-6e63-4286-83b8-aa1bbcd0c20c
ms.openlocfilehash: 7187448b2ba2c9d3ab0399aa3e75ce8d757bfec1
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69496777"
---
# <a name="cdebugreporthook-class"></a>Класс Кдебугрепорсук

Этот класс используется для отправки отладочных отчетов в именованный канал.

## <a name="syntax"></a>Синтаксис

```
class CDebugReportHook
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[Кдебугрепорсук:: Кдебугрепорсук](#cdebugreporthook)|Вызывает [сетпипенаме](#setpipename), [setTimeout](#settimeout)и [сесук](#sethook).|
|[Кдебугрепорсук:: ~ Кдебугрепорсук](#dtor)|Вызывает [кдебугрепорсук:: ремовехук](#removehook).|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кдебугрепорсук:: Кдебугрепорсукпрок](#cdebugreporthookproc)|Статически Пользовательская функция отчетов, привязанная к процессу отладочной отчетности времени выполнения C.|
|[Кдебугрепорсук:: Ремовехук](#removehook)|Вызовите этот метод, чтобы отключить отправку отчетов отладки в именованный канал и восстановить предыдущий обработчик отчета.|
|[Кдебугрепорсук:: Сесук](#sethook)|Вызовите этот метод, чтобы начать отправку отладочных отчетов в именованный канал.|
|[Кдебугрепорсук:: Сетпипенаме](#setpipename)|Вызовите этот метод, чтобы задать компьютер и имя канала, в который будут отправляться отладочные отчеты.|
|[Кдебугрепорсук:: SetTimeout](#settimeout)|Вызовите этот метод, чтобы задать время в миллисекундах, в течение которого этот класс будет ожидать, пока именованный канал станет доступным.|

## <a name="remarks"></a>Примечания

Создайте экземпляр этого класса в отладочных сборках служб или приложений для отправки отладочных отчетов в именованный канал. Отладочные отчеты создаются путем вызова [_CrtDbgReport](../../c-runtime-library/reference/crtdbgreport-crtdbgreportw.md) или использования оболочки для этой функции, например макросов [ATLTRACE](debugging-and-error-reporting-macros.md#atltrace) и [атлассерт](debugging-and-error-reporting-macros.md#atlassert) .

Использование этого класса позволяет интерактивно отлаживать компоненты, работающие на неинтерактивных [оконных станциях](/windows/win32/winstation/window-stations).

Обратите внимание, что отчеты об отладке отправляются с использованием базового контекста безопасности потока. Олицетворение временно отключено, поэтому отчеты об отладке можно просматривать в ситуациях, когда происходит олицетворение пользователей с низким уровнем привилегий, например в веб-приложениях.

## <a name="requirements"></a>Требования

**Заголовок:** файлов atlutil. h

##  <a name="cdebugreporthook"></a>Кдебугрепорсук:: Кдебугрепорсук

Вызывает [сетпипенаме](#setpipename), [setTimeout](#settimeout)и [сесук](#sethook).

```
CDebugReportHook(
    LPCSTR szMachineName = ".",
    LPCSTR szPipeName = "AtlsDbgPipe",
    DWORD dwTimeout = 20000) throw();
```

### <a name="parameters"></a>Параметры

*сзмачиненаме*<br/>
Имя компьютера, на который должны отправляться выходные данные отладки. По умолчанию используется локальный компьютер.

*сзпипенаме*<br/>
Имя именованного канала, в который должны отправляться выходные данные отладки.

*двтимеаут*<br/>
Время в миллисекундах, в течение которого этот класс будет ожидать, пока именованный канал станет доступным.

##  <a name="dtor"></a>Кдебугрепорсук:: ~ Кдебугрепорсук

Вызывает [кдебугрепорсук:: ремовехук](#removehook).

```
~CDebugReportHook() throw();
```

##  <a name="cdebugreporthookproc"></a>Кдебугрепорсук:: Кдебугрепорсукпрок

Пользовательская функция отчетов, привязанная к процессу отладочной отчетности времени выполнения C.

```
static int __cdecl CDebugReportHookProc(
    int reportType,
    char* message,
    int* returnValue) throw();
```

### <a name="parameters"></a>Параметры

*reportType*<br/>
Тип отчета (_CRT_WARN, _CRT_ERROR или _CRT_ASSERT).

*message*<br/>
Строка сообщения.

*returnValue*<br/>
Значение, которое должно возвращаться функцией [_CrtDbgReport](../../c-runtime-library/reference/crtdbgreport-crtdbgreportw.md).

### <a name="return-value"></a>Возвращаемое значение

Возвращает значение FALSE, если обработчик полностью обрабатывает рассматриваемое сообщение, чтобы дальнейшие отчеты не требовались. Возвращает значение true `_CrtDbgReport` , если должно сообщать сообщение обычным способом.

### <a name="remarks"></a>Примечания

Функция отчетов пытается открыть именованный канал и взаимодействовать с процессом на другом конце. Если канал занят, функция отчетов будет ждать, пока канал не освободится или не истечет время ожидания. Время ожидания может быть задано конструктором или вызовом [кдебугрепорсук:: setTimeout](#settimeout).

Код в этой функции выполняется в базовом контексте безопасности вызывающего потока, т. е. олицетворение отключено на время выполнения этой функции.

##  <a name="removehook"></a>Кдебугрепорсук:: Ремовехук

Вызовите этот метод, чтобы отключить отправку отчетов отладки в именованный канал и восстановить предыдущий обработчик отчета.

```
void RemoveHook() throw();
```

### <a name="remarks"></a>Примечания

Вызывает [_CrtSetReportHook2](../../c-runtime-library/reference/crtsetreporthook2-crtsetreporthookw2.md) для восстановления предыдущего обработчика отчета.

##  <a name="sethook"></a>Кдебугрепорсук:: Сесук

Вызовите этот метод, чтобы начать отправку отладочных отчетов в именованный канал.

```
void SetHook() throw();
```

### <a name="remarks"></a>Примечания

Вызывает [_CrtSetReportHook2](../../c-runtime-library/reference/crtsetreporthook2-crtsetreporthookw2.md) , чтобы отчеты об отладке направлялись через [кдебугрепорсукпрок](#cdebugreporthookproc) в именованный канал. Этот класс отслеживает предыдущий обработчик отчета, чтобы его можно было восстановить при вызове [ремовехук](#removehook) .

##  <a name="setpipename"></a>Кдебугрепорсук:: Сетпипенаме

Вызовите этот метод, чтобы задать компьютер и имя канала, в который будут отправляться отладочные отчеты.

```
BOOL SetPipeName(
    LPCSTR szMachineName = ".",
    LPCSTR szPipeName = "AtlsDbgPipe") throw();
```

### <a name="parameters"></a>Параметры

*сзмачиненаме*<br/>
Имя компьютера, на который должны отправляться выходные данные отладки.

*сзпипенаме*<br/>
Имя именованного канала, в который должны отправляться выходные данные отладки.

### <a name="return-value"></a>Возвращаемое значение

Возвращает TRUE при успешном выполнении, FALSE в случае сбоя.

##  <a name="settimeout"></a>Кдебугрепорсук:: SetTimeout

Вызовите этот метод, чтобы задать время в миллисекундах, в течение которого этот класс будет ожидать, пока именованный канал станет доступным.

```
void SetTimeout(DWORD dwTimeout);
```

### <a name="parameters"></a>Параметры

*двтимеаут*<br/>
Время в миллисекундах, в течение которого этот класс будет ожидать, пока именованный канал станет доступным.

## <a name="see-also"></a>См. также

[Классы](../../atl/reference/atl-classes.md)
