---
title: Рисование изображений из списка изображений
ms.date: 11/04/2016
helpviewer_keywords:
- CImageList class [MFC], drawing images from
- drawing [MFC], images from image lists
- image lists [MFC], drawing images from
- images [MFC], drawing
ms.assetid: 2f6063fb-1c28-45f8-a333-008c064db11c
ms.openlocfilehash: e4e60f0e6e4ee22712e4bbce344fd6437cf3db7e
ms.sourcegitcommit: 46d24d6e70c03e05484923d9efc6ed5150e96a64
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2019
ms.locfileid: "68916407"
---
# <a name="drawing-images-from-an-image-list"></a>Рисование изображений из списка изображений

Чтобы нарисовать изображение, используйте функцию необработанных элементов [CImageList::D](../mfc/reference/cimagelist-class.md#draw) . Вы укажете указатель на объект контекста устройства, индекс изображения для рисования, расположение в контексте устройства, в котором нужно нарисовать изображение, и набор флагов для обозначения стиля рисования.

При указании `Draw` стиля **ILD_TRANSPARENT** использует двухэтапный процесс для рисования маскированного изображения. Во-первых, он выполняет логическую операцию и над битами изображения и битами маски. Затем выполняется операция логического XOR с результатами первой операции и фоновыми битами контекста целевого устройства. Этот процесс создает прозрачные области в полученном изображении. то есть каждый белый бит в маске приводит к прозрачности соответствующего бита в полученном изображении.

Прежде чем вырисовать маскированное изображение на фоне сплошного цвета, следует использовать функцию-член [сетбкколор](../mfc/reference/cimagelist-class.md#setbkcolor) , чтобы задать цвет фона для списка изображений в том же цвете, что и назначение. Установка цвета устраняет необходимость в создании прозрачных областей изображения и позволяет `Draw` просто скопировать образ в контекст целевого устройства, что приводит к значительному увеличению производительности. Чтобы нарисовать изображение, укажите стиль **ILD_NORMAL** при вызове метода `Draw`.

Можно задать цвет фона для маскированного списка изображений ([CImageList](../mfc/reference/cimagelist-class.md)) в любое время, чтобы он правильно выстроился на любом сплошном фоне. Если задать цвет фона **CLR_NONE** , изображения будут прозрачно отображены по умолчанию. Чтобы получить цвет фона списка изображений, используйте функцию члена [жетбкколор](../mfc/reference/cimagelist-class.md#getbkcolor) .

Стили **ILD_BLEND25** и **ILD_BLEND50** поменяют изображение цветом выделения системы. Эти стили полезны, если для представления объекта, который пользователь может выбрать, используется маскированное изображение. Например, можно использовать стиль **ILD_BLEND50** для рисования изображения при его выборе пользователем.

Немаскированное изображение копируется в контекст целевого устройства с помощью `SRCCOPY` операции растрового изображения. Цвета изображения отображаются одинаково независимо от цвета фона контекста устройства. Стили рисования, заданные `Draw` в, также не влияют на внешний вид немаскированного изображения.

Помимо функции рисования, другая функция, [дравиндирект](../mfc/reference/cimagelist-class.md#drawindirect), расширяет возможность отрисовки изображения. `DrawIndirect`принимает в качестве параметра структуру [имажелистдравпарамс](/windows/desktop/api/commctrl/ns-commctrl-imagelistdrawparams) . Эта структура может использоваться для настройки отрисовки текущего изображения, включая использование кодов растровой операции (верхнем). Дополнительные сведения о кодах верхнем см. в разделе [растровые коды операций](/windows/desktop/gdi/raster-operation-codes) и [растровые изображения в качестве кистей](/windows/desktop/gdi/bitmaps-as-brushes) в Windows SDK.

## <a name="see-also"></a>См. также

[Использование CImageList](../mfc/using-cimagelist.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)
