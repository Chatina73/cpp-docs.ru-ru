---
title: Обработчики для диапазонов схем сообщений
ms.date: 11/04/2016
helpviewer_keywords:
- message handlers [MFC]
- handlers [MFC], message-map ranges
- message maps [MFC], message handler functions
- message maps [MFC], ranges
- control-notification messages [MFC]
- command IDs [MFC], message mapping
- message-map ranges [MFC]
- handlers [MFC]
- message handling [MFC], message handler functions
- mappings [MFC], message ranges
- command handling [MFC], command update handlers
- controls [MFC], notifications
- handler functions [MFC], message-map ranges
- handler functions [MFC]
- command update handlers [MFC]
- command routing [MFC], command update handlers
- message ranges [MFC]
- handler functions [MFC], declaring
- message ranges [MFC], mapping
ms.assetid: a271478b-5e1c-46f5-9f29-e5be44b27d08
ms.openlocfilehash: d2bc961486d9bc686e1ca0d5feb0fe01d65f9512
ms.sourcegitcommit: c7f90df497e6261764893f9cc04b5d1f1bf0b64b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2019
ms.locfileid: "58774000"
---
# <a name="handlers-for-message-map-ranges"></a>Обработчики для диапазонов схем сообщений

В этой статье объясняется, как для сопоставления диапазона сообщений функции обработчика в одно сообщение (вместо сопоставления одного сообщения только одной функции).

Бывают случаи, когда требуется обработать несколько уведомлений сообщение или элемент управления точно таким же образом. В таких случаях может потребоваться сопоставить все сообщения функцию одного обработчика событий. Диапазоны схемы сообщений позволяют сделать это для непрерывного диапазона сообщений:

- Вы можете сопоставить диапазоны идентификаторов команд, чтобы:

  - Функция обработчика команды.

  - Функция обработчика команды обновления.

- Элемент управления уведомлений для диапазона идентификаторов элементов управления можно сопоставить с функции обработки сообщений.

В этой статье рассматриваются:

- [Записи схемы сообщений](#_core_writing_the_message.2d.map_entry)

- [Объявление функции обработчика](#_core_declaring_the_handler_function)

- [Пример для диапазона идентификаторов команд](#_core_example_for_a_range_of_command_ids)

- [Пример для диапазона идентификаторов элементов управления](#_core_example_for_a_range_of_control_ids)

##  <a name="_core_writing_the_message.2d.map_entry"></a> Записи схемы сообщений

В. CPP добавьте запись в схеме сообщений, как показано в следующем примере:

[!code-cpp[NVC_MFCMessageHandling#6](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_1.cpp)]

Запись схемы сообщений состоит из следующих элементов:

- Макрос диапазон схемы сообщений:

  - [ON_COMMAND_RANGE](reference/message-map-macros-mfc.md#on_command_range)

  - [ON_UPDATE_COMMAND_UI_RANGE](reference/message-map-macros-mfc.md#on_update_command_ui_range)

  - [ON_CONTROL_RANGE](reference/message-map-macros-mfc.md#on_control_range)

- Параметры в макрос:

  Первых двух макросов принимать три параметра:

  - Идентификатор команды диапазона

  - Идентификатор команды, которым заканчивается диапазон

  - Имя функции обработчика сообщений

  Диапазон идентификаторов, должны быть смежными.

  Третий макрос `ON_CONTROL_RANGE`, принимает дополнительный параметр, первая: сообщения уведомление элемента управления, например **EN_CHANGE**.

##  <a name="_core_declaring_the_handler_function"></a> Объявление функции обработчика

Добавьте в объявлении функции обработчика в. H-файл. В следующем коде показано, как может выглядеть, как показано ниже:

[!code-cpp[NVC_MFCMessageHandling#7](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_2.h)]

Функции обработчика для одной команды обычно не принимают никаких параметров. За исключением функций обработчика обновления, функции обработчика для диапазонов схем сообщений требуют дополнительного параметра *nID*, типа **UINT**. Этот параметр является первым параметром. Он включает идентификатор дополнительные команды, необходимые для указания команды, которая фактически Выбор пользователя.

Дополнительные сведения о требования к параметрам обновления функции обработчика, см. в разделе [пример для диапазон команда идентификаторов](#_core_example_for_a_range_of_command_ids).

##  <a name="_core_example_for_a_range_of_command_ids"></a> Пример для идентификаторы диапазон из команд

Когда следует задействовать диапазоны, одним из примеров является обработки команд, как команда увеличения в образце MFC [HIERSVR](../overview/visual-cpp-samples.md). Эта команда увеличивает представление, его масштабирования между 25% и 300% от нормального размера. Класс представления HIERSVR использует диапазон для обработки команды изменения масштаба с записью схемы сообщений, наподобие этого:

[!code-cpp[NVC_MFCMessageHandling#8](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_3.cpp)]

При внесении записи схемы сообщений, необходимо указать:

- Два ИД команды, открывающие и закрывающие непрерывный диапазон.

   Вот они **ID_VIEW_ZOOM25** и **ID_VIEW_ZOOM300**.

- Имя функции обработчика для команд.

   Здесь он имеет `OnZoom`.

В объявлении функции будет выглядеть так:

[!code-cpp[NVC_MFCMessageHandling#9](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_4.h)]

В случае функции обработчика обновления, аналогичные и более широко полезными. Довольно часто для записи `ON_UPDATE_COMMAND_UI` обработчики для ряд команд и обнаружите записи или копировании тот же код снова и снова. Решение заключается в сопоставление диапазона идентификаторов для одного обновления с помощью функции обработчика команды `ON_UPDATE_COMMAND_UI_RANGE` макрос. Идентификаторы команд должны образовывать непрерывный диапазон. Например, см. в разделе `OnUpdateZoom` обработчика и его `ON_UPDATE_COMMAND_UI_RANGE` записи схемы сообщений в класс образца HIERSVR представления.

Обновление функции обработчика, для одной команды обычно принимает один параметр, *pCmdUI*, типа `CCmdUI*`. В отличие от функции обработчика функции обработчика обновления для диапазонов схем сообщений не требуют дополнительного параметра *nID*, типа **UINT**. Идентификатор команды, который необходим для указания команды фактически Выбор пользователя, находится в `CCmdUI` объекта.

##  <a name="_core_example_for_a_range_of_control_ids"></a> Пример для управления диапазоном идентификаторов

Еще один интересный случай сопоставление сообщений уведомление элемента управления, для диапазона идентификаторов элементов управления к одному обработчику. Предположим, что пользователь может щелкнуть любую из 10 кнопок. Чтобы сопоставить все 10 кнопок один обработчик, записи схемы сообщений выглядит следующим образом:

[!code-cpp[NVC_MFCMessageHandling#10](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_5.cpp)]

При написании `ON_CONTROL_RANGE` укажите макрос в карте веб-сообщений:

- Сообщение, уведомление конкретного элемента управления.

   Здесь он имеет **BN_CLICKED**.

- Идентификатор элемента управления значения, связанные с смежных элементов управления.

   Здесь это **IDC_BUTTON1** и **IDC_BUTTON10**.

- Имя функции обработчика сообщений.

   Здесь он имеет `OnButtonClicked`.

При написании функции обработчика, указать дополнительное **UINT** параметра, как показано в следующем примере:

[!code-cpp[NVC_MFCMessageHandling#11](../mfc/codesnippet/cpp/handlers-for-message-map-ranges_6.cpp)]

`OnButtonClicked` Обработчика для одного **BN_CLICKED** сообщения не принимает никаких параметров. Один и тот же обработчик для диапазона кнопок принимает одно **UINT**. Он позволяет для идентификации конкретного элемента управления, ответственными за генерирование **BN_CLICKED** сообщения.

Код, показанный в примере является типичным: преобразование значение, передаваемое `int` в пределах диапазона сообщение и они гарантируют, что это так. Затем может занять некоторое другое действие, в зависимости от которого была нажата кнопка.

## <a name="see-also"></a>См. также

[Объявление функций обработчиков сообщений](../mfc/declaring-message-handler-functions.md)
