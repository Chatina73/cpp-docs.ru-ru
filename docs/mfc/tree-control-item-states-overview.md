---
title: Общие сведения о состояниях элемента древовидного элемента управления
ms.date: 11/04/2016
helpviewer_keywords:
- states, CTreeCtrl items
- tree controls [MFC], item states overview
- CTreeCtrl class [MFC], item states
ms.assetid: 2db11ae0-0d87-499d-8c1f-5e0dbe9e94c8
ms.openlocfilehash: bbeabf69f174fcf172808ff71f07ed05f1dc9675
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69511040"
---
# <a name="tree-control-item-states-overview"></a>Общие сведения о состояниях элемента древовидного элемента управления

Каждый элемент в элементе управления "дерево" ([CTreeCtrl](../mfc/reference/ctreectrl-class.md)) имеет текущее состояние. Например, элемент может быть выбран, отключен, развернут и т. д. В большинстве случаев элемент управления "дерево" автоматически задает состояние элемента для отражения действий пользователя, таких как выборка элемента. Однако можно также задать состояние элемента с помощью функции члена [сетитемстате](../mfc/reference/ctreectrl-class.md#setitemstate) и получить текущее состояние элемента с помощью функции члена [жетитемстате](../mfc/reference/ctreectrl-class.md#getitemstate) . Полный список состояний элементов см. в разделе [константы управления представлением дерева](/windows/win32/Controls/tree-view-control-item-states) в Windows SDK.

Текущее состояние элемента задается параметром *nсведения* . Элемент управления "дерево" может изменить состояние элемента в соответствии с действиями пользователя, например выбрать элемент или установить фокус на элемент. Кроме того, приложение может изменить состояние элемента, чтобы отключить или скрыть элемент или указать изображение оверлея или изображение состояния.

При указании или изменении состояния элемента параметр *нстатемаск* указывает, какие биты состояния следует задать, а параметр *nсведения* содержит новые значения для этих битов. Например, следующий пример изменяет текущее состояние родительского элемента (заданного параметром *хпарентитем*) в `CTreeCtrl` объекте (`m_treeCtrl`) на `TVIS_EXPANDPARTIAL`:

[!code-cpp[NVC_MFCControlLadenDialog#71](../mfc/codesnippet/cpp/tree-control-item-states-overview_1.cpp)]

Еще один пример изменения состояния — установка изображения оверлея элемента. Для этого *нстатемаск* должен включать `TVIS_OVERLAYMASK` значение, а *nсведения* должен включать Отсчитываемый от нуля индекс перекрытия изображения, смещенного влево на восемь бит, с помощью макроса [индекстуверлаймаск](/windows/win32/api/commctrl/nf-commctrl-indextooverlaymask) . Индекс может быть равен 0, чтобы не указывать изображение оверлея. Изображение оверлея должно быть добавлено к списку наложенных изображений в древовидном элементе управления по предыдущему вызову функции [CImageList:: сетоверлайимаже](../mfc/reference/cimagelist-class.md#setoverlayimage) . Функция задает отсчитываемый от единицы индекс добавляемого изображения; Это индекс, используемый с макросом ИНДЕКСТУВЕРЛАЙМАСК. Элемент управления "дерево" может содержать до четырех изображений оверлея.

Чтобы задать изображение состояния элемента, *нстатемаск* должно включать `TVIS_STATEIMAGEMASK` значение, а *nсведения* должен включать Отсчитываемый от единицы индекс изображения состояния, смещенного влево 12 бит, с помощью макроса [индекстостатеимажемаск](/windows/win32/api/commctrl/nf-commctrl-indextostateimagemask) . Индекс может быть равен 0, чтобы не указывать изображение состояния. Дополнительные сведения о наложения и изображениях состояний см. в разделе [древовидные списки изображений](../mfc/tree-control-image-lists.md).

## <a name="see-also"></a>См. также

[Использование CTreeCtrl](../mfc/using-ctreectrl.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)
