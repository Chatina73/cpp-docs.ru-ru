---
description: 'Дополнительные сведения: при вызове обработчиков обновлений'
title: Ситуации вызова обработчиков обновления
ms.date: 11/04/2016
helpviewer_keywords:
- updating user interface objects [MFC]
- command routing [MFC], update commands
- toolbar buttons [MFC], enabling
- disabling toolbar buttons
- menus [MFC], initializing
- update handlers [MFC]
- disabling menu items
- toolbars [MFC], updating
- menus [MFC], updating as context changes
- toolbar controls [MFC], updated during OnIdle method [MFC]
- menu items, enabling
- command routing [MFC], update handlers
- update handlers, calling
ms.assetid: 7359f6b1-4669-477d-bd99-690affed08d9
ms.openlocfilehash: ee5d402eea4121c9ceb4bcbd48e752549c55b1c1
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97297178"
---
# <a name="when-update-handlers-are-called"></a>Ситуации вызова обработчиков обновления

Предположим, что пользователь щелкает мышью в меню файл, который создает WM_INITMENUPOPUP сообщение. Механизм обновления платформы совместно обновляет все элементы в меню файл до того, как меню выпадает, чтобы пользователь мог его увидеть.

Для этого платформа выполняет маршрутизацию команд обновления для всех пунктов меню во всплывающем меню и стандартной маршрутизации команд. Целевые объекты команды в маршрутизации имеют возможность обновить все пункты меню, сопоставляя команду Update с соответствующей записью сопоставления сообщений (формы `ON_UPDATE_COMMAND_UI` ) и вызовом функции "обновить обработчик". Таким же, для меню с шестью элементами меню отправляются шесть команд обновления. Если обработчик обновления существует для идентификатора команды пункта меню, он вызывается для выполнения обновления. В противном случае платформа проверяет наличие обработчика для этого идентификатора команды и включает или отключает соответствующий пункт меню.

Если платформа не находит `ON_UPDATE_COMMAND_UI` запись во время маршрутизации команд, она автоматически включает объект пользовательского интерфейса, если имеется `ON_COMMAND` запись с таким же идентификатором команды. В противном случае он отключает объект пользовательского интерфейса. Таким образом, чтобы обеспечить включение объекта пользовательского интерфейса, укажите обработчик для команды, которую создает объект, или укажите для него обработчик обновления. См. рисунок в разделе [объекты пользовательского интерфейса и идентификаторы команд](../mfc/user-interface-objects-and-command-ids.md).

Можно отключить отключение по умолчанию для объектов пользовательского интерфейса. Дополнительные сведения см. в разделе [m_bAutoMenuEnable](../mfc/reference/cframewnd-class.md#m_bautomenuenable) Member класса `CFrameWnd` в *справочнике по MFC*.

Инициализация меню выполняется автоматически в платформе, когда приложение получает WM_INITMENUPOPUP сообщение. Во время цикла простоя платформа ищет в маршруте команды обработчики обновления кнопок во многом так же, как и для меню.

## <a name="see-also"></a>См. также раздел

[Руководство. обновление объектов User-Interface](../mfc/how-to-update-user-interface-objects.md)
