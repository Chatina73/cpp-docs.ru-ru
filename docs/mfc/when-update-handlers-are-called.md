---
title: Ситуации вызова обработчиков обновления
ms.date: 11/04/2016
helpviewer_keywords:
- updating user interface objects [MFC]
- command routing [MFC], update commands
- toolbar buttons [MFC], enabling
- disabling toolbar buttons
- menus [MFC], initializing
- update handlers [MFC]
- disabling menu items
- toolbars [MFC], updating
- menus [MFC], updating as context changes
- toolbar controls [MFC], updated during OnIdle method [MFC]
- menu items, enabling
- command routing [MFC], update handlers
- update handlers, calling
ms.assetid: 7359f6b1-4669-477d-bd99-690affed08d9
ms.openlocfilehash: 4a52c147d1abf02b7c5e89abf868f87a07ab32cc
ms.sourcegitcommit: c6f8e6c2daec40ff4effd8ca99a7014a3b41ef33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2019
ms.locfileid: "64346060"
---
# <a name="when-update-handlers-are-called"></a>Ситуации вызова обработчиков обновления

Предположим, что пользователь нажимает кнопку мыши в меню "файл", который создает сообщение WM_INITMENUPOPUP. Механизм обновления Собирательно обновляет все элементы в меню "файл", перед раскрывающимся меню, поэтому пользователь может видеть его.

Чтобы сделать это, маршруты framework обновить команды для всех элементов меню в контекстном меню вдоль стандартной маршрутизации команд. Целевые объекты команды в маршруте иметь возможность обновить все пункты меню, сопоставляя команду update с записью соответствующие схемы сообщений (в формате `ON_UPDATE_COMMAND_UI`) и вызов функции «обработчик обновлений». Таким образом для меню с шесть элементов меню, шесть команд update отправки. Если идентификатор команды для пункта меню обработчика обновлений, он вызывается для заниматься. В противном случае платформа проверяет наличие обработчика для этого идентификатора команды и включает или отключает пункт меню, соответствующим образом.

Если платформа не удается найти `ON_UPDATE_COMMAND_UI` запись во время маршрутизации команд, он автоматически включает объект пользовательского интерфейса при наличии `ON_COMMAND` запись где-нибудь с таким же идентификатором команды. В противном случае он отключает объект пользовательского интерфейса. Таким образом чтобы убедиться, что включен объект пользовательского интерфейса, предоставляете обработчик для команды, которую создает объект, или указать обработчик для него. См. рисунок в разделе [объекты пользовательского интерфейса и идентификаторы команд](../mfc/user-interface-objects-and-command-ids.md).

Это можно отключить, отключение объекты пользовательского интерфейса по умолчанию. Дополнительные сведения см. в разделе [m_bAutoMenuEnable](../mfc/reference/cframewnd-class.md#m_bautomenuenable) член класса `CFrameWnd` в *Справочник по библиотеке MFC*.

Меню инициализации выполняется автоматически в структуре, возникающее, когда приложение получает сообщение WM_INITMENUPOPUP. Во время цикла простоя платформой поиска по маршрутизации команд для обработчиков кнопку обновления в так же, как и для меню.

## <a name="see-also"></a>См. также

[Практическое руководство. Обновление объектов пользовательского интерфейса](../mfc/how-to-update-user-interface-objects.md)
