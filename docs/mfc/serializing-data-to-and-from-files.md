---
title: Сериализация данных в файлы и из них
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], serialization
- documents [MFC], saving
- saving documents
- deserialization [MFC]
- serialization [MFC], role of document
- serialization [MFC], role of data
- data [MFC]
- data [MFC], serializing
- document data [MFC]
ms.assetid: b42a0c68-4bc4-4012-9938-5433a26d2c24
ms.openlocfilehash: 043ba019c6b5ad79db2cedb6314c9e65f14b14b5
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81376937"
---
# <a name="serializing-data-to-and-from-files"></a>Сериализация данных в файлы и из них

Основная идея сохранения заключается в том, что объект должен иметь возможность записывать свое текущее состояние, указанное значениями переменных его членов, в постоянное хранилище. Позже объект может быть воссоздан путем чтения или «десериализации» состояния объекта из постоянного хранилища. Ключевым моментом здесь является то, что сам объект отвечает за чтение и написание своего состояния. Таким образом, для того, чтобы класс был настойчивым, он должен реализовать основные операции сериализации.

Платформа обеспечивает реализацию по умолчанию для сохранения файлов диска в ответ на команды Сохранить и Сохранить Как в меню файла и для загрузки документов из дисковых файлов в ответ на открытую команду. При очень небольшом объеме работы можно реализовать способность документа писать и читать его данные в файл и из нее. Главное, что вы должны сделать, это переопределить функцию участника [Serialize](../mfc/reference/cobject-class.md#serialize) в классе документов.

Мастер приложения MFC помещает переопределение скелета `CDocument` функции `Serialize` участника в классе документов, который он создает для вас. После того как вы внедрили переменные вашего приложения, вы можете заполнить `Serialize` переопределение кодом, который отправляет данные на "объект архива", подключенный к файлу. Объект [CArchive](../mfc/reference/carchive-class.md) похож на входной/выходной объекты **cin** и **cout** из библиотеки C'йоstream. Тем `CArchive` не менее, пишет и читает двоичный формат, а не отформатированный текст.

## <a name="what-do-you-want-to-know-more-about"></a>Что вы хотите узнать больше о

- [Сериализация](../mfc/serialization-in-mfc.md)

- [Роль документа в сериализации](#_core_the_document.92.s_role_in_serialization)

- [Роль данных в сериализации](#_core_the_data.92.s_role_in_serialization)

- [Обход механизма сериализации](../mfc/bypassing-the-serialization-mechanism.md)

## <a name="the-documents-role-in-serialization"></a><a name="_core_the_document.92.s_role_in_serialization"></a>Роль документа в сериализации

Платформа автоматически реагирует на команды меню «Открыть, сохранить и сохранить как» по `Serialize` вызову функции элемента документа, если она реализована. Например, команда ID_FILE_OPEN вызывает функцию обработчика в объекте приложения. Во время этого процесса пользователь видит и реагирует на диалоговое окно File Open, и фреймворк получает имя файла, которое пользователь выбирает. Платформа создает `CArchive` объект, настроенный для загрузки данных `Serialize`в документ, и передает архив. Платформа уже открыла файл. Код в функции `Serialize` члена документа считывает данные через архив, реконструируя объекты данных по мере необходимости. Для получения дополнительной информации о [Serialization](../mfc/serialization-in-mfc.md)сериализации, см.

## <a name="the-datas-role-in-serialization"></a><a name="_core_the_data.92.s_role_in_serialization"></a>Роль данных в сериализации

Как правило, данные типа должны быть в состоянии сериализировать себя. То есть, когда вы передаете объект в архив, объект должен знать, как записать себя в архив и как читать себя из архива. MFC оказывает поддержку для создания классов сериализируемыми таким образом. Если вы проектируете класс для определения типа данных и собираетесь сериализировать данные этого типа, проект для сериализации.

## <a name="see-also"></a>См. также раздел

[Использование документов](../mfc/using-documents.md)
