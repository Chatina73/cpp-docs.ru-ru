---
title: Сериализация данных в файлы и из них
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], serialization
- documents [MFC], saving
- saving documents
- deserialization [MFC]
- serialization [MFC], role of document
- serialization [MFC], role of data
- data [MFC]
- data [MFC], serializing
- document data [MFC]
ms.assetid: b42a0c68-4bc4-4012-9938-5433a26d2c24
ms.openlocfilehash: af3cde9445ae4b128e7e54a5f154db01b2eecd3b
ms.sourcegitcommit: c3093251193944840e3d0a068ecc30e6449624ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2019
ms.locfileid: "57279267"
---
# <a name="serializing-data-to-and-from-files"></a>Сериализация данных в файлы и из них

Основная идея сохраняемости является то, что объект должен иметь возможность записи текущего состояния, представленные значениями переменных-членов в постоянное хранилище. Позже объект может быть воссоздан путем чтения, или «десериализации,» состояние объекта из постоянного хранилища. Ключевой момент здесь является то, что сам объект отвечает за чтение и запись собственное состояние. Таким образом класс может быть постоянным, он должен реализовать операции базовой сериализации.

Платформа предоставляет реализацию по умолчанию для сохранения документов в ответ для сохранения файлов и сохранение команд, в меню "файл", а также для загрузки документов из файлов на диске в ответ на команду «Открыть». С небольшими затратами усилий можно реализовать возможность записи и чтения данных в файл и из документа. Главное, что необходимо сделать — переопределение [Serialize](../mfc/reference/cobject-class.md#serialize) функции-члена в классе документа.

Мастер приложений MFC помещает базовой переопределение метода `CDocument` функция-член `Serialize` в классе документа, он создает для вас. После реализации переменных-членов в приложении, можно заполнить вашей `Serialize` переопределения с кодом, который отправляет данные в «архив объект» подключение к файлу. Объект [CArchive](../mfc/reference/carchive-class.md) объект подобен **cin** и **cout** входных и выходных объектов библиотеки iostream C++. Тем не менее `CArchive` записывает и считывает двоичный формат, не форматированный текст.

## <a name="what-do-you-want-to-know-more-about"></a>Выберите для получения дополнительных сведений

- [Сериализация](../mfc/serialization-in-mfc.md)

- [Роль документа в сериализации](#_core_the_document.92.s_role_in_serialization)

- [Роль данных сериализации](#_core_the_data.92.s_role_in_serialization)

- [Обход механизма сериализации](../mfc/bypassing-the-serialization-mechanism.md)

##  <a name="_core_the_document.92.s_role_in_serialization"></a> Роль документа в сериализации

Платформа автоматически реагирует на него для открытия меню «файл», сохраните и сохранить в виде команд, вызвав документа `Serialize` функция-член, если оно реализовано. Id_file_open-команда, например, вызывает функцию обработчика событий в объекте приложения. Во время этого процесса пользователь увидит и отвечает на диалоговом окне открытия файла и платформа получает имя файла, которые пользователь решает. Платформа создает `CArchive` набор объектов для загрузки данных в документ и передает архив `Serialize`. Файл уже открыт платформы. Код в ваш документ `Serialize` функция-член считывает данные из через архива, выполняется восстановление объектов данных, при необходимости. Дополнительные сведения о сериализации см. в статье [сериализации](../mfc/serialization-in-mfc.md).

##  <a name="_core_the_data.92.s_role_in_serialization"></a> Роль данных сериализации

Как правило данные типа класса должны иметь возможность сериализовать себя. То есть при передаче объекта в архив, объект следует знать, как записать себя в архив и сам чтение из архива. MFC предоставляет поддержку для создания классов, сериализуемые таким образом. При создании класса, чтобы определить тип данных и вам нужна для сериализации данных этого типа конструктора для сериализации.

## <a name="see-also"></a>См. также

[Использование документов](../mfc/using-documents.md)
