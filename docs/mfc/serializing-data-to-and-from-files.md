---
description: 'Дополнительные сведения: сериализация данных в файлы и обратно'
title: Сериализация данных в файлы и из них
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], serialization
- documents [MFC], saving
- saving documents
- deserialization [MFC]
- serialization [MFC], role of document
- serialization [MFC], role of data
- data [MFC]
- data [MFC], serializing
- document data [MFC]
ms.assetid: b42a0c68-4bc4-4012-9938-5433a26d2c24
ms.openlocfilehash: 58956b2f11b8f0131aae74a6c5b51715fe25c7e6
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97217449"
---
# <a name="serializing-data-to-and-from-files"></a>Сериализация данных в файлы и из них

Основная идея сохраняемости заключается в том, что объект должен иметь возможность записи его текущего состояния, обозначенного значениями его переменных-членов, в постоянное хранилище. Позднее объект может быть создан повторно путем чтения или десериализации состояния объекта из постоянного хранилища. Ключевой момент заключается в том, что сам объект отвечает за чтение и запись его собственного состояния. Таким же, чтобы класс был постоянным, он должен реализовать базовые операции сериализации.

Платформа предоставляет реализацию по умолчанию для сохранения документов на дисковых файлах в ответ на команды Сохранить и сохранить как в меню файл, а также для загрузки документов из дисковых файлов в ответ на команду Открыть. При очень незначительной работе можно реализовать возможность документа записывать и считывать данные из файла и из него. Основное, что необходимо сделать, это переопределить функцию-член [сериализации](../mfc/reference/cobject-class.md#serialize) в классе документа.

Мастер приложений MFC помещает переопределение скелетообразных функции- `CDocument` члена `Serialize` в класс документа, который он создает. После реализации переменных-членов приложения можно ввести `Serialize` Переопределение с помощью кода, который отправляет данные в "архивный объект", подключенный к файлу. Объект [CArchive](../mfc/reference/carchive-class.md) аналогичен входным и выходным объектам **cIn** и **cout** из библиотеки iostream C++. Однако `CArchive` записывает и считывает двоичный формат, а не форматированный текст.

## <a name="what-do-you-want-to-know-more-about"></a>Что вы хотите узнать подробнее

- [Сериализация](../mfc/serialization-in-mfc.md)

- [Роль документа в сериализации](#_core_the_document.92.s_role_in_serialization)

- [Роль данных в сериализации](#_core_the_data.92.s_role_in_serialization)

- [Обход механизма сериализации](../mfc/bypassing-the-serialization-mechanism.md)

## <a name="the-documents-role-in-serialization"></a><a name="_core_the_document.92.s_role_in_serialization"></a> Роль документа в сериализации

Платформа автоматически реагирует на команды Open, Save и Save в меню File, вызывая функцию-член документа, `Serialize` если она реализована. Например, Команда ID_FILE_OPEN вызывает функцию обработчика в объекте Application. Во время этого процесса пользователь видит и реагирует на диалоговое окно Открыть файл, и платформа получает имя файла, выбранное пользователем. Платформа создает объект, `CArchive` настроенный для загрузки данных в документ, и передает Архив в `Serialize` . Платформа уже открыла файл. Код в `Serialize` функции-члене документа считывает данные из в архиве, пересоздавая объекты данных по мере необходимости. Дополнительные сведения о сериализации см. в статье [сериализация](../mfc/serialization-in-mfc.md).

## <a name="the-datas-role-in-serialization"></a><a name="_core_the_data.92.s_role_in_serialization"></a> Роль данных в сериализации

Как правило, данные типа класса должны иметь возможность сериализовать сам себя. Это значит, что при передаче объекта в архив объект должен уметь записать себя в архив и как читать его из архива. MFC обеспечивает поддержку для создания классов, сериализуемых таким образом. Если вы разрабатываете класс для определения типа данных и планируете сериализовать данные этого типа, разработайте для сериализации.

## <a name="see-also"></a>См. также раздел

[Использование документов](../mfc/using-documents.md)
