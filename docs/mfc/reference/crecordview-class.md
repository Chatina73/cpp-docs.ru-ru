---
title: Класс CRecordView
ms.date: 11/04/2016
f1_keywords:
- CRecordView
- AFXDB/CRecordView
- AFXDB/CRecordView::CRecordView
- AFXDB/CRecordView::IsOnFirstRecord
- AFXDB/CRecordView::IsOnLastRecord
- AFXDB/CRecordView::OnGetRecordset
- AFXDB/CRecordView::OnMove
helpviewer_keywords:
- CRecordView [MFC], CRecordView
- CRecordView [MFC], IsOnFirstRecord
- CRecordView [MFC], IsOnLastRecord
- CRecordView [MFC], OnGetRecordset
- CRecordView [MFC], OnMove
- CRecordView [MFC], OnMove
ms.assetid: 9b4b0897-bd50-4d48-a0b4-f3323f5ccc55
ms.openlocfilehash: c7013fb53562fd76744bff19d1d37ce972a52d52
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50643874"
---
# <a name="crecordview-class"></a>Класс CRecordView

Представление, которое отображает записи базы данных в элементах управления.

## <a name="syntax"></a>Синтаксис

```
class AFX_NOVTABLE CRecordView : public CFormView
```

## <a name="members"></a>Участники

### <a name="protected-constructors"></a>Защищенные конструкторы

|Имя|Описание|
|----------|-----------------|
|[CRecordView::CRecordView](#crecordview)|Создает объект `CRecordView`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CRecordView::IsOnFirstRecord](#isonfirstrecord)|Возвращает ненулевое значение, если текущая запись является первой записью в связанных записей.|
|[CRecordView::IsOnLastRecord](#isonlastrecord)|Возвращает ненулевое значение, если текущая запись является последней записи в наборе связанных записей.|
|[CRecordView::OnGetRecordset](#ongetrecordset)|Возвращает указатель на объект класса, производного от `CRecordset`. ClassWizard переопределяет эту функцию автоматически и при необходимости создает набор записей.|
|[CRecordView::OnMove](#onmove)||

### <a name="protected-methods"></a>Защищенные методы

|Имя|Описание|
|----------|-----------------|
|[CRecordView::OnMove](#onmove)|При изменении текущей записи, обновляет его в источнике данных, а затем переходит к указанной записи (следующего, предыдущего, первого или последнего).|

## <a name="remarks"></a>Примечания

Представление — представление формы, который напрямую подключен к `CRecordset` объекта. Представление создается на основе ресурса шаблона диалоговых окон и отображает поля `CRecordset` в элементах управления шаблона диалогового окна. `CRecordView` Объект использует обмен данными диалоговых окон (DDX) и обмен полями записей (RFX) для автоматизации перемещения данных между полями набора записей и элементов управления на форме. `CRecordView` также предоставляет реализацию по умолчанию для перехода к первой, далее, предыдущих или последних записей и интерфейс для обновления записи в данный момент в представлении.

> [!NOTE]
>  Если вы работаете с классами объектов доступа к данным (DAO) вместо классов Open Database Connectivity (ODBC), используйте класс [CDaoRecordView](../../mfc/reference/cdaorecordview-class.md) вместо этого. Дополнительные сведения см. в статье [Обзор: программирования баз данных,](../../data/data-access-programming-mfc-atl.md).

С помощью мастера приложений является наиболее распространенным способом для создания представления записи. Мастер приложений Tge создает класс представления записей и его связанного набора записей класса как часть приложения скелет starter. Если не создать класс представления записей с помощью мастера приложений, его можно создать позже с помощью классов. Если вам достаточно одной форме, мастер приложений варианте развертывания упрощается. ClassWizard позволяет решить, использование представления записей позже в процессе разработки. Создание представления записей и записей отдельно и затем подключите их с помощью ClassWizard — это самый гибкий подход, потому, что он предоставляет больший контроль при именовании класса набора записей и его. H /. CPP-файлов. Такой подход также позволяет иметь несколько представлений записей для одного класса набор записей.

Чтобы упростить для конечных пользователей, для перемещения по записям в представлении записей, мастер приложения создает меню (и, при необходимости, панели инструментов) материалы по переходу к первой, далее, предыдущих или последних записей. Если создать класс представления записей с помощью классов, необходимо создать эти ресурсы самостоятельно с меню и растровое изображение редакторов.

Сведения о реализации по умолчанию для перемещения между записями, см. в разделе `IsOnFirstRecord` и `IsOnLastRecord` и статью [использование представления записей](../../data/using-a-record-view-mfc-data-access.md).

`CRecordView` отслеживает этой положение пользователя в наборе записей, представление записей можно обновить пользовательский интерфейс. Когда пользователь переходит на любом конце набора записей, представление записей отключает объектов пользовательского интерфейса, например пункты меню или кнопки панели инструментов — для перемещения в одном направлении.

Дополнительные сведения об объявлении и с помощью представления записей и классов набора записей, см. в разделе «Проектирование и создание записи представления» в этой статье [представления записей](../../data/record-views-mfc-data-access.md). Дополнительные сведения о как запись представления рабочих и способах их использования см. в статье [использование представления записей](../../data/using-a-record-view-mfc-data-access.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CView](../../mfc/reference/cview-class.md)

[CScrollView](../../mfc/reference/cscrollview-class.md)

[CFormView](../../mfc/reference/cformview-class.md)

`CRecordView`

## <a name="requirements"></a>Требования

**Заголовок:** afxdb.h

##  <a name="crecordview"></a>  CRecordView::CRecordView

При создании объекта типа производным от `CRecordView`, вызывать любую из конструктора для инициализации объекта представления и определения ресурса диалогового окна, на котором основано представление.

```
explicit CRecordView(LPCTSTR lpszTemplateName);
explicit CRecordView(UINT nIDTemplate);
```

### <a name="parameters"></a>Параметры

*lpszTemplateName*<br/>
Содержащий заканчивающуюся нулем строку, имя ресурса шаблона диалоговых окон.

*nIDTemplate*<br/>
Содержит идентификатор ресурса шаблона диалоговых окон.

### <a name="remarks"></a>Примечания

Можно либо указать ресурс по имени (pass строку в качестве аргумента конструктору) или по его Идентификатору (pass целое число без знака в качестве аргумента). Ресурс идентификатор рекомендуется использовать.

> [!NOTE]
>  Производный класс *необходимо* предоставить собственный конструктор. В конструкторе производного класса, вызовите конструктор `CRecordView::CRecordView` с именем ресурса или идентификатор в качестве аргумента, как показано в следующем примере.

`CRecordView::OnInitialUpdate` вызовы `UpdateData`, который вызывает `DoDataExchange`. Этот исходный вызов `DoDataExchange` подключается `CRecordView` управляет (косвенно) к `CRecordset` поля элементов данных, созданных классов. Эти элементы данных не может использоваться до, после вызова метода базового класса `CFormView::OnInitialUpdate` функция-член.

> [!NOTE]
>  Если вы используете ClassWizard, мастер определяет **перечисления** значение `CRecordView::IDD`, он указан в объявлении класса и использует его в списке инициализации членов конструктора.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDatabase#32](../../mfc/codesnippet/cpp/crecordview-class_1.cpp)]

##  <a name="isonfirstrecord"></a>  CRecordView::IsOnFirstRecord

Вызывайте эту функцию члена, чтобы определить, является ли текущая запись первой записи в объекте набора записей, связанный с этим представлением записи.

```
BOOL IsOnFirstRecord();
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если текущая запись является первой записью в наборе записей; в противном случае 0.

### <a name="remarks"></a>Примечания

Эта функция полезна для написания собственных реализаций по умолчанию обработчики обновления команд, созданных классов.

Если пользователь переходит на первую запись, платформа отключает любой объектов пользовательского интерфейса, который имеется для перехода к первому или предыдущей записи.

##  <a name="isonlastrecord"></a>  CRecordView::IsOnLastRecord

Вызывайте эту функцию члена, чтобы определить, является ли текущая запись последней записи в объекте набора записей, связанный с этим представлением записи.

```
BOOL IsOnLastRecord();
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если текущая запись является последней записи в наборе записей; в противном случае 0.

### <a name="remarks"></a>Примечания

Эта функция полезна для написания собственных реализаций по умолчанию обработчики обновления команд, которые ClassWizard записывает поддержку пользовательского интерфейса для перехода между записями.

> [!CAUTION]
>  Результат этой функции надежен, за исключением того, что представление не может обнаружить в конец набора записей, пока пользователь уже прошел его. Пользователю необходимо переместить за пределы последней записи перед представления записей можно сказать, что его необходимо отключить все объекты пользовательского интерфейса для перемещения к следующей или последней записи. Если пользователь перемещается за пределы последнюю запись и затем переход к последней записи (или перед ним), представление записей можно отслеживать положение пользователя в наборе записей и корректно отключена объекты пользовательского интерфейса. `IsOnLastRecord` также является ненадежным после вызова функции реализации `OnRecordLast`, который обрабатывает команду ID_RECORD_LAST или `CRecordset::MoveLast`.

##  <a name="ongetrecordset"></a>  CRecordView::OnGetRecordset

Возвращает указатель на `CRecordset`-производного объекта, связанного с представлением записи.

```
virtual CRecordset* OnGetRecordset() = 0;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на `CRecordset`-производного объекта, если объект был успешно создан; в противном случае указатель NULL.

### <a name="remarks"></a>Примечания

Эта функция-член для создания или получения объекта набора записей и возврата указателя на его необходимо переопределить. Если вы объявляете класс представления записей с помощью классов, мастер создает переопределение по умолчанию. Реализация по умолчанию в ClassWizard возвращает набор записей указателем, сохраненным в представление записей, если он существует. Если нет, он создает объект набора записей типа вы указали с ClassWizard и вызывает его `Open` член функции для открытия таблицы или выполнения запроса и затем возвращает указатель на объект.

Дополнительные сведения и примеры см. в статье [представления записей: использование представления записей](../../data/using-a-record-view-mfc-data-access.md).

##  <a name="onmove"></a>  CRecordView::OnMove

Вызов этой функции-члена для перемещения на другую запись в наборе записей и отобразить ее поля в элементах управления представления записи.

```
virtual BOOL OnMove(UINT nIDMoveCommand);
```

### <a name="parameters"></a>Параметры

*nIDMoveCommand*<br/>
Одно из следующих значений ID стандартную команду:

- Переместите ID_RECORD_FIRST первой записи в наборе записей.

- ID_RECORD_LAST перейти к последней записи в наборе записей.

- ID_RECORD_NEXT перемещения к следующей записи в наборе записей.

- ID_RECORD_PREV перейти к предыдущей записи в наборе записей.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если перемещение прошло успешно; в противном случае — 0, если запрос на перемещение был отклонен.

### <a name="remarks"></a>Примечания

Реализация по умолчанию вызывает соответствующий `Move` функцию-член `CRecordset` объекта, связанного с представлением записи.

По умолчанию `OnMove` обновляет текущую запись в источнике данных, если пользователь изменил его в представлении записей.

В мастере приложений создает ресурс меню с пунктами меню первой записи, последнюю запись, следующая запись и предыдущей записи. Если выбран параметр Закрепляемая панель инструментов, мастер приложений также создает панель инструментов с кнопками, соответствующий эти команды.

При перемещении за последней записью в наборе записей, представление записей продолжают отображаться последнюю запись. Если переместить назад после первой записи, представление записей продолжают отображаться первой записи.

> [!CAUTION]
>  Вызов `OnMove` создает исключение, если набор записей не имеющей записей. Вызов функции-обработчика обновить соответствующий пользовательский интерфейс — `OnUpdateRecordFirst`, `OnUpdateRecordLast`, `OnUpdateRecordNext`, или `OnUpdateRecordPrev` — до соответствующего переместить операцию, чтобы определить, имеет ли набор записей какие-либо записи.

## <a name="see-also"></a>См. также

[Класс CFormView](../../mfc/reference/cformview-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CRecordset](../../mfc/reference/crecordset-class.md)<br/>
[Класс CFormView](../../mfc/reference/cformview-class.md)
