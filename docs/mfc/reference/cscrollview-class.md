---
description: 'Дополнительные сведения о: Кскроллвиев Class'
title: Класс Кскроллвиев
ms.date: 11/04/2016
f1_keywords:
- CScrollView
- AFXWIN/CScrollView
- AFXWIN/CScrollView::CScrollView
- AFXWIN/CScrollView::CheckScrollBars
- AFXWIN/CScrollView::FillOutsideRect
- AFXWIN/CScrollView::GetDeviceScrollPosition
- AFXWIN/CScrollView::GetDeviceScrollSizes
- AFXWIN/CScrollView::GetScrollPosition
- AFXWIN/CScrollView::GetTotalSize
- AFXWIN/CScrollView::ResizeParentToFit
- AFXWIN/CScrollView::ScrollToPosition
- AFXWIN/CScrollView::SetScaleToFitSize
- AFXWIN/CScrollView::SetScrollSizes
helpviewer_keywords:
- CScrollView [MFC], CScrollView
- CScrollView [MFC], CheckScrollBars
- CScrollView [MFC], FillOutsideRect
- CScrollView [MFC], GetDeviceScrollPosition
- CScrollView [MFC], GetDeviceScrollSizes
- CScrollView [MFC], GetScrollPosition
- CScrollView [MFC], GetTotalSize
- CScrollView [MFC], ResizeParentToFit
- CScrollView [MFC], ScrollToPosition
- CScrollView [MFC], SetScaleToFitSize
- CScrollView [MFC], SetScrollSizes
ms.assetid: 4ba16dac-1acb-4be0-bb55-5fb695b6948d
ms.openlocfilehash: 76045f640cf74b650fbbf48dead7ee44c57fbd87
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97342908"
---
# <a name="cscrollview-class"></a>Класс Кскроллвиев

Объект [CView](../../mfc/reference/cview-class.md) с возможностями прокрутки.

## <a name="syntax"></a>Синтаксис

```
class CScrollView : public CView
```

## <a name="members"></a>Члены

### <a name="protected-constructors"></a>Защищенные конструкторы

|Имя|Описание|
|----------|-----------------|
|[Кскроллвиев:: Кскроллвиев](#cscrollview)|Формирует объект `CScrollView`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кскроллвиев:: Чеккскроллбарс](#checkscrollbars)|Указывает, имеет ли прокручиваемое представление горизонтальные и вертикальные полосы прокрутки.|
|[Кскроллвиев:: Филлаутсидерект](#filloutsiderect)|Заполняет область представления за пределами области прокрутки.|
|[Кскроллвиев:: Жетдевицескроллпоситион](#getdevicescrollposition)|Возвращает текущее расположение прокрутки в единицах устройства.|
|[Кскроллвиев:: Жетдевицескроллсизес](#getdevicescrollsizes)|Возвращает текущий режим сопоставления, общий размер, а также размеры линий и страниц для прокручиваемого представления. Размеры задаются в единицах устройства.|
|[Кскроллвиев:: Жетскроллпоситион](#getscrollposition)|Возвращает текущее расположение прокрутки в логических единицах.|
|[Кскроллвиев:: GetTotalSize](#gettotalsize)|Возвращает общий размер представления прокрутки в логических устройствах.|
|[Кскроллвиев:: Ресизепаренттофит](#resizeparenttofit)|Заставляет размер представления определять размер фрейма.|
|[Кскроллвиев:: Скроллтопоситион](#scrolltoposition)|Прокручивает представление до заданной точки, заданной в логических единицах.|
|[Кскроллвиев:: Сетскалетофитсизе](#setscaletofitsize)|Переводит представление прокрутки в режим масштабирования по размеру.|
|[Кскроллвиев:: Сетскроллсизес](#setscrollsizes)|Задает режим сопоставления для представления прокрутки, общий размер, горизонтальную и вертикальную прокрутку.|

## <a name="remarks"></a>Комментарии

Вы можете выполнять стандартную прокрутку в любом классе, производном от `CView` , переопределяя сопоставленные в сообщении функции-члены [Онхскролл](../../mfc/reference/cwnd-class.md#onhscroll) и [онвскролл](../../mfc/reference/cwnd-class.md#onvscroll) . Но `CScrollView` в его возможности добавлены следующие функции `CView` :

- Он управляет размерами окон и окна просмотра и режимами сопоставления.

- Он автоматически прокручивается в ответ на сообщения на полосе прокрутки.

- Он автоматически прокручивается в ответ на сообщения с клавиатуры, без прокрутки мыши или с помощью колеса IntelliMouse.

Чтобы автоматически выполнять прокрутку в ответ на сообщения с клавиатуры, добавьте WM_KEYDOWN сообщение и проверьте VK_DOWN VK_PREV и вызовите [сетскроллпос](/windows/win32/api/winuser/nf-winuser-setscrollpos).

Вы можете работать с прокруткой колесика мыши, переопределяя сопоставленные в сообщении функции-члены [онмаусевхил](../../mfc/reference/cwnd-class.md#onmousewheel) и [онрегистередмаусевхил](../../mfc/reference/cwnd-class.md#onregisteredmousewheel) . Как `CScrollView` и в случае, эти функции элементов поддерживают рекомендованное поведение для [WM_MOUSEWHEEL](/windows/win32/inputdev/wm-mousewheel), сообщение поворота колесика.

Чтобы воспользоваться преимуществами автоматической прокрутки, необходимо создать класс представления, производный от, `CScrollView` а не от `CView` . При первом создании представления, если требуется вычислить размер прокручиваемого представления в зависимости от размера документа, вызовите `SetScrollSizes` функцию-член из переопределения метода [CView:: Онинитиалупдате](../../mfc/reference/cview-class.md#oninitialupdate) или [CView:: OnUpdate](../../mfc/reference/cview-class.md#onupdate). (Для запроса размера документа необходимо написать собственный код. Пример см. в примере [Scribble](../../overview/visual-cpp-samples.md).)

Вызов `SetScrollSizes` функции члена задает режим сопоставления представления, общие размеры представления прокрутки и величины для горизонтальной и вертикальной прокрутки. Все размеры находятся в логических единицах. Логический размер представления обычно вычисляется на основе данных, хранящихся в документе, но в некоторых случаях может потребоваться указать фиксированный размер. Примеры обоих подходов см. в разделе [кскроллвиев:: сетскроллсизес](#setscrollsizes).

Вы указываете величины для горизонтальной и вертикальной прокрутки в логических единицах. По умолчанию, если пользователь щелкает полосу прокрутки Шафт за пределами ползунка, `CScrollView` прокручивает страницу. Если пользователь нажимает стрелку прокрутки в любом конце полосы прокрутки, `CScrollView` Прокручивает строку. По умолчанию страница имеет размер 1/10 из общего размера представления; линия составляет 1/10 из размера страницы. Переопределите эти значения по умолчанию, передав пользовательские размеры в `SetScrollSizes` функции члена. Например, для горизонтального размера можно задать некоторую часть ширины общего размера и вертикальный размер до высоты строки в текущем шрифте.

Вместо прокрутки `CScrollView` могут автоматически масштабировать представление до текущего размера окна. В этом режиме представление не имеет полос прокрутки, а логическое представление растягивается или сжимается в точном соответствии с клиентской областью окна. Чтобы использовать эту возможность масштабирования по размеру, вызовите [кскроллвиев:: сетскалетофитсизе](#setscaletofitsize). (Вызовите `SetScaleToFitSize` либо `SetScrollSizes` , либо, но не оба.)

Перед `OnDraw` вызовом функции-члена производного класса представления `CScrollView` автоматически настраивает источник окна просмотра для `CPaintDC` объекта контекста устройства, к которому он передается `OnDraw` .

Чтобы настроить источник окна просмотра для окна прокрутки, `CScrollView` переопределяет метод [CView:: онпрепаредк](../../mfc/reference/cview-class.md#onpreparedc). Эта корректировка выполняется автоматически для `CPaintDC` контекста устройства, который `CScrollView` передается в `OnDraw` , но его необходимо вызывать `CScrollView::OnPrepareDC` для любых других контекстов устройств, которые вы используете, например `CClientDC` . Можно переопределить, `CScrollView::OnPrepareDC` чтобы задать перо, цвет фона и другие атрибуты рисования, но вызвать базовый класс для масштабирования.

Полосы прокрутки могут отображаться в трех местах относительно представления, как показано в следующих случаях.

- Стандартные полосы прокрутки в стиле окна можно задать для представления с помощью стилей WS_HSCROLL и WS_VSCROLL[Windows](../../mfc/reference/styles-used-by-mfc.md#window-styles).

- Элементы управления "полоса прокрутки" также можно добавлять в фрейм, содержащий представление. в этом случае платформа пересылает WM_HSCROLL и WM_VSCROLL сообщения из окна фрейма в текущее активное представление.

- Платформа также пересылает сообщения прокрутки от `CSplitterWnd` элемента управления Splitter в текущую активную область разделителя (представление). При помещении в [CSplitterWnd](../../mfc/reference/csplitterwnd-class.md) с общими полосами прокрутки `CScrollView` объект будет использовать общие, а не создавать собственный.

Дополнительные сведения об использовании `CScrollView` см. в разделе [архитектура документа/представления](../../mfc/document-view-architecture.md) и [классы производного представления, доступные в MFC](../../mfc/derived-view-classes-available-in-mfc.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CView](../../mfc/reference/cview-class.md)

`CScrollView`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

## <a name="cscrollviewcheckscrollbars"></a><a name="checkscrollbars"></a> Кскроллвиев:: Чеккскроллбарс

Вызовите эту функцию члена, чтобы определить, имеет ли представление прокрутки горизонтальную и вертикальную черту.

```cpp
void CheckScrollBars(
    BOOL& bHasHorzBar,
    BOOL& bHasVertBar) const;
```

### <a name="parameters"></a>Параметры

*бхашорзбар*<br/>
Показывает, что в приложении есть горизонтальная полоса прокрутки.

*бхасвертбар*<br/>
Показывает, что в приложении есть вертикальная полоса прокрутки.

## <a name="cscrollviewcscrollview"></a><a name="cscrollview"></a> Кскроллвиев:: Кскроллвиев

Формирует объект `CScrollView`.

```
CScrollView();
```

### <a name="remarks"></a>Комментарии

Необходимо вызвать либо, `SetScrollSizes` либо `SetScaleToFitSize` до того, как будет использоваться представление прокрутки.

## <a name="cscrollviewfilloutsiderect"></a><a name="filloutsiderect"></a> Кскроллвиев:: Филлаутсидерект

Вызовите, `FillOutsideRect` чтобы заполнить область представления, которая находится за пределами области прокрутки.

```cpp
void FillOutsideRect(
    CDC* pDC,
    CBrush* pBrush);
```

### <a name="parameters"></a>Параметры

*Хозяин*<br/>
Контекст устройства, в котором должно выполняться заполнение.

*пбруш*<br/>
Кисть, с которой заполняется область.

### <a name="remarks"></a>Комментарии

Используйте `FillOutsideRect` в функции обработчика в режиме прокрутки `OnEraseBkgnd` , чтобы предотвратить чрезмерное перерисовку фона.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#164](../../mfc/codesnippet/cpp/cscrollview-class_1.cpp)]

## <a name="cscrollviewgetdevicescrollposition"></a><a name="getdevicescrollposition"></a> Кскроллвиев:: Жетдевицескроллпоситион

Вызывайте `GetDeviceScrollPosition` , когда требуется текущее горизонтальное и вертикальное положение полей прокрутки в полосах прокрутки.

```
CPoint GetDeviceScrollPosition() const;
```

### <a name="return-value"></a>Возвращаемое значение

Горизонтальное и вертикальное положение полей прокрутки (в единицах устройства) в виде `CPoint` объекта.

### <a name="remarks"></a>Комментарии

Эта пара координат соответствует расположению в документе, в котором прокручивается левый верхний угол представления. Это полезно для позиционирования позиций мыши на устройствах для прокрутки.

`GetDeviceScrollPosition` Возвращает значения в единицах устройства. Если требуются логические устройства, используйте `GetScrollPosition` вместо них.

## <a name="cscrollviewgetdevicescrollsizes"></a><a name="getdevicescrollsizes"></a> Кскроллвиев:: Жетдевицескроллсизес

`GetDeviceScrollSizes` Возвращает текущий режим сопоставления, общий размер, а также размеры линий и страниц для прокручиваемого представления.

```cpp
void GetDeviceScrollSizes(
    int& nMapMode,
    SIZE& sizeTotal,
    SIZE& sizePage,
    SIZE& sizeLine) const;
```

### <a name="parameters"></a>Параметры

*нмапмоде*<br/>
Возвращает текущий режим сопоставления для этого представления. Список возможных значений см. в разделе `SetScrollSizes`.

*сизетотал*<br/>
Возвращает текущий общий размер представления прокрутки в единицах устройства.

*сизепаже*<br/>
Возвращает текущие величины по горизонтали и вертикали для прокрутки в каждом направлении в ответ на щелчок мыши в Шафт полосы прокрутки. `cx`Элемент содержит горизонтальную величину. `cy`Элемент содержит вертикальную величину.

*сизелине*<br/>
Возвращает текущие горизонтальные и вертикальные величины прокрутки в каждом направлении в ответ на щелчок мышью в стрелке прокрутки. `cx`Элемент содержит горизонтальную величину. `cy`Элемент содержит вертикальную величину.

### <a name="remarks"></a>Комментарии

Размеры задаются в единицах устройства. Эта функция-член редко называется.

## <a name="cscrollviewgetscrollposition"></a><a name="getscrollposition"></a> Кскроллвиев:: Жетскроллпоситион

Вызывайте `GetScrollPosition` , когда требуется текущее горизонтальное и вертикальное положение полей прокрутки в полосах прокрутки.

```
CPoint GetScrollPosition() const;
```

### <a name="return-value"></a>Возвращаемое значение

Горизонтальные и вертикальные позиции (в логических единицах) полей прокрутки в виде `CPoint` объекта.

### <a name="remarks"></a>Комментарии

Эта пара координат соответствует расположению в документе, в котором прокручивается левый верхний угол представления.

`GetScrollPosition` Возвращает значения в логических единицах. Если вы хотите использовать единицы устройства, используйте `GetDeviceScrollPosition` вместо него.

## <a name="cscrollviewgettotalsize"></a><a name="gettotalsize"></a> Кскроллвиев:: GetTotalSize

Вызовите метод `GetTotalSize` , чтобы получить текущие размеры по горизонтали и вертикали для представления прокрутки.

```
CSize GetTotalSize() const;
```

### <a name="return-value"></a>Возвращаемое значение

Общий размер представления прокрутки в логических устройствах. Размер по горизонтали находится в элементе `cx` `CSize` возвращаемого значения. Размер по вертикали находится в элементе `cy` .

## <a name="cscrollviewresizeparenttofit"></a><a name="resizeparenttofit"></a> Кскроллвиев:: Ресизепаренттофит

Вызовите `ResizeParentToFit` , чтобы позволить размеру представления определять размер окна фрейма.

```cpp
void ResizeParentToFit(BOOL bShrinkOnly = TRUE);
```

### <a name="parameters"></a>Параметры

*бшринконли*<br/>
Тип изменения размера для выполнения. Значение по умолчанию TRUE, при необходимости сжимает окно фрейма. Полосы прокрутки по-прежнему будут отображаться для крупных представлений или мелких окон фрейма. Значение FALSE заставляет представление всегда изменять размер окна фрейма в точности. Это может быть несколько опасным, так как окно фрейма может оказаться слишком большим, чтобы уместиться внутри окна фрейма интерфейса MDI или экрана.

### <a name="remarks"></a>Комментарии

Это рекомендуется только для представлений в окнах дочернего фрейма MDI. Используйте `ResizeParentToFit` в `OnInitialUpdate` функции обработчика производного `CScrollView` класса. Пример этой функции члена см. в разделе [кскроллвиев:: сетскроллсизес](#setscrollsizes).

`ResizeParentToFit` Предполагается, что установлен размер окна представления. Если размер окна представления не был задан при `ResizeParentToFit` вызове метода, вы получите утверждение. Чтобы убедиться, что это не происходит, перед вызовом выполните следующий вызов `ResizeParentToFit` :

[!code-cpp[NVC_MFCDocView#165](../../mfc/codesnippet/cpp/cscrollview-class_2.cpp)]

## <a name="cscrollviewscrolltoposition"></a><a name="scrolltoposition"></a> Кскроллвиев:: Скроллтопоситион

Вызов `ScrollToPosition` для прокрутки до заданной точки в представлении.

```cpp
void ScrollToPosition(POINT pt);
```

### <a name="parameters"></a>Параметры

*пт*<br/>
Точка для прокрутки в логических единицах. `x`Элемент должен быть положительным значением (больше или равно 0, вплоть до общего размера представления). То же справедливо для члена, `y` Если режим сопоставления — MM_TEXT. `y`Элемент является отрицательным в режимах сопоставления, кроме MM_TEXT.

### <a name="remarks"></a>Комментарии

Представление будет прокручиваться, чтобы эта точка находящегося в левом верхнем углу окна. Эта функция-член не должна вызываться, если представление масштабируется по размеру.

## <a name="cscrollviewsetscaletofitsize"></a><a name="setscaletofitsize"></a> Кскроллвиев:: Сетскалетофитсизе

Вызовите, `SetScaleToFitSize` Если необходимо автоматически масштабировать размер окна просмотра до текущего размера окна.

```cpp
void SetScaleToFitSize(SIZE sizeTotal);
```

### <a name="parameters"></a>Параметры

*сизетотал*<br/>
Размеры по горизонтали и вертикали, до которых будет масштабироваться представление. Размер представления прокрутки измеряется в логических единицах. Размер по горизонтали содержится в элементе `cx` . Размер по вертикали содержится в элементе `cy` . Оба значения `cx` и `cy` должны быть больше или равны 0.

### <a name="remarks"></a>Комментарии

При использовании полос прокрутки в любое время может быть видима только часть логического представления. Но с возможностью масштабирования по размеру представление не имеет полос прокрутки, а логическое представление растягивается или сжимается в точном соответствии с областью окна клиента. При изменении размера окна представление отображает свои данные в новом масштабе в зависимости от размера окна.

Как правило, вызов выполняется `SetScaleToFitSize` в переопределении `OnInitialUpdate` функции члена представления. Если автоматическое масштабирование не требуется, вызовите `SetScrollSizes` функцию члена.

`SetScaleToFitSize` может использоваться для реализации операции "масштаб по размеру". Используйте `SetScrollSizes` для повторной инициализации прокрутки.

`SetScaleToFitSize` Предполагается, что установлен размер окна представления. Если размер окна представления не был задан при `SetScaleToFitSize` вызове метода, вы получите утверждение. Чтобы убедиться, что это не происходит, перед вызовом выполните следующий вызов `SetScaleToFitSize` :

[!code-cpp[NVC_MFCDocView#165](../../mfc/codesnippet/cpp/cscrollview-class_2.cpp)]

## <a name="cscrollviewsetscrollsizes"></a><a name="setscrollsizes"></a> Кскроллвиев:: Сетскроллсизес

Вызов `SetScrollSizes` , когда представление собирается обновиться.

```cpp
void SetScrollSizes(
    int nMapMode,
    SIZE sizeTotal,
    const SIZE& sizePage = sizeDefault,
    const SIZE& sizeLine = sizeDefault);
```

### <a name="parameters"></a>Параметры

*нмапмоде*<br/>
Режим сопоставления, заданный для этого представления. Возможные значения:

|Режим сопоставления|Логическая единица|Положительное расширение оси y...|
|------------------|------------------|---------------------------------|
|MM_TEXT|1 пиксель|Сверху|
|MM_HIMETRIC|0,01 мм|Указатель|
|MM_TWIPS|1/1440 в|Указатель|
|MM_HIENGLISH|0,001 в|Указатель|
|MM_LOMETRIC|0,1 мм|Указатель|
|MM_LOENGLISH|0,01 в|Указатель|

Все эти режимы определяются Windows. Для не используются два стандартных режима сопоставления: MM_ISOTROPIC и MM_ANISOTROPIC `CScrollView` . Библиотека классов предоставляет `SetScaleToFitSize` функцию члена для масштабирования представления до размера окна. В столбце 3 в приведенной выше таблице описывается ориентация координат.

*сизетотал*<br/>
Общий размер представления прокрутки. `cx`Элемент содержит горизонтальный экстент. `cy`Элемент содержит вертикальный экстент. Размеры находятся в логических единицах. Оба значения `cx` и `cy` должны быть больше или равны 0.

*сизепаже*<br/>
Горизонтальные и вертикальные величины прокрутки в каждом направлении в ответ на щелчок мыши в Шафт полосы прокрутки. `cx`Элемент содержит горизонтальную величину. `cy`Элемент содержит вертикальную величину.

*сизелине*<br/>
Горизонтальные и вертикальные величины прокрутки в каждом направлении в ответ на щелчок мышью в стрелке прокрутки. `cx`Элемент содержит горизонтальную величину. `cy`Элемент содержит вертикальную величину.

### <a name="remarks"></a>Комментарии

Вызовите его в переопределении `OnUpdate` функции-члена, чтобы настроить характеристики прокрутки, когда, например, документ изначально отображается или изменяется его размер.

Обычно сведения о размере извлекаются из документа, связанного с представлением, путем вызова функции-члена документа, которая, возможно, называется `GetMyDocSize` , которую вы предоставляете в классе производного документа. Этот подход показан в следующем коде:

[!code-cpp[NVC_MFCDocView#166](../../mfc/codesnippet/cpp/cscrollview-class_3.cpp)]

Кроме того, иногда может потребоваться задать фиксированный размер, как показано в следующем коде:

[!code-cpp[NVC_MFCDocView#167](../../mfc/codesnippet/cpp/cscrollview-class_4.cpp)]

Необходимо задать режим сопоставления для любого из режимов сопоставления Windows, кроме MM_ISOTROPIC или MM_ANISOTROPIC. Если вы хотите использовать режим неограниченного сопоставления, вызовите `SetScaleToFitSize` функцию члена, а не `SetScrollSizes` .

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#168](../../mfc/codesnippet/cpp/cscrollview-class_5.cpp)]

[!code-cpp[NVC_MFCDocView#169](../../mfc/codesnippet/cpp/cscrollview-class_6.cpp)]

## <a name="see-also"></a>См. также раздел

[Пример DIBLOOK в MFC](../../overview/visual-cpp-samples.md)<br/>
[Класс CView](../../mfc/reference/cview-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[Класс CView](../../mfc/reference/cview-class.md)<br/>
[Класс CSplitterWnd](../../mfc/reference/csplitterwnd-class.md)
