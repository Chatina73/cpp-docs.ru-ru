---
title: Класс Кбруш
ms.date: 11/04/2016
f1_keywords:
- CBrush
- AFXWIN/CBrush
- AFXWIN/CBrush::CBrush
- AFXWIN/CBrush::CreateBrushIndirect
- AFXWIN/CBrush::CreateDIBPatternBrush
- AFXWIN/CBrush::CreateHatchBrush
- AFXWIN/CBrush::CreatePatternBrush
- AFXWIN/CBrush::CreateSolidBrush
- AFXWIN/CBrush::CreateSysColorBrush
- AFXWIN/CBrush::FromHandle
- AFXWIN/CBrush::GetLogBrush
helpviewer_keywords:
- CBrush [MFC], CBrush
- CBrush [MFC], CreateBrushIndirect
- CBrush [MFC], CreateDIBPatternBrush
- CBrush [MFC], CreateHatchBrush
- CBrush [MFC], CreatePatternBrush
- CBrush [MFC], CreateSolidBrush
- CBrush [MFC], CreateSysColorBrush
- CBrush [MFC], FromHandle
- CBrush [MFC], GetLogBrush
ms.assetid: e5ef2c62-dd95-4973-9090-f52f605900e1
ms.openlocfilehash: a99d8c8022d23f627320b66c3f376be803c9c839
ms.sourcegitcommit: 3e8fa01f323bc5043a48a0c18b855d38af3648d4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78876052"
---
# <a name="cbrush-class"></a>Класс Кбруш

Инкапсулирует кисть интерфейса графических устройств Windows (GDI).

## <a name="syntax"></a>Синтаксис

```
class CBrush : public CGdiObject
```

## <a name="members"></a>Члены

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Description|
|----------|-----------------|
|[Кбруш:: Кбруш](#cbrush)|Формирует объект `CBrush`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Description|
|----------|-----------------|
|[Кбруш:: Креатебрушиндирект](#createbrushindirect)|Инициализирует кисть стилем, цветом и шаблоном, указанным в структуре [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) .|
|[Кбруш:: Креатедибпаттернбруш](#createdibpatternbrush)|Инициализирует кисть с шаблоном, указанным аппаратно-независимым точечным рисунком (DIB).|
|[Кбруш:: Креатехатчбруш](#createhatchbrush)|Инициализирует кисть с указанным заштрихованным шаблоном и цветом.|
|[Кбруш:: Креатепаттернбруш](#createpatternbrush)|Инициализирует кисть с шаблоном, указанным точечным рисунком.|
|[Кбруш:: Креатесолидбруш](#createsolidbrush)|Инициализирует кисть с заданным сплошным цветом.|
|[Кбруш:: Креатесисколорбруш](#createsyscolorbrush)|Создает кисть, которая является системным цветом по умолчанию.|
|[Кбруш:: FromHandle](#fromhandle)|Возвращает указатель на `CBrush` объект при наличии обработчика для объекта `HBRUSH` Windows.|
|[Кбруш:: Жетлогбруш](#getlogbrush)|Возвращает структуру [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) .|

### <a name="public-operators"></a>Открытые операторы

|Имя|Description|
|----------|-----------------|
|[Кбруш:: operator ХБРУШ](#operator_hbrush)|Возвращает маркер Windows, присоединенный к объекту `CBrush`.|

## <a name="remarks"></a>Remarks

Чтобы использовать объект `CBrush`, создайте `CBrush` объект и передайте его в любую `CDC` функцию-член, для которой требуется кисть.

Кисти могут быть сплошными, заштрихованными или узорными.

Дополнительные сведения о `CBrush`см. в разделе [графические объекты](../../mfc/graphic-objects.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[кгдиобжект](../../mfc/reference/cgdiobject-class.md)

`CBrush`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

##  <a name="cbrush"></a>Кбруш:: Кбруш

Формирует объект `CBrush`.

```
CBrush();
CBrush(COLORREF crColor);
CBrush(int nIndex, COLORREF crColor);
explicit CBrush(CBitmap* pBitmap);
```

### <a name="parameters"></a>Параметры

*крколор*<br/>
Задает цвет переднего плана кисти в качестве цвета RGB. Если кисть заштрихована, этот параметр определяет цвет штриховки.

*ниндекс*<br/>
Задает стиль штриховки кисти. Это может быть одно из следующих значений:

- HS_BDIAGONAL диагональную штриховку (слева направо) в 45 градусов

- HS_CROSS горизонтальной и вертикальной клетчатой

- HS_DIAGCROSS клетчатая с 45 градусов

- HS_FDIAGONALная Штриховка "вверх" (слева направо) в 45 градусов

- Горизонтальная штриховка HS_HORIZONTAL

- Вертикальная штриховка HS_VERTICAL

*пбитмап*<br/>
Указывает на объект `CBitmap`, указывающий растровое изображение, с помощью которого кисть закрашивается.

### <a name="remarks"></a>Remarks

`CBrush` содержит четыре перегруженных конструктора. Конструктор без аргументов конструирует неинициализированный `CBrush` объект, который должен быть инициализирован, прежде чем его можно будет использовать.

При использовании конструктора без аргументов необходимо инициализировать результирующий `CBrush` объект с помощью [креатесолидбруш](#createsolidbrush), [креатехатчбруш](#createhatchbrush), [креатебрушиндирект](#createbrushindirect), [креатепаттернбруш](#createpatternbrush)или [креатедибпаттернбруш](#createdibpatternbrush). Если вы используете один из конструкторов, принимающих аргументы, дальнейшая инициализация не требуется. Конструкторы с аргументами могут вызывать исключение в случае возникновения ошибок, в то время как конструктор без аргументов всегда будет выполнен.

Конструктор с одним параметром [COLORREF](/windows/win32/gdi/colorref) конструирует сплошную кисть с указанным цветом. Цвет определяет значение RGB и может быть создан с помощью макроса RGB в WINDOWS. Высоты.

Конструктор с двумя параметрами конструирует кисть штриховки. Параметр *ниндекс* задает индекс штрихового шаблона. Параметр *крколор* задает цвет.

Конструктор с параметром `CBitmap` конструирует шаблонную кисть. Параметр определяет точечный рисунок. Предполагается, что точечный рисунок был создан с помощью [CBitmap:: креатебитмап](../../mfc/reference/cbitmap-class.md#createbitmap), [CBitmap:: креатебитмапиндирект](../../mfc/reference/cbitmap-class.md#createbitmapindirect), [CBitmap:: Лоадбитмап](../../mfc/reference/cbitmap-class.md#loadbitmap)или [CBitmap:: креатекомпатиблебитмап](../../mfc/reference/cbitmap-class.md#createcompatiblebitmap). Минимальный размер точечного рисунка, используемого в шаблоне заливки, составляет 8 пикселей на 8 пикселей.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#21](../../mfc/codesnippet/cpp/cbrush-class_1.cpp)]

##  <a name="createbrushindirect"></a>Кбруш:: Креатебрушиндирект

Инициализирует кисть стилем, цветом и шаблоном, указанным в структуре [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) .

```
BOOL CreateBrushIndirect(const LOGBRUSH* lpLogBrush);
```

### <a name="parameters"></a>Параметры

*лплогбруш*<br/>
Указывает на структуру [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) , содержащую сведения о кисти.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если функция выполнена успешно; в противном случае — 0.

### <a name="remarks"></a>Remarks

Затем кисть может быть выбрана в качестве текущей кисти для любого контекста устройства.

Кисть, созданная с помощью монохромного изображения (1 плоскость, 1 бит на пиксель), рисуется с использованием текущего текста и цветов фона. Пиксели, представленные битом, равным 0, будут отрисованы с текущим цветом текста. Пиксели, представленные битом, равным 1, будут отрисованы с использованием текущего цвета фона.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#22](../../mfc/codesnippet/cpp/cbrush-class_2.cpp)]

##  <a name="createdibpatternbrush"></a>Кбруш:: Креатедибпаттернбруш

Инициализирует кисть с шаблоном, указанным аппаратно-независимым точечным рисунком (DIB).

```
BOOL CreateDIBPatternBrush(
    HGLOBAL hPackedDIB,
    UINT nUsage);

BOOL CreateDIBPatternBrush(
    const void* lpPackedDIB,
    UINT nUsage);
```

### <a name="parameters"></a>Параметры

*хпаккеддиб*<br/>
Определяет объект глобальной памяти, содержащий упакованный аппаратно-независимый точечный рисунок (DIB).

*нусаже*<br/>
Указывает, должны ли поля `bmiColors[]` структуры данных [битмапинфо](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) (часть "упакованного DIB") содержать явные значения RGB или индексы в текущей логической палитре. Параметр должен иметь одно из следующих значений:

- DIB_PAL_COLORS Таблица цветов состоит из массива из 16-разрядных индексов.

- DIB_RGB_COLORS таблица цветов содержит значения литерала RGB.

*лппаккеддиб*<br/>
Указывает на упакованный DIB, состоящий из структуры `BITMAPINFO` сразу за ним, за которым следует массив байтов, определяющих Пиксели точечного рисунка.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Затем можно выбрать кисть для любого контекста устройства, поддерживающего растровые операции.

Эти две версии отличаются тем, как обрабатывался DIB:

- В первой версии для получения маркера рисунка типа DIB вызывается функция Windows `GlobalAlloc` для выделения блока глобальной памяти и последующего заполнения памяти упакованным DIB.

- Во второй версии нет необходимости вызывать `GlobalAlloc` для выделения памяти для упакованного DIB.

Упакованный DIB состоит из `BITMAPINFO` структуры данных, за которой следует массив байтов, определяющих Пиксели точечного рисунка. Точечные рисунки, используемые в качестве узоров заливки, должны иметь размер 8 пикселей на 8 пикселей. Если размер точечного рисунка больше, Windows создает шаблон заливки, используя только биты, соответствующие первым 8 строкам и 8 столбцам пикселей в левом верхнем углу точечного рисунка.

Когда приложение выбирает кисть из двух цветов DIB в контексте монохромного устройства, Windows игнорирует цвета, заданные в формате DIB, и вместо этого отображает узорную кисть, используя текущий текст и цвета фона контекста устройства. Пиксели, сопоставленные с первым цветом (по смещению 0 в таблице цветов DIB) рисунка DIB, отображаются с использованием цвета текста. Пиксели, сопоставленные со вторым цветом (по смещению 1 в таблице цветов), отображаются с использованием цвета фона.

Сведения об использовании следующих функций Windows см. в Windows SDK:

- [Креатедибпаттернбруш](/windows/win32/api/wingdi/nf-wingdi-createdibpatternbrush) (Эта функция предоставляется только для совместимости с приложениями, написанными для более ранних версий Windows, чем 3,0, используйте функцию `CreateDIBPatternBrushPt`.)

- [Креатедибпаттернбрушпт](/windows/win32/api/wingdi/nf-wingdi-createdibpatternbrushpt) (Эта функция должна использоваться для приложений на основе Win32.)

- [GlobalAlloc](/windows/win32/api/winbase/nf-winbase-globalalloc)

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#23](../../mfc/codesnippet/cpp/cbrush-class_3.cpp)]

##  <a name="createhatchbrush"></a>Кбруш:: Креатехатчбруш

Инициализирует кисть с указанным заштрихованным шаблоном и цветом.

```
BOOL CreateHatchBrush(
    int nIndex,
    COLORREF crColor);
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Задает стиль штриховки кисти. Это может быть одно из следующих значений:

- HS_BDIAGONAL диагональную штриховку (слева направо) в 45 градусов

- HS_CROSS горизонтальной и вертикальной клетчатой

- HS_DIAGCROSS клетчатая с 45 градусов

- HS_FDIAGONALная Штриховка "вверх" (слева направо) в 45 градусов

- Горизонтальная штриховка HS_HORIZONTAL

- Вертикальная штриховка HS_VERTICAL

*крколор*<br/>
Задает цвет переднего плана кисти в виде RGB-цвета (цвет штриховки). Дополнительные сведения см. в разделе [COLORREF](/windows/win32/gdi/colorref) в Windows SDK.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Затем кисть может быть выбрана в качестве текущей кисти для любого контекста устройства.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#24](../../mfc/codesnippet/cpp/cbrush-class_4.cpp)]

##  <a name="createpatternbrush"></a>Кбруш:: Креатепаттернбруш

Инициализирует кисть с шаблоном, указанным точечным рисунком.

```
BOOL CreatePatternBrush(CBitmap* pBitmap);
```

### <a name="parameters"></a>Параметры

*пбитмап*<br/>
Определяет точечный рисунок.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Затем можно выбрать кисть для любого контекста устройства, поддерживающего растровые операции. Точечный рисунок, идентифицируемый *пбитмап* , обычно инициализируется с помощью функции [CBitmap:: креатебитмап](../../mfc/reference/cbitmap-class.md#createbitmap), [CBitmap:: Креатебитмапиндирект](../../mfc/reference/cbitmap-class.md#createbitmapindirect), [CBitmap:: лоадбитмап](../../mfc/reference/cbitmap-class.md#loadbitmap)или [CBitmap:: креатекомпатиблебитмап](../../mfc/reference/cbitmap-class.md#createcompatiblebitmap) .

Точечные рисунки, используемые в качестве узоров заливки, должны иметь размер 8 пикселей на 8 пикселей. Если размер точечного рисунка больше, Windows будет использовать только те биты, которые соответствуют первым 8 строкам и столбцам пикселей в левом верхнем углу точечного рисунка.

Узорную кисть можно удалить, не затрагивая связанный с ней точечный рисунок. Это означает, что точечный рисунок можно использовать для создания любого числа узорных кистей.

Кисть, созданная с помощью монохромного точечного рисунка (1 Цветовая плоскость, 1 бит на пиксель), рисуется с использованием текущего текста и цветов фона. Пиксели, представленные битом, равным 0, рисуются с текущим цветом текста. Пиксели, представленные битом, равным 1, рисуются с текущим цветом фона.

Сведения об использовании [креатепаттернбруш](/windows/win32/api/wingdi/nf-wingdi-createpatternbrush)— функции Windows см. в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#25](../../mfc/codesnippet/cpp/cbrush-class_5.cpp)]

##  <a name="createsolidbrush"></a>Кбруш:: Креатесолидбруш

Инициализирует кисть с заданным сплошным цветом.

```
BOOL CreateSolidBrush(COLORREF crColor);
```

### <a name="parameters"></a>Параметры

*крколор*<br/>
Структура [COLORREF](/windows/win32/gdi/colorref) , указывающая цвет кисти. Цвет определяет значение RGB и может быть создан с помощью макроса RGB в WINDOWS. Высоты.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Затем кисть может быть выбрана в качестве текущей кисти для любого контекста устройства.

Когда приложение завершило использовать кисть, созданную `CreateSolidBrush`, она должна выбрать кисть вне контекста устройства.

### <a name="example"></a>Пример

  См. пример для [кбруш:: кбруш](#cbrush).

##  <a name="createsyscolorbrush"></a>Кбруш:: Креатесисколорбруш

Инициализирует цвет кисти.

```
BOOL CreateSysColorBrush(int nIndex);
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Задает индекс цвета. Это значение соответствует цвету, используемому для рисования одного из 21 элементов окна. Список значений см. в разделе [жетсисколор](/windows/win32/api/winuser/nf-winuser-getsyscolor) в Windows SDK.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Затем кисть может быть выбрана в качестве текущей кисти для любого контекста устройства.

Когда приложение завершило использовать кисть, созданную `CreateSysColorBrush`, она должна выбрать кисть вне контекста устройства.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#26](../../mfc/codesnippet/cpp/cbrush-class_6.cpp)]

##  <a name="fromhandle"></a>Кбруш:: FromHandle

Возвращает указатель на `CBrush` объект при наличии маркера для объекта [Хбруш](#operator_hbrush) Windows.

```
static CBrush* PASCAL FromHandle(HBRUSH hBrush);
```

### <a name="parameters"></a>Параметры

*хбруш*<br/>
Дескриптор кисти Windows GDI.

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект `CBrush` в случае успеха; в противном случае — NULL.

### <a name="remarks"></a>Remarks

Если объект `CBrush` еще не присоединен к этому обработчику, создается и прикрепляется временный объект `CBrush`. Этот временный объект `CBrush` действителен только до тех пор, пока приложение не пойдет в цикле событий в следующий раз. В настоящее время все временные графические объекты будут удалены. Иными словами, временный объект действителен только во время обработки одного сообщения окна.

Дополнительные сведения об использовании графических объектов см. в разделе [графические объекты](/windows/win32/gdi/graphic-objects) в Windows SDK.

### <a name="example"></a>Пример

  См. пример для [кбруш:: кбруш](#cbrush).

##  <a name="getlogbrush"></a>Кбруш:: Жетлогбруш

Вызовите эту функцию члена, чтобы получить структуру `LOGBRUSH`.

```
int GetLogBrush(LOGBRUSH* pLogBrush);
```

### <a name="parameters"></a>Параметры

*плогбруш*<br/>
Указывает на структуру [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) , содержащую сведения о кисти.

### <a name="return-value"></a>Возвращаемое значение

Если функция выполнена удачно и *плогбруш* является допустимым указателем, возвращаемое значение — это число байтов, хранящихся в буфере.

Если функция выполнена удачно и *плогбруш* имеет значение null, возвращаемое значение равно количеству байтов, необходимых для хранения информации, которую функция будет хранить в буфере.

Если функция завершается ошибкой, возвращается значение 0.

### <a name="remarks"></a>Remarks

Структура `LOGBRUSH` определяет стиль, цвет и шаблон кисти.

Например, вызовите `GetLogBrush`, чтобы сопоставить определенный цвет или шаблон точечного рисунка.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#27](../../mfc/codesnippet/cpp/cbrush-class_7.cpp)]

##  <a name="operator_hbrush"></a>Кбруш:: operator ХБРУШ

Используйте этот оператор, чтобы получить прикрепленный маркер GDI Windows к объекту `CBrush`.

```
operator HBRUSH() const;
```

### <a name="return-value"></a>Возвращаемое значение

В случае успеха — обработчик для объекта Windows GDI, представленного объектом `CBrush`; в противном случае — NULL.

### <a name="remarks"></a>Remarks

Этот оператор является оператором приведения, который поддерживает прямое использование объекта ХБРУШ.

Дополнительные сведения об использовании графических объектов см. в разделе [графические объекты](/windows/win32/gdi/graphic-objects) в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#28](../../mfc/codesnippet/cpp/cbrush-class_8.cpp)]

## <a name="see-also"></a>См. также раздел

[Пример ПРОПДЛГ для MFC](../../overview/visual-cpp-samples.md)<br/>
[Класс CGdiObject](../../mfc/reference/cgdiobject-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CBitmap](../../mfc/reference/cbitmap-class.md)<br/>
[Класс CDC](../../mfc/reference/cdc-class.md)
