---
title: CTreeCtrl Class
ms.date: 11/04/2016
f1_keywords:
- CTreeCtrl
- AFXCMN/CTreeCtrl
- AFXCMN/CTreeCtrl::CTreeCtrl
- AFXCMN/CTreeCtrl::Create
- AFXCMN/CTreeCtrl::CreateDragImage
- AFXCMN/CTreeCtrl::CreateEx
- AFXCMN/CTreeCtrl::DeleteAllItems
- AFXCMN/CTreeCtrl::DeleteItem
- AFXCMN/CTreeCtrl::EditLabel
- AFXCMN/CTreeCtrl::EndEditLabelNow
- AFXCMN/CTreeCtrl::EnsureVisible
- AFXCMN/CTreeCtrl::Expand
- AFXCMN/CTreeCtrl::GetBkColor
- AFXCMN/CTreeCtrl::GetCheck
- AFXCMN/CTreeCtrl::GetChildItem
- AFXCMN/CTreeCtrl::GetCount
- AFXCMN/CTreeCtrl::GetDropHilightItem
- AFXCMN/CTreeCtrl::GetEditControl
- AFXCMN/CTreeCtrl::GetExtendedStyle
- AFXCMN/CTreeCtrl::GetFirstVisibleItem
- AFXCMN/CTreeCtrl::GetImageList
- AFXCMN/CTreeCtrl::GetIndent
- AFXCMN/CTreeCtrl::GetInsertMarkColor
- AFXCMN/CTreeCtrl::GetItem
- AFXCMN/CTreeCtrl::GetItemData
- AFXCMN/CTreeCtrl::GetItemExpandedImageIndex
- AFXCMN/CTreeCtrl::GetItemHeight
- AFXCMN/CTreeCtrl::GetItemImage
- AFXCMN/CTreeCtrl::GetItemPartRect
- AFXCMN/CTreeCtrl::GetItemRect
- AFXCMN/CTreeCtrl::GetItemState
- AFXCMN/CTreeCtrl::GetItemStateEx
- AFXCMN/CTreeCtrl::GetItemText
- AFXCMN/CTreeCtrl::GetLastVisibleItem
- AFXCMN/CTreeCtrl::GetLineColor
- AFXCMN/CTreeCtrl::GetNextItem
- AFXCMN/CTreeCtrl::GetNextSiblingItem
- AFXCMN/CTreeCtrl::GetNextVisibleItem
- AFXCMN/CTreeCtrl::GetParentItem
- AFXCMN/CTreeCtrl::GetPrevSiblingItem
- AFXCMN/CTreeCtrl::GetPrevVisibleItem
- AFXCMN/CTreeCtrl::GetRootItem
- AFXCMN/CTreeCtrl::GetScrollTime
- AFXCMN/CTreeCtrl::GetSelectedCount
- AFXCMN/CTreeCtrl::GetSelectedItem
- AFXCMN/CTreeCtrl::GetTextColor
- AFXCMN/CTreeCtrl::GetToolTips
- AFXCMN/CTreeCtrl::GetVisibleCount
- AFXCMN/CTreeCtrl::HitTest
- AFXCMN/CTreeCtrl::InsertItem
- AFXCMN/CTreeCtrl::ItemHasChildren
- AFXCMN/CTreeCtrl::MapAccIdToItem
- AFXCMN/CTreeCtrl::MapItemToAccID
- AFXCMN/CTreeCtrl::Select
- AFXCMN/CTreeCtrl::SelectDropTarget
- AFXCMN/CTreeCtrl::SelectItem
- AFXCMN/CTreeCtrl::SelectSetFirstVisible
- AFXCMN/CTreeCtrl::SetAutoscrollInfo
- AFXCMN/CTreeCtrl::SetBkColor
- AFXCMN/CTreeCtrl::SetCheck
- AFXCMN/CTreeCtrl::SetExtendedStyle
- AFXCMN/CTreeCtrl::SetImageList
- AFXCMN/CTreeCtrl::SetIndent
- AFXCMN/CTreeCtrl::SetInsertMark
- AFXCMN/CTreeCtrl::SetInsertMarkColor
- AFXCMN/CTreeCtrl::SetItem
- AFXCMN/CTreeCtrl::SetItemData
- AFXCMN/CTreeCtrl::SetItemExpandedImageIndex
- AFXCMN/CTreeCtrl::SetItemHeight
- AFXCMN/CTreeCtrl::SetItemImage
- AFXCMN/CTreeCtrl::SetItemState
- AFXCMN/CTreeCtrl::SetItemStateEx
- AFXCMN/CTreeCtrl::SetItemText
- AFXCMN/CTreeCtrl::SetLineColor
- AFXCMN/CTreeCtrl::SetScrollTime
- AFXCMN/CTreeCtrl::SetTextColor
- AFXCMN/CTreeCtrl::SetToolTips
- AFXCMN/CTreeCtrl::ShowInfoTip
- AFXCMN/CTreeCtrl::SortChildren
- AFXCMN/CTreeCtrl::SortChildrenCB
helpviewer_keywords:
- CTreeCtrl [MFC], CTreeCtrl
- CTreeCtrl [MFC], Create
- CTreeCtrl [MFC], CreateDragImage
- CTreeCtrl [MFC], CreateEx
- CTreeCtrl [MFC], DeleteAllItems
- CTreeCtrl [MFC], DeleteItem
- CTreeCtrl [MFC], EditLabel
- CTreeCtrl [MFC], EndEditLabelNow
- CTreeCtrl [MFC], EnsureVisible
- CTreeCtrl [MFC], Expand
- CTreeCtrl [MFC], GetBkColor
- CTreeCtrl [MFC], GetCheck
- CTreeCtrl [MFC], GetChildItem
- CTreeCtrl [MFC], GetCount
- CTreeCtrl [MFC], GetDropHilightItem
- CTreeCtrl [MFC], GetEditControl
- CTreeCtrl [MFC], GetExtendedStyle
- CTreeCtrl [MFC], GetFirstVisibleItem
- CTreeCtrl [MFC], GetImageList
- CTreeCtrl [MFC], GetIndent
- CTreeCtrl [MFC], GetInsertMarkColor
- CTreeCtrl [MFC], GetItem
- CTreeCtrl [MFC], GetItemData
- CTreeCtrl [MFC], GetItemExpandedImageIndex
- CTreeCtrl [MFC], GetItemHeight
- CTreeCtrl [MFC], GetItemImage
- CTreeCtrl [MFC], GetItemPartRect
- CTreeCtrl [MFC], GetItemRect
- CTreeCtrl [MFC], GetItemState
- CTreeCtrl [MFC], GetItemStateEx
- CTreeCtrl [MFC], GetItemText
- CTreeCtrl [MFC], GetLastVisibleItem
- CTreeCtrl [MFC], GetLineColor
- CTreeCtrl [MFC], GetNextItem
- CTreeCtrl [MFC], GetNextSiblingItem
- CTreeCtrl [MFC], GetNextVisibleItem
- CTreeCtrl [MFC], GetParentItem
- CTreeCtrl [MFC], GetPrevSiblingItem
- CTreeCtrl [MFC], GetPrevVisibleItem
- CTreeCtrl [MFC], GetRootItem
- CTreeCtrl [MFC], GetScrollTime
- CTreeCtrl [MFC], GetSelectedCount
- CTreeCtrl [MFC], GetSelectedItem
- CTreeCtrl [MFC], GetTextColor
- CTreeCtrl [MFC], GetToolTips
- CTreeCtrl [MFC], GetVisibleCount
- CTreeCtrl [MFC], HitTest
- CTreeCtrl [MFC], InsertItem
- CTreeCtrl [MFC], ItemHasChildren
- CTreeCtrl [MFC], MapAccIdToItem
- CTreeCtrl [MFC], MapItemToAccID
- CTreeCtrl [MFC], Select
- CTreeCtrl [MFC], SelectDropTarget
- CTreeCtrl [MFC], SelectItem
- CTreeCtrl [MFC], SelectSetFirstVisible
- CTreeCtrl [MFC], SetAutoscrollInfo
- CTreeCtrl [MFC], SetBkColor
- CTreeCtrl [MFC], SetCheck
- CTreeCtrl [MFC], SetExtendedStyle
- CTreeCtrl [MFC], SetImageList
- CTreeCtrl [MFC], SetIndent
- CTreeCtrl [MFC], SetInsertMark
- CTreeCtrl [MFC], SetInsertMarkColor
- CTreeCtrl [MFC], SetItem
- CTreeCtrl [MFC], SetItemData
- CTreeCtrl [MFC], SetItemExpandedImageIndex
- CTreeCtrl [MFC], SetItemHeight
- CTreeCtrl [MFC], SetItemImage
- CTreeCtrl [MFC], SetItemState
- CTreeCtrl [MFC], SetItemStateEx
- CTreeCtrl [MFC], SetItemText
- CTreeCtrl [MFC], SetLineColor
- CTreeCtrl [MFC], SetScrollTime
- CTreeCtrl [MFC], SetTextColor
- CTreeCtrl [MFC], SetToolTips
- CTreeCtrl [MFC], ShowInfoTip
- CTreeCtrl [MFC], SortChildren
- CTreeCtrl [MFC], SortChildrenCB
ms.assetid: 96e20031-6161-4143-8c12-8d1816c66d90
ms.openlocfilehash: 6fe7b133fa01285f85dc28dc8d8ca01e027f4a5c
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81373306"
---
# <a name="ctreectrl-class"></a>CTreeCtrl Class

Предоставляет функциональные возможности стандартного элемента управления "представление в виде дерева" Windows.

## <a name="syntax"></a>Синтаксис

```
class CTreeCtrl : public CWnd
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CTreeCtrl::CTreeCtrl](#ctreectrl)|Формирует объект `CTreeCtrl`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CTreeCtrl::Создание](#create)|Создает элемент управления представления дерева `CTreeCtrl` и прикрепляет его к объекту.|
|[CTreeCtrl::CreateDragImage](#createdragimage)|Создает перетаскивание битной карты для указанного элемента представления дерева.|
|[CTreeCtrl::CreateEx](#createex)|Создает управление деревом с указанными расширенными стилями Windows и прикрепляет его к объекту. `CTreeCtrl`|
|[CTreeCtrl::DeleteAllItems](#deleteallitems)|Удаляет все элементы в элементе управления представления дерева.|
|[CTreeCtrl::DeleteItem](#deleteitem)|Удаляет новый элемент в элементе управления представления дерева.|
|[CTreeCtrl::EditLabel](#editlabel)|Отсваивайте указанный элемент представления дерева на месте.|
|[CTreeCtrl::EndEditLabelТеперь](#endeditlabelnow)|Отменяет операцию отсечения на этикетке элемента вида дерева в текущем элементе управления представления дерева.|
|[CTreeCtrl::ОбеспечениеВидимого](#ensurevisible)|Гарантирует, что элемент представления дерева виден в элементе представления дерева.|
|[CTreeCtrl::Расширьте](#expand)|Расширяет или разрушает элементы детского элемента указанного элемента представления дерева.|
|[CTreeCtrl::GetBkColor](#getbkcolor)|Извлекает текущий фоновый цвет элемента управления.|
|[CTreeCtrl::GetCheck](#getcheck)|Извлекает контрольное состояние элемента управления деревом.|
|[CTreeCtrl::GetChildItem](#getchilditem)|Извлекает дочерний элемент указанного элемента вида дерева.|
|[CTreeCtrl:GetCount](#getcount)|Извлекает количество элементов дерева, связанных с управлением представления дерева.|
|[CTreeCtrl::GetDropHilightItem](#getdrophilightitem)|Извлекает цель операции перетаскивания.|
|[CTreeCtrl:GetEditControl](#geteditcontrol)|Извлекает ручку элемента управления отсечения, используемого для отправления заданного элемента представления дерева.|
|[CTreeCtrl::GetExtendedStyle](#getextendedstyle)|Извлекает расширенные стили, которые использует текущий элемент управления видом дерева.|
|[CTreeCtrl::GetFirstVisibleItem](#getfirstvisibleitem)|Извлекает первый видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl::GetImageList](#getimagelist)|Извлекает ручку списка изображений, связанного с управлением представления дерева.|
|[CTreeCtrl:GetIndent](#getindent)|Извлекает смещение (в пикселях) элемента представления дерева от его родительского элемента.|
|[CTreeCtrl::GetInsertMarkColor](#getinsertmarkcolor)|Извлекает цвет, используемый для рисования знака вставки для вида дерева.|
|[CTreeCtrl::GetItem](#getitem)|Извлекает атрибуты указанного элемента представления дерева.|
|[CTreeCtrl::GetItemData](#getitemdata)|Возвращает значение, связанное с элементом, связанное с приложением.|
|[CTreeCtrl::GetItemExpandedImageIndex](#getitemexpandedimageindex)|Извлекает индекс изображения для отображения, когда указанный элемент текущего элемента управления видом дерева находится в расширенном состоянии.|
|[CTreeCtrl::GetItemHeight](#getitemheight)|Извлекает текущую высоту элементов вида дерева.|
|[CTreeCtrl::GetItemImage](#getitemimage)|Извлекает изображения, связанные с элементом.|
|[CTreeCtrl::GetItemPartRect](#getitempartrect)|Извлекает прямоугольник для заданной части указанного элемента в текущем элементе управления видом дерева.|
|[CTreeCtrl::GetItemRect](#getitemrect)|Извлекает прямоугольник элемента вида дерева.|
|[CTreeCtrl:GetItemState](#getitemstate)|Возвращает состояние элемента.|
|[CTreeCtrl::GetItemStateEx](#getitemstateex)|Извлекает расширенное состояние указанного элемента в текущем элементе управления видом дерева.|
|[CTreeCtrl::GetItemText](#getitemtext)|Возвращает текст элемента.|
|[CTreeCtrl::GetLastVisibleItem](#getlastvisibleitem)|Извлекает последний расширенный элемент в текущем элементе управления представления дерева.|
|[CTreeCtrl::GetLineColor](#getlinecolor)|Извлекает текущий цвет линии для управления представлением дерева.|
|[CTreeCtrl::GetNextItem](#getnextitem)|Извлекает следующий элемент представления дерева, который соответствует заданной взаимосвязи.|
|[CTreeCtrl::GetNextSiblingItem](#getnextsiblingitem)|Извлекает следующий брат указанного элемента представления дерева.|
|[CTreeCtrl::GetNextVisibleItem](#getnextvisibleitem)|Извлекает следующий видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl:GetParentItem](#getparentitem)|Извлекает родительский элемент указанного вида дерева.|
|[CTreeCtrl::GetPrevSiblingItem](#getprevsiblingitem)|Извлекает предыдущий брат указанного элемента представления дерева.|
|[CTreeCtrl::GetPrevVisibleItem](#getprevvisibleitem)|Извлекает предыдущий видимый элемент указанного элемента представления дерева.|
|[CTreeCtrl:GetRootItem](#getrootitem)|Извлекает корень указанного элемента представления дерева.|
|[CTreeCtrl::GetScrollTime](#getscrolltime)|Извлекает максимальное время прокрутки для управления представлением дерева.|
|[CTreeCtrl:GetSelectedCount](#getselectedcount)|Извлекает количество выбранных элементов в текущем элементе управления представления дерева.|
|[CTreeCtrl:GetSelectedItem](#getselecteditem)|Извлекает выбранный в настоящее время элемент представления дерева.|
|[CTreeCtrl::GetTextColor](#gettextcolor)|Извлекает текущий цвет текста элемента управления.|
|[CTreeCtrl::GetToolTips](#gettooltips)|Извлекает ручку в управление дочерней системы ToolTip, используемое управлением представления дерева.|
|[CTreeCtrl::GetVisibleCount](#getvisiblecount)|Извлекает количество видимых элементов дерева, связанных с управлением представления дерева.|
|[CTreeCtrl::HitTest](#hittest)|Возвращает текущее положение курсора, `CTreeCtrl` связанного с объектом.|
|[CTreeCtrl::InsertItem](#insertitem)|Вставляет новый элемент в управление представления дерева.|
|[CTreeCtrl::ItemHasChildren](#itemhaschildren)|Возвращает ненулевой, если указанный элемент имеет элементы ребенка.|
|[CTreeCtrl:MapAccidtoitem](#mapaccidtoitem)|Отображает указанный идентификатор доступности к ручке к элементу вида дерева в текущем элементе представления дерева.|
|[CTreeCtrl:MapItemToAccID](#mapitemtoaccid)|Карты указанной ручки к элементу вида дерева в текущем управлении видом дерева с идентификатором доступности.|
|[CTreeCtrl::Выбрать](#select)|Выбрав, прокрутки в представлении или перерисовки указанного элемента представления дерева.|
|[CTreeCtrl::SelectDropTarget](#selectdroptarget)|Перерисовка элемента дерева в качестве цели операции перетаскивания и падения.|
|[CTreeCtrl::SelectItem](#selectitem)|Выбрано указанный элемент представления дерева.|
|[CTreeCtrl::SelectSetFirstVisible](#selectsetfirstvisible)|Выберите указанный элемент представления дерева в качестве первого видимого элемента.|
|[CTreeCtrl::SetAutoscrollInfo](#setautoscrollinfo)|Устанавливает скорость автопрокрутки текущего управления видом дерева.|
|[CTreeCtrl::SetBkColor](#setbkcolor)|Устанавливает цвет фона элемента управления.|
|[CTreeCtrl::SetCheck](#setcheck)|Устанавливает состояние проверки элемента управления деревом.|
|[CTreeCtrl::SetExtendedStyle](#setextendedstyle)|Устанавливает расширенные стили для текущего управления видом дерева.|
|[CTreeCtrl::SetImageList](#setimagelist)|Устанавливает ручку списка изображений, связанную с управлением представления дерева.|
|[CTreeCtrl:Setindent](#setindent)|Устанавливает смещение (в пикселях) элемента представления дерева от его родительского элемента.|
|[CTreeCtrl::SetInsertMark](#setinsertmark)|Устанавливает отметку вставки в элемент управления представления дерева.|
|[CTreeCtrl::SetInsertMarkColor](#setinsertmarkcolor)|Устанавливает цвет, используемый для рисования знака вставки для вида дерева.|
|[CTreeCtrl::SetItem](#setitem)|Устанавливает атрибуты указанного элемента представления дерева.|
|[CTreeCtrl::SetItemData](#setitemdata)|Устанавливает значение, связанное с элементом, конкретное значение приложения.|
|[CTreeCtrl::SetItemExpandedImageIndex](#setitemexpandedimageindex)|Устанавливает индекс изображения для отображения, когда указанный элемент текущего элемента управления видом дерева находится в расширенном состоянии.|
|[CTreeCtrl::SetItemHeight](#setitemheight)|Устанавливает высоту элементов вида дерева.|
|[CTreeCtrl:SetItemImage](#setitemimage)|Ассоциирует изображения с элементом.|
|[CTreeCtrl:SetItemState](#setitemstate)|Устанавливает состояние элемента.|
|[CTreeCtrl::SetItemStateEx](#setitemstateex)|Устанавливает расширенное состояние указанного элемента в текущем элементе просмотра дерева.|
|[CTreeCtrl::SetItemText](#setitemtext)|Устанавливает текст элемента.|
|[CTreeCtrl::SetLineColor](#setlinecolor)|Устанавливает текущий цвет линии для управления представлением дерева.|
|[CTreeCtrl::SetScrollTime](#setscrolltime)|Устанавливает максимальное время прокрутки для управления представлением дерева.|
|[CTreeCtrl::SetTextColor](#settextcolor)|Устанавливает цвет текста элемента управления.|
|[CTreeCtrl::SetToolTips](#settooltips)|Устанавливает элемент управления представления дерева в детском инструменте ToolTip.|
|[CTreeCtrl::ShowInfoTip](#showinfotip)|Отображает infotip для указанного элемента в текущем элементе управления видом дерева.|
|[CTreeCtrl::СортДети](#sortchildren)|Сортирует детей данного родительского элемента.|
|[CTreeCtrl::SortChildrenCB](#sortchildrencb)|Сортирует детей данного родительского элемента с помощью функции сортировки приложения.|

## <a name="remarks"></a>Remarks

"Управление видом дерева" — это окно, отображаевщее иерархический список элементов, таких как заголовки в документе, записи в индексе или файлы и каталоги на диске. Каждый элемент состоит из метки и дополнительного битотвированного изображения, и каждый элемент может иметь список подэлементов, связанных с ним. Нажав на элемент, пользователь может расширить и свернуть связанный список подэлементов.

Этот элемент управления `CTreeCtrl` (и, следовательно, класс) доступен только для программ, работающих под Windows 98 и Windows NT версии 4 и позже.

Для получения дополнительной `CTreeCtrl`информации об использовании см.:

- [Элементы управления](../../mfc/controls-mfc.md)

- [Использование CTreeCtrl](../../mfc/using-ctreectrl.md)

- [Ссылка на управление видом дерева](/windows/win32/Controls/tree-view-control-reference) в SDK Windows.

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CTreeCtrl`

## <a name="requirements"></a>Требования

**Заголовок:** afxcmn.h

## <a name="ctreectrlcreate"></a><a name="create"></a>CTreeCtrl::Создание

Если вы указываете управление деревом в шаблоне диалогового окна, или если вы используете [CTreeView,](../../mfc/reference/ctreeview-class.md)управление деревом создается автоматически при создании диалогового окна или представления.

```
virtual BOOL Create(
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*dwStyle*<br/>
Определяет стиль управления видом дерева. Применяйте стили окон, описанные в [CreateWindow,](/windows/win32/api/winuser/nf-winuser-createwindoww)и любое сочетание [стилей управления представлениями деревьев,](/windows/win32/Controls/tree-view-control-window-styles) описанных в SDK Windows.

*rect*<br/>
Определяет размер и положение управления представления дерева. Это может быть либо объект [CRect,](../../atl-mfc-shared/reference/crect-class.md) либо структура [RECT.](/previous-versions/dd162897\(v=vs.85\))

*pParentWnd*<br/>
Определяет родительское окно управления представления дерева, `CDialog`обычно . Она не должна быть NULL.

*nID*<br/>
Определяет идентификатор управления представлениядерева.

### <a name="return-value"></a>Возвращаемое значение

Незерно, если инициализация была успешной; в противном случае 0.

### <a name="remarks"></a>Remarks

Если вы хотите создать управление деревом в качестве окна `Create` ребенка в другом окне, используйте функцию элемента. Если вы создаете `Create`управление деревом с помощью, вы должны передать его WS_VISIBLE, в дополнение к другим стилям представления дерева.

Вы строите `CTreeCtrl` в два этапа. Сначала вызов конструктора, `Create`затем вызов, который создает управление видом `CTreeCtrl` дерева и прикрепляет его к объекту.

Чтобы создать управление деревом с расширенными стилями окон, вызов [CreateEx](#createex) вместо `Create`.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_1.cpp)]

## <a name="ctreectrlcreateex"></a><a name="createex"></a>CTreeCtrl::CreateEx

Вызовите эту функцию, чтобы создать элемент управления `CTreeCtrl` (окно ребенка) и связать его с объектом.

```
virtual BOOL CreateEx(
    DWORD dwExStyle,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID);
```

### <a name="parameters"></a>Параметры

*dwExStyle*<br/>
Определяет расширенный стиль создаваемого элемента управления. Список расширенных стилей Windows можно узнать [в](/windows/win32/api/winuser/nf-winuser-createwindowexw) *SDK* Windows см.

*dwStyle*<br/>
Определяет стиль управления видом дерева. Применяйте стили окон, описанные в [CreateWindow,](/windows/win32/api/winuser/nf-winuser-createwindoww)и любое сочетание [стилей управления представлениями деревьев,](/windows/win32/Controls/tree-view-control-window-styles) описанных в SDK Windows.

*rect*<br/>
Ссылка на структуру [RECT,](/previous-versions/dd162897\(v=vs.85\)) описывающую размер и положение создаваемого окна, в клиентских координатах *pParentWnd*.

*pParentWnd*<br/>
Указатель на окно, которое является родителем элемента управления.

*nID*<br/>
Идентификатор окна ребенка элемента управления.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если успешно в противном случае 0.

### <a name="remarks"></a>Remarks

Используйте `CreateEx` вместо [создания](#create) для применения расширенных стилей Windows, указанных в предисловии расширенного стиля Windows **WS_EX_.**

## <a name="ctreectrlcreatedragimage"></a><a name="createdragimage"></a>CTreeCtrl::CreateDragImage

Вызовите эту функцию, чтобы создать перетаскивание битной карты для данного элемента в управлении представления дерева, создайте список изображений для битовой карты и добавьте битную карту в список изображений.

```
CImageList* CreateDragImage(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева, который будет перетащен.

### <a name="return-value"></a>Возвращаемое значение

Указатель на список изображений, к которому была добавлена перетаскивание битной карты, в случае успеха; в противном случае NULL.

### <a name="remarks"></a>Remarks

Приложение использует функции списка изображений для отображения изображения при перетаскивании элемента.

Объект `CImageList` является постоянным, и вы должны удалить его, когда он закончен. Пример:

[!code-cpp[NVC_MFC_CTreeCtrl#2](../../mfc/reference/codesnippet/cpp/ctreectrl-class_2.cpp)]

## <a name="ctreectrlctreectrl"></a><a name="ctreectrl"></a>CTreeCtrl::CTreeCtrl

Формирует объект `CTreeCtrl`.

```
CTreeCtrl();
```

## <a name="ctreectrldeleteallitems"></a><a name="deleteallitems"></a>CTreeCtrl::DeleteAllItems

Вызов ими функции, чтобы удалить все элементы из управления представления дерева.

```
BOOL DeleteAllItems();
```

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#3](../../mfc/reference/codesnippet/cpp/ctreectrl-class_3.cpp)]

## <a name="ctreectrldeleteitem"></a><a name="deleteitem"></a>CTreeCtrl::DeleteItem

Вызовите эту функцию, чтобы удалить элемент из элемента управления представления дерева.

```
BOOL DeleteItem(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева, который будет удален. Если *hitem* имеет TVI_ROOT значение, все элементы удаляются из элемента управления представления дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#4](../../mfc/reference/codesnippet/cpp/ctreectrl-class_4.cpp)]

## <a name="ctreectrleditlabel"></a><a name="editlabel"></a>CTreeCtrl::EditLabel

Вызовите эту функцию, чтобы начать редактирование текста указанного элемента.

```
CEdit* EditLabel(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева, который будет отредактирован.

### <a name="return-value"></a>Возвращаемое значение

В случае успеха указатель `CEdit` на объект, используемый для редактирования текста элемента; в противном случае NULL.

### <a name="remarks"></a>Remarks

Редактирование выполняется путем замены текста элемента однолинейным элементом редактирования, содержащего текст.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_5.cpp)]

## <a name="ctreectrlendeditlabelnow"></a><a name="endeditlabelnow"></a>CTreeCtrl::EndEditLabelТеперь

Завершает операцию по отдействию на этикетке элемента вида дерева в текущем элементе управления видом дерева.

```
BOOL EndEditLabelNow(BOOL fCancelWithoutSave);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*fCancelБезСпасти*|(в) TRUE для отбрасывания изменений в элементе просмотра дерева перед завершением операции по изменению или FALSE для сохранения изменений элемента вида дерева перед завершением операции.|

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если этот метод является успешным; в противном случае, FALSE.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_ENDEDITLABELNOW](/windows/win32/Controls/tvm-endeditlabelnow) сообщение, которое описано в SDK Windows.

## <a name="ctreectrlensurevisible"></a><a name="ensurevisible"></a>CTreeCtrl::ОбеспечениеВидимого

Вызовите эту функцию, чтобы убедиться, что элемент представления дерева виден.

```
BOOL EnsureVisible(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева становится видимой.

### <a name="return-value"></a>Возвращаемое значение

Возвращает TRUE, если система прокрутила элементы в элементе просмотра дерева, чтобы убедиться, что указанный элемент виден. В противном случае значение возврата FALSE.

### <a name="remarks"></a>Remarks

При необходимости функция расширяет элемент родительского элемента или прокручивает элемент представления дерева, чтобы элемент был виден.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#6](../../mfc/reference/codesnippet/cpp/ctreectrl-class_6.cpp)]

## <a name="ctreectrlexpand"></a><a name="expand"></a>CTreeCtrl::Расширьте

Вызовите эту функцию, чтобы расширить или свернуть список элементов ребенка, если таковые имеется, связанные с данным родительским элементом.

```
BOOL Expand(
    HTREEITEM hItem,
    UINT nCode);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Расширена ручка элемента дерева.

*nКод*<br/>
Флаг с указанием типа действий, которые необходимо предпринять. Этот флаг может иметь одно из следующих значений:

- TVE_COLLAPSE сворачивает список.

- TVE_COLLAPSERESET сворачивает список и удаляет элементы ребенка. Сбросить TVIS_EXPANDEDONCE государственный флаг. Этот флаг должен использоваться с TVE_COLLAPSE флагом.

- TVE_EXPAND расширяет список.

- TVE_TOGGLE сворачивает список, если он в настоящее время расширяется или расширяет его, если он в настоящее время рухнул.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::ОбеспечениеVisible](#ensurevisible).

## <a name="ctreectrlgetbkcolor"></a><a name="getbkcolor"></a>CTreeCtrl::GetBkColor

Эта функция-член реализует поведение сообщения Win32 [TVM_GETBKCOLOR,](/windows/win32/Controls/tvm-getbkcolor)как описано в SDK Windows.

```
COLORREF GetBkColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее текущий цвет фона окна для элемента управления. Если это значение -1, элемент управления использует цвет окна системы. В этом случае можно `::GetSysColor(COLOR_WINDOW)` использовать для получения текущего цвета системы, который использует элемент управления.

### <a name="example"></a>Пример

  Смотрите пример [CTreeCtrl::SetTextColor](#settextcolor).

## <a name="ctreectrlgetcheck"></a><a name="getcheck"></a>CTreeCtrl::GetCheck

Вызовите эту функцию участника, чтобы получить состояние проверки элемента.

```
BOOL GetCheck(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
HTREEITEM о том, какие для получения государственной информации.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если элемент управления деревом проверен; в противном случае 0.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::SetCheck](#setcheck).

## <a name="ctreectrlgetchilditem"></a><a name="getchilditem"></a>CTreeCtrl::GetChildItem

Вызовите эту функцию, чтобы получить элемент представления дерева, который является ребенком элемента, указанного *hItem.*

```
HTREEITEM GetChildItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка элемента ребенка в случае успеха; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#7](../../mfc/reference/codesnippet/cpp/ctreectrl-class_7.cpp)]

## <a name="ctreectrlgetcount"></a><a name="getcount"></a>CTreeCtrl:GetCount

Вызов исчисляйте эту функцию, чтобы получить количество элементов в управлении представления дерева.

```
UINT GetCount() const;
```

### <a name="return-value"></a>Возвращаемое значение

Количество элементов в управлении представления дерева.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#8](../../mfc/reference/codesnippet/cpp/ctreectrl-class_8.cpp)]

## <a name="ctreectrlgetdrophilightitem"></a><a name="getdrophilightitem"></a>CTreeCtrl::GetDropHilightItem

Вызовите эту функцию, чтобы получить элемент, который является целью операции перетаскивания.

```
HTREEITEM GetDropHilightItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка элемента упала в случае успеха; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#9](../../mfc/reference/codesnippet/cpp/ctreectrl-class_9.cpp)]

## <a name="ctreectrlgeteditcontrol"></a><a name="geteditcontrol"></a>CTreeCtrl:GetEditControl

Вызов ими функции для извлечения ручки элемента редактирования, используемой для редактирования текста элемента представления дерева.

```
CEdit* GetEditControl() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на элемент управления редактирования, используемый для редактирования текста элемента, в случае успеха; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#10](../../mfc/reference/codesnippet/cpp/ctreectrl-class_10.cpp)]

## <a name="ctreectrlgetextendedstyle"></a><a name="getextendedstyle"></a>CTreeCtrl::GetExtendedStyle

Извлекает расширенные стили, которые использует текущий элемент управления видом дерева.

```
DWORD GetExtendedStyle() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение, содержащее битную комбинацию (ИЛИ) расширенных стилей текущего элемента управления древовидным представлением. Для получения дополнительной информации [см.](/windows/win32/Controls/tree-view-control-window-extended-styles)

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_GETEXTENDEDSTYLE](/windows/win32/Controls/tvm-getextendedstyle) сообщение, которое описано в SDK Windows.

## <a name="ctreectrlgetfirstvisibleitem"></a><a name="getfirstvisibleitem"></a>CTreeCtrl::GetFirstVisibleItem

Вызов исчерпнивайте эту функцию, чтобы получить первый видимый элемент управления представления дерева.

```
HTREEITEM GetFirstVisibleItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка первого видимого элемента; в противном случае NULL.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::SetCheck](#setcheck).

## <a name="ctreectrlgetimagelist"></a><a name="getimagelist"></a>CTreeCtrl::GetImageList

Вызов ими функции для извлечения ручки обычного или государственного списка изображений, связанного с управлением представления дерева.

```
CImageList* GetImageList(UINT nImageList) const;
```

### <a name="parameters"></a>Параметры

*nImageList*<br/>
Тип списка изображений для извлечения. Список изображений может быть одним из следующих значений:

- TVSIL_NORMAL извлекает обычный список изображений, содержащий выбранные и невыбранные изображения для элемента представления дерева.

- TVSIL_STATE извлекает список изображений состояния, содержащий изображения для элементов представления дерева, наблюдаемых в состоянии, определяемом пользователем.

### <a name="return-value"></a>Возвращаемое значение

Указатель на список изображений элемента управления в случае успеха; в противном случае NULL.

### <a name="remarks"></a>Remarks

Каждый элемент в управлении представления дерева может иметь пару bitmapped изображений, связанных с ним. Одно изображение отображается при выборе элемента, а другое отображается, когда элемент не выбран. Например, элемент может отображать открытую папку при выборе и закрытую папку, когда она не выбрана.

Для получения дополнительной [информации](../../mfc/reference/cimagelist-class.md) о списках изображений см.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#11](../../mfc/reference/codesnippet/cpp/ctreectrl-class_11.cpp)]

## <a name="ctreectrlgetindent"></a><a name="getindent"></a>CTreeCtrl:GetIndent

Вызов ими функции, чтобы получить сумму в пикселях, что элементы ребенка отступпов по отношению к их родительских элементов.

```
UINT GetIndent() const;
```

### <a name="return-value"></a>Возвращаемое значение

Количество отступов измеряется в пикселях.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#12](../../mfc/reference/codesnippet/cpp/ctreectrl-class_12.cpp)]

## <a name="ctreectrlgetinsertmarkcolor"></a><a name="getinsertmarkcolor"></a>CTreeCtrl::GetInsertMarkColor

Эта функция члена реализует поведение сообщения Win32 [TVM_GETINSERTMARKCOLOR,](/windows/win32/Controls/tvm-getinsertmarkcolor)как описано в SDK Windows.

```
COLORREF GetInsertMarkColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, содержащее текущий цвет отметки вставки.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#13](../../mfc/reference/codesnippet/cpp/ctreectrl-class_13.cpp)]

## <a name="ctreectrlgetitem"></a><a name="getitem"></a>CTreeCtrl::GetItem

Вызовите эту функцию, чтобы получить атрибуты указанного элемента представления дерева.

```
BOOL GetItem(TVITEM* pItem) const;
```

### <a name="parameters"></a>Параметры

*pItem*<br/>
Указатель на структуру [TVITEM,](/windows/win32/api/commctrl/ns-commctrl-tvitemw) как описано в Windows SDK.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  Смотрите пример [CTreeCtrl::DeleteItem](#deleteitem).

## <a name="ctreectrlgetitemdata"></a><a name="getitemdata"></a>CTreeCtrl::GetItemData

Вызовите эту функцию, чтобы получить значение, связанное с указанным элементом, связанное с приложением.

```
DWORD_PTR GetItemData(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Обработка элемента, данные которого должны быть извлечены.

### <a name="return-value"></a>Возвращаемое значение

Значение, связанное с элементом, указанным *hItem,* размером с указательное значение, связанное с пунктом.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#14](../../mfc/reference/codesnippet/cpp/ctreectrl-class_14.cpp)]

## <a name="ctreectrlgetitemexpandedimageindex"></a><a name="getitemexpandedimageindex"></a>CTreeCtrl::GetItemExpandedImageIndex

Извлекает индекс изображения для отображения, когда указанный элемент текущего элемента управления видом дерева находится в расширенном состоянии.

```
int GetItemExpandedImageIndex(HTREEITEM hItem)const;
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Обработка элемента управления видом дерева.|

### <a name="return-value"></a>Возвращаемое значение

Индекс изображения для отображения, когда указанный элемент находится в расширенном состоянии.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_GETITEM](/windows/win32/Controls/tvm-getitem) сообщение, которое описано в SDK Windows. Это сообщение возвращает структуру [TVITEMEX,](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) описывая элемент управления видом `iExpandedImage` дерева, а затем этот метод извлекает элемент из этой структуры.

## <a name="ctreectrlgetitemheight"></a><a name="getitemheight"></a>CTreeCtrl::GetItemHeight

Эта функция члена реализует поведение сообщения Win32 [TVM_GETITEMHEIGHT,](/windows/win32/Controls/tvm-getitemheight)как описано в SDK Windows.

```
SHORT GetItemHeight() const;
```

### <a name="return-value"></a>Возвращаемое значение

Высота элемента, в пикселях.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#15](../../mfc/reference/codesnippet/cpp/ctreectrl-class_15.cpp)]

## <a name="ctreectrlgetitemimage"></a><a name="getitemimage"></a>CTreeCtrl::GetItemImage

Каждый элемент в управлении представления дерева может иметь пару bitmapped изображений, связанных с ним.

```
BOOL GetItemImage(
    HTREEITEM hItem,
    int& nImage,
    int& nSelectedImage) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, изображение которого должно быть извлечено.

*nИзображение*<br/>
Цель, который получает индекс изображения элемента в списке изображений элемента управления.

*nSelectedИзображение*<br/>
Цель, который получает индекс выбранного изображения элемента в списке изображений элемента управления представления дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Изображения отображаются на левой стороне метки элемента. Одно изображение отображается при выборе элемента, а другое отображается, когда элемент не выбран. Например, элемент может отображать открытую папку при выборе и закрытую папку, когда она не выбрана.

Вызовите эту функцию, чтобы получить индекс изображения элемента и выбранное его изображение в списке изображений управления представления дерева.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#16](../../mfc/reference/codesnippet/cpp/ctreectrl-class_16.cpp)]

## <a name="ctreectrlgetitempartrect"></a><a name="getitempartrect"></a>CTreeCtrl::GetItemPartRect

Извлекает прямоугольник для заданной части указанного элемента в текущем элементе управления видом дерева.

```
BOOL GetItemPartRect(
    HTREEITEM hItem,
    int nPart,
    LPRECT lpRect)const;
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Обработка элемента управления видом дерева.|
|*nЧасть*|(в) Идентификатор для детали. Должно быть установлено, чтобы TVGIPR_BUTTON.|
|*lpRect*|(ваут) Указатель на структуру [RECT.](/previous-versions/dd162897\(v=vs.85\)) Если этот метод успешен, структура получает прямоугольные координаты детали, указанной *hItem* и *nPart.*|

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если этот метод является успешным; в противном случае, FALSE.

### <a name="remarks"></a>Remarks

Каждый элемент управления деревом ограничен графическим прямоугольником. Всякий раз, когда точка в этом прямоугольнике нажата, пункт, как говорят, *ударил*. Этот метод возвращает самый большой прямоугольник таким образом, что при нажатии точки прямоугольника элемент, идентифицированный параметром *hItem.*

Этот метод отправляет TVM_GETITEMPARTRECT сообщение, которое описано в SDK Windows. Для получения дополнительной информации см [TreeView_GetItemPartRect.](/windows/win32/api/commctrl/nf-commctrl-treeview_getitempartrect)

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода используется идентификатор доступности и метод [CTreeCtrl::MapAccIdToItem](#mapaccidtoitem) для извлечения ручки к элементу просмотра корневого дерева. Затем пример использует ручку и [метод CTreeCtrl::GetItemPartRect,](#getitempartrect) чтобы нарисовать 3D прямоугольник вокруг этого элемента. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Мы использовали метод [CTreeCtrl::MapItemToAccID](#mapitemtoaccid) для ассоциирования элемента корневого дерева с идентификатором доступности.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_18.cpp)]

## <a name="ctreectrlgetitemrect"></a><a name="getitemrect"></a>CTreeCtrl::GetItemRect

Вызов эту функцию, чтобы получить прямоугольник для *hItem* и определить, является ли она видна или нет.

```
BOOL GetItemRect(
    HTREEITEM hItem,
    LPRECT lpRect,
    BOOL bTextOnly) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента управления видом дерева.

*lpRect*<br/>
Указатель на структуру [RECT,](/previous-versions/dd162897\(v=vs.85\)) которая получает граничащий прямоугольник. Координаты относительно верхнего левого угла управления видом дерева.

*bTextТолько*<br/>
Если этот параметр незероприг, прямоугольник, ограничивающий, включает только текст элемента. В противном случае он включает в себя всю строку, которую элемент занимает в управлении представления дерева.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если элемент виден, с ограничивающим прямоугольником, содержащимся в *lpRect*. В противном случае, 0 с *lpRect* непервоначально.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#17](../../mfc/reference/codesnippet/cpp/ctreectrl-class_19.cpp)]

## <a name="ctreectrlgetitemstate"></a><a name="getitemstate"></a>CTreeCtrl:GetItemState

Возвращает состояние элемента, указанного *hItem.*

```
UINT GetItemState(
    HTREEITEM hItem,
    UINT nStateMask) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, состояние которого должно быть извлечено.

*nStateMask*<br/>
Маска с указанием одного или нескольких состояний, которые должны быть извлечены. Для получения дополнительной информации о возможных значениях `state` для `stateMask` *nStateMask*, см. [TVITEM](/windows/win32/api/commctrl/ns-commctrl-tvitemw)

### <a name="return-value"></a>Возвращаемое значение

UINT, который содержит bitwise OR значений, указанных nStateMask. Для получения информации о возможных значениях см. [CTreeCtrl::GetItem](#getitem). Чтобы найти значение для конкретного состояния, выполните битовую и операцию государственного значения и значения возврата, как показано в следующем примере.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#18](../../mfc/reference/codesnippet/cpp/ctreectrl-class_20.cpp)]

## <a name="ctreectrlgetitemstateex"></a><a name="getitemstateex"></a>CTreeCtrl::GetItemStateEx

Извлекает расширенное состояние указанного элемента в текущем элементе управления видом дерева.

```
UINT GetItemStateEx(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Обработка элемента управления видом дерева.|

### <a name="return-value"></a>Возвращаемое значение

Расширенное состояние элемента. Для получения дополнительной `uStateEx` [информации](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) см.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_GETITEM](/windows/win32/Controls/tvm-getitem) сообщение, которое описано в SDK Windows. Это сообщение возвращает структуру [TVITEMEX,](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) описывая элемент управления видом `uStateEx` дерева, и этот метод извлекает элемент из этой структуры.

## <a name="ctreectrlgetitemtext"></a><a name="getitemtext"></a>CTreeCtrl::GetItemText

Возвращает текст элемента, указанного *hItem*.

```
CString GetItemText(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, текст которого должен быть извлечен.

### <a name="return-value"></a>Возвращаемое значение

Объект, `CString` содержащий текст элемента.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetNextItem](#getnextitem).

## <a name="ctreectrlgetlastvisibleitem"></a><a name="getlastvisibleitem"></a>CTreeCtrl::GetLastVisibleItem

Извлекает последний нерасширенный элемент узла в текущем элементе просмотра дерева.

```
HTREEITEM GetLastVisibleItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка к последнему элементу нерасширенного узла, если метод успешен; в противном случае, NULL.

### <a name="remarks"></a>Remarks

Этот метод отправляет [сообщение TVM_GETNEXTITEM,](/windows/win32/Controls/tvm-getnextitem) которое описано в SDK Windows. Для получения дополнительной информации смотрите TVGN_LASTVISIBLE флаг в параметре *флага* этого сообщения.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Одна или несколько из этих переменных используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода извлекает ручку к последнему нерасширенному элементу узла для просмотра дерева, а затем рисует 3D прямоугольник вокруг этого элемента. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#6](../../mfc/reference/codesnippet/cpp/ctreectrl-class_21.cpp)]

## <a name="ctreectrlgetlinecolor"></a><a name="getlinecolor"></a>CTreeCtrl::GetLineColor

Эта функция члена реализует поведение сообщения Win32 [TVM_GETLINECOLOR,](/windows/win32/Controls/tvm-getlinecolor)как описано в SDK Windows.

```
COLORREF GetLineColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Текущий цвет линии.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#19](../../mfc/reference/codesnippet/cpp/ctreectrl-class_22.cpp)]

## <a name="ctreectrlgetnextitem"></a><a name="getnextitem"></a>CTreeCtrl::GetNextItem

Вызовите эту функцию, чтобы получить элемент представления дерева, который имеет указанное отношение, указанное параметром *nCode,* в *hItem.*

```
HTREEITEM GetNextItem(
    HTREEITEM hItem,
    UINT nCode) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

*nКод*<br/>
Флаг с указанием типа отношения к *hItem*. Этот флаг может быть одним из следующих значений:

- TVGN_CARET извлекает выбранный в настоящее время элемент.

- TVGN_CHILD извлекает первый дочерний элемент элемента, указанный параметром *hItem.*

- TVGN_DROPHILITE извлекает элемент, который является целью операции перетаскивания.

- TVGN_FIRSTVISIBLE извлекает первый видимый элемент.

- TVGN_LASTVISIBLE извлекает последний расширенный элемент в дереве. Это не требует последнего элемента, видимого в окне вида дерева.

- TVGN_NEXT извлекает следующий элемент брата.

- TVGN_NEXTVISIBLE извлекает следующий видимый элемент, который следует за указанным элементом.

- TVGN_PARENT извлекает родительский элемент.

- TVGN_PREVIOUS извлекает предыдущий элемент брата.

- TVGN_PREVIOUSVISIBLE извлекает первый видимый элемент, предшествующие указанному элементу.

- TVGN_ROOT извлекает первый дочерний элемент корневого элемента, частью которого является указанный элемент.

### <a name="return-value"></a>Возвращаемое значение

Ручка следующего элемента в случае успеха; в противном случае NULL.

### <a name="remarks"></a>Remarks

Эта функция возвращаетNULL, если извлеченный элемент является корневым узлам дерева. Например, если вы используете это сообщение с TVGN_PARENT флагом на корневом узле первого уровня представления дерева, сообщение возвращается NULL.

### <a name="example"></a>Пример

Например, при `GetNextItem` использовании в цикле см. [CTreeCtrl::DeleteItem](#deleteitem).

[!code-cpp[NVC_MFC_CTreeCtrl#20](../../mfc/reference/codesnippet/cpp/ctreectrl-class_23.cpp)]

## <a name="ctreectrlgetnextsiblingitem"></a><a name="getnextsiblingitem"></a>CTreeCtrl::GetNextSiblingItem

Вызов эту функцию, чтобы получить следующий брат *hItem*.

```
HTREEITEM GetNextSiblingItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка следующего элемента брата; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#21](../../mfc/reference/codesnippet/cpp/ctreectrl-class_24.cpp)]

## <a name="ctreectrlgetnextvisibleitem"></a><a name="getnextvisibleitem"></a>CTreeCtrl::GetNextVisibleItem

Вызов ими функции, чтобы получить следующий видимый элемент *hItem.*

```
HTREEITEM GetNextVisibleItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка следующего видимого элемента; в противном случае NULL.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::SetCheck](#setcheck).

## <a name="ctreectrlgetparentitem"></a><a name="getparentitem"></a>CTreeCtrl:GetParentItem

Вызов ими функции, чтобы получить родитель *hItem*.

```
HTREEITEM GetParentItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка родительского элемента; в противном случае NULL.

### <a name="remarks"></a>Remarks

Эта функция возвращаетNULL, если родительский элемент является корневым узлам дерева.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::ОбеспечениеVisible](#ensurevisible).

## <a name="ctreectrlgetprevsiblingitem"></a><a name="getprevsiblingitem"></a>CTreeCtrl::GetPrevSiblingItem

Позвоните в эту функцию, чтобы получить предыдущий брат *hItem*.

```
HTREEITEM GetPrevSiblingItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка предыдущего брата; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#22](../../mfc/reference/codesnippet/cpp/ctreectrl-class_25.cpp)]

## <a name="ctreectrlgetprevvisibleitem"></a><a name="getprevvisibleitem"></a>CTreeCtrl::GetPrevVisibleItem

Вызов ими функции, чтобы получить предыдущий видимый элемент *hItem.*

```
HTREEITEM GetPrevVisibleItem(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Ручка предыдущего видимого элемента; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#23](../../mfc/reference/codesnippet/cpp/ctreectrl-class_26.cpp)]

## <a name="ctreectrlgetrootitem"></a><a name="getrootitem"></a>CTreeCtrl:GetRootItem

Вызов исчерпнивайте эту функцию, чтобы получить корневой элемент элемента управления представления дерева.

```
HTREEITEM GetRootItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка корневого элемента; в противном случае NULL.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::EditLabel](#editlabel).

## <a name="ctreectrlgetscrolltime"></a><a name="getscrolltime"></a>CTreeCtrl::GetScrollTime

Вызов исчерпнивите эту функцию элемента, чтобы получить максимальное время прокрутки для управления представлением дерева.

```
UINT GetScrollTime() const;
```

### <a name="return-value"></a>Возвращаемое значение

Максимальное время прокрутки, в миллисекундах.

### <a name="remarks"></a>Remarks

Эта функция члена реализует поведение сообщения Win32 [TVM_GETSCROLLTIME,](/windows/win32/Controls/tvm-getscrolltime)как описано в SDK Windows.

## <a name="ctreectrlgetselectedcount"></a><a name="getselectedcount"></a>CTreeCtrl:GetSelectedCount

Извлекает количество выбранных элементов в текущем элементе управления представления дерева.

```
UINT GetSelectedCount();
```

### <a name="return-value"></a>Возвращаемое значение

Количество выбранных элементов.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_GETSELECTEDCOUNT](/windows/win32/Controls/tvm-getselectedcount) сообщение, которое описано в SDK Windows.

## <a name="ctreectrlgetselecteditem"></a><a name="getselecteditem"></a>CTreeCtrl:GetSelectedItem

Вызовите эту функцию, чтобы получить выбранный в настоящее время элемент управления представления дерева.

```
HTREEITEM GetSelectedItem() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка выбранного элемента; в противном случае NULL.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#24](../../mfc/reference/codesnippet/cpp/ctreectrl-class_27.cpp)]

## <a name="ctreectrlgettextcolor"></a><a name="gettextcolor"></a>CTreeCtrl::GetTextColor

Эта функция члена реализует поведение сообщения Win32 [TVM_GETTEXTCOLOR,](/windows/win32/Controls/tvm-gettextcolor)как описано в SDK Windows.

```
COLORREF GetTextColor() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее текущий цвет текста. Если это значение -1, элемент управления использует цвет системы для цвета текста.

### <a name="example"></a>Пример

  Смотрите пример [CTreeCtrl::SetTextColor](#settextcolor).

## <a name="ctreectrlgettooltips"></a><a name="gettooltips"></a>CTreeCtrl::GetToolTips

Эта функция члена реализует поведение сообщения Win32 [TVM_GETTOOLTIPS,](/windows/win32/Controls/tvm-gettooltips)как описано в SDK Windows.

```
CToolTipCtrl* GetToolTips() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [CToolTipCtrl,](../../mfc/reference/ctooltipctrl-class.md) который будет использоваться управлением дерева. Если функция члена [Create](#create) использует стиль TVS_NOTOOLTIPS, не используются наборы инструментов, и NULL возвращается.

### <a name="remarks"></a>Remarks

Реализация MFC `GetToolTips` возвращает `CToolTipCtrl` объект, который используется управлением дерева, а не ручкой для управления набором инструментов.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#25](../../mfc/reference/codesnippet/cpp/ctreectrl-class_28.cpp)]

## <a name="ctreectrlgetvisiblecount"></a><a name="getvisiblecount"></a>CTreeCtrl::GetVisibleCount

Вызов исчисляйте эту функцию, чтобы получить количество видимых элементов в управлении представления дерева.

```
UINT GetVisibleCount() const;
```

### <a name="return-value"></a>Возвращаемое значение

Количество видимых элементов в управлении представления дерева; в противном случае - 1.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::SetCheck](#setcheck).

## <a name="ctreectrlhittest"></a><a name="hittest"></a>CTreeCtrl::HitTest

Вызовите эту функцию, чтобы определить местоположение указанной точки относительно области клиента управления видом дерева.

```
HTREEITEM HitTest(
    CPoint pt,
    UINT* pFlags = NULL) const;

HTREEITEM HitTest(TVHITTESTINFO* pHitTestInfo) const;
```

### <a name="parameters"></a>Параметры

*пт*<br/>
Клиент координирует точку для тестирования.

*pФлаги*<br/>
Указатель на штат, который получает информацию о результатах хит-теста. Это может быть одно или несколько `flags` значений, перечисленных в разделе «Замечания».

*pHitTestInfo*<br/>
Адрес структуры [TVHITTESTINFO,](/windows/win32/api/commctrl/ns-commctrl-tvhittestinfo) которая содержит положение для попадания теста и которая получает информацию о результатах хит-теста.

### <a name="return-value"></a>Возвращаемое значение

Ручка элемента представления дерева, занимающей указанную точку или NULL, если ни один элемент не занимает точку.

### <a name="remarks"></a>Remarks

Когда эта функция вызывается, параметр *pt* определяет координаты точки для тестирования. Функция возвращает ручку элемента в указанной точке или NULL, если ни один элемент не занимает точку. Кроме того, параметр *pFlags* содержит значение, которое указывает местоположение указанной точки. Возможны следующие значения:

|||
|-|-|
|Значение|Значение|
|TVHT_ABOVE|Над клиентской зоной.|
|TVHT_BELOW|Ниже клиентской зоны.|
|TVHT_NOWHERE|В клиентской области, но ниже последнего элемента.|
|TVHT_ONITEM|На бит-карте или этикетке, связанной с элементом.|
|TVHT_ONITEMBUTTON|На кнопке, связанной с элементом.|
|TVHT_ONITEMICON|На битовой карте, связанной с элементом.|
|TVHT_ONITEMINDENT|В отступе, связанном с элементом.|
|TVHT_ONITEMLABEL|На метке (строке), связанной с элементом.|
|TVHT_ONITEMRIGHT|В районе справа от предмета.|
|TVHT_ONITEMSTATEICON|На значке состояния для элемента просмотра дерева, наблюдавав в состоянии, определяемом пользователем.|
|TVHT_TOLEFT|Слева от клиентской зоны.|
|TVHT_TORIGHT|Справа от клиентской зоны.|
|||

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#26](../../mfc/reference/codesnippet/cpp/ctreectrl-class_29.cpp)]

## <a name="ctreectrlinsertitem"></a><a name="insertitem"></a>CTreeCtrl::InsertItem

Вызовите эту функцию, чтобы вставить новый элемент в управление представления дерева.

```
HTREEITEM InsertItem(LPTVINSERTSTRUCT lpInsertStruct);

HTREEITEM InsertItem(
    UINT nMask,
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    UINT nState,
    UINT nStateMask,
    LPARAM lParam,
    HTREEITEM hParent,
    HTREEITEM hInsertAfter);

HTREEITEM InsertItem(
    LPCTSTR lpszItem,
    HTREEITEM hParent = TVI_ROOT,
    HTREEITEM hInsertAfter = TVI_LAST);

HTREEITEM InsertItem(
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    HTREEITEM hParent = TVI_ROOT,
    HTREEITEM hInsertAfter = TVI_LAST);
```

### <a name="parameters"></a>Параметры

*lpInsertStruct*<br/>
Указатель на `TVINSERTSTRUCT` указатель, который определяет атрибуты элемента представления дерева, который будет вставлен.

*nМаск*<br/>
Integer с указанием, какие атрибуты установить. Смотрите `TVITEM` структуру в Windows SDK.

*lpszItem*<br/>
Адрес строки, содержащей текст элемента.

*nИзображение*<br/>
Индекс изображения элемента в списке изображений элемента управления представления дерева.

*nSelectedИзображение*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления представления дерева.

*nState*<br/>
Определяет значения для состояний элемента. В SDK для Просмотра деревьев можно ознакомиться в SDK Windows для списка соответствующих состояний.

*nStateMask*<br/>
Определяет, какие состояния должны быть установлены. Смотрите `TVITEM` структуру в Windows SDK.

*lParam*<br/>
Значение, связанное с элементом размером с приложение.

*hРодитель*<br/>
Ручка родительского элемента.

*hInsertAfter*<br/>
Ручка элемента, после которого новый элемент должен быть вставлен.

### <a name="return-value"></a>Возвращаемое значение

Ручка нового элемента в случае успеха; в противном случае NULL.

### <a name="remarks"></a>Remarks

В примере отображается ситуация, в которых можно использовать каждую версию функции при вставке элемента управления деревом.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#27](../../mfc/reference/codesnippet/cpp/ctreectrl-class_30.cpp)]

## <a name="ctreectrlitemhaschildren"></a><a name="itemhaschildren"></a>CTreeCtrl::ItemHasChildren

Используйте эту функцию, чтобы определить, есть ли элемент дерева, указанный *hItem,* имеет элементы ребенка.

```
BOOL ItemHasChildren(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если элемент дерева, указанный *hItem,* имеет детские предметы; 0, если это не так.

### <a name="remarks"></a>Remarks

Если это так, то вы можете использовать [CTreeCtrl::GetChildItem](#getchilditem) для извлечения этих детских предметов.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetSelectedItem](#getselecteditem).

## <a name="ctreectrlmapaccidtoitem"></a><a name="mapaccidtoitem"></a>CTreeCtrl:MapAccidtoitem

Карты указанного идентификатора доступности к ручке элемента вида дерева в текущем элементе управления видом дерева.

```
HTREEITEM MapAccIdToItem(UINT uAccId) const;
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*uAccId*|(в) Идентификатор доступности элемента элемента в элементе вида дерева.|

### <a name="return-value"></a>Возвращаемое значение

Ручка к элементу вида `HTREEITEM`дерева (), который соответствует параметру *uAccId.* Для получения дополнительной информации [TVITEMEX](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) см. *hItem*

### <a name="remarks"></a>Remarks

Средства доступности — это приложения, которые помогают людям с ограниченными возможностями пользоваться компьютерами. Идентификатор доступности `IAccessible` используется интерфейсом для однозначного указания элемента в окне. Для получения дополнительной информации об идентификаторах доступности, поиск по теме "Об активной поддержке доступности" в [Microsoft Developer Network](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_MAPACCIDTOHTREEITEM](/windows/win32/Controls/tvm-mapaccidtohtreeitem) сообщение, которое описано в SDK Windows.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

В следующем примере кода используется идентификатор доступности и метод [CTreeCtrl::MapAccIdToItem](#mapaccidtoitem) для извлечения ручки к элементу просмотра корневого дерева. В примере используется ручка и метод [CTreeCtrl::GetItemPartRect](#getitempartrect) для рисования 3D прямоугольника вокруг этого элемента. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Мы использовали метод [CTreeCtrl::MapItemToAccID](#mapitemtoaccid) для ассоциирования элемента корневого дерева с идентификатором доступности.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#5](../../mfc/reference/codesnippet/cpp/ctreectrl-class_18.cpp)]

## <a name="ctreectrlmapitemtoaccid"></a><a name="mapitemtoaccid"></a>CTreeCtrl:MapItemToAccID

Отображает указанную ручку элемента вида дерева в текущем управлении видом дерева с идентификатором доступности.

```
UINT MapItemToAccID(HTREEITEM hItem) const;
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Ручка элемента вида дерева в элементе управления. Для получения дополнительной информации [TVITEMEX](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) см. *hItem*|

### <a name="return-value"></a>Возвращаемое значение

Идентификатор доступности, соответствующий параметру *hItem.*

### <a name="remarks"></a>Remarks

Средства доступности — это приложения, которые помогают людям с ограниченными возможностями пользоваться компьютерами. Идентификатор доступности `IAccessible` используется интерфейсом для однозначного указания элемента в окне. Для получения дополнительной информации об идентификаторах доступности, поиск по теме "Об активной поддержке доступности" в [Microsoft Developer Network](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_MAPHTREEITEMTOACCID](/windows/win32/Controls/tvm-maphtreeitemtoaccid) сообщение, которое описано в SDK Windows.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода получает идентификационный номер элемента управления видом дерева. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Этот пример кода получает уникальный идентификационный номер для корневого узла страны/региона.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#2](../../mfc/reference/codesnippet/cpp/ctreectrl-class_31.cpp)]

## <a name="ctreectrlselect"></a><a name="select"></a>CTreeCtrl::Выбрать

Вызовите эту функцию, чтобы выбрать данный элемент представления дерева, прокрутите элемент в представлении или перенарисуйте элемент в стиле, используемом для обозначения цели операции перетаскивания и падения.

```
BOOL Select(
    HTREEITEM hItem,
    UINT nCode);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

*nКод*<br/>
Тип действия. Этот параметр может быть одним из следующих значений:

- TVGN_CARET устанавливает выделение данного элемента.

- TVGN_DROPHILITE перерисовывает данный элемент в стиле, используемом для обозначения цели операции перетаскивания и падения.

- TVGN_FIRSTVISIBLE прокручивает вид дерева вертикально, так что данный элемент является первым видимым элементом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Если *nCode* содержит значение TVGN_CARET, родительское окно получает TVN_SELCHANGING и TVN_SELCHANGED сообщения уведомлений. Кроме того, если указанный элемент является ребенком рухнувшего родительского элемента, список элементов ребенка становится расширен, чтобы показать указанный элемент. В этом случае родительское окно получает сообщения TVN_ITEMEXPANDING и TVN_ITEMEXPANDED уведомления.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::HitTest](#hittest).

## <a name="ctreectrlselectdroptarget"></a><a name="selectdroptarget"></a>CTreeCtrl::SelectDropTarget

Вызовите эту функцию, чтобы перерисовать элемент в стиле, используемом для обозначения цели операции перетаскивания.

```
BOOL SelectDropTarget(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#9](../../mfc/reference/codesnippet/cpp/ctreectrl-class_9.cpp)]

## <a name="ctreectrlselectitem"></a><a name="selectitem"></a>CTreeCtrl::SelectItem

Вызовите эту функцию, чтобы выбрать данный элемент представления дерева.

```
BOOL SelectItem(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Если *hItem* является NULL, то эта функция не выбирает элемент.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#26](../../mfc/reference/codesnippet/cpp/ctreectrl-class_29.cpp)]

## <a name="ctreectrlselectsetfirstvisible"></a><a name="selectsetfirstvisible"></a>CTreeCtrl::SelectSetFirstVisible

Вызовите эту функцию, чтобы прокрутить представление дерева вертикально, чтобы данный элемент был первым видимым элементом.

```
BOOL SelectSetFirstVisible(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента дерева, который будет установлен в качестве первого видимого элемента.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Функция отправляет сообщение в окно с TVM_SELECTITEM и TVGN_FIRSTVISIBLE параметров сообщения.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#28](../../mfc/reference/codesnippet/cpp/ctreectrl-class_32.cpp)]

## <a name="ctreectrlsetautoscrollinfo"></a><a name="setautoscrollinfo"></a>CTreeCtrl::SetAutoscrollInfo

Устанавливает скорость автопрокрутки текущего управления видом дерева.

```
BOOL SetAutoscrollInfo(
    UINT uPixelsPerSec,
    UINT uUpdateTime);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*uPixelsPerSec*|(в) Количество пикселей в секунду для прокрутки.|
|*uUpdateTime*|(в) Интервал времени между обновлениями элемента управления.|

### <a name="return-value"></a>Возвращаемое значение

Всегда возвращается TRUE.

### <a name="remarks"></a>Remarks

Параметры автопрокрутки используются для прокрутки в представлении элемента, который в настоящее время не виден. Управление видом дерева должно иметь TVS_EX_AUTOHSCROLL расширенный стиль, который описан в [расширенных стилях управления Tree-View.](/windows/win32/Controls/tree-view-control-window-extended-styles)

Этот метод отправляет [TVM_SETAUTOSCROLLINFO](/windows/win32/Controls/tvm-setautoscrollinfo) сообщение, которое описано в SDK Windows.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода устанавливает поведение автопрокрутков текущего управления видом дерева. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Мы намеренно сделали управление видом дерева узким, так что он должен автоматически прокручиваться, чтобы отобразить элемент дерева, который имеет фокус. Пример кода устанавливает элемент управления видом дерева для автоматического прокрутки 30 пикселей в секунду каждые 5 секунд, пока элемент дерева не будет в поле зрения.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#4](../../mfc/reference/codesnippet/cpp/ctreectrl-class_33.cpp)]

## <a name="ctreectrlsetbkcolor"></a><a name="setbkcolor"></a>CTreeCtrl::SetBkColor

Эта функция члена реализует поведение сообщения Win32 [TVM_SETBKCOLOR,](/windows/win32/Controls/tvm-setbkcolor)как описано в SDK Windows.

```
COLORREF SetBkColor(COLORREF clr);
```

### <a name="parameters"></a>Параметры

*Clr*<br/>
Значение COLORREF, содержащее новый цвет фона. Если это значение -1, элемент управления вернется к использованию цвета системы для фонового цвета.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее текущий цвет текста. Если это значение -1, элемент управления использует цвет системы для цвета текста.

### <a name="example"></a>Пример

  Смотрите пример [CTreeCtrl::SetTextColor](#settextcolor).

## <a name="ctreectrlsetcheck"></a><a name="setcheck"></a>CTreeCtrl::SetCheck

Вызовите эту функцию элемента, чтобы установить состояние проверки элемента управления деревом.

```
BOOL SetCheck(
    HTREEITEM hItem,
    BOOL fCheck = TRUE);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
HTREEITEM для получения изменения состояния проверки.

*fCheck*<br/>
Указывает, должен ли элемент управления деревом быть проверенным или беспрепятственным. По умолчанию устанавливает `SetCheck` элемент, который должен быть проверен.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

При проверке элемента управления деревом *(fCheck* установлен в TRUE), элемент отображается с прилегающей галочкой.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#29](../../mfc/reference/codesnippet/cpp/ctreectrl-class_34.cpp)]

### <a name="example"></a>Пример

Чтобы использовать флажки, установите TVS_CHECKBOXES перед заселением элемента управления деревьями.

[!code-cpp[NVC_MFC_CTreeCtrl#30](../../mfc/reference/codesnippet/cpp/ctreectrl-class_35.cpp)]

## <a name="ctreectrlsetextendedstyle"></a><a name="setextendedstyle"></a>CTreeCtrl::SetExtendedStyle

Устанавливает расширенные стили для текущего управления видом дерева.

```
DWORD SetExtendedStyle(
    DWORD dwExMask,
    DWORD dwExStyles);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*dwExМаск*|(в) Битовая маска, которая определяет, какие стили в текущем управлении видом дерева зависят от этого метода. Если этот параметр равен нулю, он игнорируется, и значение параметра *dwExStyles* назначается элементу управления видом дерева.<br /><br /> Укажите нулевую или битную комбинацию (ИЛИ) стилей, описанных в [расширенных стилях управления Tree-View.](/windows/win32/Controls/tree-view-control-window-extended-styles)|
|*dwExStyles*|(в) Битовая маска, которая определяет, какие стили в текущем управлении видом дерева установить или очистить.<br /><br /> Чтобы установить комбинацию стилей, укажите битную комбинацию (OR) стилей, описанных в [расширенных стилях Управления Tree-View.](/windows/win32/Controls/tree-view-control-window-extended-styles) Чтобы очистить набор стилей, укажите ноль.|

### <a name="return-value"></a>Возвращаемое значение

Значение, содержащее предыдущие расширенные стили управления.

### <a name="remarks"></a>Remarks

Этот метод очищает стили, указанные в параметре *dwExMask,* а затем устанавливает стили, указанные в параметре *dwExStyles.* Изменяются только расширенные стили, соответствующие битам в *dwExMask.*

Этот метод отправляет [TVM_SETEXTENDEDSTYLE](/windows/win32/Controls/tvm-setextendedstyle) сообщение, которое описано в SDK Windows.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода добавляет TVS_EX_AUTOHSCROLL расширенный стиль к текущему элементу управления видом дерева. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Мы намеренно сделали управление видом дерева узким, так что он должен автоматически прокручиваться, чтобы отобразить элемент дерева, который имеет фокус.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#3](../../mfc/reference/codesnippet/cpp/ctreectrl-class_36.cpp)]

## <a name="ctreectrlsetimagelist"></a><a name="setimagelist"></a>CTreeCtrl::SetImageList

Вызов ими, чтобы установить нормальный или штатный список изображений для управления представлением дерева и перерисовать элемент управления с помощью новых изображений.

```
CImageList* SetImageList(
    CImageList* pImageList,
    int nImageListType);
```

### <a name="parameters"></a>Параметры

*pImageList*<br/>
Указатель на список изображений для присвоения. Если *pImageList* является NULL, все изображения удаляются из элемента управления представления дерева.

*nImageListType*<br/>
Тип списка изображений для установки. Список изображений может быть одним из следующих значений:

- TVSIL_NORMAL устанавливает нормальный список изображений, который содержит выбранные и невыбранные изображения для элемента представления дерева. Это состояние необходимо использовать для наложения изображений.

- TVSIL_STATE устанавливает список изображений состояния, который содержит изображения для элементов представления дерева, которые находятся в состоянии, определенном пользователем.

### <a name="return-value"></a>Возвращаемое значение

Указатель на предыдущий список изображений, если таковое имеется; в противном случае NULL.

### <a name="example"></a>Пример

  Смотрите пример [cTreeCtrl::GetImageList](#getimagelist).

## <a name="ctreectrlsetindent"></a><a name="setindent"></a>CTreeCtrl:Setindent

Вызов ими, чтобы установить ширину отступа для управления представлением дерева и перенарисовать элемент управления, чтобы отразить новую ширину.

```
void SetIndent(UINT nIndent);
```

### <a name="parameters"></a>Параметры

*nИндит*<br/>
Ширина, в пикселях, отступа. Если *nIndent* меньше, чем установленная системой минимальная ширина, новая ширина устанавливается на системно-определяемый минимум.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetIndent](#getindent).

## <a name="ctreectrlsetinsertmark"></a><a name="setinsertmark"></a>CTreeCtrl::SetInsertMark

Эта функция члена реализует поведение сообщения Win32 [TVM_SETINSERTMARK,](/windows/win32/Controls/tvm-setinsertmark)как описано в SDK Windows.

```
BOOL SetInsertMark(
    HTREEITEM hItem,
    BOOL fAfter = TRUE);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
HTREEITEM, который определяет, на каком элементе будет размещен знак вставки. Если этот аргумент NULL, знак вставки удаляется.

*fAfter*<br/>
Значение BOOL определяет, помещается ли знак вставки до или после указанного элемента. Если этот аргумент незеромежду, знак вставки будет помещен после элемента. Если этот аргумент равен нулю, знак вставки будет помещен перед элементом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#31](../../mfc/reference/codesnippet/cpp/ctreectrl-class_37.cpp)]

## <a name="ctreectrlsetinsertmarkcolor"></a><a name="setinsertmarkcolor"></a>CTreeCtrl::SetInsertMarkColor

Эта функция члена реализует поведение сообщения Win32 [TVM_SETINSERTMARKCOLOR,](/windows/win32/Controls/tvm-setinsertmarkcolor)как описано в SDK Windows.

```
COLORREF SetInsertMarkColor(COLORREF clrNew);
```

### <a name="parameters"></a>Параметры

*clrNew*<br/>
Значение COLORREF, содержащее новый цвет знака вставки.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, содержащее предыдущий цвет знака вставки.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetInsertMarkColor](#getinsertmarkcolor).

## <a name="ctreectrlsetitem"></a><a name="setitem"></a>CTreeCtrl::SetItem

Вызовите эту функцию, чтобы установить атрибуты указанного элемента представления дерева.

```
BOOL SetItem(TVITEM* pItem);

BOOL SetItem(
    HTREEITEM hItem,
    UINT nMask,
    LPCTSTR lpszItem,
    int nImage,
    int nSelectedImage,
    UINT nState,
    UINT nStateMask,
    LPARAM lParam);
```

### <a name="parameters"></a>Параметры

*pItem*<br/>
Указатель на структуру [TVITEM,](/windows/win32/api/commctrl/ns-commctrl-tvitemw) содержащую новые атрибуты элемента, как описано в SDK Windows.

*hItem*<br/>
Ручка элемента, атрибуты которого должны быть установлены. Смотрите `hItem` член `TVITEM` структуры в Windows SDK.

*nМаск*<br/>
Integer с указанием, какие атрибуты установить. См. член `mask` структуры `TVITEM`.

*lpszItem*<br/>
Адрес строки, содержащей текст элемента.

*nИзображение*<br/>
Индекс изображения элемента в списке изображений элемента управления представления дерева. См. член `iImage` структуры `TVITEM`.

*nSelectedИзображение*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления представления дерева. См. член `iSelectedImage` структуры `TVITEM`.

*nState*<br/>
Определяет значения для состояний элемента. См. член `State` структуры `TVITEM`.

*nStateMask*<br/>
Определяет, какие состояния должны быть установлены. См. член `stateMask` структуры `TVITEM`.

*lParam*<br/>
Значение, связанное с элементом размером с приложение.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

В `TVITEM` структуре `hItem` участник определяет элемент, и `mask` участник определяет, какие атрибуты установить.

Если `mask` участник или параметр *nMask* определяет TVIF_TEXT значение, `pszText` то участник или *lpszItem* — это адрес `cchTextMax` строки с нулевым завершением, и участник игнорируется. Если `mask` (или *nMask)* указывает TVIF_STATE значение, `stateMask` параметр *nStateMask* определяет, какие состояния элемента `state` изменять, а параметр участника или *nState* содержит значения для этих состояний.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#32](../../mfc/reference/codesnippet/cpp/ctreectrl-class_38.cpp)]

## <a name="ctreectrlsetitemdata"></a><a name="setitemdata"></a>CTreeCtrl::SetItemData

Вызовите эту функцию, чтобы установить значение, связанное с указанным элементом, конкретное приложение.

```
BOOL SetItemData(
    HTREEITEM hItem,
    DWORD_PTR dwData);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Обработка элемента, данные которого должны быть извлечены.

*dwData*<br/>
Значение, связанное с элементом, указанным *hItem,* размером с указательное значение, связанное с пунктом.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#33](../../mfc/reference/codesnippet/cpp/ctreectrl-class_39.cpp)]

## <a name="ctreectrlsetitemexpandedimageindex"></a><a name="setitemexpandedimageindex"></a>CTreeCtrl::SetItemExpandedImageIndex

Устанавливает индекс изображения для отображения, когда указанный элемент текущего элемента управления видом дерева находится в расширенном состоянии.

```
BOOL SetItemExpandedImageIndex(
    HTREEITEM hItem,
    int iExpandedImage);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Обработка элемента управления видом дерева.|
|*iExpandedImage*|(в) Индекс изображения для отображения, когда указанный элемент находится в расширенном состоянии.|

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если этот метод является успешным; в противном случае, FALSE.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_SETITEM](/windows/win32/Controls/tvm-setitem) сообщение, которое описано в SDK Windows. Этот метод присваивает параметр *iExpandedImage* `iExpandedImage` члену структуры [TVITEMEX,](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) а затем использует эту структуру в сообщении.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода является тривиальным тестом для определения того, возвращает ли метод [CTreeCtrl::GetItemExpandedImageIndex](#getitemexpandedimageindex) значение, установленное методом [CTreeCtrl::SetItemExpandedImageIndex.](#setitemexpandedimageindex) В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#8](../../mfc/reference/codesnippet/cpp/ctreectrl-class_40.cpp)]

## <a name="ctreectrlsetitemheight"></a><a name="setitemheight"></a>CTreeCtrl::SetItemHeight

Эта функция члена реализует поведение сообщения Win32 [TVM_SETITEMHEIGHT,](/windows/win32/Controls/tvm-setitemheight)как описано в SDK Windows.

```
SHORT SetItemHeight(SHORT cyHeight);
```

### <a name="parameters"></a>Параметры

*cyHeight*<br/>
Определяет новую высоту каждого элемента в представлении дерева в пикселях. Если этот аргумент меньше высоты изображений, то он будет установлен на высоте изображения. Если этот аргумент не ровный, он будет округлен до ближайшего четного значения. Если этот аргумент -1, элемент управления вернется к использованию высоты элемента по умолчанию.

### <a name="return-value"></a>Возвращаемое значение

Предыдущая высота элементов, в пикселях.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetItemHeight](#getitemheight).

## <a name="ctreectrlsetitemimage"></a><a name="setitemimage"></a>CTreeCtrl:SetItemImage

Ассоциирует изображения с элементом.

```
BOOL SetItemImage(
    HTREEITEM hItem,
    int nImage,
    int nSelectedImage);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, изображение которого должно быть установлено.

*nИзображение*<br/>
Индекс изображения элемента в списке изображений элемента управления представления дерева.

*nSelectedИзображение*<br/>
Индекс выбранного изображения элемента в списке изображений элемента управления представления дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Каждый элемент в управлении представления дерева может иметь пару bitmapped изображений, связанных с ним. Изображения отображаются на левой стороне метки элемента. Одно изображение отображается при выборе элемента, а другое отображается, когда элемент не выбран. Например, элемент может отображать открытую папку при выборе и закрытую папку, когда она не выбрана.

Вызовите эту функцию, чтобы установить индекс изображения элемента и выбранного изображения в списке изображений управления представления дерева.

Для получения дополнительной информации о изображениях, [см.](../../mfc/reference/cimagelist-class.md)

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetItemImage](#getitemimage).

## <a name="ctreectrlsetitemstate"></a><a name="setitemstate"></a>CTreeCtrl:SetItemState

Устанавливает состояние элемента, указанного *hItem.*

```
BOOL SetItemState(
    HTREEITEM hItem,
    UINT nState,
    UINT nStateMask);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, состояние которого должно быть установлено.

*nState*<br/>
Определяет новые состояния для элемента.

*nStateMask*<br/>
Определяет, какие состояния должны быть изменены.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Для получения информации о государствах, [см. CTreeCtrl::GetItem](#getitem).

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetItemState](#getitemstate).

## <a name="ctreectrlsetitemstateex"></a><a name="setitemstateex"></a>CTreeCtrl::SetItemStateEx

Устанавливает расширенное состояние указанного элемента в текущем элементе просмотра дерева.

```
BOOL SetItemStateEx(
    HTREEITEM hItem,
    UINT uStateEx);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Обработка элемента управления видом дерева.|
|*uStateEx*|(в) Расширенное состояние элемента. Для получения дополнительной `uStateEx` [информации](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) см.|

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если этот метод является успешным; в противном случае, FALSE.

### <a name="remarks"></a>Remarks

Этот метод отправляет [TVM_SETITEM](/windows/win32/Controls/tvm-setitem) сообщение, которое описано в SDK Windows. Этот метод присваивает параметр *uStateEx* `uStateEx` члену структуры [TVITEMEX,](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) а затем использует эту структуру в сообщении.

### <a name="example"></a>Пример

Следующий пример кода определяет `m_treeCtrl`переменную, которая используется для доступа к текущему элементу управления представления дерева. Пример кода также определяет неподписанный ряд и несколько переменных HTREEITEM. Эти переменные используются в следующем примере.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#1](../../mfc/reference/codesnippet/cpp/ctreectrl-class_17.h)]

### <a name="example"></a>Пример

Следующий пример кода устанавливает элемент вида дерева в отключенное состояние. В более предыдущем разделе примера кода, который не показан, мы создали вид дерева, который состоит из корневого узла страны/региона для Соединенных Штатов, подузлов для штатов Пенсильвания и Вашингтон, а также элементов деревьев для городов в этих штатах. Этот пример кода устанавливает узла Пенсильвании для отключенного состояния.

[!code-cpp[NVC_MFC_CTreeCtrl_s1#7](../../mfc/reference/codesnippet/cpp/ctreectrl-class_41.cpp)]

## <a name="ctreectrlsetitemtext"></a><a name="setitemtext"></a>CTreeCtrl::SetItemText

Устанавливает текст элемента, указанного *hItem*.

```
BOOL SetItemText(
    HTREEITEM hItem,
    LPCTSTR lpszItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Ручка элемента, текст которого должен быть установлен.

*lpszItem*<br/>
Адрес строки, содержащей новый текст для элемента

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#34](../../mfc/reference/codesnippet/cpp/ctreectrl-class_42.cpp)]

## <a name="ctreectrlsetlinecolor"></a><a name="setlinecolor"></a>CTreeCtrl::SetLineColor

Вызов исчерпывать эту функцию-члена, чтобы установить текущий цвет строки для управления представлением дерева.

```
COLORREF SetLineColor(COLORREF clrNew = CLR_DEFAULT);
```

### <a name="parameters"></a>Параметры

*clrNew*<br/>
Новый цвет линии.

### <a name="return-value"></a>Возвращаемое значение

Предыдущий цвет линии.

### <a name="remarks"></a>Remarks

Эта функция члена реализует поведение сообщения Win32 [TVM_SETLINECOLOR,](/windows/win32/Controls/tvm-setlinecolor)как описано в SDK Windows.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#35](../../mfc/reference/codesnippet/cpp/ctreectrl-class_43.cpp)]

## <a name="ctreectrlsetscrolltime"></a><a name="setscrolltime"></a>CTreeCtrl::SetScrollTime

Вызов исчерпнивите эту функцию элемента, чтобы установить максимальное время прокрутки для управления представлением дерева.

```
UINT SetScrollTime(UINT uScrollTime);
```

### <a name="parameters"></a>Параметры

*uScrollTime*<br/>
Новое максимальное время прокрутки, в миллисекундах. Если это значение меньше 100, оно будет округлено до 100.

### <a name="return-value"></a>Возвращаемое значение

Предыдущее максимальное время прокрутки, в миллисекундах.

### <a name="remarks"></a>Remarks

Эта функция члена реализует поведение сообщения Win32 [TVM_SETSCROLLTIME,](/windows/win32/Controls/tvm-setscrolltime)как описано в SDK Windows.

## <a name="ctreectrlsettextcolor"></a><a name="settextcolor"></a>CTreeCtrl::SetTextColor

Эта функция члена реализует поведение сообщения Win32 [TVM_SETTEXTCOLOR,](/windows/win32/Controls/tvm-settextcolor)как описано в SDK Windows.

```
COLORREF SetTextColor(COLORREF clr);
```

### <a name="parameters"></a>Параметры

*Clr*<br/>
Значение COLORREF, содержащее новый цвет текста. Если этот аргумент -1, элемент управления вернется к использованию цвета системы для цвета текста.

### <a name="return-value"></a>Возвращаемое значение

Значение COLORREF, представляющее предыдущий цвет текста. Если это значение -1, элемент управления использует цвет системы для цвета текста.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#36](../../mfc/reference/codesnippet/cpp/ctreectrl-class_44.cpp)]

## <a name="ctreectrlsettooltips"></a><a name="settooltips"></a>CTreeCtrl::SetToolTips

Эта функция члена реализует поведение сообщения Win32 [TVM_SETTOOLTIPS,](/windows/win32/Controls/tvm-settooltips)как описано в SDK Windows.

```
CToolTipCtrl* SetToolTips(CToolTipCtrl* pWndTip);
```

### <a name="parameters"></a>Параметры

*pWndTip*<br/>
Указатель на объект [CToolTipCtrl,](../../mfc/reference/ctooltipctrl-class.md) который будет использовать элемент управления деревом.

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [CToolTipCtrl,](../../mfc/reference/ctooltipctrl-class.md) содержащий инструмент, ранее использоваваемый элементом управления, или NULL, если ранее не использовались готовые инструменты.

### <a name="remarks"></a>Remarks

Чтобы использовать наконечники инструментов, укажите `CTreeCtrl` TVS_NOTOOLTIPS стиль при создании объекта.

### <a name="example"></a>Пример

  Смотрите пример [для CTreeCtrl::GetToolTips](#gettooltips).

## <a name="ctreectrlshowinfotip"></a><a name="showinfotip"></a>CTreeCtrl::ShowInfoTip

Отображает infotip для указанного элемента в текущем элементе управления видом дерева.

```
void ShowInfoTip(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------------|-----------------|
|*hItem*|(в) Ручка элемента вида дерева в элементе управления. Для получения дополнительной `hItem` [информации](/windows/win32/api/commctrl/ns-commctrl-tvitemexw) см.|

### <a name="remarks"></a>Remarks

Для получения дополнительной информации о разнице между наборами инструментов и infotips, поиск по теме "Tooltips и Infotips" в [Microsoft Developer Network](https://go.microsoft.com/fwlink/p/?linkid=56322).

Этот метод отправляет [TVM_SHOWINFOTIP](/windows/win32/Controls/tvm-showinfotip) сообщение, которое описано в SDK Windows.

## <a name="ctreectrlsortchildren"></a><a name="sortchildren"></a>CTreeCtrl::СортДети

Вызовите эту функцию, чтобы в алфавитном порядке сортировать элементы ребенка данного родительского элемента в управлении представления дерева.

```
BOOL SortChildren(HTREEITEM hItem);
```

### <a name="parameters"></a>Параметры

*hItem*<br/>
Обработка родительского элемента, элементы которого должны быть отсортированы. Если *hItem* является NULL, сортировка будет осуществляться из корня дерева.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

`SortChildren`не будет перепроклятить через дерево; только ближайшие дети *hItem* будут отсортированы.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#37](../../mfc/reference/codesnippet/cpp/ctreectrl-class_45.cpp)]

## <a name="ctreectrlsortchildrencb"></a><a name="sortchildrencb"></a>CTreeCtrl::SortChildrenCB

Вызовите эту функцию для сортировки элементов представления дерева с помощью функции обратного вызова, определяемой приложением, которая сравнивает элементы.

```
BOOL SortChildrenCB(LPTVSORTCB pSort);
```

### <a name="parameters"></a>Параметры

*pSort*<br/>
Указатель на структуру [TVSORTCB.](/windows/win32/api/commctrl/ns-commctrl-tvsortcb)

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Функция сравнения структуры, `lpfnCompare`должна вернуть отрицательное значение, если первый элемент должен предшествовать второму, положительное значение, если первый элемент должен следовать второму, или ноль, если эти два элемента эквивалентны.

Параметры *lParam1* и *lParam2* соответствуют составу `lParam` структуры [TVITEM](/windows/win32/api/commctrl/ns-commctrl-tvitemw) по двум сравниваемым элементам. Параметр *lParamSort* соответствует `lParam` члену `TV_SORTCB` структуры.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_CTreeCtrl#38](../../mfc/reference/codesnippet/cpp/ctreectrl-class_46.cpp)]

[!code-cpp[NVC_MFC_CTreeCtrl#39](../../mfc/reference/codesnippet/cpp/ctreectrl-class_47.cpp)]

## <a name="see-also"></a>См. также раздел

[MFC Образец CMNCTRL1](../../overview/visual-cpp-samples.md)<br/>
[Класс CWnd](../../mfc/reference/cwnd-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CImageList](../../mfc/reference/cimagelist-class.md)
