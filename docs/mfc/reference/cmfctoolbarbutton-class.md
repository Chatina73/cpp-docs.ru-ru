---
description: 'Дополнительные сведения о: CMFCToolBarButton Class'
title: Класс CMFCToolBarButton
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeDropped
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStored
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStretched
- AFXTOOLBARBUTTON/CMFCToolBarButton::CompareWith
- AFXTOOLBARBUTTON/CMFCToolBarButton::CopyFrom
- AFXTOOLBARBUTTON/CMFCToolBarButton::CreateFromOleData
- AFXTOOLBARBUTTON/CMFCToolBarButton::EnableWindow
- AFXTOOLBARBUTTON/CMFCToolBarButton::ExportToMenuButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetClipboardFormat
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetHwnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetInvalidateRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetTextSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::HasFocus
- AFXTOOLBARBUTTON/CMFCToolBarButton::HaveHotBorder
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawText
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDroppedDown
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsEditable
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsExtraSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsFirstInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHidden
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHorizontal
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLastInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLocked
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsOwnerOf
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsWindowVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::NotifyCommand
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnAddToCustomizePage
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrop
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCalculateSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCancelMode
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnChangeParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClick
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClickUp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnContextHelp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCtlColor
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCustomizeMenu
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDblClk
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDraw
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDrawOnCustomizeList
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGetCustomToolTipText
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGlobalFontsChanged
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnMove
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnShow
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnToolHitTest
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnUpdateToolTip
- AFXTOOLBARBUTTON/CMFCToolBarButton::PrepareDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::Rect
- AFXTOOLBARBUTTON/CMFCToolBarButton::ResetImageToDefault
- AFXTOOLBARBUTTON/CMFCToolBarButton::SaveBarState
- AFXTOOLBARBUTTON/CMFCToolBarButton::Serialize
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetACCData
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetClipboardFormatName
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRadio
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::Show
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bTextBelow
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bUserButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWholeText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrap
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrapText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nID
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_strText
helpviewer_keywords:
- CMFCToolBarButton [MFC], CMFCToolBarButton
- CMFCToolBarButton [MFC], CanBeDropped
- CMFCToolBarButton [MFC], CanBeStored
- CMFCToolBarButton [MFC], CanBeStretched
- CMFCToolBarButton [MFC], CompareWith
- CMFCToolBarButton [MFC], CopyFrom
- CMFCToolBarButton [MFC], CreateFromOleData
- CMFCToolBarButton [MFC], EnableWindow
- CMFCToolBarButton [MFC], ExportToMenuButton
- CMFCToolBarButton [MFC], GetClipboardFormat
- CMFCToolBarButton [MFC], GetHwnd
- CMFCToolBarButton [MFC], GetImage
- CMFCToolBarButton [MFC], GetInvalidateRect
- CMFCToolBarButton [MFC], GetParentWnd
- CMFCToolBarButton [MFC], GetProtectedCommands
- CMFCToolBarButton [MFC], GetTextSize
- CMFCToolBarButton [MFC], HasFocus
- CMFCToolBarButton [MFC], HaveHotBorder
- CMFCToolBarButton [MFC], IsDrawImage
- CMFCToolBarButton [MFC], IsDrawText
- CMFCToolBarButton [MFC], IsDroppedDown
- CMFCToolBarButton [MFC], IsEditable
- CMFCToolBarButton [MFC], IsExtraSize
- CMFCToolBarButton [MFC], IsFirstInGroup
- CMFCToolBarButton [MFC], IsHidden
- CMFCToolBarButton [MFC], IsHorizontal
- CMFCToolBarButton [MFC], IsLastInGroup
- CMFCToolBarButton [MFC], IsLocked
- CMFCToolBarButton [MFC], IsOwnerOf
- CMFCToolBarButton [MFC], IsVisible
- CMFCToolBarButton [MFC], IsWindowVisible
- CMFCToolBarButton [MFC], NotifyCommand
- CMFCToolBarButton [MFC], OnAddToCustomizePage
- CMFCToolBarButton [MFC], OnBeforeDrag
- CMFCToolBarButton [MFC], OnBeforeDrop
- CMFCToolBarButton [MFC], OnCalculateSize
- CMFCToolBarButton [MFC], OnCancelMode
- CMFCToolBarButton [MFC], OnChangeParentWnd
- CMFCToolBarButton [MFC], OnClick
- CMFCToolBarButton [MFC], OnClickUp
- CMFCToolBarButton [MFC], OnContextHelp
- CMFCToolBarButton [MFC], OnCtlColor
- CMFCToolBarButton [MFC], OnCustomizeMenu
- CMFCToolBarButton [MFC], OnDblClk
- CMFCToolBarButton [MFC], OnDraw
- CMFCToolBarButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarButton [MFC], OnGetCustomToolTipText
- CMFCToolBarButton [MFC], OnGlobalFontsChanged
- CMFCToolBarButton [MFC], OnMove
- CMFCToolBarButton [MFC], OnShow
- CMFCToolBarButton [MFC], OnSize
- CMFCToolBarButton [MFC], OnToolHitTest
- CMFCToolBarButton [MFC], OnUpdateToolTip
- CMFCToolBarButton [MFC], PrepareDrag
- CMFCToolBarButton [MFC], Rect
- CMFCToolBarButton [MFC], ResetImageToDefault
- CMFCToolBarButton [MFC], SaveBarState
- CMFCToolBarButton [MFC], Serialize
- CMFCToolBarButton [MFC], SetACCData
- CMFCToolBarButton [MFC], SetClipboardFormatName
- CMFCToolBarButton [MFC], SetImage
- CMFCToolBarButton [MFC], SetProtectedCommands
- CMFCToolBarButton [MFC], SetRadio
- CMFCToolBarButton [MFC], SetRect
- CMFCToolBarButton [MFC], SetStyle
- CMFCToolBarButton [MFC], SetVisible
- CMFCToolBarButton [MFC], Show
- CMFCToolBarButton [MFC], m_bImage
- CMFCToolBarButton [MFC], m_bText
- CMFCToolBarButton [MFC], m_bTextBelow
- CMFCToolBarButton [MFC], m_bUserButton
- CMFCToolBarButton [MFC], m_bWholeText
- CMFCToolBarButton [MFC], m_bWrap
- CMFCToolBarButton [MFC], m_bWrapText
- CMFCToolBarButton [MFC], m_nID
- CMFCToolBarButton [MFC], m_nStyle
- CMFCToolBarButton [MFC], m_strText
ms.assetid: 8a6ecffb-86b0-4f5c-8211-a9146b463efd
ms.openlocfilehash: 513178edc1c4ac6ef920fbd14f6a0c6681328860
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97163929"
---
# <a name="cmfctoolbarbutton-class"></a>Класс CMFCToolBarButton

Предоставляет функциональные возможности кнопок для панелей инструментов.

## <a name="syntax"></a>Синтаксис

```
class CMFCToolBarButton : public CObject
```

## <a name="members"></a>Члены

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[CMFCToolBarButton:: CMFCToolBarButton](#cmfctoolbarbutton)|Создает и инициализирует объект `CMFCToolBarButton`.|
|`CMFCToolBarButton::~CMFCToolBarButton`|Деструктор.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[CMFCToolBarButton:: Канбедроппед](#canbedropped)|Указывает, может ли пользователь располагать кнопку на панели инструментов или в меню во время настройки.|
|[CMFCToolBarButton:: Канбесторед](#canbestored)|Указывает, можно ли сохранить кнопку.|
|[CMFCToolBarButton:: Канбестретчед](#canbestretched)|Указывает, может ли пользователь растянуть кнопку во время настройки.|
|[CMFCToolBarButton:: Компаревис](#comparewith)|Сравнивает данный экземпляр с предоставленным `CMFCToolBarButton` объектом.|
|[CMFCToolBarButton:: CopyFrom](#copyfrom)|Копирует свойства другой кнопки панели инструментов в текущую кнопку.|
|[CMFCToolBarButton:: Креатефромоледата](#createfromoledata)|Создает `CMFCToolBarButton` объект из предоставленного `COleDataObject` объекта.|
|`CMFCToolBarButton::CreateObject`|Используется платформой для создания динамического экземпляра этого типа класса.|
|[CMFCToolBarButton:: Енаблевиндов](#enablewindow)|Разрешает или запрещает ввод с помощью мыши и клавиатуры.|
|[CMFCToolBarButton:: Експорттоменубуттон](#exporttomenubutton)|Копирование текста из кнопки панели инструментов в меню.|
|[CMFCToolBarButton:: Жетклипбоардформат](#getclipboardformat)|Извлекает формат глобального буфера обмена для приложения.|
|[CMFCToolBarButton:: "HWND"](#gethwnd)|Получает маркер окна, связанный с кнопкой панели инструментов.|
|[CMFCToolBarButton:: с изображением](#getimage)|Возвращает индекс изображения кнопки.|
|[CMFCToolBarButton:: Жетинвалидатерект](#getinvalidaterect)|Извлекает область клиентской области кнопки, которую необходимо перерисовать.|
|[CMFCToolBarButton:: Жетпарентвнд](#getparentwnd)|Извлекает родительское окно кнопки.|
|[CMFCToolBarButton:: Жетпротектедкоммандс](#getprotectedcommands)|Возвращает список команд, которые пользователь не может настроить.|
|[CMFCToolBarButton:: Жеттекстсизе](#gettextsize)|Возвращает размер текста кнопки.|
|[CMFCToolBarButton:: Хасфокус](#hasfocus)|Определяет, имеет ли кнопка текущий фокус ввода.|
|[CMFCToolBarButton:: Хавехотбордер](#havehotborder)|Определяет, отображается ли граница кнопки, когда пользователь нажимает кнопку.|
|[CMFCToolBarButton:: Исдравимаже](#isdrawimage)|Определяет, отображается ли изображение на кнопке.|
|[CMFCToolBarButton:: Исдравтекст](#isdrawtext)|Определяет, отображается ли текстовая метка на кнопке.|
|[CMFCToolBarButton:: Исдроппеддовн](#isdroppeddown)|Определяет, отображает ли кнопка подменю.|
|[CMFCToolBarButton:: Edit](#iseditable)|Определяет, можно ли настроить кнопку.|
|[CMFCToolBarButton:: Исекстрасизе](#isextrasize)|Определяет, может ли кнопка отображаться с расширенной границей.|
|[CMFCToolBarButton:: Исфирстинграуп](#isfirstingroup)|Определяет, находится ли кнопка в первой положении в группе кнопок.|
|[CMFCToolBarButton:: Hidden](#ishidden)|Определяет, скрыта ли кнопка.|
|[CMFCToolBarButton:: по горизонтали](#ishorizontal)|Определяет, расположена ли кнопка на горизонтальной панели инструментов.|
|[CMFCToolBarButton:: Исластинграуп](#islastingroup)|Указывает, находится ли кнопка в последней положении в группе кнопок.|
|[CMFCToolBarButton:: NOLOCK](#islocked)|Определяет, находится ли кнопка на заблокированной (не настраиваемой) панели инструментов.|
|[CMFCToolBarButton:: Исовнероф](#isownerof)|Определяет, является ли кнопка владельцем предоставленного маркера окна.|
|[CMFCToolBarButton:: Visible](#isvisible)|Определяет, является ли кнопка панели инструментов видимой.|
|[CMFCToolBarButton:: Исвиндоввисибле](#iswindowvisible)|Определяет видимость базового маркера окна кнопки.|
|[CMFCToolBarButton:: Нотификомманд](#notifycommand)|Указывает, обрабатывает ли кнопка сообщение [WM_COMMAND](/windows/win32/menurc/wm-command) .|
|[CMFCToolBarButton:: Онаддтокустомизепаже](#onaddtocustomizepage)|Вызывается структурой при добавлении кнопки в диалоговое окно " **Настройка** ".|
|[CMFCToolBarButton:: Онбефоредраг](#onbeforedrag)|Указывает, можно ли перетащить кнопку.|
|[CMFCToolBarButton:: Онбефоредроп](#onbeforedrop)|Указывает, может ли пользователь перетащить кнопку на целевую панель инструментов.|
|[CMFCToolBarButton:: Онкалкулатесизе](#oncalculatesize)|Вызывается платформой для вычисления размера кнопки для указанного контекста устройства и состояния закрепления.|
|[CMFCToolBarButton:: Онканцелмоде](#oncancelmode)|Вызывается платформой для выполнения [WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode) сообщения.|
|[CMFCToolBarButton:: Ончанжепарентвнд](#onchangeparentwnd)|Вызывается структурой при вставке кнопки в новую панель инструментов.|
|[CMFCToolBarButton:: OnClick](#onclick)|Вызывается структурой при нажатии пользователем кнопки мыши.|
|[CMFCToolBarButton:: Онкликкуп](#onclickup)|Вызывается платформой, когда пользователь отпускает кнопку мыши.|
|[CMFCToolBarButton:: Онконтексселп](#oncontexthelp)|Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение WM_HELPHITTEST.|
|[CMFCToolBarButton:: Онктлколор](#onctlcolor)|Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение WM_CTLCOLOR.|
|[CMFCToolBarButton:: Онкустомиземену](#oncustomizemenu)|Позволяет кнопке изменить указанное меню, когда приложение отображает контекстное меню на родительской панели инструментов.|
|[CMFCToolBarButton:: Ондблклк](#ondblclk)|Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) .|
|[CMFCToolBarButton:: OnDraw](#ondraw)|Вызывается платформой для рисования кнопки с использованием указанных стилей и параметров.|
|[CMFCToolBarButton:: Ондравонкустомизелист](#ondrawoncustomizelist)|Вызывается платформой для нарисовании кнопки в области **команды** диалогового окна " **Настройка** ".|
|[CMFCToolBarButton:: Онжеткустомтултиптекст](#ongetcustomtooltiptext)|Вызвано структурой для получения пользовательского текста всплывающей подсказки для кнопки.|
|[CMFCToolBarButton:: Онглобалфонтсчанжед](#onglobalfontschanged)|Вызывается платформой при изменении глобального шрифта.|
|[CMFCToolBarButton:: OnMove](#onmove)|Вызывается структурой при перемещении родительской панели инструментов.|
|[CMFCToolBarButton:: onShow](#onshow)|Вызывается структурой, когда кнопка станет видимой или невидимой.|
|[CMFCToolBarButton:: OnSize](#onsize)|Вызвано структурой, когда родительская панель инструментов изменяет свой размер или расположение, и для этого изменения требуется изменить размер кнопки.|
|[CMFCToolBarButton:: Онтулхиттест](#ontoolhittest)|Вызывается структурой, когда родительская панель инструментов должна определить, находится ли точка в ограничивающем прямоугольнике кнопки.|
|[CMFCToolBarButton:: Онупдатетултип](#onupdatetooltip)|Вызывается структурой, когда родительская панель инструментов обновляет текст подсказки.|
|[CMFCToolBarButton::P Репаредраг](#preparedrag)|Вызывается структурой, когда кнопка собирается выполнить операцию перетаскивания.|
|[CMFCToolBarButton:: Rect](#rect)|Извлекает ограничивающий прямоугольник кнопки.|
|[CMFCToolBarButton:: Ресетимажетодефаулт](#resetimagetodefault)|Задает значение по умолчанию для изображения, связанного с кнопкой.|
|[CMFCToolBarButton:: Савебарстате](#savebarstate)|Сохраняет состояние кнопки панели инструментов.|
|[CMFCToolBarButton:: Serialize](#serialize)|Считывает этот объект из архива или записывает его в архив. (Переопределяет [CObject::Serialize](../../mfc/reference/cobject-class.md#serialize).)|
|[CMFCToolBarButton:: Сетаккдата](#setaccdata)|Заполняет предоставленный `CAccessibilityData` объект данными специальных возможностей из кнопки панели инструментов.|
|[CMFCToolBarButton:: Сетклипбоардформатнаме](#setclipboardformatname)|Переименовывает формат глобального буфера обмена.|
|[CMFCToolBarButton:: Сетимаже](#setimage)|Задает индекс изображения для кнопки.|
|[CMFCToolBarButton:: Сетпротектедкоммандс](#setprotectedcommands)|Задает список команд, которые пользователь не может настраивать.|
|[CMFCToolBarButton:: Сетрадио](#setradio)|Вызывается платформой, когда кнопка меняется на состояние "checked".|
|[CMFCToolBarButton:: SetRect](#setrect)|Задает ограничивающий прямоугольник кнопки.|
|[CMFCToolBarButton:: SetStyle](#setstyle)|Задает стиль кнопки.|
|[CMFCToolBarButton:: Сетвисибле](#setvisible)|Указывает, является ли кнопка видимой.|
|[CMFCToolBarButton:: показывать](#show)|Показывает или скрывает кнопку.|

### <a name="data-members"></a>Элементы данных

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarButton:: m_bImage](#m_bimage)|Указывает, отображается ли изображение на кнопке.|
|[CMFCToolBarButton:: m_bText](#m_btext)|Указывает, отображается ли текстовая метка на кнопке.|
|[CMFCToolBarButton:: m_bTextBelow](#m_btextbelow)|Указывает, отображается ли текстовая метка под изображением на кнопке.|
|[CMFCToolBarButton:: m_bUserButton](#m_buserbutton)|Указывает, имеет ли кнопка определенный пользователем образ.|
|[CMFCToolBarButton:: m_bWholeText](#m_bwholetext)|Указывает, отображается ли на кнопке полная текстовая метка, даже если она не умещается в ограничивающем прямоугольнике.|
|[CMFCToolBarButton:: m_bWrap](#m_bwrap)|Указывает, будет ли размещена кнопка рядом с разделителем в следующей строке.|
|[CMFCToolBarButton:: m_bWrapText](#m_bwraptext)|Указывает, включены ли многострочные текстовые метки.|
|[CMFCToolBarButton:: m_nID](#m_nid)|Идентификатор команды для кнопки.|
|[CMFCToolBarButton:: m_nStyle](#m_nstyle)|Стиль кнопки.|
|[CMFCToolBarButton:: m_strText](#m_strtext)|Текстовая метка кнопки.|

## <a name="remarks"></a>Комментарии

`CMFCToolbarButton`Объект — это элемент управления, находящийся на панели инструментов. Его поведение аналогично поведению обычной кнопки. Этому объекту можно назначить изображение и текстовую метку. Кнопка панели инструментов также может иметь идентификатор команды. Когда пользователь нажимает кнопку на панели инструментов, платформа выполняет команду, указанную этим ИДЕНТИФИКАТОРом.

Обычно кнопки панели инструментов могут быть настроены: пользователь может перетаскивать кнопки с одной панели инструментов на другую, а также копировать, вставлять, удалять и редактировать текстовые метки и изображения. Чтобы запретить пользователю настраивать панель инструментов, можно заблокировать панель инструментов одним из двух способов. Либо установите `bLocked` для флага значение true при вызове [CMFCToolBar:: лоадтулбар](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar), либо добавьте идентификатор команды отдельной кнопки в глобальный список защищенных команд с помощью метода [CMFCToolBarButton:: сетпротектедкоммандс](#setprotectedcommands) .

`CMFCToolBarButton` объекты отображают изображения из глобальных коллекций изображений панелей инструментов в приложении. Эти коллекции поддерживаются родительской панелью инструментов [CMFCToolBar Class](../../mfc/reference/cmfctoolbar-class.md). Дополнительные сведения см. в разделе [класс кмфктулбаримажес](../../mfc/reference/cmfctoolbarimages-class.md).

Когда пользователь нажимает кнопку на панели инструментов, его родительская панель инструментов обрабатывает сообщение мыши и передает соответствующие действия кнопке. Если кнопка имеет допустимый идентификатор команды, родительская панель инструментов отправляет WM_COMMAND сообщение родительскому фрейму.

`CMFCToolBarButton`Класс является базовым классом для других классов кнопок панели инструментов, таких как [класс Кмфктулбарменубуттон](../../mfc/reference/cmfctoolbarmenubutton-class.md), [класс кмфктулбаредитбоксбуттон](../../mfc/reference/cmfctoolbareditboxbutton-class.md)и [класс кмфктулбаркомбобоксбуттон](../../mfc/reference/cmfctoolbarcomboboxbutton-class.md).

## <a name="example"></a>Пример

В следующем примере показано, как настроить `CMFCToolBarButton` объект с помощью различных методов в `CMFCToolBarButton` классе. В примере показано, как включить ввод с помощью мыши и клавиатуры, задать индекс изображения кнопки, установить ограничивающий прямоугольник кнопки и сделать эту кнопку видимой. Этот фрагмент кода является частью [примера элемента управления "Вкладка"](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_TabControl#1](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_1.cpp)]
[!code-cpp[NVC_MFC_TabControl#2](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_2.cpp)]

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

## <a name="requirements"></a>Требования

**Заголовок:** афкстулбарбуттон. h

## <a name="cmfctoolbarbuttoncanbedropped"></a><a name="canbedropped"></a> CMFCToolBarButton:: Канбедроппед

Указывает, может ли пользователь располагать кнопку на панели инструментов или в меню во время настройки.

```
virtual BOOL CanBeDropped(CMFCToolBar* pToolbar);
```

### <a name="parameters"></a>Параметры

*птулбар*<br/>
[in] Не используется.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение TRUE.

### <a name="remarks"></a>Комментарии

По умолчанию кнопка панели инструментов может быть удалена на каждой настраиваемой панели инструментов (т. е. не заблокирована).

Реализация по умолчанию этого метода возвращает значение TRUE. Переопределите этот метод и возвратите значение FALSE, если вы хотите запретить пользователю изменять расположение кнопки.

## <a name="cmfctoolbarbuttoncanbestored"></a><a name="canbestored"></a> CMFCToolBarButton:: Канбесторед

Определяет, можно ли сохранить кнопку.

```
virtual BOOL CanBeStored() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение TRUE.

### <a name="remarks"></a>Комментарии

Платформа использует этот метод, чтобы определить, может ли кнопка участвовать в операциях перетаскивания.

Реализация по умолчанию возвращает значение TRUE. Переопределите этот метод, если кнопка не может быть сохранена в рамках операции перетаскивания. Дополнительные сведения об операциях перетаскивания см. в разделе [перетаскивание OLE](../../mfc/drag-and-drop-ole.md).

## <a name="cmfctoolbarbuttoncanbestretched"></a><a name="canbestretched"></a> CMFCToolBarButton:: Канбестретчед

Указывает, может ли пользователь растянуть кнопку во время настройки.

```
virtual BOOL CanBeStretched() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Этот метод используется платформой для определения возможности растяжения кнопки в режиме настройки.

Реализация по умолчанию этого метода возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал значение TRUE для элемента управления переменной ширины, такого как поле со списком или ползунок.

Дополнительные сведения о режиме настройки см. в разделе [CMFCToolBar:: сеткустомиземоде](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode).

## <a name="cmfctoolbarbuttoncmfctoolbarbutton"></a><a name="cmfctoolbarbutton"></a> CMFCToolBarButton:: CMFCToolBarButton

Создает и инициализирует объект `CMFCToolBarButton`.

```
CMFCToolBarButton(
    UINT uiID,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE,
    BOOL bLocked=FALSE);
```

### <a name="parameters"></a>Параметры

*uiID*<br/>
окне Идентификатор команды для кнопки.

*иимаже*<br/>
окне Индекс изображения кнопки в коллекции изображений.

*lpszText*<br/>
окне Текстовая метка кнопки. Может иметь значение NULL.

*бусербуттон*<br/>
окне Логическое значение, определяющее, определена ли кнопка пользователем. Если этот параметр имеет значение TRUE, то кнопка определена пользователем. В противном случае изображение кнопки загружается из ресурса.

*Блокирует*<br/>
окне Логическое значение, определяющее, можно ли настроить кнопку. Если этот параметр имеет значение TRUE, кнопка не может быть настроена. В противном случае можно настроить кнопку.

## <a name="cmfctoolbarbuttoncomparewith"></a><a name="comparewith"></a> CMFCToolBarButton:: Компаревис

Сравнивает данный экземпляр с предоставленным `CMFCToolBarButton` объектом.

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Параметры

*иной*<br/>
окне Ссылка на объект для сравнения с этим экземпляром.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если предоставленный объект равен значению данного экземпляра; в противном случае — значение 0.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию определяет, равен ли идентификатор команды предоставленного объекта ИДЕНТИФИКАТОРу команды данного экземпляра. Переопределите этот метод, если необходимо выполнить дополнительную обработку, чтобы определить `CMFCToolBarButton` , равны ли два объекта.

## <a name="cmfctoolbarbuttoncopyfrom"></a><a name="copyfrom"></a> CMFCToolBarButton:: CopyFrom

Копирует свойства другой кнопки панели инструментов в текущую кнопку.

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Параметры

*src*<br/>
окне Ссылка на кнопку источника, из которой производится копирование.

### <a name="remarks"></a>Комментарии

Вызовите этот метод, чтобы скопировать другую кнопку панели инструментов на эту кнопку панели инструментов.

## <a name="cmfctoolbarbuttoncreatefromoledata"></a><a name="createfromoledata"></a> CMFCToolBarButton:: Креатефромоледата

Создает `CMFCToolBarButton` объект из предоставленного `COleDataObject` объекта.

```
static CMFCToolBarButton* __stdcall CreateFromOleData(COleDataObject* pDataObject);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
окне Исходный объект данных OLE.

### <a name="return-value"></a>Возвращаемое значение

Созданный объект `CMFCToolBarButton`.

### <a name="remarks"></a>Комментарии

Этот метод используется платформой для выполнения передаваемых данных в различных форматах. Например, `CMFCOutlookBarPane::OnDragOver` метод использует этот метод для выполнения операций перетаскивания.

## <a name="cmfctoolbarbuttonenablewindow"></a><a name="enablewindow"></a> CMFCToolBarButton:: Енаблевиндов

Разрешает или запрещает ввод с помощью мыши и клавиатуры.

```
virtual void EnableWindow(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>Параметры

*bEnable*<br/>
окне Задайте для этого параметра значение TRUE, чтобы включить входные данные, или значение FALSE, чтобы отключить входные данные.

### <a name="remarks"></a>Комментарии

Этот метод вызывает `EnableWindow` функцию, чтобы включить или отключить входные данные. Дополнительные сведения см. в разделе [енаблевиндов](/windows/win32/api/winuser/nf-winuser-enablewindow) в Windows SDK.

## <a name="cmfctoolbarbuttonexporttomenubutton"></a><a name="exporttomenubutton"></a> CMFCToolBarButton:: Експорттоменубуттон

Копирование текста из кнопки панели инструментов в меню.

```
virtual BOOL ExportToMenuButton(CMFCToolBarMenuButton& menuButton) const;
```

### <a name="parameters"></a>Параметры

*менубуттон*<br/>
окне Ссылка на кнопку целевого меню.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение TRUE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы скопировать текст из кнопки панели инструментов в кнопку меню. Реализация по умолчанию копирует текстовую метку кнопки. Если текстовая метка пуста, этот метод копирует текст подсказки для кнопки.

Реализация по умолчанию этого метода возвращает значение TRUE. Переопределите этот метод, если требуется выполнить дополнительные действия, когда платформа преобразует объект, производный от [CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) , к кнопке меню.

## <a name="cmfctoolbarbuttongetclipboardformat"></a><a name="getclipboardformat"></a> CMFCToolBarButton:: Жетклипбоардформат

Извлекает формат глобального буфера обмена для приложения.

```
static CLIPFORMAT __stdcall GetClipboardFormat();
```

### <a name="return-value"></a>Возвращаемое значение

Глобальное значение КЛИПФОРМАТ для приложения.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод для получения формата буфера обмена для операций обмена данными OLE. Например, метод [CMFCToolBarButton:: креатефромоледата](#createfromoledata) использует этот метод для копирования данных из исходного объекта данных OLE.

Этот метод задает глобальное значение КЛИПФОРМАТ при первом вызове этого метода. Все последующие вызовы этого метода возвращают это значение.

Чтобы разрешить выполнение операций перетаскивания между приложениями, вызовите метод [CMFCToolBarButton:: сетклипбоардформатнаме](#setclipboardformatname) .

Дополнительные сведения о буферах обмена в MFC см. в разделе [буфер обмена](../../mfc/clipboard.md).

## <a name="cmfctoolbarbuttongethwnd"></a><a name="gethwnd"></a> CMFCToolBarButton:: "HWND"

Получает маркер окна, связанный с кнопкой панели инструментов.

```
virtual HWND GetHwnd();
```

### <a name="return-value"></a>Возвращаемое значение

Маркер окна, связанный с кнопкой панели инструментов, или значение NULL, если кнопка панели инструментов не имеет соответствующего маркера окна.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода возвращает значение NULL. Переопределите этот метод, чтобы вернуть маркер окна конкретного элемента управления.

## <a name="cmfctoolbarbuttongetimage"></a><a name="getimage"></a> CMFCToolBarButton:: с изображением

Возвращает индекс изображения кнопки.

```
int GetImage() const;
```

### <a name="return-value"></a>Возвращаемое значение

Индекс изображения, связанного с этой кнопкой.

### <a name="remarks"></a>Комментарии

Если у кнопки есть определяемый пользователем образ (то есть если *бусербуттон* имеет значение true в конструкторе), то возвращаемый индекс указывает изображение в коллекции определяемых пользователем изображений (см. [CMFCToolBar:: жетусеримажес](../../mfc/reference/cmfctoolbar-class.md#getuserimages)). В противном случае индекс указывает изображение в коллекции изображений, которые загружаются из файла ресурсов (см. раздел [CMFCToolBar::-Images](../../mfc/reference/cmfctoolbar-class.md#getimages)). Дополнительные сведения о файлах ресурсов см. [в разделе Работа с файлами ресурсов](../../windows/working-with-resource-files.md).

## <a name="cmfctoolbarbuttongetinvalidaterect"></a><a name="getinvalidaterect"></a> CMFCToolBarButton:: Жетинвалидатерект

Извлекает область клиентской области кнопки, которую необходимо перерисовать.

```
virtual const CRect GetInvalidateRect() const;
```

### <a name="return-value"></a>Возвращаемое значение

`CRect`Объект, указывающий регион, который необходимо перерисовать.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода возвращает всю клиентскую область. Переопределите этот метод, если нужно перерисовать другую область.

## <a name="cmfctoolbarbuttongetparentwnd"></a><a name="getparentwnd"></a> CMFCToolBarButton:: Жетпарентвнд

Извлекает родительское окно кнопки.

```
CWnd* GetParentWnd() const;
```

### <a name="return-value"></a>Возвращаемое значение

Родительское окно кнопки.

## <a name="cmfctoolbarbuttongetprotectedcommands"></a><a name="getprotectedcommands"></a> CMFCToolBarButton:: Жетпротектедкоммандс

Возвращает список команд, которые пользователь не может настроить.

```
static const CList<UINT,UINT>& GetProtectedCommands();
```

### <a name="return-value"></a>Возвращаемое значение

Список защищенных команд.

### <a name="remarks"></a>Комментарии

В режиме настройки инфраструктура отключает защищенные команды кнопки панели инструментов. Пользователь не может выполнять операции перетаскивания и изменения на отключенных кнопках на панели инструментов.

Чтобы определить список защищенных команд, используйте метод [CMFCToolBarButton:: сетпротектедкоммандс](#setprotectedcommands) .

## <a name="cmfctoolbarbuttongettextsize"></a><a name="gettextsize"></a> CMFCToolBarButton:: Жеттекстсизе

Возвращает размер текста кнопки.

```
SIZE GetTextSize() const;
```

### <a name="return-value"></a>Возвращаемое значение

Объект размера, который содержит размер (в пикселях) текста кнопки.

## <a name="cmfctoolbarbuttonhasfocus"></a><a name="hasfocus"></a> CMFCToolBarButton:: Хасфокус

Определяет, имеет ли кнопка текущий фокус ввода.

```
virtual BOOL HasFocus() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка имеет фокус ввода; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода возвращает ненулевое значение, если кнопка имеет фокус ввода или является дочерним окном окна, имеющим фокус ввода. Эту функцию можно переопределить, чтобы настроить это поведение.

## <a name="cmfctoolbarbuttonhavehotborder"></a><a name="havehotborder"></a> CMFCToolBarButton:: Хавехотбордер

Определяет, отображается ли граница кнопки, когда пользователь нажимает кнопку.

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение TRUE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы определить, должна ли кнопка панели инструментов отображать ее границу при выборе пользователем.

Реализация по умолчанию возвращает значение TRUE. Этот метод можно переопределить для настройки этого поведения.

## <a name="cmfctoolbarbuttonisdrawimage"></a><a name="isdrawimage"></a> CMFCToolBarButton:: Исдравимаже

Определяет, отображается ли изображение на кнопке.

```
BOOL IsDrawImage() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если изображение отображается на кнопке; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Этот метод возвращает значение FALSE, если у кнопки панели инструментов нет связанного изображения ( [CMFCToolBarButton::](#getimage) CMFCToolBarButton возвращает-1) или если [:: M_BIMAGE](#m_bimage) имеет значение false.

## <a name="cmfctoolbarbuttonisdrawtext"></a><a name="isdrawtext"></a> CMFCToolBarButton:: Исдравтекст

Определяет, отображается ли текстовая метка на кнопке.

```
BOOL IsDrawText() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если отображается текстовая метка. в противном случае — 0.

### <a name="remarks"></a>Комментарии

Этот метод возвращает значение FALSE, если у кнопки панели инструментов нет связанной текстовой метки ( [CMFCToolBarButton:: m_strText](#m_strtext) пуста) или [CMFCToolBarButton:: M_BTEXT](#m_btext) имеет значение false.

## <a name="cmfctoolbarbuttonisdroppeddown"></a><a name="isdroppeddown"></a> CMFCToolBarButton:: Исдроппеддовн

Определяет, отображает ли кнопка подменю.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал значение TRUE, если элемент управления отображает подменю.

## <a name="cmfctoolbarbuttoniseditable"></a><a name="iseditable"></a> CMFCToolBarButton:: Edit

Определяет, можно ли настроить кнопку.

```
virtual BOOL IsEditable() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если пользовательская кнопка может быть настроена пользователем; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы определить, может ли пользователь настраивать кнопку на панели инструментов с помощью операций перетаскивания или изменения.

Реализация по умолчанию возвращает значение FALSE, если идентификатор команды кнопки является стандартной командой (это можно определить путем вызова `IsStandardCommand` функции) или если идентификатор команды находится в списке защищенных команд. Дополнительные сведения о защищенных командах см. в разделе [CMFCToolBarButton:: жетпротектедкоммандс](#getprotectedcommands) and [CMFCToolBarButton:: сетпротектедкоммандс](#setprotectedcommands).

Переопределите этот метод, чтобы настроить его поведение.

## <a name="cmfctoolbarbuttonisextrasize"></a><a name="isextrasize"></a> CMFCToolBarButton:: Исекстрасизе

Определяет, может ли кнопка отображаться с расширенной границей.

```
virtual BOOL IsExtraSize() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка панели инструментов может отображаться с расширенной границей; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Несколько обложек используют дополнительный размер для границ кнопок панели инструментов (например, круглых кнопок).

Если пользователь перемещает эту кнопку с одной панели инструментов на другую, платформа вызывает метод [CMFCToolBarButton:: ончанжепарентвнд](#onchangeparentwnd) . Метод [CMFCToolBarButton:: ончанжепарентвнд](#onchangeparentwnd) задает флаг дополнительного размера для новой родительской панели инструментов (Дополнительные сведения см. в разделе [CMFCToolBar:: исбуттонекстрасизеаваилабле](../../mfc/reference/cmfctoolbar-class.md#isbuttonextrasizeavailable)).

## <a name="cmfctoolbarbuttonisfirstingroup"></a><a name="isfirstingroup"></a> CMFCToolBarButton:: Исфирстинграуп

Определяет, находится ли кнопка в первой положении в группе кнопок.

```
virtual BOOL IsFirstInGroup() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка является первой кнопкой в группе кнопок; в противном случае — FALSE.

### <a name="remarks"></a>Комментарии

Этот метод определяет *группу кнопок* как соседний набор кнопок, расположенных в одной строке и ограниченных разделителями или границей панели инструментов. Этот метод возвращает значение FALSE, если кнопка панели инструментов ссылается на кнопку **Настройка** . Дополнительные сведения о кнопке " **Настройка** " см. в разделе [CMFCToolBar:: жеткустомизебуттон](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton).

Вызовите метод [CMFCToolBarButton:: исластинграуп](#islastingroup) , чтобы определить, находится ли кнопка в последней положении в группе кнопок.

## <a name="cmfctoolbarbuttonishidden"></a><a name="ishidden"></a> CMFCToolBarButton:: Hidden

Определяет, скрыта ли кнопка.

```
BOOL IsHidden() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка скрыта (невидима); в противном случае — 0.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, когда родительская панель инструментов растягивается, чтобы определить, является ли кнопка панели инструментов видимой.

Если вы установили для кнопки невидимый с помощью метода [CMFCToolBarButton:: сетвисибле](#setvisible) , используйте [CMFCToolBarButton::-Visible](#isvisible) , чтобы определить, является ли кнопка панели инструментов видимой.

По умолчанию все кнопки панели инструментов видимы. Используйте метод [CMFCToolBarButton:: Показать](#show) , чтобы скрыть или Показать кнопки на панели инструментов.

## <a name="cmfctoolbarbuttonishorizontal"></a><a name="ishorizontal"></a> CMFCToolBarButton:: по горизонтали

Определяет, расположена ли кнопка на горизонтальной панели инструментов.

```
BOOL IsHorizontal() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка панели инструментов расположена на горизонтальной панели инструментов; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод для определения макета кнопок панели инструментов.

Этот метод возвращает `m_bHorz` элемент данных. Значение по умолчанию для `m_bHorz` элемента данных равно true; оно сбрасывается при каждом вызове метода [CMFCToolBarButton:: OnDraw](#ondraw) .

## <a name="cmfctoolbarbuttonislastingroup"></a><a name="islastingroup"></a> CMFCToolBarButton:: Исластинграуп

Указывает, находится ли кнопка в последней положении в группе кнопок.

```
virtual BOOL IsLastInGroup() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка является последней кнопкой в группе кнопок; в противном случае — FALSE.

### <a name="remarks"></a>Комментарии

Этот метод определяет *группу кнопок* в качестве соседнего набора кнопок, которые расположены в одной строке и ограничены разделителями или границей панели инструментов. Этот метод возвращает значение false, если кнопка панели инструментов не имеет родительской панели инструментов или кнопка панели инструментов ссылается на кнопку **Настройка** . Дополнительные сведения о кнопке " **Настройка** " см. в разделе [CMFCToolBar:: жеткустомизебуттон](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton).

Вызовите метод [CMFCToolBarButton:: исфирстинграуп](#isfirstingroup) , чтобы определить, находится ли кнопка в первой положении в группе кнопок.

## <a name="cmfctoolbarbuttonislocked"></a><a name="islocked"></a> CMFCToolBarButton:: NOLOCK

Определяет, находится ли кнопка на заблокированной (не настраиваемой) панели инструментов.

```
BOOL IsLocked() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка находится на заблокированной панели инструментов; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы определить, может ли пользователь настраивать кнопку на панели инструментов с помощью операций перетаскивания или изменения. Установите атрибут locked на родительской панели инструментов с помощью метода [CMFCToolBar:: лоадтулбар](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar) . Платформа передает значение этого атрибута конструктору каждой кнопки панели инструментов ( [CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)), которая вставляется в родительскую панель инструментов.

## <a name="cmfctoolbarbuttonisownerof"></a><a name="isownerof"></a> CMFCToolBarButton:: Исовнероф

Определяет, является ли кнопка владельцем предоставленного маркера окна.

```
virtual BOOL IsOwnerOf(HWND hwnd);
```

### <a name="parameters"></a>Параметры

*HWND*<br/>
окне Обработчик окна.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка является владельцем предоставленного маркера окна; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Этот метод возвращает ненулевое значение, если *HWND* либо ссылается на прямой дескриптор окна, либо является дочерним по отношению к дескриптору окна, связанному с кнопкой. Этот метод возвращает 0, если *HWND* имеет значение null.

## <a name="cmfctoolbarbuttonisvisible"></a><a name="isvisible"></a> CMFCToolBarButton:: Visible

Определяет, является ли кнопка панели инструментов видимой.

```
BOOL IsVisible() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если кнопка панели инструментов является видимой; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Можно показать или скрыть кнопку панели инструментов с помощью метода [CMFCToolBarButton:: сетвисибле](#setvisible) . Вызовите метод [CPane:: аджустсизеиммедиате](../../mfc/reference/cpane-class.md#adjustsizeimmediate) на родительской панели инструментов после вызова [CMFCToolBarButton:: сетвисибле](#setvisible) для повторного вычисления макета родительской панели инструментов.

## <a name="cmfctoolbarbuttoniswindowvisible"></a><a name="iswindowvisible"></a> CMFCToolBarButton:: Исвиндоввисибле

Определяет видимость базового маркера окна кнопки.

```
virtual BOOL IsWindowVisible();
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если базовый маркер окна кнопки является видимым; в противном случае — 0.

### <a name="remarks"></a>Комментарии

Этот метод возвращает ненулевое значение, если атрибут Styles базового маркера окна содержит стиль WS_VISIBLE. Этот метод возвращает значение FALSE, если базовый маркер окна кнопки имеет значение NULL.

## <a name="cmfctoolbarbuttonm_bimage"></a><a name="m_bimage"></a> CMFCToolBarButton:: m_bImage

Указывает, отображается ли изображение на кнопке.

```
BOOL m_bImage;
```

### <a name="remarks"></a>Комментарии

Если для этого элемента данных задано значение TRUE, платформа отображает изображение, связанное с кнопкой панели инструментов. в противном случае платформа не отображает образ. Этот элемент влияет на возвращаемое значение метода [CMFCToolBarButton:: m_bImage](#m_bimage) .

## <a name="cmfctoolbarbuttonm_btext"></a><a name="m_btext"></a> CMFCToolBarButton:: m_bText

Указывает, отображается ли текстовая метка на кнопке.

```
BOOL m_bText;
```

### <a name="remarks"></a>Комментарии

Если для этого элемента данных задано значение TRUE, платформа отображает текстовую метку кнопки панели инструментов. в противном случае в платформе не отображается текстовая метка. Этот элемент влияет на возвращаемое значение метода [CMFCToolBarButton:: m_bText](#m_btext) .

## <a name="cmfctoolbarbuttonm_btextbelow"></a><a name="m_btextbelow"></a> CMFCToolBarButton:: m_bTextBelow

Указывает, отображается ли текстовая метка под изображением на кнопке.

```
BOOL m_bTextBelow;
```

### <a name="remarks"></a>Комментарии

Если для этой переменной-члена задано значение TRUE, платформа отображает текст кнопки под изображением. По умолчанию этот член имеет значение FALSE.

## <a name="cmfctoolbarbuttonm_buserbutton"></a><a name="m_buserbutton"></a> CMFCToolBarButton:: m_bUserButton

Указывает, имеет ли кнопка определенный пользователем образ

```
BOOL m_bUserButton;
```

### <a name="remarks"></a>Комментарии

Этот элемент данных имеет значение TRUE, если с кнопкой связано определенное пользователем изображение.

## <a name="cmfctoolbarbuttonm_bwholetext"></a><a name="m_bwholetext"></a> CMFCToolBarButton:: m_bWholeText

Указывает, отображается ли на кнопке полная текстовая метка, даже если она не умещается в ограничивающем прямоугольнике.

```
BOOL m_bWholeText;
```

### <a name="remarks"></a>Комментарии

Если для этого элемента данных задано значение TRUE, платформа отображает полную текстовую метку путем увеличения кнопки. В противном случае платформа усекает и добавляет многоточие ( **...**) к текстовой метке.

## <a name="cmfctoolbarbuttonm_bwrap"></a><a name="m_bwrap"></a> CMFCToolBarButton:: m_bWrap

Указывает, будет ли размещена кнопка рядом с разделителем в следующей строке.

```
BOOL m_bWrap;
```

### <a name="remarks"></a>Комментарии

Платформа задает для этого элемента данных значение TRUE, если кнопка панели инструментов не помещается на текущей строке или если задан макет (например, определенное количество кнопок панели инструментов для каждой строки).

Платформа помещает эту кнопку в следующую строку, если этот элемент данных имеет значение TRUE, а панель инструментов закреплена горизонтально или плавающая.

По умолчанию этот элемент данных имеет значение FALSE.

## <a name="cmfctoolbarbuttonm_bwraptext"></a><a name="m_bwraptext"></a> CMFCToolBarButton:: m_bWrapText

Указывает, включены ли многострочные текстовые метки.

```
AFX_IMPORT_DATA static BOOL m_bWrapText;
```

### <a name="remarks"></a>Комментарии

Если эта статическая переменная-член имеет значение TRUE, платформа позволяет всем панелям инструментов отображать многострочные текстовые метки на кнопках панели инструментов.

По умолчанию этот элемент данных имеет значение FALSE.

## <a name="cmfctoolbarbuttonm_nid"></a><a name="m_nid"></a> CMFCToolBarButton:: m_nID

Идентификатор команды для кнопки.

```
UINT m_nID;
```

### <a name="remarks"></a>Комментарии

Идентификатор команды-1 указывает на то, что кнопка является разделителем. Все разделители кнопок имеют стиль TBBS_SEPARATOR. Дополнительные сведения о стилях кнопок см. в разделе [CMFCToolBarButton:: m_nStyle](#m_nstyle) .

## <a name="cmfctoolbarbuttonm_nstyle"></a><a name="m_nstyle"></a> CMFCToolBarButton:: m_nStyle

Стиль кнопки.

```
UINT m_nStyle;
```

### <a name="remarks"></a>Комментарии

Список доступных стилей кнопок панели инструментов см. в разделе [стили элементов управления панели инструментов](../../mfc/reference/toolbar-control-styles.md) .

## <a name="cmfctoolbarbuttonm_strtext"></a><a name="m_strtext"></a> CMFCToolBarButton:: m_strText

Текстовая метка кнопки.

```
CString m_strText;
```

### <a name="remarks"></a>Комментарии

Этот элемент данных содержит текстовую метку кнопки. Текстовая метка может быть пустой.

## <a name="cmfctoolbarbuttonnotifycommand"></a><a name="notifycommand"></a> CMFCToolBarButton:: Нотификомманд

Указывает, обрабатывает ли кнопка сообщение [WM_COMMAND](/windows/win32/menurc/wm-command) .

```
virtual BOOL NotifyCommand(int iNotifyCode);
```

### <a name="parameters"></a>Параметры

*инотификоде*<br/>
окне Сообщение уведомления, связанное с командой.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, когда отправляет сообщение [WM_COMMAND](/windows/win32/menurc/wm-command) в родительское окно.

По умолчанию этот метод возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал значение TRUE, если требуется обработать сообщение WM_COMMAND или значение FALSE, чтобы указать, что родительская панель инструментов должна обработать сообщение.

## <a name="cmfctoolbarbuttononaddtocustomizepage"></a><a name="onaddtocustomizepage"></a> CMFCToolBarButton:: Онаддтокустомизепаже

Вызывается структурой при добавлении кнопки в диалоговое окно " **Настройка** ".

```
virtual void OnAddToCustomizePage();
```

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, если требуется выполнить какое-либо действие при добавлении кнопки в диалоговое окно **Настройка** .

## <a name="cmfctoolbarbuttononbeforedrag"></a><a name="onbeforedrag"></a> CMFCToolBarButton:: Онбефоредраг

Указывает, можно ли перетащить кнопку.

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка может быть перемещена; в противном случае — FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод перед тем, как пользователь начнет перетаскивание кнопки.

Реализация по умолчанию этого метода возвращает значение TRUE. Переопределите этот метод, чтобы он возвращал значение FALSE, чтобы отключить перетаскивание кнопки.

## <a name="cmfctoolbarbuttononbeforedrop"></a><a name="onbeforedrop"></a> CMFCToolBarButton:: Онбефоредроп

Указывает, может ли пользователь перетащить кнопку на целевую панель инструментов.

```
virtual BOOL OnBeforeDrop(CMFCToolBar* pTarget);
```

### <a name="parameters"></a>Параметры

*птаржет*<br/>
окне Целевой объект операции перетаскивания.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка может быть перенесена на указанную целевую панель инструментов; в противном случае — FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод до того, как кнопка будет удалена на панель инструментов.

Реализация по умолчанию этого метода возвращает значение TRUE. Переопределите этот метод, чтобы он возвращал значение FALSE, чтобы отключить операцию Drop для указанного целевого объекта.

## <a name="cmfctoolbarbuttononcalculatesize"></a><a name="oncalculatesize"></a> CMFCToolBarButton:: Онкалкулатесизе

Вызывается платформой для вычисления размера кнопки для указанного контекста устройства и состояния закрепления.

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Параметры

*Хозяин*<br/>
окне Контекст устройства, на котором отображается кнопка.

*сизедефаулт*<br/>
окне Размер по умолчанию для кнопки.

*бхорз*<br/>
окне Состояние закрепления родительской панели инструментов. Этот параметр имеет значение TRUE, если панель инструментов закреплена горизонтально или с плавающей запятой, или FALSE, если панель инструментов закреплена по вертикали.

### <a name="return-value"></a>Возвращаемое значение

`SIZE`Структура, содержащая размеры кнопки в пикселях.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы определить размер кнопки на панели инструментов для указанного контекста устройства и состояния DOCKER.

Реализация по умолчанию рассматривает размеры текста и изображения (если они отображаются), позиции текста и изображения (текст ниже или в правой части изображения) и состояние закрепления панели инструментов.

Переопределите этот метод, если требуется предоставить размер нестандартной кнопки (например, кнопку поля ввода).

## <a name="cmfctoolbarbuttononcancelmode"></a><a name="oncancelmode"></a> CMFCToolBarButton:: Онканцелмоде

Вызывается платформой для выполнения [WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode) сообщения.

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, если требуется обработку сообщения [WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode) .

## <a name="cmfctoolbarbuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a> CMFCToolBarButton:: Ончанжепарентвнд

Вызывается структурой при вставке кнопки в новую панель инструментов.

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Параметры

*пвндпарент*<br/>
окне Новое родительское окно.

### <a name="remarks"></a>Комментарии

Кнопка вставляется в панель инструментов, например, когда пользователь перетаскивает ее с одной панели инструментов на другую.

Реализация по умолчанию этого метода не выполняет никаких действий.

## <a name="cmfctoolbarbuttononclick"></a><a name="onclick"></a> CMFCToolBarButton:: OnClick

Вызывается структурой при нажатии пользователем кнопки мыши.

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay=TRUE);
```

### <a name="parameters"></a>Параметры

*Приводится*<br/>
окне Родительское окно кнопки панели инструментов.

*бделай*<br/>
окне Значение TRUE, если сообщение должно обрабатываться с задержкой.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, когда пользователь нажимает кнопку на панели инструментов.

Реализация по умолчанию не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал ненулевое значение, если кнопка обрабатывает сообщение щелчка.

## <a name="cmfctoolbarbuttononclickup"></a><a name="onclickup"></a> CMFCToolBarButton:: Онкликкуп

Вызывается платформой, когда пользователь отпускает кнопку мыши.

```
virtual BOOL OnClickUp();
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, когда пользователь отпускает кнопку панели инструментов.

Реализация по умолчанию не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал ненулевое значение, если кнопка обрабатывает сообщение щелчка.

## <a name="cmfctoolbarbuttononcontexthelp"></a><a name="oncontexthelp"></a> CMFCToolBarButton:: Онконтексселп

Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение WM_HELPHITTEST.

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

*Приводится*<br/>
окне Родительское окно кнопки панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод, чтобы он возвращал ненулевое значение, если кнопка обрабатывает сообщение справки.

Дополнительные сведения о WM_HELPHITTEST сообщении см. в разделе [TN028: Context-Sensitive Help support](../../mfc/tn028-context-sensitive-help-support.md).

## <a name="cmfctoolbarbuttononctlcolor"></a><a name="onctlcolor"></a> CMFCToolBarButton:: Онктлколор

Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение WM_CTLCOLOR.

```
virtual HBRUSH OnCtlColor(
    CDC* pDC,
    UINT nCtlColor);
```

### <a name="parameters"></a>Параметры

*Хозяин*<br/>
окне Контекст устройства, на котором отображается кнопка.

*нктлколор*<br/>
окне Конкретное цветное уведомление.

### <a name="return-value"></a>Возвращаемое значение

Дескриптор объекта Brush, используемый платформой для рисования фона кнопки.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, когда родительская панель инструментов обрабатывает сообщение WM_CTLCOLOR для кнопки панели инструментов, содержащей элемент управления Windows. Платформа не вызывает этот метод, если кнопка панели инструментов не является окном.

Платформа вызывает этот метод, когда платформа панели инструментов находится в режиме настройки, а кнопка панели инструментов разблокирована. Дополнительные сведения о режиме настройки см. в разделе [CMFCToolBar:: сеткустомиземоде](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode). Дополнительные сведения о блокировке кнопок панели инструментов см. в разделе [CMFCToolBarButton:: NOLOCK](#islocked).

Реализация по умолчанию не выполняет никаких действий и возвращает значение NULL.

## <a name="cmfctoolbarbuttononcustomizemenu"></a><a name="oncustomizemenu"></a> CMFCToolBarButton:: Онкустомиземену

Позволяет кнопке изменить указанное меню, когда приложение отображает контекстное меню на родительской панели инструментов.

```
virtual BOOL OnCustomizeMenu(CMenu* pMenu);
```

### <a name="parameters"></a>Параметры

*пмену*<br/>
окне Меню для настройки.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод и возвращайте ненулевое значение, если нужно изменить содержимое указанного меню.

## <a name="cmfctoolbarbuttonondblclk"></a><a name="ondblclk"></a> CMFCToolBarButton:: Ондблклк

Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) .

```
virtual void OnDblClk(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

*Приводится*<br/>
[in] — родительское окно кнопки.

### <a name="remarks"></a>Комментарии

Этот метод вызывается методом, `CMFCToolBar::OnLButtonDblClk` когда родительская панель инструментов обрабатывает сообщение [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) .

Реализация по умолчанию этого метода не выполняет никаких действий.

## <a name="cmfctoolbarbuttonondraw"></a><a name="ondraw"></a> CMFCToolBarButton:: OnDraw

Вызывается платформой для рисования кнопки с использованием указанных стилей и параметров.

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz=TRUE,
    BOOL bCustomizeMode=FALSE,
    BOOL bHighlight=FALSE,
    BOOL bDrawBorder=TRUE,
    BOOL bGrayDisabledButtons=TRUE);
```

### <a name="parameters"></a>Параметры

*Хозяин*<br/>
окне Контекст устройства, на котором отображается кнопка.

*rect*<br/>
окне Ограничивающий прямоугольник кнопки.

*пимажес*<br/>
окне Коллекция изображений панелей инструментов, связанных с кнопкой.

*бхорз*<br/>
окне Состояние закрепления родительской панели инструментов. Этот параметр имеет значение TRUE, если кнопка закреплена по горизонтали, и FALSE, если кнопка закреплена по вертикали.

*бкустомиземоде*<br/>
окне Указывает, находится ли панель инструментов в режиме настройки. Этот параметр имеет значение TRUE, если панель инструментов находится в режиме настройки, и FALSE, если панель инструментов не находится в режиме настройки.

*бхигхлигхт*<br/>
окне Указывает, выделена ли кнопка. Этот параметр имеет значение TRUE, если кнопка выделена, и FALSE, если кнопка не выделена.

*бдравбордер*<br/>
окне Указывает, должна ли кнопка отображать ее границу. Этот параметр имеет значение TRUE, когда кнопка должна отображать ее границу и значение FALSE, если кнопка не должна отображать ее границу.

*бграйдисабледбуттонс*<br/>
окне Указывает, следует ли затенить отключенные кнопки или использовать коллекцию отключенных изображений. Этот параметр имеет значение TRUE, если отключенные кнопки должны быть затенены и FALSE, если этот метод должен использовать коллекцию отключенных изображений.

### <a name="remarks"></a>Комментарии

Переопределите этот метод, чтобы настроить рисование на кнопке панели инструментов.

## <a name="cmfctoolbarbuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a> CMFCToolBarButton:: Ондравонкустомизелист

Вызывается платформой для нарисовании кнопки в области **команды** диалогового окна " **Настройка** ".

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Параметры

*Хозяин*<br/>
окне Контекст устройства, на котором отображается кнопка.

*rect*<br/>
окне Ограничивающий прямоугольник кнопки.

*бселектед*<br/>
окне Указывает, выбрана ли кнопка. Если этот параметр имеет значение TRUE, то кнопка выбрана. Если этот параметр имеет значение FALSE, кнопка не выбрана.

### <a name="return-value"></a>Возвращаемое значение

Ширина (в пикселях) кнопки в указанном контексте устройства.

### <a name="remarks"></a>Комментарии

Этот метод вызывается диалоговым окном настройки (вкладка « **команды** »), когда кнопка собирается отобразить себя в списке, рисуемом владельцем.

Реализация по умолчанию этого метода отображает изображение и текст метки кнопки, если они доступны. Если текстовая метка кнопки недоступна, метод отображает текст подсказки.

Переопределите этот метод для выполнения пользовательского рисования.

## <a name="cmfctoolbarbuttonongetcustomtooltiptext"></a><a name="ongetcustomtooltiptext"></a> CMFCToolBarButton:: Онжеткустомтултиптекст

Вызвано структурой для получения пользовательского текста всплывающей подсказки для кнопки.

```
virtual BOOL OnGetCustomToolTipText(CString& strToolTip);
```

### <a name="parameters"></a>Параметры

*стртултип*<br/>
заполняет `CString` Объект, который получает текст пользовательской подсказки.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод при отображении подсказки для кнопки панели инструментов. Если этот метод возвращает значение FALSE, платформа использует подсказку по умолчанию.

Реализация по умолчанию не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод и возвращайте ненулевое значение для предоставления пользовательского текста подсказки для кнопки панели инструментов.

## <a name="cmfctoolbarbuttononglobalfontschanged"></a><a name="onglobalfontschanged"></a> CMFCToolBarButton:: Онглобалфонтсчанжед

Вызывается платформой при изменении глобального шрифта.

```
virtual void OnGlobalFontsChanged();
```

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, чтобы обновить шрифт, используемый для вывода текста кнопки.

## <a name="cmfctoolbarbuttononmove"></a><a name="onmove"></a> CMFCToolBarButton:: OnMove

Вызывается структурой при перемещении родительской панели инструментов.

```
virtual void OnMove();
```

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, чтобы изменить расположение кнопки при перемещении родительской панели инструментов.

## <a name="cmfctoolbarbuttononshow"></a><a name="onshow"></a> CMFCToolBarButton:: onShow

Вызывается структурой, когда кнопка станет видимой или невидимой.

```
virtual void OnShow(BOOL bShow);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
окне Указывает, является ли кнопка видимой. Если этот параметр имеет значение TRUE, кнопка является видимой. В противном случае кнопка не отображается.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, чтобы обновить видимость кнопки.

## <a name="cmfctoolbarbuttononsize"></a><a name="onsize"></a> CMFCToolBarButton:: OnSize

Вызвано структурой при изменении размера или расположения родительской панели инструментов, и это изменение приводит к изменению размера кнопки.

```
virtual void OnSize(int iSize);
```

### <a name="parameters"></a>Параметры

*исизе*<br/>
окне Новая ширина кнопки.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, чтобы изменить размер кнопки при изменении размера или расположения родительской панели инструментов.

## <a name="cmfctoolbarbuttonontoolhittest"></a><a name="ontoolhittest"></a> CMFCToolBarButton:: Онтулхиттест

Вызывается структурой, когда родительская панель инструментов должна определить, находится ли точка в ограничивающем прямоугольнике кнопки.

```
virtual BOOL OnToolHitTest(
    const CWnd* pWnd,
    TOOLINFO* pTI);
```

### <a name="parameters"></a>Параметры

*Приводится*<br/>
окне Родительское окно кнопки. Может иметь значение NULL.

*пти*<br/>
окне `TOOLINFO` Структура, содержащая сведения о средстве в элементе управления ToolTip.

### <a name="return-value"></a>Возвращаемое значение

Результат, `OnMenuButtonToolHitTest` Если кнопка может получить указатель на родительское окно фрейма; в противном случае — значение false.

### <a name="remarks"></a>Комментарии

Этот метод вызывает один из следующих методов, если он может преобразовать родительское окно в допустимый объект Frame:

- [CMDIFrameWndEx:: Онменубуттонтулхиттест](../../mfc/reference/cmdiframewndex-class.md#onmenubuttontoolhittest)

- [CFrameWndEx:: Онменубуттонтулхиттест](../../mfc/reference/cframewndex-class.md#onmenubuttontoolhittest)

- [Колеипфрамевндекс:: Онменубуттонтулхиттест](../../mfc/reference/coleipframewndex-class.md#onmenubuttontoolhittest)

## <a name="cmfctoolbarbuttononupdatetooltip"></a><a name="onupdatetooltip"></a> CMFCToolBarButton:: Онупдатетултип

Вызывается структурой, когда родительская панель инструментов обновляет текст подсказки.

```
virtual BOOL OnUpdateToolTip(
    CWnd* pWndParent,
    int iButtonIndex,
    CToolTipCtrl& wndToolTip,
    CString& str);
```

### <a name="parameters"></a>Параметры

*пвндпарент*<br/>
окне Родительское окно.

*ибуттониндекс*<br/>
окне Отсчитываемый от нуля индекс кнопки в родительской коллекции кнопок.

*вндтултип*<br/>
окне Элемент управления, отображающий текст подсказки.

*str*<br/>
заполняет `CString` Объект, получающий обновленный текст подсказки.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение FALSE.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий и возвращает значение FALSE. Переопределите этот метод, чтобы вернуть ненулевое значение, если указать текстовую строку подсказки.

## <a name="cmfctoolbarbuttonpreparedrag"></a><a name="preparedrag"></a> CMFCToolBarButton::P Репаредраг

Вызывается структурой, когда кнопка собирается выполнить операцию перетаскивания.

```
virtual BOOL PrepareDrag(COleDataSource& srcItem);
```

### <a name="parameters"></a>Параметры

*срЦитем*<br/>
окне `COleDataSource` Объект, хранящий сведения о состоянии операции перетаскивания.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если операция выполнена. в противном случае — FALSE.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод, чтобы подготовить кнопку панели инструментов для сохранения ее состояния в предоставленном `COleDataSource` объекте. Этот метод сохраняет свое состояние путем сериализации самого файла в общий файл, а затем передает его в метод [COleDataSource:: качеглобалдата](../../mfc/reference/coledatasource-class.md#cacheglobaldata) . Дополнительные сведения о сериализации кнопок панели инструментов см. в разделе [CMFCToolBarButton:: Serialize](#serialize).

Этот метод не выполняет никаких действий и возвращает значение TRUE, если не удается сохранить кнопку (метод [CMFCToolBarButton:: канбесторед](#canbestored) возвращает значение false). Он возвращает значение FALSE, если во время сериализации объекта возникает исключение.

Дополнительные сведения об операциях перетаскивания OLE см. в разделе [OLE Drag и Drop](../../mfc/drag-and-drop-ole.md).

## <a name="cmfctoolbarbuttonrect"></a><a name="rect"></a> CMFCToolBarButton:: Rect

Извлекает ограничивающий прямоугольник кнопки.

```
const CRect& Rect() const;
```

### <a name="return-value"></a>Возвращаемое значение

`CRect`Объект, содержащий ограничивающий прямоугольник кнопки.

## <a name="cmfctoolbarbuttonresetimagetodefault"></a><a name="resetimagetodefault"></a> CMFCToolBarButton:: Ресетимажетодефаулт

Задает значение по умолчанию для изображения, связанного с кнопкой.

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Комментарии

Этот метод извлекает изображение по умолчанию из его родительской панели инструментов с помощью метода [CMFCToolBar:: жетдефаултимаже](../../mfc/reference/cmfctoolbar-class.md#getdefaultimage) . Если у кнопки нет связанного изображения по умолчанию, этот метод задает текстовую метку кнопки в соответствии с ее строковым ресурсом с помощью метода [CStringT:: лоадстринг](../../atl-mfc-shared/reference/cstringt-class.md#loadstring) . Дополнительные сведения о строковых ресурсах см. [в разделе Работа с файлами ресурсов](../../windows/working-with-resource-files.md).

Этот метод не выполняет никаких действий, если у кнопки есть определяемый пользователем образ.

## <a name="cmfctoolbarbuttonsavebarstate"></a><a name="savebarstate"></a> CMFCToolBarButton:: Савебарстате

Сохраняет состояние кнопки панели инструментов.

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод при создании `CMFCToolBarButton` объекта в результате операции перетаскивания.

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод, чтобы сохранить состояние кнопки на панели инструментов во внешнем источнике данных.

## <a name="cmfctoolbarbuttonserialize"></a><a name="serialize"></a> CMFCToolBarButton:: Serialize

Считывает этот объект из архива или записывает его в архив.

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Параметры

*ar*<br/>
окне `CArchive` Объект, из которого сериализуется или.

### <a name="remarks"></a>Комментарии

Этот метод поддерживает процессы переноса данных, такие как буфер обмена или операции перетаскивания. Он считывает или записывает свойства кнопки, такие как идентификатор, Текстовая метка и идентификатор изображения, из или в предоставленный `CArchive` объект.

Примеры сериализации см. [в разделе Сериализация: сериализация объекта](../../mfc/serialization-serializing-an-object.md).

## <a name="cmfctoolbarbuttonsetaccdata"></a><a name="setaccdata"></a> CMFCToolBarButton:: Сетаккдата

Заполняет предоставленный `CAccessibilityData` объект данными специальных возможностей из кнопки панели инструментов.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Параметры

*ппарент*<br/>
окне Родительское окно кнопки панели инструментов.

*data*<br/>
окне `CAccessibilityData` Объект, заполненный данными о специальных возможностях кнопки панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает значение TRUE.

### <a name="remarks"></a>Комментарии

Переопределите этот метод, чтобы он возвращал значение FALSE, если кнопка панели инструментов не предоставляет данные о специальных возможностях.

## <a name="cmfctoolbarbuttonsetclipboardformatname"></a><a name="setclipboardformatname"></a> CMFCToolBarButton:: Сетклипбоардформатнаме

Переименовывает формат глобального буфера обмена.

```
static void __stdcall SetClipboardFormatName(LPCTSTR lpszName);
```

### <a name="parameters"></a>Параметры

*лпсзнаме*<br/>
окне Новое имя глобального формата буфера обмена. Не может быть NULL.

### <a name="remarks"></a>Комментарии

Этот метод делает возможным выполнение операций перетаскивания между несколькими приложениями. Каждое приложение должно указывать одно и то же имя формата буфера обмена.

Этот метод следует вызывать до того, как платформа вызывает [CMFCToolBarButton:: жетклипбоардформат](#getclipboardformat).

## <a name="cmfctoolbarbuttonsetimage"></a><a name="setimage"></a> CMFCToolBarButton:: Сетимаже

Задает индекс изображения для кнопки.

```
virtual void SetImage(int iImage);
```

### <a name="parameters"></a>Параметры

*иимаже*<br/>
окне Индекс изображения в коллекции изображений панели инструментов.

### <a name="remarks"></a>Комментарии

Если кнопка панели инструментов является разделителем, *иимаже* ссылается на новую ширину кнопки-разделителя.

Если *иимаже* меньше нуля, этот метод отключает Рисование изображения и позволяет рисовать текстовую метку кнопки.

## <a name="cmfctoolbarbuttonsetprotectedcommands"></a><a name="setprotectedcommands"></a> CMFCToolBarButton:: Сетпротектедкоммандс

Задает список команд, которые пользователь не может настраивать.

```
static void SetProtectedCommands(const CList<UINT,UINT>& lstCmds);
```

### <a name="parameters"></a>Параметры

*лсткмдс*<br/>
окне Список защищенных команд.

### <a name="remarks"></a>Комментарии

В режиме настройки инфраструктура отключает защищенные команды кнопки панели инструментов. Пользователь не может выполнять операции перетаскивания и изменения на отключенных кнопках на панели инструментов.

Чтобы получить список защищенных команд, используйте метод [CMFCToolBarButton:: жетпротектедкоммандс](#getprotectedcommands) .

## <a name="cmfctoolbarbuttonsetradio"></a><a name="setradio"></a> CMFCToolBarButton:: Сетрадио

Вызывается платформой, когда кнопка меняется на состояние "checked".

```
virtual void SetRadio();
```

### <a name="remarks"></a>Комментарии

Реализация по умолчанию этого метода не выполняет никаких действий. Переопределите этот метод для выполнения настраиваемого действия, когда кнопка изменит свое состояние проверки.

## <a name="cmfctoolbarbuttonsetrect"></a><a name="setrect"></a> CMFCToolBarButton:: SetRect

Задает ограничивающий прямоугольник кнопки.

```cpp
void SetRect(const CRect rect);
```

### <a name="parameters"></a>Параметры

*rect*<br/>
окне Новый ограничивающий прямоугольник кнопки.

### <a name="remarks"></a>Комментарии

Этот метод вызывает метод [CMFCToolBarButton:: OnMove](#onmove) после того, как он задает новый ограничивающий прямоугольник.

## <a name="cmfctoolbarbuttonsetstyle"></a><a name="setstyle"></a> CMFCToolBarButton:: SetStyle

Задает стиль кнопки.

```
virtual void SetStyle(UINT nStyle);
```

### <a name="parameters"></a>Параметры

*nStyle*<br/>
окне Новый стиль кнопки.

### <a name="remarks"></a>Комментарии

Реализация по умолчанию задает для элемента данных [CMFCToolBarButton:: m_nStyle](#m_nstyle) значение *нстиле*. Переопределите этот метод, если требуется выполнить дополнительную обработку, чтобы обработать изменение стиля. Список допустимых флагов стиля см. в разделе [стили элементов управления панели инструментов](toolbar-control-styles.md) .

## <a name="cmfctoolbarbuttonsetvisible"></a><a name="setvisible"></a> CMFCToolBarButton:: Сетвисибле

Указывает, является ли кнопка видимой.

```cpp
void SetVisible(BOOL bShow=TRUE);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
окне Логическое значение, указывающее, следует ли отображать или скрывать кнопку. Если этот параметр имеет значение TRUE, то отображается кнопка. Если параметр имеет значение FALSE, кнопка скрыта.

### <a name="remarks"></a>Комментарии

Эта функция используется для скрытия или отображения определенной кнопки панели инструментов. Вызовите метод [CPane:: аджустсизеиммедиате](../../mfc/reference/cpane-class.md#adjustsizeimmediate) после вызова этого метода.

## <a name="cmfctoolbarbuttonshow"></a><a name="show"></a> CMFCToolBarButton:: показывать

Показывает или скрывает кнопку.

```cpp
void Show(BOOL bShow);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
окне Логическое значение, указывающее, следует ли отображать или скрывать кнопку. Если этот параметр имеет значение TRUE, то отображается кнопка. Если параметр имеет значение FALSE, кнопка скрыта.

### <a name="remarks"></a>Комментарии

Платформа вызывает этот метод для обновления видимости кнопок панели инструментов при изменении размера их родительской панели инструментов. Платформа вызывает этот метод с параметром *бшов* , ИМЕЮЩИМ значение false, если кнопка больше не соответствует границам панели инструментов. Платформа вызывает этот метод с параметром *бшов* , ИМЕЮЩИМ значение true, когда после изменения размера кнопки в границах панели инструментов.

Используйте метод [CMFCToolBarButton:: сетвисибле](#setvisible) , чтобы задать общую видимость кнопки.

Этот метод вызывает метод [CMFCToolBarButton:: onShow](#onshow) после обновления состояния видимости кнопки.

## <a name="see-also"></a>См. также раздел

[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[Классы](../../mfc/reference/mfc-classes.md)<br/>
[Класс CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)<br/>
[Класс Кмфктулбаримажес](../../mfc/reference/cmfctoolbarimages-class.md)
