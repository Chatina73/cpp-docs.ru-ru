---
title: Класс Кмфктулбарменубуттон
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
ms.openlocfilehash: 883d6a9242066289f15e58179a03c4f609699141
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69504716"
---
# <a name="cmfctoolbarmenubutton-class"></a>Класс Кмфктулбарменубуттон

Кнопка панели инструментов, содержащая всплывающее меню.
Дополнительные сведения см. в исходном коде, расположенном в папке **VC\\atlmfc\\src\\mfc** каталога установки Visual Studio.

## <a name="syntax"></a>Синтаксис

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[Кмфктулбарменубуттон:: Кмфктулбарменубуттон](#cmfctoolbarmenubutton)|Создает объект `CMFCToolBarMenuButton`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кмфктулбарменубуттон:: Компаревис](#comparewith)|Сравнивает данный экземпляр с предоставленным `CMFCToolBarButton` объектом. (Переопределяет [CMFCToolBarButton:: компаревис](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|
|[Кмфктулбарменубуттон:: CopyFrom](#copyfrom)|Копирует свойства другой кнопки панели инструментов в текущую кнопку. (Переопределяет [CMFCToolBarButton:: CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|
|[Кмфктулбарменубуттон:: Креатефроммену](#createfrommenu)|Инициализирует меню панели инструментов из маркера меню Windows.|
|[Кмфктулбарменубуттон:: Креатемену](#createmenu)|Создает меню Windows, состоящее из команд в меню панели инструментов. Возвращает маркер в меню окон.|
|[Кмфктулбарменубуттон:: Креатепопупмену](#createpopupmenu)|Создает всплывающий объект меню ( [Класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)) для отображения меню панели инструментов.|
|[Кмфктулбарменубуттон:: Енаблекуикккустомизе](#enablequickcustomize)||
|[Кмфктулбарменубуттон:: выкоманд](#getcommands)|Предоставляет доступ только для чтения к списку команд в меню панели инструментов.|
|[Кмфктулбарменубуттон:: Жетимажерект](#getimagerect)|Извлекает ограничивающий прямоугольник для изображения кнопки.|
|[Кмфктулбарменубуттон:: Жетпалеттеровс](#getpaletterows)|Возвращает количество строк во всплывающем меню, если меню находится в режиме палитры.|
|[Кмфктулбарменубуттон:: Жетпопупмену](#getpopupmenu)|Возвращает указатель на объект всплывающего меню, связанный с кнопкой.|
|[Кмфктулбарменубуттон:: Хасбуттон](#hasbutton)||
|[Кмфктулбарменубуттон:: Хавехотбордер](#havehotborder)|Определяет, отображается ли граница кнопки, когда пользователь нажимает кнопку. (Переопределяет [CMFCToolBarButton:: хавехотбордер](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|
|[Кмфктулбарменубуттон:: "граница"](#isborder)||
|[Кмфктулбарменубуттон:: Искликкедонмену](#isclickedonmenu)||
|[Кмфктулбарменубуттон:: Исдроппеддовн](#isdroppeddown)|Определяет, отображается ли всплывающее меню.|
|[Кмфктулбарменубуттон:: Исемптименуалловед](#isemptymenuallowed)|Вызывается платформой для определения того, может ли пользователь открыть подменю из выбранного пункта меню.|
|[Кмфктулбарменубуттон:: Exclusive](#isexclusive)|Определяет, находится ли кнопка в монопольном режиме, то есть независимо от того, остается ли всплывающее меню открытым, даже когда пользователь наводит указатель на другую панель инструментов или кнопку.|
|[Кмфктулбарменубуттон:: Исменупалеттемоде](#ismenupalettemode)|Определяет, находится ли всплывающее меню в режиме палитры.|
|[Кмфктулбарменубуттон:: Искуиккмоде](#isquickmode)||
|[Кмфктулбарменубуттон:: Истеароффмену](#istearoffmenu)|Определяет, содержит ли всплывающее меню полосу разрыва.|
|[Кмфктулбарменубуттон:: Онафтеркреатепопупмену](#onaftercreatepopupmenu)||
|[Кмфктулбарменубуттон:: Онбефоредраг](#onbeforedrag)|Указывает, можно ли перетащить кнопку. (Переопределяет [CMFCToolBarButton:: онбефоредраг](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|
|[Кмфктулбарменубуттон:: Онкалкулатесизе](#oncalculatesize)|Вызывается платформой для вычисления размера кнопки для указанного контекста устройства и состояния закрепления. (Переопределяет [CMFCToolBarButton:: онкалкулатесизе](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|
|[Кмфктулбарменубуттон:: Онканцелмоде](#oncancelmode)|Вызывается платформой для работы с сообщением [WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode) . (Переопределяет [CMFCToolBarButton:: онканцелмоде](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|
|[Кмфктулбарменубуттон:: Ончанжепарентвнд](#onchangeparentwnd)|Вызывается структурой при вставке кнопки в новую панель инструментов. (Переопределяет [CMFCToolBarButton:: ончанжепарентвнд](cmfctoolbarbutton-class.md#onchangeparentwnd).)|
|[Кмфктулбарменубуттон:: OnClick](#onclick)|Вызывается структурой при нажатии пользователем кнопки мыши. (Переопределяет [CMFCToolBarButton:: OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|
|[Кмфктулбарменубуттон:: Онкликкменуитем](#onclickmenuitem)|Вызывается платформой, когда пользователь выбирает элемент во всплывающем меню.|
|[Кмфктулбарменубуттон:: Онконтексселп](#oncontexthelp)|Вызывается структурой, когда родительская панель инструментов обрабатывает сообщение WM_HELPHITTEST. (Переопределяет [CMFCToolBarButton:: онконтексселп](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|
|[Кмфктулбарменубуттон:: OnDraw](#ondraw)|Вызывается платформой для рисования кнопки с использованием указанных стилей и параметров. (Переопределяет [CMFCToolBarButton:: OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|
|[Кмфктулбарменубуттон:: Ондравонкустомизелист](#ondrawoncustomizelist)|Вызывается платформой для нарисовании кнопки в области **команды** диалогового окна " **Настройка** ". (Переопределяет [CMFCToolBarButton:: ондравонкустомизелист](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|
|[Кмфктулбарменубуттон:: Опенпопупмену](#openpopupmenu)|Вызывается платформой, когда пользователь открывает всплывающее меню.|
|[Кмфктулбарменубуттон:: Ресетимажетодефаулт](#resetimagetodefault)|Задает значение по умолчанию для изображения, связанного с кнопкой. (Переопределяет [CMFCToolBarButton:: ресетимажетодефаулт](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|
|[Кмфктулбарменубуттон:: Савебарстате](#savebarstate)|Сохраняет состояние кнопки панели инструментов. (Переопределяет [CMFCToolBarButton:: савебарстате](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|
|[Кмфктулбарменубуттон:: Serialize](#serialize)|Считывает этот объект из архива или записывает его в архив. (Переопределяет [CMFCToolBarButton:: Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|
|[Кмфктулбарменубуттон:: Сетаккдата](#setaccdata)|Заполняет предоставленный `CAccessibilityData` объект данными специальных возможностей из кнопки панели инструментов. (Переопределяет [CMFCToolBarButton:: сетаккдата](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|
|[Кмфктулбарменубуттон:: Сетменуонли](#setmenuonly)|Указывает, можно ли добавить кнопку на панель инструментов.|
|[Кмфктулбарменубуттон:: Сетменупалеттемоде](#setmenupalettemode)|Указывает, находится ли всплывающее меню в режиме палитры.|
|[Кмфктулбарменубуттон:: Сетмессажевнд](#setmessagewnd)||
|[Кмфктулбарменубуттон:: Сетрадио](#setradio)|Заставляет кнопку меню панели инструментов отображать значок, указывающий, что он выбран.|
|[Кмфктулбарменубуттон:: Сеттеарофф](#settearoff)|Указывает идентификатор отрезков для всплывающего меню.|

### <a name="protected-methods"></a>Защищенные методы

|name|Описание|
|----------|-----------------|
|[Кмфктулбарменубуттон::D Равдокументикон](#drawdocumenticon)|Рисует значок на кнопке меню.|

### <a name="data-members"></a>Элементы данных

|name|Описание|
|----------|-----------------|
|[Кмфктулбарменубуттон:: m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Если значение — TRUE, платформа всегда вызывает [CFrameWndEx:: ондравменуимаже](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) при прорисовке кнопки.|

## <a name="remarks"></a>Примечания

`CMFCToolBarMenuButton` Может отображаться как меню, пункт меню, имеющий подменю, кнопку, которая выполняет команду или отображает меню, или кнопку, отображающую только меню. Вы определяете поведение и внешний вид кнопки меню, указывая такие параметры, как изображение, текст, маркер меню и идентификатор команды, связанные с кнопкой в конструкторе `CMFCToolbarMenuButton::CMFCToolbarMenuButton`.

Пользовательский класс, производный от `CMFCToolbarMenuButton` класса, должен использовать макрос [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial) . Макрос [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) создает ошибку при закрытии приложения.

## <a name="example"></a>Пример

В следующем примере показано, как настроить `CMFCToolBarMenuButton` объект. В коде показано, как указать, что раскрывающееся меню находится в режиме палитры, и указать идентификатор для неразрывной панели, создаваемой при перетаскивании кнопки меню из строки меню. Этот фрагмент кода входит в состав [примера Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[кмфктулбарменубуттон](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>Требования

**Заголовок:** afxtoolbarmenubutton.h

##  <a name="cmfctoolbarmenubutton"></a>Кмфктулбарменубуттон:: Кмфктулбарменубуттон

Создает объект `CMFCToolBarMenuButton`.

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>Параметры

*src*<br/>
окне Существующий `CMFCToolBarMenuButton` объект, который будет скопирован в этот `CMFCToolBarMenuButton` объект.

*uiID*<br/>
окне Идентификатор команды, выполняемой при нажатии пользователем кнопки; или (UINT) — 1 для кнопки меню, которая не выполняет команду напрямую.

*hMenu*<br/>
окне Маркер для меню; или значение NULL, если кнопка не имеет меню.

*иимаже*<br/>
окне Индекс изображения для кнопки; или-1, если эта кнопка не имеет значка или использует значок для команды, заданной параметром *уиид*. Индекс одинаков для каждого `CMFCToolBarImages` объекта в приложении.

*lpszText*<br/>
окне Текст кнопки меню панели инструментов.

*бусербуттон*<br/>
окне Значение TRUE, если кнопка отображает изображение, определенное пользователем; Значение FALSE, если кнопка отображает предопределенное изображение, связанное с командой, заданной параметром *уиид*.

### <a name="remarks"></a>Примечания

Если *уиид* является ДОПУСТИМЫм идентификатором команды, кнопка выполняет эту команду, когда пользователь нажимает ее. Если *HMENU* является допустимым маркером меню, кнопка предоставляет раскрывающееся меню, если оно отображается в меню на панели инструментов или в подменю. Если оба *уиид* и *HMENU* являются допустимыми, кнопка является разворачивающейся кнопкой с частью, которая будет выполнять команду, когда пользователь щелкает ее, и часть со стрелкой вниз, которая раскрывает меню, когда пользователь щелкает его. Однако если *HMENU* является допустимым, пользователь не сможет нажать кнопку, чтобы выполнить команду при вставке кнопки в меню.

### <a name="example"></a>Пример

В следующем примере показано, как создать объект `CMFCToolBarMenuButton` класса. Этот фрагмент кода входит в состав [примера Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

##  <a name="comparewith"></a>Кмфктулбарменубуттон:: Компаревис

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Параметры

окне *другие*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="copyfrom"></a>Кмфктулбарменубуттон:: CopyFrom

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Параметры

окне *src*<br/>

### <a name="remarks"></a>Примечания

##  <a name="createfrommenu"></a>Кмфктулбарменубуттон:: Креатефроммену

Инициализирует меню панели инструментов из маркера меню Windows.

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>Параметры

*hMenu*<br/>
окне Маркер меню.

### <a name="remarks"></a>Примечания

Кнопка меню панели инструментов может отображать раскрывающееся меню.

Платформа вызывает этот метод для инициализации команд из меню в подменю.

##  <a name="createmenu"></a>Кмфктулбарменубуттон:: Креатемену

Создает меню, состоящее из команд в меню панели инструментов. Возвращает маркер в меню.

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер меню в случае успеха. Значение NULL, если список команд, связанных с кнопкой меню панели инструментов, пуст.

### <a name="remarks"></a>Примечания

Этот метод можно переопределить в производном классе, чтобы настроить способ создания меню.

##  <a name="createpopupmenu"></a>Кмфктулбарменубуттон:: Креатепопупмену

`CMFCPopupMenu` Создает объект для вывода меню панели инструментов.

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на `CMFCPopupMenu` объект, отображающий раскрывающееся меню, связанное с кнопкой меню панели инструментов.

### <a name="remarks"></a>Примечания

Этот метод вызывается платформой для подготовки к отображению раскрывающегося меню, связанного с кнопкой.

Реализация по умолчанию просто конструирует и возвращает новый `CMFCPopupMenu` объект. Переопределите этот метод, если вы хотите использовать производный тип [класса CMFCPopupMenu](cmfcpopupmenu-class.md) или выполнить дополнительную инициализацию.

##  <a name="drawdocumenticon"></a>Кмфктулбарменубуттон::D Равдокументикон

Рисует значок документа в кнопке меню.

```
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
окне Указатель на контекст устройства.

*ректимаже*<br/>
окне Координаты прямоугольника, ограничивающего изображение.

*hIcon*<br/>
окне Маркер значка.

### <a name="remarks"></a>Примечания

Этот метод принимает значок документа и рисует его с помощью кнопки меню, расположенной в области, заданной параметром *ректимаже*.

##  <a name="enablequickcustomize"></a>Кмфктулбарменубуттон:: Енаблекуикккустомизе

```
void EnableQuickCustomize();
```

### <a name="remarks"></a>Примечания

##  <a name="hasbutton"></a>Кмфктулбарменубуттон:: Хасбуттон

```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="havehotborder"></a>Кмфктулбарменубуттон:: Хавехотбордер

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="isborder"></a>Кмфктулбарменубуттон:: "граница"

```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="isclickedonmenu"></a>Кмфктулбарменубуттон:: Искликкедонмену

```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="isquickmode"></a>Кмфктулбарменубуттон:: Искуиккмоде

```
BOOL IsQuickMode();
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="getcommands"></a>Кмфктулбарменубуттон:: выкоманд

Предоставляет доступ только для чтения к списку команд в меню панели инструментов.

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>Возвращаемое значение

Константная ссылка на объект [класса коблист](../../mfc/reference/coblist-class.md) , который содержит коллекцию объектов [класса CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) .

### <a name="remarks"></a>Примечания

Кнопка меню панели инструментов может отображать подменю. Вы можете указать список команд в подменю в конструкторе или в [кмфктулбарменубуттон:: креатефроммену](#createfrommenu) в качестве маркера меню (HMENU). Меню преобразуется в список объектов, которые являются производными от [класса CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) и хранятся во внутреннем `CObList` объекте. Доступ к этому списку можно получить, вызвав этот метод.

##  <a name="getimagerect"></a>Кмфктулбарменубуттон:: Жетимажерект

Извлекает ограничивающий прямоугольник для изображения кнопки.

```
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>Параметры

*ректимаже*<br/>
заполняет Ссылка на `CRect` объект, который получает координаты ограничивающего прямоугольника изображения.

##  <a name="getpaletterows"></a>Кмфктулбарменубуттон:: Жетпалеттеровс

Возвращает количество строк в раскрывающемся меню, если меню находится в режиме палитры.

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>Возвращаемое значение

Число строк в палитре.

### <a name="remarks"></a>Примечания

Если для кнопки меню выбран режим палитра, пункты меню будут отображаться в нескольких столбцах с ограниченным числом строк. Вызовите этот метод, чтобы получить количество строк. Можно включить или отключить режим палитры и указать число строк с помощью [кмфктулбарменубуттон:: сетменупалеттемоде](#setmenupalettemode).

##  <a name="getpopupmenu"></a>Кмфктулбарменубуттон:: Жетпопупмену

Возвращает указатель на объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) , представляющий раскрывающееся меню кнопки.

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) , который был создан, когда платформа нарисована подменю для кнопки меню панели инструментов; Значение NULL, если подменю не отображается.

### <a name="remarks"></a>Примечания

Когда на кнопке меню панели инструментов отображается раскрывающееся меню, кнопка создает объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) для представления меню. Вызовите этот метод, чтобы получить указатель на `CMFCPopupMenu` объект. Не следует хранить возвращаемый указатель, так как он является временным и становится недействительным, когда пользователь закрывает раскрывающееся меню.

##  <a name="isdroppeddown"></a>Кмфктулбарменубуттон:: Исдроппеддовн

Указывает, отображается ли всплывающее меню в данный момент.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если на кнопке меню панели инструментов отображается подменю; в противном случае — FALSE.

##  <a name="isemptymenuallowed"></a>Кмфктулбарменубуттон:: Исемптименуалловед

Указывает, показывают ли пункты меню пустые подменю.

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если платформа открывает подменю из текущего выбранного пункта меню, даже если подменю пусто; в противном случае — FALSE.

### <a name="remarks"></a>Примечания

Платформа вызывает этот метод, когда пользователь пытается открыть подменю из текущего выбранного пункта меню. Если подменю пусто и `IsEmptyMenuAllowed` возвращает значение false, подменю не откроется.

Реализация по умолчанию возвращает значение FALSE. Переопределите этот метод, чтобы настроить это поведение.

##  <a name="isexclusive"></a>Кмфктулбарменубуттон:: Exclusive

Указывает, находится ли кнопка в монопольном режиме.

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка работает в монопольном режиме; в противном случае — FALSE.

### <a name="remarks"></a>Примечания

Когда пользователь открывает всплывающее меню для кнопки, а затем наводит указатель мыши на другую панель инструментов или кнопку меню, всплывающее меню закрывается, если кнопка не находится в монопольном режиме.

Реализация по умолчанию всегда возвращает значение FALSE. Переопределите этот метод в производном классе, если хотите включить монопольный режим.

##  <a name="ismenupalettemode"></a>Кмфктулбарменубуттон:: Исменупалеттемоде

Определяет, находится ли раскрывающееся меню в режиме палитры.

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если режим палитры включен; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Если для кнопки меню выбран режим палитра, пункты меню отображаются в нескольких столбцах с ограниченным числом строк. Вызовите этот метод, чтобы получить количество строк. Вы можете включить или отключить режим палитры, вызвав [кмфктулбарменубуттон:: сетменупалеттемоде](#setmenupalettemode).

##  <a name="istearoffmenu"></a>Кмфктулбарменубуттон:: Истеароффмену

Указывает, содержит ли раскрывающееся меню полосу разрыва.

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если кнопка меню панели инструментов содержит линию разрыва; в противном случае — FALSE.

### <a name="remarks"></a>Примечания

Чтобы включить функцию удаления и задать идентификатор строки разрыва, вызовите [кмфктулбарменубуттон:: сеттеарофф](#settearoff).

##  <a name="m_balwayscallownerdraw"></a>Кмфктулбарменубуттон:: m_bAlwaysCallOwnerDraw

Указывает, будет ли платформа всегда вызывать [CFrameWndEx:: ондравменуимаже](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) при прорисовке кнопки.

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Примечания

Если для этой переменной-члена задано значение TRUE, кнопка всегда вызывает метод [CFrameWndEx:: ондравменуимаже](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) , чтобы отобразить изображение на кнопке. Если `m_bAlwaysCallOwnerDraw` имеет значение false, то сама кнопка рисует изображение, если изображение предопределено заранее. В противном случае `OnDrawMenuImage`он вызывает.

##  <a name="onaftercreatepopupmenu"></a>Кмфктулбарменубуттон:: Онафтеркреатепопупмену

```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Примечания

##  <a name="onbeforedrag"></a>Кмфктулбарменубуттон:: Онбефоредраг

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="oncalculatesize"></a>Кмфктулбарменубуттон:: Онкалкулатесизе

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Параметры

окне *основной контроллер домена*<br/>
окне *сизедефаулт*<br/>
окне *бхорз*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="oncancelmode"></a>Кмфктулбарменубуттон:: Онканцелмоде

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Примечания

##  <a name="onchangeparentwnd"></a>Кмфктулбарменубуттон:: Ончанжепарентвнд

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Параметры

окне *пвндпарент*<br/>

### <a name="remarks"></a>Примечания

##  <a name="onclick"></a>Кмфктулбарменубуттон:: OnClick

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>Параметры

окне *приводится*<br/>
окне *бделай*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="onclickmenuitem"></a>Кмфктулбарменубуттон:: Онкликкменуитем

Вызывается структурой, когда пользователь выбирает элемент в раскрывающемся меню.

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>Возвращаемое значение

Значение FALSE, если платформа должна продолжить обработку элемента меню по умолчанию; в противном случае — значение TRUE. Реализация по умолчанию всегда возвращает значение FALSE.

### <a name="remarks"></a>Примечания

Когда пользователь щелкает пункт меню, платформа выполняет команду, связанную с этим элементом.

Чтобы настроить обработку элементов меню, переопределите `OnClickMenuItem` в классе, производном `CMFCToolBarMenuButton` от класса. Необходимо также переопределить [CFrameWndEx:: оншовпопупмену](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) и заменить кнопки меню, требующие особой обработки, экземплярами производного класса.

##  <a name="oncontexthelp"></a>Кмфктулбарменубуттон:: Онконтексселп

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

окне *приводится*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="ondraw"></a>Кмфктулбарменубуттон:: OnDraw

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>Параметры

окне *основной контроллер домена*<br/>
[in] *rect*<br/>
окне *пимажес*<br/>
окне *бхорз*<br/>
окне *бкустомиземоде*<br/>
окне *бхигхлигхт*<br/>
окне *бдравбордер*<br/>
окне *бграйдисабледбуттонс*<br/>

### <a name="remarks"></a>Примечания

##  <a name="ondrawoncustomizelist"></a>Кмфктулбарменубуттон:: Ондравонкустомизелист

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Параметры

окне *основной контроллер домена*<br/>
[in] *rect*<br/>
окне *бселектед*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Примечания

##  <a name="openpopupmenu"></a>Кмфктулбарменубуттон:: Опенпопупмену

Вызывается структурой, когда пользователь открывает раскрывающееся меню кнопки меню панели инструментов.

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>Параметры

*Приводится*<br/>
окне Указывает окно, которое получает команды раскрывающегося меню. Он может иметь значение NULL, только если кнопка меню панели инструментов имеет родительское окно.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) был успешно создан и открыт. в противном случае — FALSE.

### <a name="remarks"></a>Примечания

Эта функция вызывается платформой, когда пользователь открывает раскрывающееся меню из кнопки меню панели инструментов.

##  <a name="resetimagetodefault"></a>Кмфктулбарменубуттон:: Ресетимажетодефаулт

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Примечания

##  <a name="savebarstate"></a>Кмфктулбарменубуттон:: Савебарстате

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Примечания

Платформа вызывает этот метод при создании кнопки на панели инструментов в результате операции перетаскивания. Этот метод вызывает метод [CMFCPopupMenu:: SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) всплывающего меню верхнего уровня, в результате чего родительская кнопка всплывающего меню воссоздает свое меню.

##  <a name="serialize"></a>Кмфктулбарменубуттон:: Serialize

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Параметры

[in] *ar*<br/>

### <a name="remarks"></a>Примечания

##  <a name="setaccdata"></a>Кмфктулбарменубуттон:: Сетаккдата

Задает данные специальных возможностей для элемента ленты.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Параметры

*ппарент*<br/>
Родительское окно для элемента ленты.

*data*<br/>
Данные специальных возможностей для элемента ленты.

### <a name="return-value"></a>Возвращаемое значение

Всегда возвращает значение TRUE.

### <a name="remarks"></a>Примечания

По умолчанию этот метод задает данные о специальных возможностях для элемента Ribbon и всегда возвращает значение TRUE. Переопределите этот метод, чтобы задать данные специальных возможностей и возвращать значение, указывающее на успешное или неуспешное выполнение.

##  <a name="setmenuonly"></a>Кмфктулбарменубуттон:: Сетменуонли

Указывает, рисуется ли кнопка в виде кнопки меню или разворачивающейся кнопки, если у нее есть допустимый идентификатор команды и подменю.

```
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>Параметры

*бменуонли*<br/>
окне Значение TRUE для отображения этой кнопки в виде кнопки меню, если она содержит допустимый идентификатор команды и подменю, значение FALSE, чтобы отобразить эту кнопку в виде разворачивающейся кнопки, если у нее есть допустимый идентификатор команды и подменю.

### <a name="remarks"></a>Примечания

Как правило, когда у кнопки меню панели инструментов есть подменю и идентификатор команды, меню представляет собой разворачивающуюся кнопку, которая имеет главную кнопку и присоединенную кнопку со стрелкой вниз. Если вызвать этот метод и *бменуонли* имеет значение true, то кнопка будет выглядеть как одна кнопка меню с стрелкой вниз в кнопке. Когда пользователь щелкает стрелку в любом из режимов, открывается подменю, а когда пользователь нажимает на кнопку, не относящуюся к стрелке, в любом режиме платформа выполняет команду.

##  <a name="setmenupalettemode"></a>Кмфктулбарменубуттон:: Сетменупалеттемоде

Указывает, находится ли раскрывающееся меню в режиме палитры.

```
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>Параметры

*бменупалеттемоде*<br/>
окне Указывает, находится ли раскрывающееся меню в режиме палитры.

*нпалеттеровс*<br/>
окне Число строк в палитре.

### <a name="remarks"></a>Примечания

В режиме палитры все пункты меню отображаются в виде палитры с многостолбцовыми. Число строк указывается с помощью *нпалеттеровс*.

##  <a name="setmessagewnd"></a>Кмфктулбарменубуттон:: Сетмессажевнд

```
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>Параметры

окне *пвндмессаже*<br/>

### <a name="remarks"></a>Примечания

##  <a name="setradio"></a>Кмфктулбарменубуттон:: Сетрадио

Задает кнопку меню панели инструментов для вывода значка стиля переключателя, если он установлен.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Примечания

При нарисовании кнопки меню во время ее проверки вызывается [CMFCVisualManager:: ондравменучекк](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) , чтобы нарисовать значок галочки. По умолчанию `OnDrawMenuCheck` запрашивает, чтобы текущий диспетчер визуальных элементов выводит флажок стиля флажка в кнопке меню. После вызова этого метода текущий диспетчер визуальных элементов отображает флажок стиля переключателя на кнопке меню. Это изменение нельзя отменить.

При вызове этого метода и нажатии кнопки меню в данный момент выполняется обновление.

##  <a name="settearoff"></a>Кмфктулбарменубуттон:: Сеттеарофф

Указывает идентификатор неразрывной строки для раскрывающегося меню.

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>Параметры

*уибарид*<br/>
окне Указывает новый идентификатор отрезков.

### <a name="remarks"></a>Примечания

Вызовите этот метод, чтобы указать идентификатор для неразрывной панели, создаваемой при перетаскивании кнопки меню из строки меню. Если значение параметра *уибарид* равно 0, пользователь не может удалить кнопку меню.

Вызовите [CWinAppEx:: енаблетеароффменус](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) , чтобы включить функцию удаления меню в приложении.

## <a name="see-also"></a>См. также

[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Классы](../../mfc/reference/mfc-classes.md)<br/>
[Класс CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[Класс CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)<br/>
[Класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)
