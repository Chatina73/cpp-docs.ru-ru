---
title: Класс CView
ms.date: 11/04/2016
f1_keywords:
- CView
- AFXWIN/CView
- AFXWIN/CView::CView
- AFXWIN/CView::DoPreparePrinting
- AFXWIN/CView::GetDocument
- AFXWIN/CView::IsSelected
- AFXWIN/CView::OnDragEnter
- AFXWIN/CView::OnDragLeave
- AFXWIN/CView::OnDragOver
- AFXWIN/CView::OnDragScroll
- AFXWIN/CView::OnDrop
- AFXWIN/CView::OnDropEx
- AFXWIN/CView::OnInitialUpdate
- AFXWIN/CView::OnPrepareDC
- AFXWIN/CView::OnScroll
- AFXWIN/CView::OnScrollBy
- AFXWIN/CView::OnActivateFrame
- AFXWIN/CView::OnActivateView
- AFXWIN/CView::OnBeginPrinting
- AFXWIN/CView::OnDraw
- AFXWIN/CView::OnEndPrinting
- AFXWIN/CView::OnEndPrintPreview
- AFXWIN/CView::OnPreparePrinting
- AFXWIN/CView::OnPrint
- AFXWIN/CView::OnUpdate
helpviewer_keywords:
- CView [MFC], CView
- CView [MFC], DoPreparePrinting
- CView [MFC], GetDocument
- CView [MFC], IsSelected
- CView [MFC], OnDragEnter
- CView [MFC], OnDragLeave
- CView [MFC], OnDragOver
- CView [MFC], OnDragScroll
- CView [MFC], OnDrop
- CView [MFC], OnDropEx
- CView [MFC], OnInitialUpdate
- CView [MFC], OnPrepareDC
- CView [MFC], OnScroll
- CView [MFC], OnScrollBy
- CView [MFC], OnActivateFrame
- CView [MFC], OnActivateView
- CView [MFC], OnBeginPrinting
- CView [MFC], OnDraw
- CView [MFC], OnEndPrinting
- CView [MFC], OnEndPrintPreview
- CView [MFC], OnPreparePrinting
- CView [MFC], OnPrint
- CView [MFC], OnUpdate
ms.assetid: 9cff3c56-7564-416b-b9a4-71a9254ed755
ms.openlocfilehash: 763e36b0736ce588e7e2aded25e50347f9e0ca70
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81373201"
---
# <a name="cview-class"></a>Класс CView

Предоставляет базовую функциональность для определяемых пользователем классов представления.

## <a name="syntax"></a>Синтаксис

```
class AFX_NOVTABLE CView : public CWnd
```

## <a name="members"></a>Участники

### <a name="protected-constructors"></a>Защищенные конструкторы

|Имя|Описание|
|----------|-----------------|
|[CView::CView](#cview)|Формирует объект `CView`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CView::DoPreparePrinting](#doprepareprinting)|Отображает поле диалога печати и создает контекст устройства принтера; вызова при переопределение функции `OnPreparePrinting` участника.|
|[CView::GetDocument](#getdocument)|Возвращает документ, связанный с представлением.|
|[CView:: Выбрано](#isselected)|Тестирует, выбран ли элемент документа. Требуется для поддержки OLE.|
|[CView::OndragEnter](#ondragenter)|Вызывается, когда элемент впервые втягивается в область перетаскивания представления.|
|[CView::OndragLeave](#ondragleave)|Вызывается, когда перетасканный элемент покидает область перетаскивания представления.|
|[CView::Ondragover](#ondragover)|Вызывается, когда элемент перетаскивается по области перетаскивания представления.|
|[CView::OndragScroll](#ondragscroll)|Вызывается, чтобы определить, втягивается ли курсор в область прокрутки окна.|
|[CView::OnDrop](#ondrop)|Вызывается при удалении элемента в область перетаскивания и падения представления, обработчик по умолчанию.|
|[CView::OnDropEx](#ondropex)|Вызывается, когда элемент был сброшен в область перетаскивания представления, основной обработчик.|
|[CView::OninitialUpdate](#oninitialupdate)|Вызывается после того, как представление сначала прикрепляется к документу.|
|[CView::OnPrepareDC](#onpreparedc)|Вызывается `OnDraw` до вызова функции участника `OnPrint` для отображения экрана или функции участника для печати или предварительного просмотра печати.|
|[CView::OnScroll](#onscroll)|Вызывается, когда элементы OLE перетаскиваются за пределы вида.|
|[CView::OnScrollby](#onscrollby)|Вызывается при прокрутке представления, содержащего активные элементы OLE на месте.|

### <a name="protected-methods"></a>Защищенные методы

|Имя|Описание|
|----------|-----------------|
|[CView::OnActivateFrame](#onactivateframe)|Вызывается при активации или деактивации окна кадра, содержащего представление.|
|[CView::OnActivateView](#onactivateview)|Вызывается при активации представления.|
|[CView::OnBeginPrinting](#onbeginprinting)|Вызывается, когда начинается работа печати; переопределить для выделения графических интерфейсов (GDI) ресурсов.|
|[CView::OnDraw](#ondraw)|Требуется отобразить изображение документа для отображения экрана, печати или предварительного просмотра печати. Требуется реализация.|
|[CView:OnendPrinting](#onendprinting)|Вызывается, когда работа печати заканчивается; переопределить для перераспределения ресурсов GDI.|
|[CView::OnendPrintPreview](#onendprintpreview)|Вызывается при выходе режима предварительного просмотра.|
|[CView::OnPreparePrinting](#onprepareprinting)|Вызывается до печати или предварительного просмотра документа; переопределить для инициализации печати диалогового окна.|
|[CView::OnPrint](#onprint)|Вызывается для печати или предварительного просмотра страницы документа.|
|[CView::Обновление](#onupdate)|Вызывается, чтобы уведомить мнение о том, что его документ был изменен.|

## <a name="remarks"></a>Remarks

Представление прикрепляется к документу и выступает в качестве посредника между документом и пользователем: представление отображает изображение документа на экране или принтере и интерпретирует пользовательский вход как операции на документе.

Представление — это дитя окна рамы. Более одного представления может быть разделено окном кадра, как в случае окна сплитера. Связь между классом представления, классом окна кадра и `CDocTemplate` классом документа устанавливается объектом. Когда пользователь открывает новое окно или разбивает существующее, фреймворк строит новое представление и прикрепляет его к документу.

Представление может быть прикреплено только к одному документу, но документ может иметь несколько представлений, прилагаемых к нему одновременно - например, если документ отображается в окне сплитера или в нескольких детских окнах в приложении с несколькиминтерфейсом документов (MDI). Приложение может поддерживать различные типы представлений для данного типа документа; например, программа обработки текстов может предоставить как полное текстовое представление документа, так и представление контура, отображающие только заголовки разделов. Эти различные типы представлений могут быть помещены в отдельные окна кадра или в отдельные стекла одного окна кадра, если вы используете окно сплитера.

Представление может отвечать за обработку нескольких различных типов входных данных, таких как ввод клавиатуры, ввод мыши или ввод через перетаскивание, а также команды из меню, панели инструментов или прокрутки баров. Представление получает команды, переадресованные окном кадра. Если представление не обрабатывает данную команду, оно передает команду в связанный с ним документ. Как и все цели командования, представление обрабатывает сообщения с помощью карты сообщений.

Представление отвечает за отображение и изменение данных документа, а не за его хранение. Документ содержит представление с необходимой информацией о своих данных. Вы можете дать доступ к представлению членов данных документа напрямую, или вы можете предоставить функции элемента в классе документа для вызова класса представления.

При изменении данных документа представление, ответственное за изменения, обычно вызывает функцию [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) для документа, `OnUpdate` которая уведомляет все остальные представления, вызывая функцию участника для каждого из них. Реализация по `OnUpdate` умолчанию аннулирует всю область клиента представления. Вы можете переопределить его, чтобы признать недействительными только те регионы области клиента, которые отображают на измененные части документа.

Для `CView`использования, получить класс из `OnDraw` него и реализовать функцию члена для выполнения отображения экрана. Вы также `OnDraw` можете использовать для выполнения печати и печати предварительного просмотра. Платформа обрабатывает цикл печати для печати и просмотра документа.

Представление обрабатывает сообщения прокрутки-бар с [функциями CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll.](../../mfc/reference/cwnd-class.md#onvscroll) Вы можете реализовать обработку сообщений прокрутки `CView` в этих функциях, или вы можете использовать полученный класс [CScrollView](../../mfc/reference/cscrollview-class.md) для обработки прокрутки для вас.

Кроме `CScrollView`того, библиотека класса Фонда Майкрософт `CView`предоставляет девять других классов, полученных из:

- [CCtrlView](../../mfc/reference/cctrlview-class.md), представление, которое позволяет использовать документ - представление архитектуры с деревом, список, и богатые элементы управления дейки.

- [CDaoRecordView](../../mfc/reference/cdaorecordview-class.md), представление, которое отображает записи баз данных в элементах управления диалог-бокс.

- [CEditView](../../mfc/reference/ceditview-class.md), представление, которое обеспечивает простой многолинейный текстовый редактор. Можно использовать `CEditView` объект в качестве элемента управления в диалоговом поле, а также представления о документе.

- [CFormView](../../mfc/reference/cformview-class.md), прокрутка представления, который содержит элементы управления диалог-бокс и основан на диалогшаблон ресурса.

- [CListView](../../mfc/reference/clistview-class.md), представление, которое позволяет использовать документ - представление архитектуры с элементами управления списком.

- [CRecordView](../../mfc/reference/crecordview-class.md), представление, которое отображает записи баз данных в элементах управления диалог-бокс.

- [CRichEditView](../../mfc/reference/cricheditview-class.md), представление, которое позволяет использовать документ - просматривать архитектуру с богатыми элементами управления элементами рекреации.

- [CScrollView](../../mfc/reference/cscrollview-class.md), представление, которое автоматически обеспечивает поддержку прокрутки.

- [CTreeView](../../mfc/reference/ctreeview-class.md), представление, которое позволяет использовать документ - представление архитектуры с элементами управления деревом.

Класс `CView` также имеет производный `CPreviewView`класс реализации под названием , который используется инфраструктурой для выполнения предварительного просмотра печати. Этот класс обеспечивает поддержку функций, уникальных для окна предварительного просмотра, таких как панель инструментов, одно- или двухстраничный предварительный просмотр и масштабирование, т.е. увеличение предварительного изображения. Вам не нужно вызывать или переопределять `CPreviewView`какие-либо функции участника, если вы не хотите реализовать свой собственный интерфейс для предварительного просмотра печати (например, если вы хотите поддерживать редактирование в режиме предварительного просмотра печати). Для получения дополнительной `CView`информации об использовании, [Printing](../../mfc/printing.md) [см.](../../mfc/document-view-architecture.md) Кроме того, [см. Техническое примечание 30](../../mfc/tn030-customizing-printing-and-print-preview.md) для получения более подробной информации о настройке предварительного просмотра печати.

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CView`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

## <a name="cviewcview"></a><a name="cview"></a>CView::CView

Формирует объект `CView`.

```
CView();
```

### <a name="remarks"></a>Remarks

Фрейм вызывает конструктора при создании нового окна кадра или разделении окна. Переопределить функцию участника [OnInitialUpdate](#oninitialupdate) для инициализации представления после присоединения документа.

## <a name="cviewdoprepareprinting"></a><a name="doprepareprinting"></a>CView::DoPreparePrinting

Вызовите эту функцию из переопределения [OnPreparePrinting,](#onprepareprinting) чтобы вызвать диалоговую окно печати и создать контекст устройства принтера.

```
BOOL DoPreparePrinting(CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если печать или печать предварительный просмотр может начаться; 0, если операция отменена.

### <a name="remarks"></a>Remarks

Поведение этой функции зависит от того, требуется ли она `m_bPreview` для печати или предварительного просмотра печати (указано участником параметра *pInfo).* Если файл печатается, эта функция вызывает диалоговую книжаемую печать, используя значения в структуре [CPrintInfo,](../../mfc/reference/cprintinfo-structure.md) на которые указывает *pInfo;* после того, как пользователь закрыл диалоговую коробку, функция создает контекст устройства принтера на основе настроек, указанных пользователем в диалоговом поле, и возвращает контекст устройства через параметр *pInfo.* Контекст устройства используется для печати документа.

При предварительном просмотре файла эта функция создает контекст устройства принтера с помощью текущих настроек принтера; этот контекст устройства используется для имитации принтера во время предварительного просмотра.

## <a name="cviewgetdocument"></a><a name="getdocument"></a>CView::GetDocument

Вызовите эту функцию, чтобы получить указатель на документ представления.

```
CDocument* GetDocument() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [CDocument,](../../mfc/reference/cdocument-class.md) связанный с представлением. NULL, если представление не приложено к документу.

### <a name="remarks"></a>Remarks

Это позволяет называть функции члена документа.

## <a name="cviewisselected"></a><a name="isselected"></a>CView:: Выбрано

Вызывается в рамках, чтобы проверить, выбран ли указанный элемент документа.

```
virtual BOOL IsSelected(const CObject* pDocItem) const;
```

### <a name="parameters"></a>Параметры

*pDocItem*<br/>
Указывает на проверяемый элемент документа.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если выбран указанный элемент документа; в противном случае 0.

### <a name="remarks"></a>Remarks

Реализация этой функции по умолчанию возвращает FALSE. Переопределить эту функцию, если вы реализуете выбор с помощью объектов [CDocItem.](../../mfc/reference/cdocitem-class.md) Вы должны переопределить эту функцию, если в представлении содержатся элементы OLE.

## <a name="cviewonactivateframe"></a><a name="onactivateframe"></a>CView::OnActivateFrame

Вызывается фреймворком при активации или деактивации окна кадра, содержащего представление.

```
virtual void OnActivateFrame(
    UINT nState,
    CFrameWnd* pFrameWnd);
```

### <a name="parameters"></a>Параметры

*nState*<br/>
Определяет, активируется или деактивируется окно рамы. Может иметь одно из следующих значений.

- WA_INACTIVE окно рамы деактивируется.

- WA_ACTIVE окно кадра активируется с помощью какого-то метода, кроме щелчка мыши (например, с помощью интерфейса клавиатуры для выбора окна).

- WA_CLICKACTIVE Окно кадра активируется щелчком мыши

*pFrameWnd*<br/>
Указатель на окно кадра, которое должно быть активировано.

### <a name="remarks"></a>Remarks

Переопределить эту функцию участника, если вы хотите выполнить специальную обработку, когда окно кадра, связанное с представлением, активировано или отключено. Например, [CFormView](../../mfc/reference/cformview-class.md) выполняет этот переопределение, когда он сохраняет и восстанавливает элемент управления, который имеет фокус.

## <a name="cviewonactivateview"></a><a name="onactivateview"></a>CView::OnActivateView

Вызывается фректовой при активации или деактивации представления.

```
virtual void OnActivateView(
    BOOL bActivate,
    CView* pActivateView,
    CView* pDeactiveView);
```

### <a name="parameters"></a>Параметры

*bActivate*<br/>
Указывает, активируется или деактивируется представление.

*pActivateView*<br/>
Точки на объект представления, который активируется.

*pDeactiveView*<br/>
Указывает на объект представления, который деактивируется.

### <a name="remarks"></a>Remarks

Реализация этой функции по умолчанию устанавливает фокус на активированном представлении. Переопределить эту функцию, если вы хотите выполнить специальную обработку, когда представление активировано или отключено. Например, если требуется предоставить специальные визуальные сигналы, отличающие активное представление от неактивных представлений, необходимо изучить параметр *bActivate* и соответствующим образом обновить внешний вид.

Параметры *pActivateView* и *pDeactiveView* указывают на то же представление, если окно основного кадра приложения активировано без изменений в активном представлении – например, если фокус передается из другого приложения в это, а не с одного вида на другой в приложении или при переключении между окнами ребенка MDI. Это позволяет представлению вновь реализовать свою палитру, если это необходимо.

Эти параметры отличаются, когда [CFrameWnd::SetActiveView](../../mfc/reference/cframewnd-class.md#setactiveview) называется с представлением, которое отличается от того, что [CFrameWnd::GetActiveView](../../mfc/reference/cframewnd-class.md#getactiveview) вернется. Чаще всего это происходит с сплиттерными окнами.

## <a name="cviewonbeginprinting"></a><a name="onbeginprinting"></a>CView:OnBeginPrinting

Вызывается платформой в начале задания печати или предварительного просмотра после вызова `OnPreparePrinting` .

```
virtual void OnBeginPrinting(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="remarks"></a>Remarks

Реализация по умолчанию этой функции не выполняет никаких действий. Переопределите эту функцию, чтобы выделить все ресурсы GDI, такие как перья или шрифты, специально для печати. Выберите объекты GDI в контексте устройства в функции-члене [OnPrint](#onprint) для каждой страницы, использующей их. Если вы применяете один и тот же объект представления для вывода изображения на экран и печати, используйте отдельные переменные для ресурсов GDI, необходимых для каждого отображения. Это позволит обновлять экран во время печати.

Эту функцию также можно использовать для инициализаций, которые зависят от свойств контекста принтера. Например, число страниц, необходимых для печати документа, может зависеть от параметров, заданных пользователем в диалоговом окне печати (например, длина страницы). В таком случае нельзя указать длину документа в функции-члене [OnPreparePrinting](#onprepareprinting) (как это обычно делается). Необходимо дождаться создания контекста принтера на основе параметров в диалоговом окне. [OnBeginPrinting](#onbeginprinting) — это первая переопределяемая функция, предоставляющая доступ к объекту [CDC](../../mfc/reference/cdc-class.md) , представляющему контекст устройства принтера. Из этой функции можно задавать длину документа. Обратите внимание, что если к этому моменту длина документа не указана, во время предварительного просмотра полоса прокрутки отображаться не будет.

## <a name="cviewondragenter"></a><a name="ondragenter"></a>CView::OndragEnter

Вызывается фреймворком, когда мышь впервые входит в область непрокрутки в целевом окне падения.

```
virtual DROPEFFECT OnDragEnter(
    COleDataObject* pDataObject,
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на То, что [COleDataObject](../../mfc/reference/coledataobject-class.md) втягивается в область падения представления.

*dwKeyState*<br/>
Содержит состояние ключей модификатора. Это сочетание любого числа: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*Точки*<br/>
Текущее положение мыши относительно области клиента представления.

### <a name="return-value"></a>Возвращаемое значение

Значение из перечисленного типа DROPEFFECT, которое указывает тип капли, которая может произойти, если пользователь уронит объект в этом положении. Тип падения обычно зависит от текущего ключевого состояния, указанного *dwKeyState.* Стандартное отображение ключевых состояний к значениям DROPEFFECT:

- DROPEFFECT_NONE Объект данных не может быть удален в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервером.

- DROPEFFECT_COPY для MK_CONTROL Создает копию упавого объекта.

- DROPEFFECT_MOVE для MK_ALT Создает копию упавого объекта и удаляет исходный объект. Обычно это эффект падения по умолчанию, когда представление может принять этот объект данных.

Для получения дополнительной информации, см. [OCLIENT](../../overview/visual-cpp-samples.md)

### <a name="remarks"></a>Remarks

Реализация по умолчанию заключается в том, чтобы ничего не делать и возвращать DROPEFFECT_NONE.

Переопределить эту функцию, чтобы подготовиться к будущим вызовам к функции участника [OnDragOver.](#ondragover) Любые данные, требуемые от объекта данных, `OnDragOver` должны быть извлечены в это время для последующего использования в функции члена. Представление также должно быть обновлено в это время, чтобы дать пользователю визуальную обратную связь. Для получения дополнительной информации, см. статью [OLE перетаскивания и падения: Реализация целевой капли](../../mfc/drag-and-drop-ole.md#implement-a-drop-target).

## <a name="cviewondragleave"></a><a name="ondragleave"></a>CView::OndragLeave

Вызывается фреймворком во время операции перетаскивания при перемещении мыши из допустимой области падения для этого окна.

```
virtual void OnDragLeave();
```

### <a name="remarks"></a>Remarks

Переизобить эту функцию, если текущее представление необходимо очистить от любых действий, выполняемых во время вызовов [OnDragEnter](#ondragenter) или [OnDragOver,](#ondragover) таких как удаление любых визуальных отзывов пользователей во время перетаскивания объекта.

## <a name="cviewondragover"></a><a name="ondragover"></a>CView::Ondragover

Вызывается фреймворком во время операции перетаскивания, когда мышь перемещается через окно целевой выпадения.

```
virtual DROPEFFECT OnDragOver(
    COleDataObject* pDataObject,
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) перетаскивается по целевому показателю падения.

*dwKeyState*<br/>
Содержит состояние ключей модификатора. Это сочетание любого числа: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*Точки*<br/>
Текущее положение мыши относительно области клиента представления.

### <a name="return-value"></a>Возвращаемое значение

Значение из перечисленного типа DROPEFFECT, которое указывает тип капли, которая может произойти, если пользователь уронит объект в этом положении. Тип падения часто зависит от текущего ключевого состояния, указанного *dwKeyState.* Стандартное отображение ключевых состояний к значениям DROPEFFECT:

- DROPEFFECT_NONE Объект данных не может быть удален в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервером.

- DROPEFFECT_COPY для MK_CONTROL Создает копию упавого объекта.

- DROPEFFECT_MOVE для MK_ALT Создает копию упавого объекта и удаляет исходный объект. Обычно это эффект падения по умолчанию, когда представление может принять объект данных.

Для получения дополнительной информации, см. [OCLIENT](../../overview/visual-cpp-samples.md)

### <a name="remarks"></a>Remarks

Реализация по умолчанию заключается в том, чтобы ничего не делать и возвращать DROPEFFECT_NONE.

Переопределить эту функцию, чтобы дать пользователю визуальную обратную связь во время операции перетаскивания. Поскольку эта функция постоянно вызывается, любой код, содержащийся в ней, должен быть максимально оптимизирован. Для получения дополнительной информации, см. статью [OLE перетаскивания и падения: Реализация целевой капли](../../mfc/drag-and-drop-ole.md#implement-a-drop-target).

## <a name="cviewondragscroll"></a><a name="ondragscroll"></a>CView::OndragScroll

Вызывается по системе перед вызовом [OnDragEnter](#ondragenter) или [OnDragOver,](#ondragover) чтобы определить, находится ли точка в области прокрутки.

```
virtual DROPEFFECT OnDragScroll(
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*dwKeyState*<br/>
Содержит состояние ключей модификатора. Это сочетание любого числа: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*Точки*<br/>
Содержит расположение курсора, в пикселях, по отношению к экрану.

### <a name="return-value"></a>Возвращаемое значение

Значение из перечисленного типа DROPEFFECT, которое указывает тип капли, которая может произойти, если пользователь уронит объект в этом положении. Тип падения обычно зависит от текущего ключевого состояния, указанного *dwKeyState.* Стандартное отображение ключевых состояний к значениям DROPEFFECT:

- DROPEFFECT_NONE Объект данных не может быть удален в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервером.

- DROPEFFECT_COPY для MK_CONTROL Создает копию упавого объекта.

- DROPEFFECT_MOVE для MK_ALT Создает копию упавого объекта и удаляет исходный объект.

- DROPEFFECT_SCROLL указывает на то, что операция перетасктий вот-вот произойдет или происходит в целевом представлении.

Для получения дополнительной информации, см. [OCLIENT](../../overview/visual-cpp-samples.md)

### <a name="remarks"></a>Remarks

Переопределить эту функцию, когда требуется предоставить специальное поведение для этого события. Реализация по умолчанию автоматически прокручивает окна, когда курсор втягивается в область прокрутки по умолчанию внутри границы каждого окна. Для получения дополнительной информации, см. статью [OLE перетаскивания и падения: Реализация целевой капли](../../mfc/drag-and-drop-ole.md#implement-a-drop-target).

## <a name="cviewondraw"></a><a name="ondraw"></a>CView::OnDraw

Вызывается рамками для визуализации изображения документа.

```
virtual void OnDraw(CDC* pDC) = 0;
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст устройства, который будет использоваться для визуализации изображения документа.

### <a name="remarks"></a>Remarks

Платформа вызывает эту функцию для выполнения отображения экрана, печати и предварительного просмотра печати, и она проходит другой контекст устройства в каждом случае. Реализация по умолчанию отсутствует.

Эту функцию необходимо переопределить, чтобы отобразить представление документа. Вы можете сделать графический интерфейс устройства (GDI) звонки с помощью объекта [CDC](../../mfc/reference/cdc-class.md) указал на параметр *pDC.* Перед рисованием можно выбрать ресурсы GDI, такие как ручки или шрифты, в контексте устройства, а затем отменить их. Часто ваш код рисования может быть независим от устройства; то есть, он не требует информации о том, какой тип устройства отображает изображение.

Чтобы оптимизировать чертеж, позвоните функции [rectVisible](../../mfc/reference/cdc-class.md#rectvisible) в контексте устройства, чтобы узнать, будет ли нарисован данный прямоугольник. Если вам необходимо различать обычный дисплей экрана и печать, позвоните в функцию члена [IsPrinting](../../mfc/reference/cdc-class.md#isprinting) контекста устройства.

## <a name="cviewondrop"></a><a name="ondrop"></a>CView::OnDrop

Вызывается инфраструктурой, когда пользователь выпускает объект данных по допустимой цели падения.

```
virtual BOOL OnDrop(
    COleDataObject* pDataObject,
    DROPEFFECT dropEffect,
    CPoint point);
```

### <a name="parameters"></a>Параметры

'pDataObject) указывает на [COleDataObject,](../../mfc/reference/coledataobject-class.md) который упал в целевой показатель падения.

*dropEffect*<br/>
Эффект падения, который пользователь запросил.

- DROPEFFECT_COPY Создает копию объекта данных, сбрасываемого.

- DROPEFFECT_MOVE перемещает объект данных в текущее местоположение мыши.

- DROPEFFECT_LINK создает связь между объектом данных и его сервером.

*Точки*<br/>
Текущее положение мыши относительно области клиента представления.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если падение было успешным; в противном случае 0.

### <a name="remarks"></a>Remarks

Реализация по умолчанию ничего не делает и возвращает FALSE.

Переопределить эту функцию для реализации эффекта падения OLE в клиентскую область представления. Объект данных может быть исследован через *pDataObject* для форматов данных Clipboard и данных, упавв в указанной точке.

> [!NOTE]
> В этом классе представления эта функция не вызывается, если в этом классе представлений есть переопределение [OnDropEx.](#ondropex)

## <a name="cviewondropex"></a><a name="ondropex"></a>CView::OnDropEx

Вызывается инфраструктурой, когда пользователь выпускает объект данных по допустимой цели падения.

```
virtual DROPEFFECT OnDropEx(
    COleDataObject* pDataObject,
    DROPEFFECT dropDefault,
    DROPEFFECT dropList,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на [COleDataObject,](../../mfc/reference/coledataobject-class.md) который упал в целевой показатель падения.

*dropDefault*<br/>
Эффект, который пользователь выбрал для операции сброса по умолчанию, основан на текущем состоянии ключа. Это может быть DROPEFFECT_NONE. Эффекты выпадения обсуждаются в разделе Замечания.

*dropList*<br/>
Список эффектов падения, которые поддерживает источник капли. Значения эффекта drop можно комбинировать с помощью bitwise ИЛИ **(&#124;) **операции. Эффекты выпадения обсуждаются в разделе Замечания.

*Точки*<br/>
Текущее положение мыши относительно области клиента представления.

### <a name="return-value"></a>Возвращаемое значение

Эффект падения, полученный в результате попытки падения в месте, указанном *по пункту.* Это должно быть одно из значений, указанных *dropEffectList*. Эффекты выпадения обсуждаются в разделе Замечания.

### <a name="remarks"></a>Remarks

Реализация по умолчанию заключается в том, чтобы ничего не делать и возвращать значение манекена (-1), чтобы указать, что фреймворк должен вызывать обработчик [OnDrop.](#ondrop)

Переопределить эту функцию для реализации эффекта правильной кнопки мыши перетаскивания и падения. Правой кнопки мыши перетащить и падение обычно отображает меню вариантов, когда правая кнопка мыши выпущен.

Ваш переопределение `OnDropEx` должны запрос для правой кнопки мыши. Вы можете позвонить [в GetKeyState](/windows/win32/api/winuser/nf-winuser-getkeystate) или сохранить правильное состояние кнопки мыши от обработчика [OnDragEnter.](#ondragenter)

- Если правая кнопка мыши не работает, переопределение должно отображать всплывающее меню, которое предлагает поддержку эффектов падения источником падения.

  - Изучите *dropList,* чтобы определить эффекты падения, поддерживаемые источником падения. Включите только эти действия в всплывающем меню.

  - Используйте [SetMenuDefaultItem](/windows/win32/api/winuser/nf-winuser-setmenudefaultitem) для установки действия по умолчанию на основе *dropDefault.*

  - Наконец, примите действие, указанное выбором пользователя из всплывающем меню.

- Если правая кнопка мыши не отпускается, переопределение должно обрабатывать это как стандартный запрос на падение. Используйте эффект падения, указанный в *dropDefault.* Кроме того, переопределение может вернуть значение манекена (-1), чтобы указать, что `OnDrop` будет обрабатывать эту операцию падения.

Используйте *pDataObject* `COleDataObject` для изучения формата данных Clipboard и данных, упавввв в указанной точке.

Эффекты выпадения описывают действие, связанное с операцией падения. Смотрите следующий список эффектов падения:

- DROPEFFECT_NONE падение не будет разрешено.

- DROPEFFECT_COPY будет выполнена операция копирования.

- DROPEFFECT_MOVE будет выполнена операция перемещения.

- DROPEFFECT_LINK Будет установлена связь с упавшими данными с исходными данными.

- DROPEFFECT_SCROLL указывает на то, что операция перетасктий вот-вот произойдет или происходит в цели.

Для получения дополнительной информации об настройке команды меню по умолчанию см. [SetMenuDefaultItem](/windows/win32/api/winuser/nf-winuser-setmenudefaultitem) в SDK Windows и [CMenu::GetSafeHmenu](../../mfc/reference/cmenu-class.md#getsafehmenu) в этом томе.

## <a name="cviewonendprinting"></a><a name="onendprinting"></a>CView:OnendPrinting

Вызывается в рамках после печати или предварительного просмотра документа.

```
virtual void OnEndPrinting(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="remarks"></a>Remarks

Реализация по умолчанию этой функции не выполняет никаких действий. Переувизить эту функцию, чтобы освободить все ресурсы GDI, выделенные в функции участника [OnBeginPrinting.](#onbeginprinting)

## <a name="cviewonendprintpreview"></a><a name="onendprintpreview"></a>CView::OnendPrintPreview

Вызывается по системе, когда пользователь выходит из режима предварительного просмотра печати.

```
virtual void OnEndPrintPreview(
    CDC* pDC,
    CPrintInfo* pInfo,
    POINT point,
    CPreviewView* pView);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

*Точки*<br/>
Укажите точку на странице, которая в последний раз отображалась в режиме предварительного просмотра.

*pView*<br/>
Точки объекта представления, используемого для предварительного просмотра.

### <a name="remarks"></a>Remarks

Реализация этой функции по умолчанию вызывает функцию участника [OnEndPrinting](#onendprinting) и восстанавливает окно основного кадра в состояние, в которое оно находилось до начала предварительного просмотра печати. Переопределить эту функцию для выполнения специальной обработки при завершении режима предварительного просмотра. Например, если вы хотите сохранить положение пользователя в документе при переходе из режима предварительного просмотра в обычный `m_nCurPage` режим отображения, можно прокрутить положение, описанное параметром *точки,* и `CPrintInfo` членом структуры, на которую указывает параметр *pInfo.*

Всегда вызывайте версию `OnEndPrintPreview` базового класса из переопределения, как правило, в конце функции.

## <a name="cviewoninitialupdate"></a><a name="oninitialupdate"></a>CView::OninitialUpdate

Вызывается фреймворком после того, как представление сначала прикрепляется к документу, но до отображения представления.

```
virtual void OnInitialUpdate();
```

### <a name="remarks"></a>Remarks

Реализация этой функции по умолчанию вызывает функцию участника [OnUpdate](#onupdate) без информации о подсказке (т.е. используя значения по умолчанию 0 для параметра *lHint* и NULL для параметра *pHint).* Переопределить эту функцию для выполнения любой одноразовой инициализации, которая требует информации о документе. Например, если в приложении есть документы фиксированного размера, эту функцию можно использовать для инициализации ограничений прокрутки представления на основе размера документа. Если приложение поддерживает документы переменного размера, используйте [OnUpdate](#onupdate) для обновления ограничений прокрутки при каждом изменении документа.

## <a name="cviewonpreparedc"></a><a name="onpreparedc"></a>CView::OnPrepareDC

Вызов в рамки до того, как функция участника [OnDraw](#ondraw) будет отображаться для отображения экрана и до того, как функция участника [OnPrint](#onprint) будет использоваться для каждой страницы во время предварительного просмотра печати или печати.

```
virtual void OnPrepareDC(
    CDC* pDC,
    CPrintInfo* pInfo = NULL);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст устройства, который будет использоваться для визуализации изображения документа.

*pInfo*<br/>
Указывает на структуру [CPrintInfo,](../../mfc/reference/cprintinfo-structure.md) описывающую `OnPrepareDC` текущее задание печати, если он требуется для печати или предварительного просмотра печати; `m_nCurPage` участник указывает страницу, которая должна быть напечатана. Этот параметр `OnPrepareDC` null, если требуется для отображения экрана.

### <a name="remarks"></a>Remarks

Реализация этой функции по умолчанию ничего не делает, если функция требуется для отображения экрана. Однако эта функция переопределяется в производных классах, таких как [CScrollView,](../../mfc/reference/cscrollview-class.md)для настройки атрибутов контекста устройства; следовательно, вы всегда должны вызывать реализацию базового класса в начале переопределения.

Если функция требуется для печати, реализация по умолчанию изучает информацию о странице, хранящуюся в параметре *pInfo.* Если длина документа не указана, предполагается, `OnPrepareDC` что документ будет длиной в одну страницу, и останавливает цикл печати после печати одной страницы. Функция останавливает цикл печати, `m_bContinuePrinting` установив член структуры на FALSE.

Переопределение `OnPrepareDC` по любой из следующих причин:

- Для настройки атрибутов контекста устройства по мере необходимости для указанной страницы. Например, если вам нужно установить режим отображения или другие характеристики контекста устройства, сделайте это в этой функции.

- Для выполнения печатного времени pagination. Обычно вы указываете длину документа при начале печати, используя функцию участника [OnPreparePrinting.](#onprepareprinting) Однако, если вы не знаете заранее, как долго документ (например, при печати неопределенного числа записей из базы данных), переопределить `OnPrepareDC` для проверки конца документа во время его печати. Когда нет больше документа, который будет напечатан, установите `m_bContinuePrinting` `CPrintInfo` член структуры на FALSE.

- Отправка кодов побега на принтер по странице за страницей. Чтобы отправить коды `OnPrepareDC`побега `Escape` из, позвоните функции члена параметра *pDC.*

Позвоните в версию базового класса `OnPrepareDC` в начале переопределения.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#183](../../mfc/codesnippet/cpp/cview-class_1.cpp)]

## <a name="cviewonprepareprinting"></a><a name="onprepareprinting"></a>CView::OnPreparePrinting

Вызывается в рамках перед печатью или просмотром документа.

```
virtual BOOL OnPreparePrinting(CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, чтобы начать печать; 0, если задание печати было отменено.

### <a name="remarks"></a>Remarks

Реализация по умолчанию не выполняет никаких действий.

Эту функцию необходимо переопределить, чтобы включить печать и предварительный просмотр печати. Вызовите функцию участника [DoPreparePrinting,](#doprepareprinting) передав ей параметр *pInfo,* а затем верните его значение возврата; `DoPreparePrinting` отображает диалоговую коробку Print и создает контекст устройства принтера. Если вы хотите инициализировать поле диалога Print со значениями, не входящие в состав по умолчанию, присвоите значения участникам *pInfo.* Например, если вы знаете длину документа, передайте значение функции члена [SetMaxPage](../../mfc/reference/cprintinfo-structure.md#setmaxpage) *pInfo* перед вызовом. `DoPreparePrinting` Это значение отображается в поле To: в диапазоне части диалогового окна Print.

`DoPreparePrinting`не отображает сяокопию в поле print для предварительного задания. Если вы хотите обойти печать диалоговые окна для `m_bPreview` печати работу, убедитесь, что член *pInfo* `DoPreparePrinting`является FALSE, а затем установить его на правду, прежде чем передать его ; сбросить его в FALSE потом.

Если необходимо выполнить инициализации, `CDC` требующие доступа к объекту, представляющему контекст устройства принтера (например, если вам `OnBeginPrinting` нужно знать размер страницы, прежде чем указывать длину документа), переопределить функцию члена.

Если вы хотите установить `m_nNumPreviewPages` значение `m_strPageDesc` параметра *pInfo* или членов, `DoPreparePrinting`сделайте это после вызова. Функция `DoPreparePrinting` участника `m_nNumPreviewPages` устанавливает значение, найденное в приложении. Файл INI `m_strPageDesc` и устанавливает его значение по умолчанию.

### <a name="example"></a>Пример

  Переопределение `OnPreparePrinting` и `DoPreparePrinting` вызов с переопределения, так что фреймворк будет отображать поле диалога печати и создать принтер DC для вас.

[!code-cpp[NVC_MFCDocView#184](../../mfc/codesnippet/cpp/cview-class_2.cpp)]

Если вы знаете, сколько страниц содержит документ, `OnPreparePrinting` установите максимальную страницу перед вызовом. `DoPreparePrinting` В рамках будет отображаться максимальный номер страницы в поле "к" диалоговому окну Печати.

[!code-cpp[NVC_MFCDocView#185](../../mfc/codesnippet/cpp/cview-class_3.cpp)]

## <a name="cviewonprint"></a><a name="onprint"></a>CView::OnPrint

Вызывается в рамках для печати или предварительного просмотра страницы документа.

```
virtual void OnPrint(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на `CPrintInfo` структуру, описывающую текущее задание печати.

### <a name="remarks"></a>Remarks

Для каждой печатной страницы фреймворк вызывает эту функцию сразу после вызова функции участника [OnPrepareDC.](#onpreparedc) Печатаемые страницы `m_nCurPage` указаны членом структуры [CPrintInfo,](../../mfc/reference/cprintinfo-structure.md) на который указывает *pInfo.* Реализация по умолчанию вызывает функцию члена [OnDraw](#ondraw) и передает ее в контекст устройства принтера.

Переопределить эту функцию по любой из следующих причин:

- Разрешить печать многостраничных документов. Рендеринг только часть документа, которая соответствует странице в настоящее время печатается. Если вы используете `OnDraw` для выполнения рендеринга, можно настроить происхождение порта представления таким образом, чтобы печаталась только соответствующая часть документа.

- Чтобы печатное изображение выглядело иначе, чем изображение экрана (т.е. если ваше приложение не является WYSIWYG). Вместо того, чтобы `OnDraw`передавать контекст устройства принтера, используйте контекст устройства для визуализации изображения с помощью атрибутов, не отображаемых на экране.

   Если для печати вам нужны ресурсы GDI, которые не используются для отображения экрана, выберите их в контексте устройства, прежде чем нарисовать и отменить их после этого. Эти ресурсы GDI должны быть выделены в [OnBeginPrinting](#onbeginprinting) и выпущены в [OnEndPrinting](#onendprinting).

- Для реализации заголовков или колондов. Вы все `OnDraw` еще можете использовать для отобрагивания рендеринга, ограничивобласть областью, на которую она может распечатать.

Обратите внимание, что `m_rectDraw` участник параметра *pInfo* описывает печатную область страницы в логических единицах.

Не звоните `OnPrepareDC` в `OnPrint`переопределение; фреймворк `OnPrepareDC` `OnPrint`вызывает автоматически перед вызовом.

### <a name="example"></a>Пример

Ниже приводится скелет для `OnPrint` переопределенной функции:

[!code-cpp[NVC_MFCDocView#186](../../mfc/codesnippet/cpp/cview-class_4.cpp)]

Для другого примера [см. CRichEditView::PrintInsideRect](../../mfc/reference/cricheditview-class.md#printinsiderect).

## <a name="cviewonscroll"></a><a name="onscroll"></a>CView::OnScroll

Вызывается в рамках, чтобы определить, возможно ли прокрутка.

```
virtual BOOL OnScroll(
    UINT nScrollCode,
    UINT nPos,
    BOOL bDoScroll = TRUE);
```

### <a name="parameters"></a>Параметры

*nScrollCode*<br/>
Код прокрутки-бар, указывающий запрос на прокрутку пользователя. Этот параметр состоит из двух частей: низкоупорядоченного байта, определяющего тип прокрутки, происходящих горизонтально, и байта высокого порядка, который определяет тип прокрутки, происходящий вертикально:

- SB_BOTTOM свитки внизу.

- SB_LINEDOWN прокручивает одну строку вниз.

- SB_LINEUP прокручивает одну линию.

- SB_PAGEDOWN прокручивает одну страницу вниз.

- SB_PAGEUP прокручивает одну страницу вверх.

- SB_THUMBTRACK Перетаскивает окно прокрутки в указанное положение. Текущее положение указано в *nPos*.

- SB_TOP свитки сверху.

*Npos*<br/>
Содержит текущее положение окна прокрутки, если код прокрутки-бар SB_THUMBTRACK; в противном случае он не используется. В зависимости от исходного диапазона прокрутки, *nPos* может быть отрицательным и должны быть отлиты в **Int,** если это необходимо.

*bDoScroll*<br/>
Определяет, следует ли выполнять указанное действие прокрутки. Если правда, то прокрутка должна иметь место; если FALSE, то прокрутка не должна произойти.

### <a name="return-value"></a>Возвращаемое значение

Если *bDoScroll* является правдой и вид был на самом деле прокрутки, а затем вернуться ненулевой; в противном случае 0. Если *bDoScroll* является FALSE, а затем вернуть значение, которое вы бы вернули, если *bDoScroll* были правдой, даже если вы на самом деле не делать прокрутки.

### <a name="remarks"></a>Remarks

В одном случае эта функция вызывается фреймворком с *bDoScroll,* установленным к TRUE, когда представление получает сообщение прокрутки. В этом случае следует прокрутить представление. В другом случае эта функция называется *с bDoScroll* установлен false, когда элемент OLE первоначально втягивается в область автоматической прокрутки целевой капли, прежде чем прокрутка на самом деле происходит. В этом случае не следует прокручивать представление.

## <a name="cviewonscrollby"></a><a name="onscrollby"></a>CView::OnScrollby

Вызывается рамкой, когда пользователь просматривает область за пределами настоящего представления документа, либо перетаскивая элемент OLE к текущим границам представления, либо манипулируя вертикальными или горизонтальными прокрутками.

```
virtual BOOL OnScrollBy(
    CSize sizeScroll,
    BOOL bDoScroll = TRUE);
```

### <a name="parameters"></a>Параметры

*размерScroll*<br/>
Количество пикселей прокручивается горизонтально и вертикально.

*bDoScroll*<br/>
Определяет, происходит ли прокрутка представления. Если правда, то прокрутка имеет место; если FALSE, то прокрутка не происходит.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если представление было в состоянии быть прокрутки; в противном случае 0.

### <a name="remarks"></a>Remarks

В выводных классах этот метод проверяет, можно ли прокрутить представление в направлении, запрашиваемом пользователем, и при необходимости обновлять новый регион. Эта функция автоматически вызывается [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) для выполнения фактического запроса на прокрутку.

Реализация этого метода по умолчанию не изменяет представление, но если он `CScrollView`не вызывается, представление не будет прокручиваться в классе произвобоваемых.

Если ширина или высота документа превышает 32767 пикселей, прокрутка `OnScrollBy` прошлого 32767 не удастся, потому что называется с недействительным *аргументом sizeScroll.*

## <a name="cviewonupdate"></a><a name="onupdate"></a>CView::Обновление

Вызвано рамками после изменения документа представления; эта функция называется [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) и позволяет представлению обновлять свой дисплей, чтобы отразить эти изменения.

```
virtual void OnUpdate(
    CView* pSender,
    LPARAM lHint,
    CObject* pHint);
```

### <a name="parameters"></a>Параметры

*pСендер*<br/>
Указывает на точку зрения, которая изменила документ, или NULL, если все представления должны быть обновлены.

*lHint*<br/>
Содержит информацию об изменениях.

*Phint*<br/>
Указывает на объект, хранятую информацию об изменениях.

### <a name="remarks"></a>Remarks

Он также называется по умолчанию реализации [OnInitialUpdate](#oninitialupdate). Реализация по умолчанию аннулирует всю область клиента, отмечая ее для покраски при получении следующего WM_PAINT сообщения. Переопределить эту функцию, если требуется обновить только те области, которые отображают на измененные части документа. Для этого необходимо передать информацию об изменениях, используя параметры подсказки.

Для использования *lHint,* определить специальные значения подсказки, как правило, битовая маска или перечисленный тип, и документ пройти одно из этих значений. Для использования *pHint,* получить подсказочку класса от [CObject](../../mfc/reference/cobject-class.md) и иметь документ передать указатель на объект подсказки; при переопределении, `OnUpdate`используйте [CObject::IsKindOf](../../mfc/reference/cobject-class.md#iskindof) функции члена для определения типа времени выполнения объекта подсказки.

Как правило, вы не `OnUpdate`должны выполнять любой рисунок непосредственно из . Вместо этого определите прямоугольник, описывающий в координатах устройства область, требующую обновления; передать этот прямоугольник [на CWnd::InvalidateRect](../../mfc/reference/cwnd-class.md#invalidaterect). Это приводит к тому, что картина происходит при следующем получении [сообщения WM_PAINT.](/windows/win32/gdi/wm-paint)

Если *lHint* 0 и *pHint* null, документ отправил общее уведомление об обновлении. Если представление получает общее уведомление об обновлении или не может расшифровать подсказки, оно должно аннулировать всю область клиента.

## <a name="see-also"></a>См. также раздел

[MFC Образец MDIDOCVW](../../overview/visual-cpp-samples.md)<br/>
[Класс CWnd](../../mfc/reference/cwnd-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CWnd](../../mfc/reference/cwnd-class.md)<br/>
[Класс CFrameWnd](../../mfc/reference/cframewnd-class.md)<br/>
[Класс CSplitterWnd](../../mfc/reference/csplitterwnd-class.md)<br/>
[Класс CDC](../../mfc/reference/cdc-class.md)<br/>
[Класс CDocTemplate](../../mfc/reference/cdoctemplate-class.md)<br/>
[Класс CDocument](../../mfc/reference/cdocument-class.md)
