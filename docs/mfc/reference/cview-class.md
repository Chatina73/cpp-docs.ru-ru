---
title: Класс CView
ms.date: 11/04/2016
f1_keywords:
- CView
- AFXWIN/CView
- AFXWIN/CView::CView
- AFXWIN/CView::DoPreparePrinting
- AFXWIN/CView::GetDocument
- AFXWIN/CView::IsSelected
- AFXWIN/CView::OnDragEnter
- AFXWIN/CView::OnDragLeave
- AFXWIN/CView::OnDragOver
- AFXWIN/CView::OnDragScroll
- AFXWIN/CView::OnDrop
- AFXWIN/CView::OnDropEx
- AFXWIN/CView::OnInitialUpdate
- AFXWIN/CView::OnPrepareDC
- AFXWIN/CView::OnScroll
- AFXWIN/CView::OnScrollBy
- AFXWIN/CView::OnActivateFrame
- AFXWIN/CView::OnActivateView
- AFXWIN/CView::OnBeginPrinting
- AFXWIN/CView::OnDraw
- AFXWIN/CView::OnEndPrinting
- AFXWIN/CView::OnEndPrintPreview
- AFXWIN/CView::OnPreparePrinting
- AFXWIN/CView::OnPrint
- AFXWIN/CView::OnUpdate
helpviewer_keywords:
- CView [MFC], CView
- CView [MFC], DoPreparePrinting
- CView [MFC], GetDocument
- CView [MFC], IsSelected
- CView [MFC], OnDragEnter
- CView [MFC], OnDragLeave
- CView [MFC], OnDragOver
- CView [MFC], OnDragScroll
- CView [MFC], OnDrop
- CView [MFC], OnDropEx
- CView [MFC], OnInitialUpdate
- CView [MFC], OnPrepareDC
- CView [MFC], OnScroll
- CView [MFC], OnScrollBy
- CView [MFC], OnActivateFrame
- CView [MFC], OnActivateView
- CView [MFC], OnBeginPrinting
- CView [MFC], OnDraw
- CView [MFC], OnEndPrinting
- CView [MFC], OnEndPrintPreview
- CView [MFC], OnPreparePrinting
- CView [MFC], OnPrint
- CView [MFC], OnUpdate
ms.assetid: 9cff3c56-7564-416b-b9a4-71a9254ed755
ms.openlocfilehash: 06c6d4dff28399f3d8e6ac7f46d9ed751850036f
ms.sourcegitcommit: 5cecccba0a96c1b4ccea1f7a1cfd91f259cc5bde
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2019
ms.locfileid: "58775313"
---
# <a name="cview-class"></a>Класс CView

Предоставляет базовую функциональность для определяемых пользователем классов представления.

## <a name="syntax"></a>Синтаксис

```
class AFX_NOVTABLE CView : public CWnd
```

## <a name="members"></a>Участники

### <a name="protected-constructors"></a>Защищенные конструкторы

|name|Описание|
|----------|-----------------|
|[CView::CView](#cview)|Создает объект `CView`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[CView::DoPreparePrinting](#doprepareprinting)|Отображает диалоговое окно печати и создает контекст устройства принтера; При переопределении вызывать `OnPreparePrinting` функция-член.|
|[CView::GetDocument](#getdocument)|Возвращает документ, связанный с представлением.|
|[CView::IsSelected](#isselected)|Проверяет, является ли выбран элемент документа. Требуется для поддержки OLE.|
|[CView::OnDragEnter](#ondragenter)|Вызывается, когда элемент сначала перетаскивается в область перетаскивания и вставки представления.|
|[CView::OnDragLeave](#ondragleave)|Вызывается, когда перетаскиваемый элемент покидает область перетаскивания и вставки представления.|
|[CView::OnDragOver](#ondragover)|Вызывается при перетаскивании элемента в область перетаскивания и вставки элемента представления.|
|[CView::OnDragScroll](#ondragscroll)|Вызывается для определения ли курсор перемещается в область прокрутки окна.|
|[CView::OnDrop](#ondrop)|Вызывается, когда элемент был удален в область перетаскивания и вставки представления, обработчик по умолчанию.|
|[CView::OnDropEx](#ondropex)|Вызывается, когда элемент был удален в область перетаскивания и вставки представления, первичного обработчика.|
|[CView::OnInitialUpdate](#oninitialupdate)|Вызывается после представления впервые присоединяется к документу.|
|[CView::OnPrepareDC](#onpreparedc)|Вызывается перед `OnDraw` функция-член вызывается для отображения на экране или `OnPrint` функция-член вызывается для печати или предварительного просмотра.|
|[CView::OnScroll](#onscroll)|Вызывается при перетаскивании элементов OLE за границы представления.|
|[CView::OnScrollBy](#onscrollby)|Вызывается, когда вышел за представление, содержащее объекты OLE на месте.|

### <a name="protected-methods"></a>Защищенные методы

|name|Описание|
|----------|-----------------|
|[CView::OnActivateFrame](#onactivateframe)|Вызывается, когда фрейм окна, содержащего представление активируется или деактивируется.|
|[CView::OnActivateView](#onactivateview)|Вызывается при активации представления.|
|[CView::OnBeginPrinting](#onbeginprinting)|Вызывается, когда начинает задание печати; Переопределите, чтобы выделить графических устройств (GDI) ресурсов.|
|[CView::OnDraw](#ondraw)|Вызывается для отрисовки изображения для экрана, печати или предварительного просмотра документа. Требуется реализация.|
|[CView::OnEndPrinting](#onendprinting)|Вызывается при завершении задания печати; Переопределение отменить выделение ресурсов GDI.|
|[CView::OnEndPrintPreview](#onendprintpreview)|Вызывается при выходе из режима предварительного просмотра.|
|[CView::OnPreparePrinting](#onprepareprinting)|Вызывается до печати или просмотра; документа переопределение для инициализации диалогового окна печати.|
|[CView::OnPrint](#onprint)|Вызывается для печати или просмотра документа.|
|[CView::OnUpdate](#onupdate)|Вызывается для оповещения представление, которое его документ был изменен.|

## <a name="remarks"></a>Примечания

Представление, прикрепляемые к документу и выступает в качестве посредника между документа и пользователем: представление выводит на экран изображение документа на экран или принтер и интерпретирует ввод данных пользователем как операции после документа.

Представление является дочерним элементом окна фрейма. Несколько представлений могут совместно использовать окно фрейма, как и в случае окна-разделителя. Устанавливается связь между классом представления, класс окна фрейма и класса документов `CDocTemplate` объекта. Когда пользователь открывает новое окно или разбивает существующий один, платформа создает новое представление и присоединяет его к документу.

Представления могут присваиваться только один документ, но документ может иметь несколько представлений, подключенные к ней за один раз — например, если документ отображается в окне разделителя или в нескольких дочерних окон в приложении несколько интерфейса (MDI) документа. Приложение может поддерживать различные типы представлений для типа данного документа; например текстовый процессор может предоставить как можно просмотреть полный текст документа, так и структура, показывающая только заголовки разделов. Типов представлений можно поместить в отдельный кадр windows или в отдельных областях одно окно фрейма при использовании окна разделителя.

Представление может быть отвечает за обработку несколько различных типов входных данных, таких как ввод с клавиатуры, мышь или ввода данных с помощью перетаскивания и вставки, а также команды меню, панелей инструментов и полосы прокрутки. Представление получает команды, пересылаемый окном фрейма. Если представление не обрабатывает определенной команды, он перенаправляет команду в связанный документ. Как и все целевые объекты команд представление обрабатывает сообщения через схему сообщений.

Представление отвечает и для отображения и изменения данных документа, но не для его хранения. В документе содержится представление с необходимые сведения о его данных. Вы можете разрешить доступ для просмотра документа данные-члены непосредственно, или можно предоставить функции-члены в класс документа для представления класса для вызова.

При изменении данных документа, ответственность за изменения представления обычно вызывает [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) функции для документа, который уведомляет о всех остальных представлений путем вызова `OnUpdate` функция-член для Каждый. Реализация по умолчанию `OnUpdate` делает недействительной всю клиентскую область представления. Вы можете переопределить его, чтобы сделать недействительным только те области клиентской области, которые сопоставляются измененные части документа.

Чтобы использовать `CView`, создать класс, производный от него и реализовать `OnDraw` функция-член для выполнения дисплеем. Можно также использовать `OnDraw` для выполнения печати и предварительного просмотра. Платформа обрабатывает цикла печати для печати и предварительного просмотра документа.

Представление обрабатывает сообщения полосы прокрутки с [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) функций-членов. Вы можете реализовать полосы прокрутки обработки сообщений в эти функции, или можно использовать `CView` производный класс [CScrollView](../../mfc/reference/cscrollview-class.md) для обработки прокрутка для вас.

Помимо `CScrollView`, библиотеки Microsoft Foundation Class предоставляет девять классов, производных от `CView`:

- [CCtrlView](../../mfc/reference/cctrlview-class.md), представление, которое позволяет использовать документ - представление архитектуры с помощью дерева, список и широкие возможности редактирования элементов управления.

- [CDaoRecordView](../../mfc/reference/cdaorecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалогового окна.

- [CEditView](../../mfc/reference/ceditview-class.md), представление, которое предоставляет простой многострочный текстовый редактор. Можно использовать `CEditView` объект как элемент управления в диалоговое окно, а также представление для документа.

- [Класс CFormView](../../mfc/reference/cformview-class.md), прокручиваемое представление, который содержит элементы управления диалоговых окон и основан на ресурс шаблона диалоговых окон.

- [CListView](../../mfc/reference/clistview-class.md), представление, которое позволяет использовать документ - представление архитектуры с помощью списка элементов управления.

- [CRecordView](../../mfc/reference/crecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалогового окна.

- [CRichEditView](../../mfc/reference/cricheditview-class.md), представление, которое позволяет использовать документ - представление архитектуры с богатым редактировать элементы управления.

- [CScrollView](../../mfc/reference/cscrollview-class.md), представление, которое автоматически обеспечивает поддержку прокрутки.

- [CTreeView](../../mfc/reference/ctreeview-class.md), представление, которое позволяет использовать документ - представление архитектуры с помощью элементов управления дерева.

`CView` Класс также содержит класс с именем производной реализации `CPreviewView`, который используется платформой для выполнения просмотра печати. Этот класс обеспечивает поддержку функций, уникальных в окно просмотра перед печатью, такие как панель инструментов, постраничный или двойной предварительной версии, и масштабирования, который увеличить изображение. Не нужно вызывать или переопределять какие-либо `CPreviewView`в функции-члены, только если вы хотите реализовать собственный интерфейс для предварительного просмотра печати (например, если вы хотите обеспечить редактирование в режиме предварительного просмотра). Дополнительные сведения об использовании `CView`, см. в разделе [архитектуры Document/View](../../mfc/document-view-architecture.md) и [печати](../../mfc/printing.md). Кроме того, см. в разделе [технические 30 Примечание](../../mfc/tn030-customizing-printing-and-print-preview.md) Дополнительные сведения о настройке предварительного просмотра печати.

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

`CView`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

##  <a name="cview"></a>  CView::CView

Создает объект `CView`.

```
CView();
```

### <a name="remarks"></a>Примечания

Конструктор вызывается платформой при создании нового окна области или разделить окна. Переопределить [OnInitialUpdate](#oninitialupdate) функцию-член для инициализации представления после присоединения документа.

##  <a name="doprepareprinting"></a>  CView::DoPreparePrinting

Вызывайте эту функцию из переопределенный [OnPreparePrinting](#onprepareprinting) для вызова диалогового окна печати и создания контекста принтера.

```
BOOL DoPreparePrinting(CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если можно начать печати или предварительного просмотра; 0, если операция была отменена.

### <a name="remarks"></a>Примечания

Поведение этой функции зависит от того, является ли он вызывается для печати или предварительного просмотра (определяется `m_bPreview` членом *pInfo* параметр). Если файл, печатается, эта функция вызывает диалоговое окно «Печать», используя значения в [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой *pInfo* указывает; после пользователь закрыл диалоговое окно, функция создает контекст устройства принтера на основе параметров пользователя, указанного в диалоговом окне и возвращает этот контекст устройства через *pInfo* параметра. Этот контекст устройства используется для печати документа.

При просмотре файла, эта функция создает контекст устройства принтера с использованием текущих параметров принтера; Этот контекст устройства используется для имитации принтера на этапе предварительной версии.

##  <a name="getdocument"></a>  CView::GetDocument

Вызывайте эту функцию, чтобы получить указатель на просмотр документа.

```
CDocument* GetDocument() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на [CDocument](../../mfc/reference/cdocument-class.md) объекта, связанного с представлением. Значение NULL, если представление не присоединен к документу.

### <a name="remarks"></a>Примечания

Это позволяет вызывать функции-члены документа.

##  <a name="isselected"></a>  CView::IsSelected

Вызывается платформой для проверки того, выбран ли элемент указанный документ.

```
virtual BOOL IsSelected(const CObject* pDocItem) const;
```

### <a name="parameters"></a>Параметры

*pDocItem*<br/>
Указывает элемент документа.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если указанный документ элемент выделен; в противном случае 0.

### <a name="remarks"></a>Примечания

Реализация по умолчанию эта функция возвращает значение FALSE. Переопределите эту функцию, если вы реализуете выделения с помощью [CDocItem](../../mfc/reference/cdocitem-class.md) объектов. Эту функцию необходимо переопределить, если представление содержит элементы OLE.

##  <a name="onactivateframe"></a>  CView::OnActivateFrame

Вызывается платформой при активации или отключении окна фрейма, содержащего представление.

```
virtual void OnActivateFrame(
    UINT nState,
    CFrameWnd* pFrameWnd);
```

### <a name="parameters"></a>Параметры

*nState*<br/>
Указывает, выполняется ли фрейм окна активируется или деактивируется. Он может принимать одно из следующих значений:

- Деактивировать WA_INACTIVE фрейма окна.

- Нажмите кнопку WA_ACTIVE, через некоторые метода, отличного от мыши активируемого окна фрейма (например, с помощью интерфейса клавиатуры для выбора окна).

- По щелчку мыши, активирована WA_CLICKACTIVE окна фрейма

*pFrameWnd*<br/>
Указатель на фрейм окна, который должен быть активирован.

### <a name="remarks"></a>Примечания

Переопределите эту функцию-член, если вы хотите выполнять специальную обработку при активации или отключении окна фрейма, связанный с представлением. Например [CFormView](../../mfc/reference/cformview-class.md) выполняет это переопределение, когда он сохраняет и восстанавливает элемент управления, который имеет фокус.

##  <a name="onactivateview"></a>  CView::OnActivateView

Вызывается платформой, когда представление активируется или деактивируется.

```
virtual void OnActivateView(
    BOOL bActivate,
    CView* pActivateView,
    CView* pDeactiveView);
```

### <a name="parameters"></a>Параметры

*bActivate*<br/>
Указывает, является ли представление активируется или деактивируется.

*pActivateView*<br/>
Указывает объект представления, который активируется.

*pDeactiveView*<br/>
Указывает объект представления, который становится неактивным.

### <a name="remarks"></a>Примечания

Реализация по умолчанию эта функция устанавливает фокус на активации представления. Переопределите эту функцию, если вы хотите выполнять специальную обработку, когда представление активируется или деактивируется. Например, если вы хотите предоставить специальные визуальные подсказки, что отличает активное представление от неактивные представления, вы изучите *bActivate* параметр соответствующим образом обновить внешний вид представления.

*PActivateView* и *pDeactiveView* параметры указывают на то же представление, если окно главного фрейма приложения активирован без изменения в активном представлении — например, если фокус находится в процессе передано из другого приложения в этот узел, а не от одного представления к другому в приложении или при переключении между дочерними окнами MDI. Это позволяет представление, чтобы повторно реализовать его палитры, при необходимости.

Эти параметры отличаются при [CFrameWnd::SetActiveView](../../mfc/reference/cframewnd-class.md#setactiveview) вызывается с представление, которое отличается от что [CFrameWnd::GetActiveView](../../mfc/reference/cframewnd-class.md#getactiveview) вернет. Это чаще всего осуществляется с помощью окна разделителей.

##  <a name="onbeginprinting"></a>  CView::OnBeginPrinting

Вызывается платформой в начале задания печати или предварительного просмотра после вызова `OnPreparePrinting` .

```
virtual void OnBeginPrinting(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="remarks"></a>Примечания

Реализация по умолчанию этой функции не выполняет никаких действий. Переопределите эту функцию, чтобы выделить все ресурсы GDI, такие как перья или шрифты, специально для печати. Выберите объекты GDI в контексте устройства в функции-члене [OnPrint](#onprint) для каждой страницы, использующей их. Если вы применяете один и тот же объект представления для вывода изображения на экран и печати, используйте отдельные переменные для ресурсов GDI, необходимых для каждого отображения. Это позволит обновлять экран во время печати.

Эту функцию также можно использовать для инициализаций, которые зависят от свойств контекста принтера. Например, число страниц, необходимых для печати документа, может зависеть от параметров, заданных пользователем в диалоговом окне печати (например, длина страницы). В таком случае нельзя указать длину документа в функции-члене [OnPreparePrinting](#onprepareprinting) (как это обычно делается). Необходимо дождаться создания контекста принтера на основе параметров в диалоговом окне. [OnBeginPrinting](#onbeginprinting) — это первая переопределяемая функция, предоставляющая доступ к объекту [CDC](../../mfc/reference/cdc-class.md) , представляющему контекст устройства принтера. Из этой функции можно задавать длину документа. Обратите внимание, что если к этому моменту длина документа не указана, во время предварительного просмотра полоса прокрутки отображаться не будет.

##  <a name="ondragenter"></a>  CView::OnDragEnter

Вызывается платформой, когда указатель мыши впервые входит в область прокрутки, окна назначения перетаскивания.

```
virtual DROPEFFECT OnDragEnter(
    COleDataObject* pDataObject,
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , перетаскиваемого в область представления.

*dwKeyState*<br/>
Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*point*<br/>
Текущее положение указателя мыши относительно клиентской области представления.

### <a name="return-value"></a>Возвращаемое значение

Значение из DROPEFFECT перечислимый тип, который указывает тип снижение, которое может возникать, если пользователь удален объект на этой позиции. Тип раскрывающегося обычно зависит от текущего состояния ключа обозначается *dwKeyState*. — Стандартный сопоставление ключевые значения DROPEFFECT:

- Не удалось удалить DROPEFFECT_NONE объект данных в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервер.

- DROPEFFECT_COPY для MK_CONTROL создает копию объекта перетаскиваемый объект.

- DROPEFFECT_MOVE для MK_ALT создает копию объекта перетаскиваемый объект и удаления исходного объекта. Обычно это эффект падающей по умолчанию, если представление может принять этот объект данных.

Дополнительные сведения см. в примере основные понятия Advanced MFC [OCLIENT](../../overview/visual-cpp-samples.md).

### <a name="remarks"></a>Примечания

Реализация по умолчанию — не выполнять никаких действий и возвращают DROPEFFECT_NONE.

Переопределите эту функцию, чтобы подготовить для будущих вызовах к [OnDragOver](#ondragover) функция-член. В настоящее время для дальнейшего использования в должно извлекаться данные, которые требуются из объекта данных `OnDragOver` функция-член. Представления также должны обновляться в настоящее время, чтобы предоставить пользователю визуальную обратную связь. Дополнительные сведения см. в статье [путем перетаскивания: Реализация конечного расположения сброса](../../mfc/drag-and-drop-implementing-a-drop-target.md).

##  <a name="ondragleave"></a>  CView::OnDragLeave

Вызывается платформой при выполнении операции перетаскивания при перемещении мыши за пределы правильную область выпадения для этого окна.

```
virtual void OnDragLeave();
```

### <a name="remarks"></a>Примечания

Переопределите эту функцию, если необходимо очистить все действия, предпринятые во время текущего представления [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) вызовы, такие как удаление любые отзывы visual пользователя, пока объект был перетащен .

##  <a name="ondragover"></a>  CView::OnDragOver

Вызывается платформой при выполнении операции перетаскивания при перемещении указателя мыши по окна цели перетаскивания.

```
virtual DROPEFFECT OnDragOver(
    COleDataObject* pDataObject,
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , перетаскиваемый над целевой объект перетаскивания.

*dwKeyState*<br/>
Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*point*<br/>
Текущее положение указателя мыши относительно клиентской области представления.

### <a name="return-value"></a>Возвращаемое значение

Значение из DROPEFFECT перечислимый тип, который указывает тип снижение, которое может возникать, если пользователь удален объект на этой позиции. Тип раскрывающегося часто зависит от текущего состояния ключа обозначенный *dwKeyState*. — Стандартный сопоставление ключевые значения DROPEFFECT:

- Не удалось удалить DROPEFFECT_NONE объект данных в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервер.

- DROPEFFECT_COPY для MK_CONTROL создает копию объекта перетаскиваемый объект.

- DROPEFFECT_MOVE для MK_ALT создает копию объекта перетаскиваемый объект и удаления исходного объекта. Обычно это эффект падающей по умолчанию, если представление может принять объект данных.

Дополнительные сведения см. в примере основные понятия Advanced MFC [OCLIENT](../../overview/visual-cpp-samples.md).

### <a name="remarks"></a>Примечания

Реализация по умолчанию — не выполнять никаких действий и возвращают DROPEFFECT_NONE.

Переопределите эту функцию, чтобы обеспечить пользователю визуальную обратную связь во время операции перетаскивания. Так как эта функция вызывается непрерывно, любой код, содержащийся в нем необходимо установить как можно больше. Дополнительные сведения см. в статье [путем перетаскивания: Реализация конечного расположения сброса](../../mfc/drag-and-drop-implementing-a-drop-target.md).

##  <a name="ondragscroll"></a>  CView::OnDragScroll

Вызвано структурой перед вызовом [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) для определения, находится ли точка в области прокрутки.

```
virtual DROPEFFECT OnDragScroll(
    DWORD dwKeyState,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*dwKeyState*<br/>
Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: MK_CONTROL, MK_SHIFT, MK_ALT, MK_LBUTTON, MK_MBUTTON и MK_RBUTTON.

*point*<br/>
Содержит расположение курсора, в пикселях, относительно экрана.

### <a name="return-value"></a>Возвращаемое значение

Значение из DROPEFFECT перечислимый тип, который указывает тип снижение, которое может возникать, если пользователь удален объект на этой позиции. Тип раскрывающегося обычно зависит от текущего состояния ключа обозначается *dwKeyState*. — Стандартный сопоставление ключевые значения DROPEFFECT:

- Не удалось удалить DROPEFFECT_NONE объект данных в этом окне.

- DROPEFFECT_LINK для MK_CONTROL &#124; MK_SHIFT создает связь между объектом и его сервер.

- DROPEFFECT_COPY для MK_CONTROL создает копию объекта перетаскиваемый объект.

- DROPEFFECT_MOVE для MK_ALT создает копию объекта перетаскиваемый объект и удаления исходного объекта.

- DROPEFFECT_SCROLL указывает, что операция перетаскивания прокрутки о или происходит в целевое представление.

Дополнительные сведения см. в примере основные понятия Advanced MFC [OCLIENT](../../overview/visual-cpp-samples.md).

### <a name="remarks"></a>Примечания

Переопределите эту функцию, если вы хотите создать специальное поведение для этого события. Реализация по умолчанию автоматическая прокрутка windows, когда указатель перетаскивается в область прокрутки по умолчанию внутри границы каждого окна. Дополнительные сведения см. в статье [путем перетаскивания: Реализация конечного расположения сброса](../../mfc/drag-and-drop-implementing-a-drop-target.md).

##  <a name="ondraw"></a>  CView::OnDraw

Вызывается платформой для отрисовки рисунка документа.

```
virtual void OnDraw(CDC* pDC) = 0;
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст устройства для использования за визуализацию изображения документа.

### <a name="remarks"></a>Примечания

Платформа вызывает эту функцию для выполнения экрана, печати и предварительного просмотра, и он передает контекст другого устройства в каждом конкретном случае. Реализация по умолчанию отсутствует.

Необходимо переопределить эту функцию для отображения представления документа. Можно вызывать графических устройств (GDI) интерфейса с помощью [CDC](../../mfc/reference/cdc-class.md) объекта, на который указывает *pDC* параметра. Можно выбрать ресурсы GDI, такие как перья или шрифты, в контексте устройства перед рисованием и отмените их позже. Часто код рисования может быть зависящих от устройства; то есть он не требует сведения о устройства отображается изображение.

Чтобы оптимизировать Рисование, вызовите [RectVisible](../../mfc/reference/cdc-class.md#rectvisible) контекст устройства, чтобы узнать, является ли данный прямоугольник привязки будет рисоваться функцию-член. Если требуется различать обычные экрана просмотра и печати, вызвать [IsPrinting](../../mfc/reference/cdc-class.md#isprinting) функцию-член контекст устройства.

##  <a name="ondrop"></a>  CView::OnDrop

Вызывается платформой, когда пользователь отпускает объект данных над допустимым конечным расположением сброса.

```
virtual BOOL OnDrop(
    COleDataObject* pDataObject,
    DROPEFFECT dropEffect,
    CPoint point);
```

### <a name="parameters"></a>Параметры

"pDataObject * указывает [COleDataObject](../../mfc/reference/coledataobject-class.md) , удаляется в цели перетаскивания.

*dropEffect*<br/>
Эффект перетаскивания, который пользователь запросил.

- DROPEFFECT_COPY создает копию объекта данных в процессе удаления.

- DROPEFFECT_MOVE перемещает объект данных в текущем положении мыши.

- DROPEFFECT_LINK создает связь между объектом данных и сервером.

*point*<br/>
Текущее положение указателя мыши относительно клиентской области представления.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если освобождение прошло успешно; в противном случае 0.

### <a name="remarks"></a>Примечания

Реализация по умолчанию не выполняет никаких действий и возвращает значение FALSE.

Переопределите эту функцию для реализации эффект перетаскивания OLE на клиентскую область представления. Объект данных можно проверить с помощью *pDataObject* для данных в буфер обмена форматы и данные удалены в указанной точке.

> [!NOTE]
>  Платформа вызывает эту функцию, если имеется переопределение, чтобы [OnDropEx](#ondropex) в этом классе представления.

##  <a name="ondropex"></a>  CView::OnDropEx

Вызывается платформой, когда пользователь отпускает объект данных над допустимым конечным расположением сброса.

```
virtual DROPEFFECT OnDropEx(
    COleDataObject* pDataObject,
    DROPEFFECT dropDefault,
    DROPEFFECT dropList,
    CPoint point);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , удаляется в цели перетаскивания.

*dropDefault*<br/>
Эффект, который пользователь выбрал для операции удаления по умолчанию, на основании текущего состояния ключа. Может быть DROPEFFECT_NONE. Эффекты перетаскивания рассматриваются в разделе "Примечания".

*из раскрывающегося списка*<br/>
Список эффектов перетаскивания, поддерживаемый источником перетаскивания. Значения эффект перетаскивания могут быть объединены с помощью побитовой операции или ( **&#124;**) операции. Эффекты перетаскивания рассматриваются в разделе "Примечания".

*point*<br/>
Текущее положение указателя мыши относительно клиентской области представления.

### <a name="return-value"></a>Возвращаемое значение

Эффект падающей, полученное в результате попытка удаления в расположении, указанном по *точки*. Это должно быть одно из значений, обозначается *dropEffectList*. Эффекты перетаскивания рассматриваются в разделе "Примечания".

### <a name="remarks"></a>Примечания

Реализация по умолчанию является не выполнять никаких действий и возвращают значение фиктивный (-1), чтобы указать, что платформа должна вызывать [OnDrop](#ondrop) обработчика.

Переопределите эту функцию для реализации эффект правой кнопки мыши операции перетаскивания. Перетаскивания правой кнопки мыши обычно отображает меню вариантов при отпускании правой кнопки мыши.

Переопределенный `OnDropEx` необходимо запросить правой кнопки мыши. Можно вызвать [GetKeyState](/windows/desktop/api/winuser/nf-winuser-getkeystate) или сохранить состояние правой кнопки мыши с вашей [OnDragEnter](#ondragenter) обработчика.

- Если правой кнопки мыши не работает, переопределение должно отображаться в контекстном меню, которая предлагает поддержку эффектов перетаскивания источником перетаскивания.

   - Изучите *из раскрывающегося списка* для определения эффектов перетаскивания, поддерживаемых источником перетаскивания. Включите только эти действия во всплывающем меню.

   - Используйте [SetMenuDefaultItem](/windows/desktop/api/winuser/nf-winuser-setmenudefaultitem) задать действие по умолчанию, на основе *dropDefault*.

   - Наконец выполните действия в обозначается выбора пользователя из контекстного меню.

- Если правой кнопки мыши не нажата, переопределенный следует обрабатывать это как стандартный раскрывающийся запрос. Использовать эффект падающей, указанный в *dropDefault*. Кроме того, переопределение может возвращать фиктивное значение (-1), чтобы указать, что `OnDrop` будет обрабатывать эту операцию перетаскивания.

Используйте *pDataObject* изучаемый `COleDataObject` для данных в буфер обмена формата и данные удалены в указанной точке.

Эффекты перетаскивания описывают действие, связанное с операцией перетаскивания. См. ниже приведен список эффектов перетаскивания.

- Не сможет достичь DROPEFFECT_NONE объект перетаскивания.

- DROPEFFECT_COPY, операция копирования будет выполнена.

- Выполняется операция перемещения объект DROPEFFECT_MOVE.

- Будет установлено DROPEFFECT_LINK ссылку по почте из перенесенных данных с исходными данными.

- DROPEFFECT_SCROLL указывает, что операции перетаскивания прокрутки о или происходит в целевом объекте.

Дополнительные сведения об установке команду меню по умолчанию, см. в разделе [SetMenuDefaultItem](/windows/desktop/api/winuser/nf-winuser-setmenudefaultitem) в пакете SDK для Windows и [CMenu::GetSafeHmenu](../../mfc/reference/cmenu-class.md#getsafehmenu) в этот том.

##  <a name="onendprinting"></a>  CView::OnEndPrinting

Вызвано структурой после документ был напечатан или просмотрен.

```
virtual void OnEndPrinting(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="remarks"></a>Примечания

Реализация по умолчанию этой функции не выполняет никаких действий. Переопределите эту функцию, чтобы освободить все ресурсы GDI, выделенных в [OnBeginPrinting](#onbeginprinting) функция-член.

##  <a name="onendprintpreview"></a>  CView::OnEndPrintPreview

Вызывается платформой, когда пользователь выходит из режима предварительного просмотра печати.

```
virtual void OnEndPrintPreview(
    CDC* pDC,
    CPrintInfo* pInfo,
    POINT point,
    CPreviewView* pView);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

*point*<br/>
Указывает точку на странице, который отображался в режиме предварительного просмотра последнего.

*pView*<br/>
Указывает объект представления, используемый для предварительного просмотра.

### <a name="remarks"></a>Примечания

Реализация по умолчанию эта функция вызывает [OnEndPrinting](#onendprinting) функция-член и восстанавливает начала фрейма главного окна в состояние, существовавшее до предварительного просмотра печати. Переопределите эту функцию, чтобы выполнять специальную обработку при завершении режим предварительного просмотра. Например, если вы хотите поддерживать положение пользователя в документе, при переходе из режима предварительного просмотра в обычный режим, можно перейти к позиции, описываемого *точки* параметр и `m_nCurPage` членом `CPrintInfo` структуру, в которой *pInfo* указывает параметр.

Всегда вызывайте метод базового класса версию `OnEndPrintPreview` из переопределение, обычно в конце функции.

##  <a name="oninitialupdate"></a>  CView::OnInitialUpdate

Вызвано структурой после представления впервые присоединяется к документу, но до изначально отображается представление.

```
virtual void OnInitialUpdate();
```

### <a name="remarks"></a>Примечания

Реализация по умолчанию эта функция вызывает [OnUpdate](#onupdate) функции-члена без указания сведений (то есть, используя значения по умолчанию 0 для *lHint* параметр и значение NULL для  *pHint* параметр). Переопределите эту функцию, чтобы выполнить однократную инициализацию, которая требует сведений о документе. Например если приложение имеет документов фиксированного размера, можно использовать эту функцию для инициализации представления прокрутки ограничения в зависимости от размера документа. Если приложение поддерживает документы переменного размера, используйте [OnUpdate](#onupdate) обновить событие прокрутки, ограничивает при каждом изменении документов.

##  <a name="onpreparedc"></a>  CView::OnPrepareDC

Вызвано структурой перед [OnDraw](#ondraw) функция-член вызывается для отображения на экране и перед [OnPrint](#onprint) функция-член вызывается для каждой страницы во время печати или предварительного просмотра.

```
virtual void OnPrepareDC(
    CDC* pDC,
    CPrintInfo* pInfo = NULL);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст устройства для использования за визуализацию изображения документа.

*pInfo*<br/>
Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати, если `OnPrepareDC` , вызывается для печати или предварительного просмотра; `m_nCurPage` указывает странице готов к печати. Этот параметр имеет значение NULL, если `OnPrepareDC` вызывается для отображения на экране.

### <a name="remarks"></a>Примечания

Если функция вызывается для отображения на экране, реализация по умолчанию эта функция не выполняет никаких действий. Тем не менее, эта функция переопределяется в производных классах, таких как [CScrollView](../../mfc/reference/cscrollview-class.md), для настройки атрибутов контекста устройства; следовательно, следует всегда вызывать реализацию базового класса в начале переопределение.

Если функция вызывается для печати, реализация по умолчанию проверяет страницу информацию, хранящуюся в *pInfo* параметра. Если длина документа не задан, `OnPrepareDC` предполагается, что документ, который требуется одной страницей и останавливает печати цикла после печати одну страницу. Каждая функция прекращает печати цикла, задав `m_bContinuePrinting` член структуры значение false.

Переопределить `OnPrepareDC` для любого из следующих причин:

- Для настройки атрибутов контекста устройства, при необходимости для указанной страницы. Например если необходимо задать режим сопоставления или других характеристик контекста устройства, сделать в этой функции.

- Для выполнения разбиения на страницы во время печати. Обычно следует указать длину документа, когда печать начинается с помощью [OnPreparePrinting](#onprepareprinting) функция-член. Тем не менее, если вы не знаете, заранее документа (например, при печати неопределенное количество записей из базы данных), переопределить `OnPrepareDC` проверяемый для части документа во время его вывода на печать. Существует больше документа на печать присвойте `m_bContinuePrinting` членом `CPrintInfo` структуры значение false.

- Для отправки принтера на основе страниц escape-кодов. Для отправки escape-кодами из `OnPrepareDC`, вызовите `Escape` функцию-член *pDC* параметра.

Вызвать базовый класс версию `OnPrepareDC` в начале переопределение.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#183](../../mfc/codesnippet/cpp/cview-class_1.cpp)]

##  <a name="onprepareprinting"></a>  CView::OnPreparePrinting

Вызывается платформой, прежде чем печати или просмотра документа.

```
virtual BOOL OnPreparePrinting(CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pInfo*<br/>
Указывает на структуру [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) , описывающую текущее задание печати.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, чтобы начать печать; 0, если задание печати было отменено.

### <a name="remarks"></a>Примечания

Реализация по умолчанию не выполняет никаких действий.

Необходимо переопределить эту функцию, чтобы включить печать и предварительный просмотр. Вызовите [метод DoPreparePrinting](#doprepareprinting) функция-член, передавая ему *pInfo* параметра и возвращать его возвращаемое значение; `DoPreparePrinting` отображает диалоговое окно «Печать» и создает контекст устройства принтера. Если вы хотите инициализировать диалоговое окно печати с помощью значений, отличных от значения по умолчанию, назначать значения членам *pInfo*. Например, если вы знаете длину документа, передать значение [SetMaxPage](../../mfc/reference/cprintinfo-structure.md#setmaxpage) функцию-член *pInfo* перед вызовом `DoPreparePrinting`. Это значение отображается в поле To: поле в диапазоне части диалогового окна «Печать».

`DoPreparePrinting` не отображает диалоговое окно для просмотра задания печати. Если вы хотите обойти диалоговое окно печати для печати, убедитесь, что `m_bPreview` членом *pInfo* имеет значение FALSE, а затем присвойте ему значение TRUE перед их передачей `DoPreparePrinting`; затем сбросить его в значение FALSE.

Если необходимо инициализаций, которые требуется доступ к `CDC` переопределить объект, представляющий контекст устройства принтера (например, если вам нужно знать размер страницы, перед тем как указать длину документа), `OnBeginPrinting` член функция.

Если вы хотите установить значение `m_nNumPreviewPages` или `m_strPageDesc` членами *pInfo* параметра, сделать это после вызова метода `DoPreparePrinting`. `DoPreparePrinting` Наборы элементов функция `m_nNumPreviewPages` значение, найденное в приложения. INI-файл и задает `m_strPageDesc` к значению по умолчанию.

### <a name="example"></a>Пример

  Переопределить `OnPreparePrinting` и вызвать `DoPreparePrinting` из переопределение, чтобы платформа будет отображать диалоговое окно печати и создаст для вас принтер контроллера домена.

[!code-cpp[NVC_MFCDocView#184](../../mfc/codesnippet/cpp/cview-class_2.cpp)]

Если вы знаете, сколько страниц документа содержит, задать максимальное страницы в `OnPreparePrinting` перед вызовом `DoPreparePrinting`. Платформа будет отображаться номер страницы в поле «Кому» диалогового окна печати.

[!code-cpp[NVC_MFCDocView#185](../../mfc/codesnippet/cpp/cview-class_3.cpp)]

##  <a name="onprint"></a>  CView::OnPrint

Вызывается платформой для печати или просмотра страницы документа.

```
virtual void OnPrint(
    CDC* pDC,
    CPrintInfo* pInfo);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
Указывает на контекст принтера.

*pInfo*<br/>
Указывает на `CPrintInfo` структуру, описывающую текущее задание печати.

### <a name="remarks"></a>Примечания

Для каждой страницы, печать, платформа вызывает эту функцию сразу после вызова [OnPrepareDC](#onpreparedc) функция-член. Печать страницы определяется `m_nCurPage` членом [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой *pInfo* указывает. По умолчанию реализация вызывает [OnDraw](#ondraw) функция-член и передает его в контекст устройства принтера.

Переопределите эту функцию для любого из следующих причин:

- Чтобы разрешить печать многостраничных документов. Отображать только часть документа, соответствующий странице, в настоящий момент печатается. Если вы используете `OnDraw` для выполнения отрисовки, можно настроить начало координат окна просмотра, выводится только соответствующие части документа.

- Чтобы сделать образ печати отличаться от изображения на экране (то есть, если приложение не WYSIWYG). Вместо того чтобы передавать контекст устройства принтера `OnDraw`, используйте контекст устройства для подготовки к просмотру изображения с помощью атрибутов, не отображаемые на экране.

   Если вам требуется ресурсов GDI для печати, которые не используются для отображения на экране, выберите их в контексте устройства перед рисованием и затем снимите флажок. Необходимо выделить эти ресурсы GDI [OnBeginPrinting](#onbeginprinting) и выпущенном в [OnEndPrinting](#onendprinting).

- Чтобы реализовать верхние и нижние колонтитулы. Вы можете продолжать использовать `OnDraw` для выполнения отрисовки за счет ограничения области печати.

Обратите внимание, что `m_rectDraw` членом *pInfo* параметр описывает печатаемой области страницы в логических единицах.

Не вызывайте `OnPrepareDC` в переопределении `OnPrint`; вызывается `OnPrepareDC` автоматически перед вызовом `OnPrint`.

### <a name="example"></a>Пример

Ниже приведен каркас для переопределенный `OnPrint` функции:

[!code-cpp[NVC_MFCDocView#186](../../mfc/codesnippet/cpp/cview-class_4.cpp)]

Еще один пример см. в разделе [CRichEditView::PrintInsideRect](../../mfc/reference/cricheditview-class.md#printinsiderect).

##  <a name="onscroll"></a>  CView::OnScroll

Вызывается платформой, чтобы определить, является ли прокрутка возможна.

```
virtual BOOL OnScroll(
    UINT nScrollCode,
    UINT nPos,
    BOOL bDoScroll = TRUE);
```

### <a name="parameters"></a>Параметры

*nScrollCode*<br/>
Код полосы прокрутки, указывающий пользователя прокрутка запроса. Этот параметр состоит из двух частей: младший байт, который определяет тип возникновения прокрутки по горизонтали, и старший байт, который определяет тип возникновения прокрутки по вертикали:

- SB_BOTTOM выполняет прокрутку вниз.

- Выполняет прокрутку SB_LINEDOWN одну строку вниз.

- Выполняет прокрутку SB_LINEUP одну строку вверх.

- Выполняет прокрутку SB_PAGEDOWN одну страницу вниз.

- Выполняет прокрутку SB_PAGEUP одну страницу вверх.

- SB_THUMBTRACK перетаскивания прокрутите до указанной позиции. Текущая позиция указывается в *nPos*.

- SB_TOP прокрутка к началу страницы.

*nPos*<br/>
Содержит текущее положение полосы прокрутки, если код полосы прокрутки SB_THUMBTRACK; в противном случае он не используется. В зависимости от диапазона начальной прокрутки *nPos* может быть отрицательным и должен быть приведен к **int** при необходимости.

*bDoScroll*<br/>
Определяет, ли его реального выполнения указанного действия прокрутки. Если значение равно TRUE, затем прокрутите список должно быть выполнено; Если значение равно FALSE, затем прокрутите список не должно происходить.

### <a name="return-value"></a>Возвращаемое значение

Если *bDoScroll* имеет значение TRUE, и фактически может прокручиваться представления, возвращается ненулевое значение; в противном случае 0. Если *bDoScroll* равно FALSE, то возвращаемое значение, которое вы бы будут возвращены, если *bDoScroll* были значение TRUE, несмотря на то, что этого не сделать фактически прокрутки.

### <a name="remarks"></a>Примечания

В одном случае эта функция вызывается платформой с *bDoScroll* присвоено значение TRUE, если представление получает сообщение полосы прокрутки. В этом случае фактически должен прокрутить представление. В другом случае эта функция вызывается с *bDoScroll* объекта OLE изначально перетаскивается в область перетаскивания автоматическую прокрутку прежде, чем прокрутка фактическом, равным FALSE. В этом случае вы должны прокручивается фактически представления.

##  <a name="onscrollby"></a>  CView::OnScrollBy

Вызывается платформой, когда пользователь просматривает область за присутствует представления документа, либо путем перетаскивания объекта OLE, от границы текущего представления или изменяя вертикальной или горизонтальной полосы прокрутки.

```
virtual BOOL OnScrollBy(
    CSize sizeScroll,
    BOOL bDoScroll = TRUE);
```

### <a name="parameters"></a>Параметры

*sizeScroll*<br/>
Количество пикселей, которое может прокручиваться по горизонтали и вертикали.

*bDoScroll*<br/>
Определяет, происходит ли прокрутка представления. Если значение равно TRUE, затем прокрутите список выполняются; Если значение равно FALSE, затем прокрутите список не будет.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если представление была возможность прокручивать; в противном случае 0.

### <a name="remarks"></a>Примечания

В производных классах этот метод проверяет, является ли представление прокручиваемые в направлении пользователь запрошено, а затем обновляет новую область, при необходимости. Эта функция вызывается автоматически [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) для выполнения прокрутки самого запроса.

Реализация по умолчанию этот метод не изменяет представление, но если он не вызывается, представление не прокручивается в `CScrollView`-производного класса.

Если документ ширины или высоты превышает 32767 пикселов, прокручивать за 32767 завершится ошибкой, поскольку `OnScrollBy` вызывается с недопустимым *sizeScroll* аргумент.

##  <a name="onupdate"></a>  CView::OnUpdate

Вызывается структурой после изменения этого представления документа; Эта функция вызывается [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) и позволяет представлению обновления экрана для отражения этих изменений.

```
virtual void OnUpdate(
    CView* pSender,
    LPARAM lHint,
    CObject* pHint);
```

### <a name="parameters"></a>Параметры

*pSender*<br/>
Указывает представление, измененный документ, или значение NULL, если все представления должны быть обновлены.

*lHint*<br/>
Содержит сведения об изменениях.

*pHint*<br/>
Указывает на объект хранения информации об изменениях.

### <a name="remarks"></a>Примечания

Он также вызывается реализация по умолчанию [OnInitialUpdate](#oninitialupdate). Реализация по умолчанию делает недействительной всю клиентскую область, помечая его для рисования, когда поступает следующее сообщение WM_PAINT. Переопределите эту функцию, если вы хотите обновлять только те области, которые сопоставляются измененные части документа. Для этого необходимо передать сведения об изменениях, с помощью подсказки параметров.

Чтобы использовать *lHint*, определить специальные указания значений, обычно Битовая маска или перечисляемый тип, и иметь документа передать один из следующих значений. Для использования *pHint*, являются производными от класса указание [CObject](../../mfc/reference/cobject-class.md) и передать указатель на объект подсказки; при переопределении метода документа `OnUpdate`, использовать [CObject::IsKindOf](../../mfc/reference/cobject-class.md#iskindof) функция-член для определения типа времени выполнения объекта подсказку.

Обычно не следует выполнять любой Рисование непосредственно из `OnUpdate`. Вместо этого определения прямоугольника, описывающее область, которая требует обновления; в координатах устройства Передайте этот прямоугольник для [CWnd::InvalidateRect](../../mfc/reference/cwnd-class.md#invalidaterect). В результате рисования для проведена при следующем запуске [WM_PAINT](/windows/desktop/gdi/wm-paint) сообщение.

Если *lHint* равно 0 и *pHint* имеет значение NULL, документ отправил уведомление общего обновления. Если представление получает уведомление общего обновления, или он не может декодировать подсказки, должны объявлять недействительной всей клиентской области.

## <a name="see-also"></a>См. также

[Пример MFC MDIDOCVW](../../overview/visual-cpp-samples.md)<br/>
[Класс CWnd](../../mfc/reference/cwnd-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CWnd](../../mfc/reference/cwnd-class.md)<br/>
[Класс CFrameWnd](../../mfc/reference/cframewnd-class.md)<br/>
[Класс CSplitterWnd](../../mfc/reference/csplitterwnd-class.md)<br/>
[Класс CDC](../../mfc/reference/cdc-class.md)<br/>
[Класс CDocTemplate](../../mfc/reference/cdoctemplate-class.md)<br/>
[Класс CDocument](../../mfc/reference/cdocument-class.md)
