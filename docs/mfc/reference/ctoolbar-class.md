---
description: 'Дополнительные сведения о: CToolBar Class'
title: Класс CToolBar
ms.date: 11/04/2016
f1_keywords:
- CToolBar
- AFXEXT/CToolBar
- AFXEXT/CToolBar::CToolBar
- AFXEXT/CToolBar::CommandToIndex
- AFXEXT/CToolBar::Create
- AFXEXT/CToolBar::CreateEx
- AFXEXT/CToolBar::GetButtonInfo
- AFXEXT/CToolBar::GetButtonStyle
- AFXEXT/CToolBar::GetButtonText
- AFXEXT/CToolBar::GetItemID
- AFXEXT/CToolBar::GetItemRect
- AFXEXT/CToolBar::GetToolBarCtrl
- AFXEXT/CToolBar::LoadBitmap
- AFXEXT/CToolBar::LoadToolBar
- AFXEXT/CToolBar::SetBitmap
- AFXEXT/CToolBar::SetButtonInfo
- AFXEXT/CToolBar::SetButtons
- AFXEXT/CToolBar::SetButtonStyle
- AFXEXT/CToolBar::SetButtonText
- AFXEXT/CToolBar::SetHeight
- AFXEXT/CToolBar::SetSizes
helpviewer_keywords:
- CToolBar [MFC], CToolBar
- CToolBar [MFC], CommandToIndex
- CToolBar [MFC], Create
- CToolBar [MFC], CreateEx
- CToolBar [MFC], GetButtonInfo
- CToolBar [MFC], GetButtonStyle
- CToolBar [MFC], GetButtonText
- CToolBar [MFC], GetItemID
- CToolBar [MFC], GetItemRect
- CToolBar [MFC], GetToolBarCtrl
- CToolBar [MFC], LoadBitmap
- CToolBar [MFC], LoadToolBar
- CToolBar [MFC], SetBitmap
- CToolBar [MFC], SetButtonInfo
- CToolBar [MFC], SetButtons
- CToolBar [MFC], SetButtonStyle
- CToolBar [MFC], SetButtonText
- CToolBar [MFC], SetHeight
- CToolBar [MFC], SetSizes
ms.assetid: e868da26-5e07-4607-9651-e2f863ad9059
ms.openlocfilehash: a4b100af3bcd4aac57cee19bbba9aaded3248188
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97345047"
---
# <a name="ctoolbar-class"></a>Класс CToolBar

Панели элементов управления, имеющие строку растровых кнопок и необязательные разделители.

## <a name="syntax"></a>Синтаксис

```
class CToolBar : public CControlBar
```

## <a name="members"></a>Члены

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[CToolBar:: CToolBar](#ctoolbar)|Формирует объект `CToolBar`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[CToolBar:: Коммандтоиндекс](#commandtoindex)|Возвращает индекс кнопки с заданным ИДЕНТИФИКАТОРом команды.|
|[CToolBar:: Create](#create)|Создает панель инструментов Windows и прикрепляет ее к `CToolBar` объекту.|
|[CToolBar:: Креатикс](#createex)|Создает `CToolBar` объект с дополнительными стилями для внедренного `CToolBarCtrl` объекта.|
|[CToolBar:: Жетбуттонинфо](#getbuttoninfo)|Извлекает идентификатор, стиль и номер изображения кнопки.|
|[CToolBar:: Жетбуттонстиле](#getbuttonstyle)|Возвращает стиль для кнопки.|
|[CToolBar:: Жетбуттонтекст](#getbuttontext)|Извлекает текст, который будет отображаться на кнопке.|
|[CToolBar:: Жетитемид](#getitemid)|Возвращает идентификатор команды для кнопки или разделителя по указанному индексу.|
|[CToolBar:: Жетитемрект](#getitemrect)|Извлекает отображаемый прямоугольник для элемента с заданным индексом.|
|[CToolBar:: Жеттулбарктрл](#gettoolbarctrl)|Разрешает прямой доступ к базовому общему элементу управления.|
|[CToolBar:: Лоадбитмап](#loadbitmap)|Загружает точечный рисунок, содержащий изображения растровой кнопки.|
|[CToolBar:: Лоадтулбар](#loadtoolbar)|Загружает ресурс панели инструментов, созданный с помощью редактора ресурсов.|
|[CToolBar:: Сетбитмап](#setbitmap)|Задает растровое изображение.|
|[CToolBar:: Сетбуттонинфо](#setbuttoninfo)|Задает идентификатор, стиль и номер изображения кнопки.|
|[CToolBar:: Сетбуттонс](#setbuttons)|Задает стили кнопок и индекс изображений кнопок в пределах точечного рисунка.|
|[CToolBar:: Сетбуттонстиле](#setbuttonstyle)|Задает стиль для кнопки.|
|[CToolBar:: Сетбуттонтекст](#setbuttontext)|Задает текст, который будет отображаться на кнопке.|
|[CToolBar:: Сесеигхт](#setheight)|Задает высоту панели инструментов.|
|[CToolBar:: Сетсизес](#setsizes)|Задает размеры кнопок и их растровых изображений.|

## <a name="remarks"></a>Комментарии

Кнопки могут действовать в качестве кнопок, кнопок флажков или переключателей. `CToolBar` объекты обычно являются внедренными элементами объектов окна кадров, производных от класса [CFrameWnd](../../mfc/reference/cframewnd-class.md) или [CMDIFrameWnd](../../mfc/reference/cmdiframewnd-class.md).

[CToolBar:: жеттулбарктрл](#gettoolbarctrl)— функция-член, новая для MFC 4,0, позволяющая воспользоваться преимуществами поддержки общих элементов управления Windows для настройки панелей инструментов и дополнительных функций. `CToolBar` функции элементов предоставляют большую часть функциональных возможностей стандартных элементов управления Windows. Однако при вызове `GetToolBarCtrl` вы можете дать панель инструментов еще большему числу характеристик панелей инструментов Windows 95/98. При вызове `GetToolBarCtrl` будет возвращена ссылка на `CToolBarCtrl` объект. Дополнительные сведения о проектировании панелей инструментов с помощью стандартных элементов управления Windows см. в разделе [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) . Дополнительные общие сведения об общих элементах управления см. в разделе [Общие элементы управления](/windows/win32/Controls/common-controls-intro) в Windows SDK.

Visual C++ предоставляет два метода создания панели инструментов. Чтобы создать ресурс панели инструментов с помощью редактора ресурсов, выполните следующие действия.

1. Создание ресурса панели инструментов.

1. Создайте `CToolBar` объект.

1. Вызовите функцию [CREATE](#create) (или [креатикс](#createex)), чтобы создать панель инструментов Windows и присоединить ее к `CToolBar` объекту.

1. Вызовите [лоадтулбар](#loadtoolbar) , чтобы загрузить ресурс панели инструментов.

В противном случае выполните следующие действия.

1. Создайте `CToolBar` объект.

1. Вызовите функцию [CREATE](#create) (или [креатикс](#createex)), чтобы создать панель инструментов Windows и присоединить ее к `CToolBar` объекту.

1. Вызовите [лоадбитмап](#loadbitmap) , чтобы загрузить точечный рисунок, содержащий изображения кнопки панели инструментов.

1. Вызовите [сетбуттонс](#setbuttons) , чтобы задать стиль кнопки и связать каждую кнопку с изображением в растровом изображении.

Все изображения кнопок на панели инструментов берутся из одного растрового изображения, который должен содержать по одному изображению для каждой кнопки. Все изображения должны иметь одинаковый размер. значение по умолчанию — 16 пикселей в ширину и 15 пикселей в высоком уровне. Изображения должны находиться рядом в точечном рисунке.

`SetButtons`Функция принимает указатель на массив идентификаторов элементов управления и целое число, указывающее количество элементов в массиве. Функция присваивает ИДЕНТИФИКАТОРу каждой кнопки значение соответствующего элемента массива и присваивает каждой кнопке индекс изображения, указывающий расположение изображения кнопки в точечном рисунке. Если элемент массива имеет значение ID_SEPARATOR, индекс изображения не назначается.

Порядок изображений в растровом изображении обычно является порядком, в котором они рисуются на экране, но можно использовать функцию [сетбуттонинфо](#setbuttoninfo) для изменения связи между порядком изображения и порядком отображения.

Все кнопки на панели инструментов имеют одинаковый размер. Значение по умолчанию — 24 x 22 пикселя в соответствии с *рекомендациями интерфейса Windows по проектированию программного обеспечения*. Любое дополнительное пространство между измерениями изображения и кнопки используется для формирования границы вокруг изображения.

Каждая кнопка имеет одно изображение. Различные состояния и стили кнопок (нажаты, вверх, вниз, отключены, отключены и неопределенные) формируются из одного изображения. Хотя точечные рисунки могут иметь любой цвет, наилучшие результаты можно достичь с помощью изображений в черно-белых и оттенках серого цвета.

> [!WARNING]
> `CToolBar` поддерживает точечные рисунки, не более 16 цветов. При загрузке изображения в редактор панелей инструментов Visual Studio автоматически преобразует изображение в 16-цветное растровое изображение, если это необходимо, и отображает предупреждающее сообщение, если изображение было преобразовано. Если вы используете изображение с более чем 16 цветами (с помощью внешнего редактора для редактирования изображения), приложение может вести себя неожиданно.

Кнопки панели инструментов имитируют переключатели по умолчанию. Однако кнопки панели инструментов также могут имитировать кнопки и переключатели флажков. Кнопки флажка имеют три состояния: установлен, снят и неопределенный. Переключатели имеют только два состояния: установлен и снят.

Чтобы задать отдельную кнопку или стиль разделителя, не указывая на массив, вызовите [жетбуттонстиле](#getbuttonstyle) для получения стиля, а затем вызовите [сетбуттонстиле](#setbuttonstyle) вместо `SetButtons` . `SetButtonStyle` наиболее удобен, когда необходимо изменить стиль кнопки во время выполнения.

Чтобы назначить текст для кнопки, вызовите [жетбуттонтекст](#getbuttontext) , чтобы получить текст, отображаемый на кнопке, а затем вызовите [сетбуттонтекст](#setbuttontext) , чтобы задать текст.

Чтобы создать кнопку флажка, присвойте ей стиль TBBS_CHECKBOX или используйте `CCmdUI` `SetCheck` функцию-член объекта в обработчике ON_UPDATE_COMMAND_UI. Вызов `SetCheck` превращает кнопку в флажок. Передайте `SetCheck` аргумент, равный 0, значение 1 для параметра Checked или 2 для неопределенного.

Чтобы создать переключатель, вызовите функцию-член [сетрадио](../../mfc/reference/ccmdui-class.md#setradio) объекта [Поддержка CCmdUI](../../mfc/reference/ccmdui-class.md) из обработчика ON_UPDATE_COMMAND_UI. Передайте `SetRadio` аргумент 0 в качестве неустановленного или ненулевого для установленного флажка. Чтобы обеспечить взаимоисключающее поведение группы переключателей, необходимо иметь обработчики ON_UPDATE_COMMAND_UI для всех кнопок в группе.

Дополнительные сведения об использовании `CToolBar` см. в статье [Реализация панели инструментов MFC](../../mfc/mfc-toolbar-implementation.md) и [техническое примечание 31. панели элементов управления](../../mfc/tn031-control-bars.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CControlBar](../../mfc/reference/ccontrolbar-class.md)

`CToolBar`

## <a name="requirements"></a>Требования

**Заголовок:** афксекст. h

## <a name="ctoolbarcommandtoindex"></a><a name="commandtoindex"></a> CToolBar:: Коммандтоиндекс

Эта функция – член возвращает индекс первой кнопки панели инструментов, начиная с позиции 0, которой соответствует идентификатор команды `nIDFind` .

```
int CommandToIndex(UINT nIDFind) const;
```

### <a name="parameters"></a>Параметры

*нидфинд*<br/>
Идентификатор команды кнопки на панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Индекс кнопки или-1, если у кнопки нет заданного идентификатора команды.

## <a name="ctoolbarcreate"></a><a name="create"></a> CToolBar:: Create

Эта функция-член создает панель инструментов Windows (дочернее окно) и связывает ее с `CToolBar` объектом.

```
virtual BOOL Create(
    CWnd* pParentWnd,
    DWORD dwStyle = WS_CHILD | WS_VISIBLE | CBRS_TOP,
    UINT nID = AFX_IDW_TOOLBAR);
```

### <a name="parameters"></a>Параметры

*ппарентвнд*<br/>
Указатель на окно, которое является родителем панели инструментов.

*двстиле*<br/>
Стиль панели инструментов. Поддерживаются следующие дополнительные стили панелей инструментов:

- Панель управления CBRS_TOP находится в верхней части окна фрейма.

- Панель управления CBRS_BOTTOM находится в нижней части окна фрейма.

- CBRS_NOALIGN панель управления не перемещается при изменении размера родительского элемента.

- В панели управления CBRS_TOOLTIPS отображаются подсказки.

- Панель управления CBRS_SIZE_DYNAMIC является динамической.

- Панель управления CBRS_SIZE_FIXED фиксирована.

- CBRS_FLOATING панель управления является плавающей.

- Строка состояния CBRS_FLYBY отображает сведения о кнопке.

- Панель управления CBRS_HIDE_INPLACE не отображается для пользователя.

*nID*<br/>
Идентификатор дочернего окна панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Он также устанавливает высоту панели инструментов в значение по умолчанию.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#179](../../mfc/codesnippet/cpp/ctoolbar-class_1.cpp)]

## <a name="ctoolbarcreateex"></a><a name="createex"></a> CToolBar:: Креатикс

Вызовите эту функцию, чтобы создать панель инструментов Windows (дочернее окно) и связать ее с `CToolBar` объектом.

```
virtual BOOL CreateEx(
    CWnd* pParentWnd,
    DWORD dwCtrlStyle = TBSTYLE_FLAT,
    DWORD dwStyle = WS_CHILD | WS_VISIBLE | CBRS_ALIGN_TOP,
    CRect rcBorders = CRect(
    0,
    0,
    0,
    0),
    UINT nID = AFX_IDW_TOOLBAR);
```

### <a name="parameters"></a>Параметры

*ппарентвнд*<br/>
Указатель на окно, которое является родителем панели инструментов.

*двктрлстиле*<br/>
Дополнительные стили для создания внедренного объекта [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) . По умолчанию это значение равно TBSTYLE_FLAT. Полный список стилей панели инструментов см. в разделе *двстиле*.

*двстиле*<br/>
Стиль панели инструментов. Список соответствующих стилей см. в разделе [стили элементов управления и кнопок панели инструментов](/windows/win32/Controls/toolbar-control-and-button-styles) в Windows SDK.

*ркбордерс*<br/>
Объект [крект](../../atl-mfc-shared/reference/crect-class.md) , определяющий ширину границ окна панели инструментов. По умолчанию эти границы имеют значения 0, 0, 0, 0, что приводит к последовательному окну панели инструментов без границ.

*nID*<br/>
Идентификатор дочернего окна панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Он также устанавливает высоту панели инструментов в значение по умолчанию.

Используйте `CreateEx` вместо [CREATE](#create), когда определенные стили должны присутствовать во время создания встроенного элемента управления панели инструментов. Например, задайте для *двктрлстиле* TBSTYLE_FLAT &#124; TBSTYLE_TRANSPARENT, чтобы создать панель инструментов, похожую на панели инструментов Internet Explorer 4.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#180](../../mfc/codesnippet/cpp/ctoolbar-class_2.cpp)]

## <a name="ctoolbarctoolbar"></a><a name="ctoolbar"></a> CToolBar:: CToolBar

Эта функция-член конструирует `CToolBar` объект и задает размеры по умолчанию.

```
CToolBar();
```

### <a name="remarks"></a>Комментарии

Вызовите функцию [создания](#create) члена, чтобы создать окно панели инструментов.

## <a name="ctoolbargetbuttoninfo"></a><a name="getbuttoninfo"></a> CToolBar:: Жетбуттонинфо

Эта функция члена получает идентификатор элемента управления, стиль и индекс изображения кнопки панели инструментов или разделителя в расположении, заданном параметром *ниндекс.*

```cpp
void GetButtonInfo(
    int nIndex,
    UINT& nID,
    UINT& nStyle,
    int& iImage) const;
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс кнопки или разделителя панели инструментов, сведения о котором необходимо получить.

*nID*<br/>
Ссылка на значение UINT, заданное в качестве идентификатора команды для кнопки.

*nStyle*<br/>
Ссылка на тип UINT, для которого задан стиль кнопки.

*иимаже*<br/>
Ссылка на целое число, заданное в качестве индекса изображения кнопки в пределах точечного рисунка.

### <a name="remarks"></a>Комментарии

Эти значения присваиваются переменным, на которые ссылаются *NID*, *нстиле* и *иимаже*. Индекс изображения — это позиция изображения в растровом изображении, которая содержит изображения для всех кнопок панели инструментов. Первый образ находится в позиции 0.

Если *ниндекс* задает разделитель, для *иимаже* задается ширина разделителя в пикселях.

## <a name="ctoolbargetbuttonstyle"></a><a name="getbuttonstyle"></a> CToolBar:: Жетбуттонстиле

Вызовите эту функцию-член, чтобы получить стиль кнопки или разделителя на панели инструментов.

```
UINT GetButtonStyle(int nIndex) const;
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс кнопки панели инструментов или стиля разделителя, который требуется получить.

### <a name="return-value"></a>Возвращаемое значение

Стиль кнопки или разделителя, заданного параметром *ниндекс*.

### <a name="remarks"></a>Комментарии

Стиль кнопки определяет, как отображается кнопка и как она реагирует на вводимые пользователем данные. Примеры стилей кнопок см. в разделе [сетбуттонстиле](#setbuttonstyle) .

## <a name="ctoolbargetbuttontext"></a><a name="getbuttontext"></a> CToolBar:: Жетбуттонтекст

Вызовите эту функцию-член, чтобы получить текст, отображаемый на кнопке.

```
CString GetButtonText(int nIndex) const;

void GetButtonText(
    int nIndex,
    CString& rString) const;
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс извлекаемого текста.

*rStr*<br/>
Ссылка на объект [CString](../../atl-mfc-shared/reference/cstringt-class.md) , который будет содержать получаемый текст.

### <a name="return-value"></a>Возвращаемое значение

`CString`Объект, содержащий текст кнопки.

### <a name="remarks"></a>Комментарии

Вторая форма этой функции-члена заполняет `CString` объект строкой текста.

## <a name="ctoolbargetitemid"></a><a name="getitemid"></a> CToolBar:: Жетитемид

Эта функция – член возвращает идентификатор команды для кнопки или разделителя, заданного параметром *ниндекс*.

```
UINT GetItemID(int nIndex) const;
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс элемента, идентификатор которого необходимо получить.

### <a name="return-value"></a>Возвращаемое значение

Идентификатор команды для кнопки или разделителя, заданного параметром *ниндекс*.

### <a name="remarks"></a>Комментарии

Разделители возвращают ID_SEPARATOR.

## <a name="ctoolbargetitemrect"></a><a name="getitemrect"></a> CToolBar:: Жетитемрект

Эта функция-член заполняет `RECT` структуру, адрес которой содержится в *лпрект* , с координатами кнопки или разделителя, заданными параметром *ниндекс*.

```
virtual void GetItemRect(
    int nIndex,
    LPRECT lpRect) const;
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс элемента (кнопки или разделителя), координаты прямоугольника которого необходимо получить.

*лпрект*<br/>
Адрес структуры [Rect](/windows/win32/api/windef/ns-windef-rect) , которая будет содержать координаты элемента.

### <a name="remarks"></a>Комментарии

Координаты задаются в пикселях относительно левого верхнего угла панели инструментов.

Используйте `GetItemRect` , чтобы получить координаты разделителя, который необходимо заменить на поле со списком или другой элемент управления.

### <a name="example"></a>Пример

  См. пример для [CToolBar:: сетсизес](#setsizes).

## <a name="ctoolbargettoolbarctrl"></a><a name="gettoolbarctrl"></a> CToolBar:: Жеттулбарктрл

Эта функция – член обеспечивает прямой доступ к базовому общему элементу управления.

```
CToolBarCtrl& GetToolBarCtrl() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ссылка на объект `CToolBarCtrl`.

### <a name="remarks"></a>Комментарии

Используйте, `GetToolBarCtrl` чтобы воспользоваться преимуществами общего элемента управления панели инструментов Windows и воспользоваться преимуществами [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) поддержки для настройки панелей инструментов.

Дополнительные сведения об использовании стандартных элементов управления см. в разделе [элементы управления](../../mfc/controls-mfc.md) статьи и [Общие элементы управления](/windows/win32/Controls/common-controls-intro) в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocViewSDI#15](../../mfc/codesnippet/cpp/ctoolbar-class_3.cpp)]

## <a name="ctoolbarloadbitmap"></a><a name="loadbitmap"></a> CToolBar:: Лоадбитмап

Вызовите эту функцию члена, чтобы загрузить точечный рисунок, указанный в параметре `lpszResourceName` или `nIDResource` .

```
BOOL LoadBitmap(LPCTSTR lpszResourceName);
BOOL LoadBitmap(UINT nIDResource);
```

### <a name="parameters"></a>Параметры

*лпсзресаурценаме*<br/>
Указатель на имя ресурса загружаемого растрового изображения.

*нидресаурце*<br/>
Идентификатор ресурса загружаемого растрового изображения.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Точечный рисунок должен содержать одно изображение для каждой кнопки панели инструментов. Если размер изображения не является стандартным (16 пикселей в ширину и 15 пикселов), вызовите [сетсизес](#setsizes) , чтобы задать размеры кнопок и их изображения.

> [!WARNING]
> `CToolBar` поддерживает точечные рисунки, не более 16 цветов. При загрузке изображения в редактор панелей инструментов Visual Studio автоматически преобразует изображение в 16-цветное растровое изображение, если это необходимо, и отображает предупреждающее сообщение, если изображение было преобразовано. Если вы используете изображение с более чем 16 цветами (с помощью внешнего редактора для редактирования изображения), приложение может вести себя неожиданно.

## <a name="ctoolbarloadtoolbar"></a><a name="loadtoolbar"></a> CToolBar:: Лоадтулбар

Вызовите эту функцию члена, чтобы загрузить панель инструментов, заданную параметром *лпсзресаурценаме* или *нидресаурце*.

```
BOOL LoadToolBar(LPCTSTR lpszResourceName);
BOOL LoadToolBar(UINT nIDResource);
```

### <a name="parameters"></a>Параметры

*лпсзресаурценаме*<br/>
Указатель на имя ресурса загружаемой панели инструментов.

*нидресаурце*<br/>
Идентификатор ресурса загружаемой панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Дополнительные сведения о создании ресурса панели инструментов см. в разделе [Редактор панелей инструментов](../../windows/toolbar-editor.md) в.

### <a name="example"></a>Пример

  См. пример для [CToolBar:: креатикс](#createex).

## <a name="ctoolbarsetbitmap"></a><a name="setbitmap"></a> CToolBar:: Сетбитмап

Вызовите эту функцию члена, чтобы задать точечный рисунок для панели инструментов.

```
BOOL SetBitmap(HBITMAP hbmImageWell);
```

### <a name="parameters"></a>Параметры

*хбмимажевелл*<br/>
Маркер растрового изображения, связанного с панелью инструментов.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Например, вызовите функцию `SetBitmap` , чтобы изменить изображение точечного рисунка после того, как пользователь выберет действие над документом, который изменяет действие кнопки.

## <a name="ctoolbarsetbuttoninfo"></a><a name="setbuttoninfo"></a> CToolBar:: Сетбуттонинфо

Вызовите эту функцию члена для задания идентификатора команды, стиля и номера изображения кнопки.

```cpp
void SetButtonInfo(
    int nIndex,
    UINT nID,
    UINT nStyle,
    int iImage);
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Отсчитываемый от нуля индекс кнопки или разделителя, для которого задаются сведения.

*nID*<br/>
Значение, для которого задается идентификатор команды кнопки.

*nStyle*<br/>
Новый стиль кнопки. Поддерживаются следующие стили кнопок:

- Стандартная кнопка TBBS_BUTTON (по умолчанию)

- Разделитель TBBS_SEPARATOR

- Кнопка автоматической проверки TBBS_CHECKBOX

- TBBS_GROUP отмечает начало группы кнопок

- TBBS_CHECKGROUP отмечает начало группы кнопок флажка

- TBBS_DROPDOWN создает кнопку раскрывающегося списка.

- TBBS_AUTOSIZE ширина кнопки будет вычисляться на основе текста кнопки, а не размера изображения.

- TBBS_NOPREFIX тексту кнопки не будет назначен префикс ускорителя.

*иимаже*<br/>
Новый индекс для изображения кнопки в пределах точечного рисунка.

### <a name="remarks"></a>Комментарии

Для разделителей, имеющих стиль TBBS_SEPARATOR, эта функция задает ширину разделителя в пикселях до значения, хранящегося в *иимаже*.

> [!NOTE]
> Можно также задать состояния кнопок с помощью параметра *нстиле* . Однако, поскольку состояния кнопок управляются обработчиком [ON_UPDATE_COMMAND_UI](message-map-macros-mfc.md#on_update_command_ui) , любое состояние, заданное с помощью, `SetButtonInfo` будет потеряно во время следующей обработки простоя. Дополнительные сведения см. [в разделе Обновление объектов User-Interface](../../mfc/how-to-update-user-interface-objects.md) и [TN031: панели элементов управления](../../mfc/tn031-control-bars.md) .

Сведения о растровых изображениях и кнопках см. в разделе [CToolBar](../../mfc/reference/ctoolbar-class.md) Overview and [CToolBar:: лоадбитмап](#loadbitmap).

## <a name="ctoolbarsetbuttons"></a><a name="setbuttons"></a> CToolBar:: Сетбуттонс

Эта функция члена устанавливает для каждой кнопки панели инструментов значение, указанное в соответствующем элементе массива *лпидаррай*.

```
BOOL SetButtons(
    const UINT* lpIDArray,
    int nIDCount);
```

### <a name="parameters"></a>Параметры

*лпидаррай*<br/>
Указатель на массив идентификаторов команд. Для выделения пустых кнопок может быть задано значение NULL.

*нидкаунт*<br/>
Число элементов в массиве, на которое указывает *лпидаррай*.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

Если элемент массива имеет значение ID_SEPARATOR, то в соответствующей позицией панели инструментов создается разделитель. Эта функция также устанавливает стиль каждой кнопки в TBBS_BUTTON и стиль разделителя для TBBS_SEPARATOR и назначает индекс изображения каждой кнопке. Индекс изображения задает расположение изображения кнопки в пределах точечного рисунка.

Вам не нужно учитывать разделители в точечном рисунке, так как эта функция не назначает индексы изображений для разделителей. Если на панели инструментов есть кнопки с позициями 0, 1 и 3, а также разделитель в позиции 2, изображения в позициях 0, 1 и 2 в точечном рисунке присваиваются кнопкам в положении 0, 1 и 3 соответственно.

Если *лпидаррай* имеет значение null, эта функция выделяет место для количества элементов, заданных параметром *нидкаунт*. Используйте [сетбуттонинфо](#setbuttoninfo) для задания атрибутов каждого элемента.

## <a name="ctoolbarsetbuttonstyle"></a><a name="setbuttonstyle"></a> CToolBar:: Сетбуттонстиле

Вызовите эту функцию-член для задания стиля кнопки или разделителя или для группирования кнопок.

```cpp
void SetButtonStyle(
    int nIndex,
    UINT nStyle);
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс кнопки или разделителя, сведения о котором должны быть заданы.

*nStyle*<br/>
Стиль кнопки. Поддерживаются следующие стили кнопок:

- Стандартная кнопка TBBS_BUTTON (по умолчанию)

- Разделитель TBBS_SEPARATOR

- Кнопка автоматической проверки TBBS_CHECKBOX

- TBBS_GROUP отмечает начало группы кнопок

- TBBS_CHECKGROUP отмечает начало группы кнопок флажка

- TBBS_DROPDOWN создает кнопку раскрывающегося списка

- TBBS_AUTOSIZE ширина кнопки будет вычисляться на основе текста кнопки, а не размера изображения

- TBBS_NOPREFIX тексту кнопки не будет назначен префикс ускорителя

### <a name="remarks"></a>Комментарии

Стиль кнопки определяет, как отображается кнопка и как она реагирует на вводимые пользователем данные.

Перед вызовом `SetButtonStyle` вызовите функцию члена [жетбуттонстиле](#getbuttonstyle) , чтобы получить стиль кнопки или разделителя.

> [!NOTE]
> Можно также задать состояния кнопок с помощью параметра *нстиле* . Однако, поскольку состояния кнопок управляются обработчиком [ON_UPDATE_COMMAND_UI](message-map-macros-mfc.md#on_update_command_ui) , любое состояние, заданное с помощью, `SetButtonStyle` будет потеряно во время следующей обработки простоя. Дополнительные сведения см. [в разделе Обновление объектов User-Interface](../../mfc/how-to-update-user-interface-objects.md) и [TN031: панели элементов управления](../../mfc/tn031-control-bars.md) .

## <a name="ctoolbarsetbuttontext"></a><a name="setbuttontext"></a> CToolBar:: Сетбуттонтекст

Вызовите эту функцию, чтобы задать текст на кнопке.

```
BOOL SetButtonText(
    int nIndex,
    LPCTSTR lpszText);
```

### <a name="parameters"></a>Параметры

*ниндекс*<br/>
Индекс кнопки, текст которой необходимо задать.

*lpszText*<br/>
Указывает на текст, который должен быть задан для кнопки.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  См. пример для [CToolBar:: жеттулбарктрл](#gettoolbarctrl).

## <a name="ctoolbarsetheight"></a><a name="setheight"></a> CToolBar:: Сесеигхт

Эта функция члена задает высоту панели инструментов в пикселях, указанных в *цихеигхт*.

```cpp
void SetHeight(int cyHeight);
```

### <a name="parameters"></a>Параметры

*цихеигхт*<br/>
Высота панели инструментов в пикселях.

### <a name="remarks"></a>Комментарии

После вызова [сетсизес](#setsizes)используйте эту функцию члена, чтобы переопределить стандартную высоту панели инструментов. Если высота слишком мала, кнопки будут обрезаны внизу.

Если эта функция не вызывается, платформа использует размер кнопки для определения высоты панели инструментов.

## <a name="ctoolbarsetsizes"></a><a name="setsizes"></a> CToolBar:: Сетсизес

Вызовите эту функцию члена, чтобы задать для кнопок панели инструментов размер (в пикселях), указанный в *сизебуттон*.

```cpp
void SetSizes(
    SIZE sizeButton,
    SIZE sizeImage);
```

### <a name="parameters"></a>Параметры

*сизебуттон*<br/>
Размер каждой кнопки в пикселях.

*сизеимаже*<br/>
Размер каждого изображения в пикселях.

### <a name="remarks"></a>Комментарии

Параметр *сизеимаже* должен содержать размер (в пикселях) изображений в битовой карте панели инструментов. Размеры в *сизебуттон* должны быть достаточными для размещения изображения плюс 7 пикселей в ширину и 6 пикселей в высоту. Эта функция также задает высоту панели инструментов в соответствии с кнопками.

Эту функцию члена следует вызывать только для панелей инструментов, которые не соответствуют *рекомендациям интерфейса Windows для рекомендаций по проектированию программного обеспечения* для размеров кнопок и изображений.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCListView#8](../../atl/reference/codesnippet/cpp/ctoolbar-class_4.cpp)]

## <a name="see-also"></a>См. также раздел

[Пример CTRLBARS в MFC](../../overview/visual-cpp-samples.md)<br/>
[Пример DLGCBR32 для MFC](../../overview/visual-cpp-samples.md)<br/>
[Пример ДОККТУЛ для MFC](../../overview/visual-cpp-samples.md)<br/>
[Класс CControlBar](../../mfc/reference/ccontrolbar-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[Класс CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md)<br/>
[Класс CControlBar](../../mfc/reference/ccontrolbar-class.md)
