---
title: Класс Кфонт
ms.date: 11/04/2016
f1_keywords:
- CFont
- AFXWIN/CFont
- AFXWIN/CFont::CFont
- AFXWIN/CFont::CreateFont
- AFXWIN/CFont::CreateFontIndirect
- AFXWIN/CFont::CreatePointFont
- AFXWIN/CFont::CreatePointFontIndirect
- AFXWIN/CFont::FromHandle
- AFXWIN/CFont::GetLogFont
helpviewer_keywords:
- CFont [MFC], CFont
- CFont [MFC], CreateFont
- CFont [MFC], CreateFontIndirect
- CFont [MFC], CreatePointFont
- CFont [MFC], CreatePointFontIndirect
- CFont [MFC], FromHandle
- CFont [MFC], GetLogFont
ms.assetid: 3fad6bfe-d6ce-4ab9-967a-5ce0aa102800
ms.openlocfilehash: c37b2f657105e0065e0cddb2c508424bd6c89b0a
ms.sourcegitcommit: 3e8fa01f323bc5043a48a0c18b855d38af3648d4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "78866611"
---
# <a name="cfont-class"></a>Класс Кфонт

Инкапсулирует шрифт интерфейса графических устройств Windows (GDI) и предоставляет функции-члены для манипулирования этим шрифтом.

## <a name="syntax"></a>Синтаксис

```
class CFont : public CGdiObject
```

## <a name="members"></a>Члены

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Description|
|----------|-----------------|
|[Кфонт:: Кфонт](#cfont)|Формирует объект `CFont`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Description|
|----------|-----------------|
|[Кфонт:: CreateFont](#createfont)|Инициализирует `CFont` с указанными характеристиками.|
|[Кфонт:: CreateFontIndirect](#createfontindirect)|Инициализирует объект `CFont` с характеристиками, заданными в структуре `LOGFONT`.|
|[Кфонт:: Креатепоинтфонт](#createpointfont)|Инициализирует `CFont` с указанной высотой, измеряемой в десятых долях точки, и гарнитуры.|
|[Кфонт:: Креатепоинтфонтиндирект](#createpointfontindirect)|То же, что и `CreateFontIndirect` за исключением того, что высота шрифта измеряется в десятых долях точки, а не на логических единицах.|
|[Кфонт:: FromHandle](#fromhandle)|Возвращает указатель на `CFont` объект при наличии ХФОНТа Windows.|
|[Кфонт:: Жетлогфонт](#getlogfont)|Заполняет `LOGFONT` сведениями о логическом шрифте, присоединенном к объекту `CFont`.|

### <a name="public-operators"></a>Открытые операторы

|Имя|Description|
|----------|-----------------|
|[Кфонт:: operator ХФОНТ](#operator_hfont)|Возвращает маркер шрифта Windows GDI, присоединенный к объекту `CFont`.|

## <a name="remarks"></a>Remarks

Чтобы использовать объект `CFont`, создайте `CFont` объект и прикрепите к нему шрифт Windows с помощью [CreateFont](#createfont), [CreateFontIndirect](#createfontindirect), [креатепоинтфонт](#createpointfont)или [креатепоинтфонтиндирект](#createpointfontindirect), а затем используйте функции-члены объекта для управления шрифтом.

Функции `CreatePointFont` и `CreatePointFontIndirect` часто проще в использовании, чем `CreateFont` или `CreateFontIndirect`, так как они автоматически выполняют преобразование высоты шрифта из кегля в логические устройства.

Дополнительные сведения о `CFont`см. в разделе [графические объекты](../../mfc/graphic-objects.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[кгдиобжект](../../mfc/reference/cgdiobject-class.md)

`CFont`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

##  <a name="cfont"></a>Кфонт:: Кфонт

Формирует объект `CFont`.

```
CFont();
```

### <a name="remarks"></a>Remarks

Перед использованием полученный объект должен быть инициализирован с помощью `CreateFont`, `CreateFontIndirect`, `CreatePointFont`или `CreatePointFontIndirect`.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#70](../../mfc/codesnippet/cpp/cfont-class_1.cpp)]

##  <a name="createfont"></a>Кфонт:: CreateFont

Инициализирует объект `CFont` с указанными характеристиками.

```
BOOL CreateFont(
    int nHeight,
    int nWidth,
    int nEscapement,
    int nOrientation,
    int nWeight,
    BYTE bItalic,
    BYTE bUnderline,
    BYTE cStrikeOut,
    BYTE nCharSet,
    BYTE nOutPrecision,
    BYTE nClipPrecision,
    BYTE nQuality,
    BYTE nPitchAndFamily,
    LPCTSTR lpszFacename);
```

### <a name="parameters"></a>Параметры

*нхеигхт*<br/>
Задает желаемую высоту (в логических единицах) шрифта. Описание см. в `lfHeight` элементе структуры [LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw)в Windows SDK. После преобразования абсолютное значение *нхеигхт* не должно превышать 16 384 единиц устройства. Для всех сравнений высоты, средство сопоставления шрифтов ищет самый крупный шрифт, который не превышает запрошенный размер, или наименьший шрифт, если длина всех шрифтов превышает запрошенный размер.

*нвидс*<br/>
Задает среднюю ширину (в логических единицах) символов в шрифте. Если *нвидс* имеет значение 0, пропорции устройства будут сопоставлены с пропорциями цифр в доступных шрифтах, чтобы найти ближайшее соответствие, которое определяется абсолютным значением разницы.

*нескапемент*<br/>
Задает угол (в единицах 0,1 градусов) между вектором экранирования и осью x поверхности отображения. Вектором экранирования называется линия, посвященная источникам первого и последнего символов в строке. Угол измеряется против часовой стрелки от оси x. Дополнительные сведения см. в описании элемента `lfEscapement` в структуре `LOGFONT` в Windows SDK.

*нориентатион*<br/>
Задает угол (в единицах 0,1 градусов) между базовыми показателями символа и осью x. Угол измеряется против часовой стрелки от оси x для систем координат, в которых y-направление не работает и по часовой стрелке от оси x для систем координат, в которых y-направление вверх.

*нвеигхт*<br/>
Задает насыщенность шрифта (в рисуемых пикселах на 1000). Дополнительные сведения см. в описании элемента *лфвеигхт* в структуре `LOGFONT` в Windows SDK. Описанные значения являются приблизительными; фактический внешний вид зависит от шрифта. Некоторые шрифты имеют только FW_NORMAL, FW_REGULAR и FW_BOLD веса. Если указан FW_DONTCARE, используется вес по умолчанию.

*биталик*<br/>
Указывает, является ли шрифт курсивом.

*бундерлине*<br/>
Указывает, является ли шрифт подчеркнутым.

*кстрикеаут*<br/>
Указывает, являются ли символы в шрифте зачеркнутым. Задает зачеркивание шрифта, если задано ненулевое значение.

*Тип nChar*<br/>
Задает набор символов шрифта, который `lfCharSet` элемент в структуре `LOGFONT` в Windows SDK для списка значений.

Набор символов OEM зависит от системы.

В системе могут существовать шрифты с другими наборами символов. Приложение, использующее шрифт с неизвестным набором символов, не должно пытаться преобразовать или интерпретировать строки, которые должны быть отображены с этим шрифтом. Вместо этого строки должны передаваться непосредственно в драйвер выходного устройства.

Средство сопоставления шрифтов не использует значение DEFAULT_CHARSET. Приложение может использовать это значение, чтобы разрешить имя и размер шрифта для полного описания логического шрифта. Если шрифт с указанным именем не существует, для указанного шрифта можно заменить шрифт из любой кодировки. Чтобы избежать непредвиденных результатов, приложения должны использовать значение DEFAULT_CHARSET экономно.

*наутпреЦисион*<br/>
Задает желаемую точность вывода. Точность вывода определяет, насколько близко выходные данные должны совпадать с высотой, шириной, ориентацией символов, escape-символом и шагом. Список значений и дополнительные сведения см. в описании элемента `lfOutPrecision` в структуре `LOGFONT` в Windows SDK.

*нклиппреЦисион*<br/>
Задает нужную точность обрезки. Точность обрезки определяет, как обрезать символы, находящиеся частично за пределами области обрезки. Список значений см. в описании элемента `lfClipPrecision` в структуре `LOGFONT` в Windows SDK.

Чтобы использовать внедренный шрифт, предназначенный только для чтения, приложение должно указать CLIP_ENCAPSULATE.

Чтобы обеспечить согласованное вращение шрифтов устройства, TrueType и векторов, приложение может использовать оператор OR для объединения CLIP_LH_ANGLES значения с любым другим значением *нклиппреЦисион* . Если установлен бит CLIP_LH_ANGLES, поворот для всех шрифтов зависит от того, является ли ориентация системы координат левой или правой. (Дополнительные сведения о ориентации систем координат см. в описании параметра *нориентатион* .) Если параметр CLIP_LH_ANGLES не установлен, шрифты устройства всегда поворачиваются против часовой стрелки, но поворот других шрифтов зависит от ориентации системы координат.

*нкуалити*<br/>
Задает качество вывода шрифта, которое определяет, насколько аккуратно GDI должна пытаться сопоставить атрибуты логического шрифта с теми, которые соответствуют фактическому физическому шрифту. Список значений см. в описании элемента `lfQuality` в структуре `LOGFONT` в Windows SDK.

*нпитчандфамили*<br/>
Указывает шаг и семейство шрифтов. Список значений и дополнительные сведения см. в описании элемента `lfPitchAndFamily` в структуре `LOGFONT` в Windows SDK.

*lpszFacename*<br/>
`CString` или указатель на строку, завершающуюся нулем, которая указывает имя гарнитуры шрифта. Длина этой строки не должна превышать 30 символов. Функцию Windows [EnumFontFamilies](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesw) можно использовать для перечисления всех доступных в настоящее время шрифтов. Если *лпсзфаценаме* имеет значение null, GDI использует независимую от устройства гарнитуру.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Шрифт можно затем выбрать в качестве шрифта для любого контекста устройства.

Функция `CreateFont` не создает новый шрифт Windows GDI. Он просто выбирает ближайшее соответствие между физическими шрифтами, доступными для GDI.

При создании логического шрифта приложения могут использовать параметры по умолчанию для большинства параметров. Параметры, которым всегда должны быть предоставлены конкретные значения: *нхеигхт* и *лпсзфаценаме*. Если *нхеигхт* и *лпсзфаценаме* не заданы приложением, то создаваемый логический шрифт зависит от устройства.

По завершении работы с объектом `CFont`, созданным функцией `CreateFont`, используйте `CDC::SelectObject`, чтобы выбрать другой шрифт в контексте устройства, а затем удалите объект `CFont`, который больше не нужен.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#71](../../mfc/codesnippet/cpp/cfont-class_2.cpp)]

##  <a name="createfontindirect"></a>Кфонт:: CreateFontIndirect

Инициализирует объект `CFont` с характеристиками, заданными в структуре [LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw).

```
BOOL CreateFontIndirect(const LOGFONT* lpLogFont);
```

### <a name="parameters"></a>Параметры

*лплогфонт*<br/>
Указывает на структуру `LOGFONT`, определяющую характеристики логического шрифта.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Шрифт можно затем выбрать в качестве текущего шрифта для любого устройства.

Этот шрифт имеет характеристики, указанные в структуре [LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw) . Если шрифт выбран с помощью функции-члена [CDC:: SelectObject](../../mfc/reference/cdc-class.md#selectobject) , средство СОПОСТАВЛЕНИЯ шрифтов GDI пытается сопоставить логический шрифт с существующим физическим шрифтом. Если средству сопоставления шрифтов не удается найти точное соответствие для логического шрифта, то он предоставляет альтернативный шрифт, характеристики которого соответствуют максимально возможное количество запрошенных характеристик.

Если объект `CFont`, созданный функцией `CreateFontIndirect`, больше не нужен, используйте `CDC::SelectObject`, чтобы выбрать другой шрифт в контексте устройства, а затем удалите объект `CFont`, который больше не нужен.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#72](../../mfc/codesnippet/cpp/cfont-class_3.cpp)]

##  <a name="createpointfont"></a>Кфонт:: Креатепоинтфонт

Эта функция предоставляет простой способ создания шрифта указанной гарнитуры и кегля.

```
BOOL CreatePointFont(
    int nPointSize,
    LPCTSTR lpszFaceName,
    CDC* pDC = NULL);
```

### <a name="parameters"></a>Параметры

*нпоинтсизе*<br/>
Запрошенная высота шрифта в десятых долях точки. (Например, передайте 120, чтобы запросить 12-точечный шрифт.)

*лпсзфаценаме*<br/>
`CString` или указатель на строку, завершающуюся нулем, которая указывает имя гарнитуры шрифта. Длина этой строки не должна превышать 30 символов. Функцию Windows "EnumFontFamilies" можно использовать для перечисления всех доступных в настоящее время шрифтов. Если *лпсзфаценаме* имеет значение null, GDI использует независимую от устройства гарнитуру.

*pDC*<br/>
Указатель на объект [CDC](../../mfc/reference/cdc-class.md) , который будет использоваться для преобразования высоты в *нпоинтсизе* в логические единицы. Если значение равно NULL, для преобразования используется контекст устройства экрана.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха; в противном случае — 0

### <a name="remarks"></a>Remarks

Она автоматически преобразует высоту в *нпоинтсизе* в логические единицы с помощью объекта CDC, на который указывает *PDC*.

По завершении работы с объектом `CFont`, созданным функцией `CreatePointFont`, сначала выберите шрифт из контекста устройства, а затем удалите объект `CFont`.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#73](../../mfc/codesnippet/cpp/cfont-class_4.cpp)]

##  <a name="createpointfontindirect"></a>Кфонт:: Креатепоинтфонтиндирект

Эта функция аналогична [CreateFontIndirect](#createfontindirect) , за исключением того, что элемент `lfHeight` `LOGFONT` интерпретируется в десятых долях точки, а не в единицах устройства.

```
BOOL CreatePointFontIndirect(
    const LOGFONT* lpLogFont,
    CDC* pDC = NULL);
```

### <a name="parameters"></a>Параметры

*лплогфонт*<br/>
Указывает на структуру [LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw) , определяющую характеристики логического шрифта. Элемент `lfHeight` структуры `LOGFONT` измеряется в десятых долях точки, а не на логических единицах. (Например, задайте для `lfHeight` значение 120, чтобы запросить 12-точечный шрифт.)

*pDC*<br/>
Указатель на объект [CDC](../../mfc/reference/cdc-class.md) , который будет использоваться для преобразования высоты в `lfHeight` в логические единицы. Если значение равно NULL, для преобразования используется контекст устройства экрана.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха; в противном случае — 0

### <a name="remarks"></a>Remarks

Эта функция автоматически преобразует высоту в `lfHeight` в логические единицы с помощью объекта CDC, на который указывает *PDC* , перед передачей структуры `LOGFONT` в Windows.

По завершении работы с объектом `CFont`, созданным функцией `CreatePointFontIndirect`, сначала выберите шрифт из контекста устройства, а затем удалите объект `CFont`.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#74](../../mfc/codesnippet/cpp/cfont-class_5.cpp)]

##  <a name="fromhandle"></a>Кфонт:: FromHandle

Возвращает указатель на `CFont` объект при наличии обработчика ХФОНТ для объекта шрифта Windows GDI.

```
static CFont* PASCAL FromHandle(HFONT hFont);
```

### <a name="parameters"></a>Параметры

*хфонт*<br/>
Маркер ХФОНТ для шрифта Windows.

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект `CFont` в случае успеха; в противном случае — NULL.

### <a name="remarks"></a>Remarks

Если объект `CFont` еще не присоединен к этому обработчику, создается и прикрепляется временный объект `CFont`. Этот временный объект `CFont` действителен только до тех пор, пока приложение не найдет время простоя в цикле событий, во время которого все временные графические объекты будут удалены. Другой способ сказать, что временный объект действителен только во время обработки одного сообщения окна.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#75](../../mfc/codesnippet/cpp/cfont-class_6.cpp)]

##  <a name="getlogfont"></a>Кфонт:: Жетлогфонт

Вызовите эту функцию, чтобы получить копию структуры `LOGFONT` для `CFont`.

```
int GetLogFont(LOGFONT* pLogFont);
```

### <a name="parameters"></a>Параметры

*плогфонт*<br/>
Указатель на структуру [LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw) для получения сведений о шрифте.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если функция выполнена; в противном случае — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#76](../../mfc/codesnippet/cpp/cfont-class_7.cpp)]

##  <a name="operator_hfont"></a>Кфонт:: operator ХФОНТ

Этот оператор используется для получения маркера Windows GDI шрифта, присоединенного к объекту `CFont`.

```
operator HFONT() const;
```

### <a name="return-value"></a>Возвращаемое значение

Маркер объекта шрифта Windows GDI, присоединенного к `CFont` в случае успеха; в противном случае — NULL.

### <a name="remarks"></a>Remarks

Поскольку этот оператор автоматически используется для преобразования из `CFont` в [шрифты и текст](/windows/win32/gdi/fonts-and-text), можно передавать `CFont` объекты функциям, ожидающим хфонтс.

Дополнительные сведения об использовании графических объектов см. в разделе [графические объекты](/windows/win32/gdi/graphic-objects) в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#77](../../mfc/codesnippet/cpp/cfont-class_8.cpp)]

## <a name="see-also"></a>См. также раздел

[Пример MFC для примера HIERSVR](../../overview/visual-cpp-samples.md)<br/>
[Класс CGdiObject](../../mfc/reference/cgdiobject-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)
