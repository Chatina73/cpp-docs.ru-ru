---
description: 'Дополнительные сведения о: Кпен Class'
title: Класс Кпен
ms.date: 11/04/2016
f1_keywords:
- CPen
- AFXWIN/CPen
- AFXWIN/CPen::CPen
- AFXWIN/CPen::CreatePen
- AFXWIN/CPen::CreatePenIndirect
- AFXWIN/CPen::FromHandle
- AFXWIN/CPen::GetExtLogPen
- AFXWIN/CPen::GetLogPen
helpviewer_keywords:
- CPen [MFC], CPen
- CPen [MFC], CreatePen
- CPen [MFC], CreatePenIndirect
- CPen [MFC], FromHandle
- CPen [MFC], GetExtLogPen
- CPen [MFC], GetLogPen
ms.assetid: 93175a3a-d46c-4768-be8d-863254f97a5f
ms.openlocfilehash: b85e0de8a5ce9048851b3f0a8ee5a701e749f0af
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97345151"
---
# <a name="cpen-class"></a>Класс Кпен

Инкапсулирует перо интерфейса графических устройств Windows (GDI).

## <a name="syntax"></a>Синтаксис

```
class CPen : public CGdiObject
```

## <a name="members"></a>Члены

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[Кпен:: Кпен](#cpen)|Формирует объект `CPen`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кпен:: Креатепен](#createpen)|Создает логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти и прикрепляет его к `CPen` объекту.|
|[Кпен:: Креатепениндирект](#createpenindirect)|Создает перо с стилем, шириной и цветом, заданными в структуре [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) , и прикрепляет ее к `CPen` объекту.|
|[Кпен:: FromHandle](#fromhandle)|Возвращает указатель на `CPen` объект при наличии хпена Windows.|
|[Кпен:: Жетекстлогпен](#getextlogpen)|Возвращает базовую структуру [екстлогпен](/windows/win32/api/wingdi/ns-wingdi-extlogpen) .|
|[Кпен:: Жетлогпен](#getlogpen)|Возвращает базовую структуру [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) .|

### <a name="public-operators"></a>Открытые операторы

|Имя|Описание|
|----------|-----------------|
|[Кпен:: operator ХПЕН](#operator_hpen)|Возвращает маркер Windows, присоединенный к `CPen` объекту.|

## <a name="remarks"></a>Комментарии

Дополнительные сведения об использовании см `CPen` . в разделе [графические объекты](../../mfc/graphic-objects.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CGdiObject](../../mfc/reference/cgdiobject-class.md)

`CPen`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

## <a name="cpencpen"></a><a name="cpen"></a> Кпен:: Кпен

Формирует объект `CPen`.

```
CPen();

CPen(
    int nPenStyle,
    int nWidth,
    COLORREF crColor);

CPen(
    int nPenStyle,
    int nWidth,
    const LOGBRUSH* pLogBrush,
    int nStyleCount = 0,
    const DWORD* lpStyle = NULL);
```

### <a name="parameters"></a>Параметры

*нпенстиле*<br/>
Задает стиль пера. Этот параметр в первой версии конструктора может иметь одно из следующих значений:

- PS_SOLID создает сплошное перо.

- PS_DASH создает пунктирное перо. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DOT создает пунктирное перо. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DASHDOT создает перо с чередованием штрихов и точек. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DASHDOTDOT создает перо с чередующимися штрихами и двумя точками. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_NULL создает перо со значением NULL.

- PS_INSIDEFRAME Создает перо, которое рисует линию внутри рамки замкнутых фигур, созданных выходными функциями Windows GDI, которые задают ограничивающий прямоугольник (например, `Ellipse` `Rectangle` `RoundRect` функции-члены,,, `Pie` и `Chord` ). Если этот стиль используется с выходными функциями Windows GDI, которые не задают ограничивающий прямоугольник (например, `LineTo` функцию-член), область рисования пера не ограничивается рамкой.

Вторая версия `CPen` конструктора задает сочетание атрибутов типа, стиля, конца и объединения. Значения из каждой категории должны быть объединены с помощью побитового оператора или (&#124;). Тип пера может иметь одно из следующих значений:

- PS_GEOMETRIC создает геометрическое перо.

- PS_COSMETIC создает косметический перо.

   Вторая версия `CPen` конструктора добавляет следующие стили пера для *нпенстиле*:

- PS_ALTERNATE создает перо, устанавливающее все остальные Пиксели. (Этот стиль применяется только для косметических перьев.)

- PS_USERSTYLE создает перо, использующее массив стилей, предоставленный пользователем.

   Конечная точка может иметь одно из следующих значений:

- PS_ENDCAP_ROUND конечных концов — Round.

- PS_ENDCAP_SQUARE конечных концов — квадрат.

- PS_ENDCAP_FLAT конечные точки имеют плоский режим.

   Соединение может иметь одно из следующих значений:

- PS_JOIN_BEVEL объединения багетны.

- PS_JOIN_MITER соединения добавляются в угловые границы, если они находятся в пределах текущего предела, заданного функцией [сетмитерлимит](/windows/win32/api/wingdi/nf-wingdi-setmiterlimit) . Если соединение превышает это ограничение, оно будет рельефным.

- PS_JOIN_ROUND соединений являются циклическими.

*нвидс*<br/>
Задает ширину пера.

- Для первой версии конструктора, если это значение равно 0, ширина в единицах устройства всегда равна 1 пикселю, независимо от режима сопоставления.

- Для второй версии конструктора, если *нпенстиле* имеет PS_GEOMETRIC, ширина задается в логических единицах. Если *нпенстиле* имеет PS_COSMETIC, ширина должна быть равна 1.

*крколор*<br/>
Содержит цвет RGB для пера.

*плогбруш*<br/>
Указывает на `LOGBRUSH` структуру. Если *нпенстиле* имеет PS_COSMETIC, элемент *лбколор* `LOGBRUSH` структуры определяет цвет пера, а элемент *лбстиле* `LOGBRUSH` структуры должен иметь значение BS_SOLID. Если *нпенстиле* имеет PS_GEOMETRIC, все элементы должны использоваться для указания атрибутов кисти пера.

*нстилекаунт*<br/>
Задает длину массива *лпстиле* в единицах даублеворд. Если *нпенстиле* не PS_USERSTYLE, это значение должно быть равно нулю.

*лпстиле*<br/>
Указывает на массив значений даублеворд. Первое значение задает длину первого тире в определяемом пользователем стиле, второе значение задает длину первого пробела и т. д. Если *нпенстиле* не PS_USERSTYLE, этот указатель должен иметь значение null.

### <a name="remarks"></a>Комментарии

При использовании конструктора без аргументов необходимо инициализировать результирующий `CPen` объект с помощью `CreatePen` `CreatePenIndirect` `CreateStockObject` функций элементов, или.

Если вы используете конструктор, который принимает аргументы, дальнейшая инициализация не требуется. Конструктор с аргументами может вызывать исключение в случае возникновения ошибок, в то время как конструктор без аргументов всегда будет выполнен.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#99](../../mfc/codesnippet/cpp/cpen-class_1.cpp)]

## <a name="cpencreatepen"></a><a name="createpen"></a> Кпен:: Креатепен

Создает логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти и прикрепляет его к `CPen` объекту.

```
BOOL CreatePen(
    int nPenStyle,
    int nWidth,
    COLORREF crColor);

BOOL CreatePen(
    int nPenStyle,
    int nWidth,
    const LOGBRUSH* pLogBrush,
    int nStyleCount = 0,
    const DWORD* lpStyle = NULL);
```

### <a name="parameters"></a>Параметры

*нпенстиле*<br/>
Задает стиль для пера. Список возможных значений см. в описании параметра *нпенстиле* в конструкторе [кпен](#cpen) .

*нвидс*<br/>
Задает ширину пера.

- Для первой версии `CreatePen` , если это значение равно 0, ширина в единицах устройства всегда равна 1 пикселю, независимо от режима сопоставления.

- Для второй версии `CreatePen` , если *нпенстиле* имеет PS_GEOMETRIC, ширина задается в логических единицах. Если *нпенстиле* имеет PS_COSMETIC, ширина должна быть равна 1.

*крколор*<br/>
Содержит цвет RGB для пера.

*плогбруш*<br/>
Указывает на структуру [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) . Если *нпенстиле* имеет PS_COSMETIC, `lbColor` элемент `LOGBRUSH` структуры определяет цвет пера, а элемент *лбстиле* `LOGBRUSH` структуры должен иметь значение BS_SOLID. Если Нпенстиле имеет PS_GEOMETRIC, все элементы должны использоваться для указания атрибутов кисти пера.

*нстилекаунт*<br/>
Задает длину массива *лпстиле* в единицах даублеворд. Если *нпенстиле* не PS_USERSTYLE, это значение должно быть равно нулю.

*лпстиле*<br/>
Указывает на массив значений даублеворд. Первое значение задает длину первого тире в определяемом пользователем стиле, второе значение задает длину первого пробела и т. д. Если *нпенстиле* не PS_USERSTYLE, этот указатель должен иметь значение null.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха или нуль в случае сбоя метода.

### <a name="remarks"></a>Комментарии

Первая версия `CreatePen` инициализирует перо с указанным стилем, шириной и цветом. Перо можно впоследствии выбрать в качестве текущего пера для любого контекста устройства.

У перьев, имеющих ширину больше 1 пикселя, всегда должен быть PS_NULL, PS_SOLID или PS_INSIDEFRAME.

Если у пера есть стиль PS_INSIDEFRAME и цвет, который не соответствует цвету в таблице логических цветов, перо рисуется с помощью раскраски. Стиль пера PS_SOLID нельзя использовать для создания пера с оттенокм цвета. Стиль PS_INSIDEFRAME идентичен PS_SOLID, если ширина пера меньше или равна 1.

Вторая версия `CreatePen` инициализирует логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти. Ширина косметических перьев всегда равна 1; Ширина геометрического пера всегда указывается в универсальных единицах. После того как приложение создаст логическое перо, оно может выбрать это перо в контексте устройства, вызвав функцию [CDC:: SelectObject](../../mfc/reference/cdc-class.md#selectobject) . После выбора пера в контексте устройства его можно использовать для рисования линий и кривых.

- Если *нпенстиле* имеет PS_COSMETIC и PS_USERSTYLE, записи в массиве *лпстиле* задают длины штрихов и пробелов в единицах стиля. Единица стиля определяется устройством, в котором перо используется для рисования линии.

- Если *нпенстиле* имеет PS_GEOMETRIC и PS_USERSTYLE, записи в массиве *лпстиле* указывают длины штрихов и пробелов в логических единицах.

- Если *нпенстиле* имеет PS_ALTERNATE, то единица стиля игнорируется, а все остальные Пиксели задаются.

Если приложению больше не требуется заданное перо, оно должно вызвать функцию-член [кгдиобжект::D елетеобжект](../../mfc/reference/cgdiobject-class.md#deleteobject) или уничтожить объект, `CPen` чтобы ресурс больше не использовался. Приложение не должно удалять перо при выборе пера в контексте устройства.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#100](../../mfc/codesnippet/cpp/cpen-class_2.cpp)]

## <a name="cpencreatepenindirect"></a><a name="createpenindirect"></a> Кпен:: Креатепениндирект

Инициализирует перо, имеющее стиль, ширину и цвет, заданные в структуре, на которую указывает *лплогпен*.

```
BOOL CreatePenIndirect(LPLOGPEN lpLogPen);
```

### <a name="parameters"></a>Параметры

*лплогпен*<br/>
Указывает на структуру [LOGPEN](/windows/win32/api/Wingdi/ns-wingdi-logpen) Windows, содержащую сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если функция выполнена успешно; в противном случае — 0.

### <a name="remarks"></a>Комментарии

У перьев, имеющих ширину больше 1 пикселя, всегда должен быть PS_NULL, PS_SOLID или PS_INSIDEFRAME.

Если у пера есть стиль PS_INSIDEFRAME и цвет, который не соответствует цвету в таблице логических цветов, перо рисуется с помощью раскраски. Стиль PS_INSIDEFRAME идентичен PS_SOLID, если ширина пера меньше или равна 1.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#101](../../mfc/codesnippet/cpp/cpen-class_3.cpp)]

## <a name="cpenfromhandle"></a><a name="fromhandle"></a> Кпен:: FromHandle

Возвращает указатель на объект, `CPen` заданный маркером для объекта пера Windows GDI.

```
static CPen* PASCAL FromHandle(HPEN hPen);
```

### <a name="parameters"></a>Параметры

*хпен*<br/>
`HPEN` Указатель на перо Windows GDI.

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект в случае `CPen` успеха; в противном случае — null.

### <a name="remarks"></a>Комментарии

Если объект `CPen` не прикреплен к дескриптору, создается и прикрепляется временный объект `CPen`. Этот временный `CPen` объект действителен только до тех пор, пока приложение не найдет время простоя в цикле событий, во время которого все временные графические объекты будут удалены. Иными словами, временный объект допустим только во время обработки одного сообщения окна.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#105](../../mfc/codesnippet/cpp/cpen-class_4.cpp)]

## <a name="cpengetextlogpen"></a><a name="getextlogpen"></a> Кпен:: Жетекстлогпен

Возвращает `EXTLOGPEN` базовую структуру.

```
int GetExtLogPen(EXTLOGPEN* pLogPen);
```

### <a name="parameters"></a>Параметры

*плогпен*<br/>
Указывает на структуру [екстлогпен](/windows/win32/api/wingdi/ns-wingdi-extlogpen) , содержащую сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

`EXTLOGPEN`Структура определяет атрибуты стиля, ширины и кисти пера. Например, вызовите метод, `GetExtLogPen` чтобы сопоставить определенный стиль пера.

Сведения об атрибутах пера см. в следующих разделах Windows SDK.

- [GetObject](/windows/win32/api/wingdi/nf-wingdi-getobject)

- [екстлогпен](/windows/win32/api/wingdi/ns-wingdi-extlogpen)

- [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen)

- [ексткреатепен](/windows/win32/api/wingdi/nf-wingdi-extcreatepen)

### <a name="example"></a>Пример

В следующем примере кода демонстрируется вызов метода `GetExtLogPen` для получения атрибутов пера, а затем создается новое косметические перо с тем же цветом.

[!code-cpp[NVC_MFCDocView#102](../../mfc/codesnippet/cpp/cpen-class_5.cpp)]

## <a name="cpengetlogpen"></a><a name="getlogpen"></a> Кпен:: Жетлогпен

Возвращает `LOGPEN` базовую структуру.

```
int GetLogPen(LOGPEN* pLogPen);
```

### <a name="parameters"></a>Параметры

*плогпен*<br/>
Указывает на структуру [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) , которая содержит сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Комментарии

`LOGPEN`Структура определяет стиль, цвет и шаблон пера.

Например, вызовите метод, `GetLogPen` чтобы сопоставить определенный стиль пера.

Сведения об атрибутах пера см. в следующих разделах Windows SDK.

- [GetObject](/windows/win32/api/wingdi/nf-wingdi-getobject)

- [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen)

### <a name="example"></a>Пример

В следующем примере кода показано, как вызвать метод, `GetLogPen` чтобы получить символ пера, а затем создать новое сплошное перо с тем же цветом.

[!code-cpp[NVC_MFCDocView#103](../../mfc/codesnippet/cpp/cpen-class_6.cpp)]

## <a name="cpenoperator-hpen"></a><a name="operator_hpen"></a> Кпен:: operator ХПЕН

Возвращает присоединенный к объекту маркер GDI Windows `CPen` .

```
operator HPEN() const;
```

### <a name="return-value"></a>Возвращаемое значение

В случае успеха — обработчик для объекта Windows GDI, представленного `CPen` объектом; в противном случае — null.

### <a name="remarks"></a>Комментарии

Этот оператор является оператором приведения, который поддерживает прямое использование объекта ХПЕН.

Дополнительные сведения об использовании графических объектов см. в разделе [графические объекты](/windows/win32/gdi/graphic-objects) в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#104](../../mfc/codesnippet/cpp/cpen-class_7.cpp)]

## <a name="see-also"></a>См. также раздел

[Класс Кгдиобжект](../../mfc/reference/cgdiobject-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)<br/>
[Класс Кбруш](../../mfc/reference/cbrush-class.md)
