---
title: Класс Кпен
ms.date: 11/04/2016
f1_keywords:
- CPen
- AFXWIN/CPen
- AFXWIN/CPen::CPen
- AFXWIN/CPen::CreatePen
- AFXWIN/CPen::CreatePenIndirect
- AFXWIN/CPen::FromHandle
- AFXWIN/CPen::GetExtLogPen
- AFXWIN/CPen::GetLogPen
helpviewer_keywords:
- CPen [MFC], CPen
- CPen [MFC], CreatePen
- CPen [MFC], CreatePenIndirect
- CPen [MFC], FromHandle
- CPen [MFC], GetExtLogPen
- CPen [MFC], GetLogPen
ms.assetid: 93175a3a-d46c-4768-be8d-863254f97a5f
ms.openlocfilehash: 952d270acd47b5834a06b731f7875ea2efdd4695
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69502942"
---
# <a name="cpen-class"></a>Класс Кпен

Инкапсулирует перо интерфейса графических устройств Windows (GDI).

## <a name="syntax"></a>Синтаксис

```
class CPen : public CGdiObject
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|name|Описание|
|----------|-----------------|
|[Кпен:: Кпен](#cpen)|Создает объект `CPen`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кпен:: Креатепен](#createpen)|Создает логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти и прикрепляет его `CPen` к объекту.|
|[Кпен:: Креатепениндирект](#createpenindirect)|Создает перо с стилем, шириной и цветом, заданными в структуре [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) , и прикрепляет ее к `CPen` объекту.|
|[Кпен:: FromHandle](#fromhandle)|Возвращает указатель на `CPen` объект при наличии хпена Windows.|
|[Кпен:: Жетекстлогпен](#getextlogpen)|Возвращает базовую структуру [екстлогпен](/windows/win32/api/wingdi/ns-wingdi-extlogpen) .|
|[Кпен:: Жетлогпен](#getlogpen)|Возвращает базовую структуру [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) .|

### <a name="public-operators"></a>Открытые операторы

|name|Описание|
|----------|-----------------|
|[Кпен:: operator ХПЕН](#operator_hpen)|Возвращает маркер Windows, присоединенный к `CPen` объекту.|

## <a name="remarks"></a>Примечания

Дополнительные сведения об использовании `CPen`см. в разделе [графические объекты](../../mfc/graphic-objects.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[кгдиобжект](../../mfc/reference/cgdiobject-class.md)

`CPen`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

##  <a name="cpen"></a>Кпен:: Кпен

Создает объект `CPen`.

```
CPen();

CPen(
    int nPenStyle,
    int nWidth,
    COLORREF crColor);

CPen(
    int nPenStyle,
    int nWidth,
    const LOGBRUSH* pLogBrush,
    int nStyleCount = 0,
    const DWORD* lpStyle = NULL);
```

### <a name="parameters"></a>Параметры

*нпенстиле*<br/>
Задает стиль пера. Этот параметр в первой версии конструктора может иметь одно из следующих значений:

- PS_SOLID создает сплошное перо.

- PS_DASH создает пунктирное перо. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DOT создает точечное перо. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DASHDOT создает перо с чередующимися тире и точками. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_DASHDOTDOT создает перо с чередующимися штрихами и двумя точками. Действует, только если ширина пера равна 1 или меньше, в единицах устройства.

- PS_NULL создает перо со значением NULL.

- PS_INSIDEFRAME Создает перо, которое рисует линию внутри рамки замкнутых фигур, созданных выходными функциями Windows GDI, которые задают ограничивающий прямоугольник ( `Ellipse` `Rectangle` `RoundRect` `Pie`например,,,, и `Chord`функции-члены). Если этот стиль используется с выходными функциями Windows GDI, которые не задают ограничивающий прямоугольник (например, `LineTo` функцию-член), область рисования пера не ограничивается рамкой.

Вторая версия `CPen` конструктора задает сочетание атрибутов типа, стиля, конца и объединения. Значения из каждой категории должны быть объединены с помощью побитового оператора или&#124;(). Тип пера может иметь одно из следующих значений:

- PS_GEOMETRIC создает геометрическое перо.

- PS_COSMETIC создает косметический перо.

   Вторая версия `CPen` конструктора добавляет следующие стили пера для *нпенстиле*:

- PS_ALTERNATE создает перо, устанавливающее все остальные Пиксели. (Этот стиль применяется только для косметических перьев.)

- PS_USERSTYLE создает перо, использующее массив стилей, предоставленный пользователем.

   Конечная точка может иметь одно из следующих значений:

- Конечные точки PS_ENDCAP_ROUND имеют округление.

- Конечные точки PS_ENDCAP_SQUARE имеют квадрат.

- PS_ENDCAP_FLAT конечные точки имеют плоский режим.

   Соединение может иметь одно из следующих значений:

- PS_JOIN_BEVELные объединения будут багетными.

- Соединения PS_JOIN_MITER размещаются в угловых подразделении, если они находятся в пределах текущего предела, заданного функцией [сетмитерлимит](/windows/win32/api/wingdi/nf-wingdi-setmiterlimit) . Если соединение превышает это ограничение, оно будет рельефным.

- PS_JOIN_ROUNDные объединения являются циклическими.

*нвидс*<br/>
Задает ширину пера.

- Для первой версии конструктора, если это значение равно 0, ширина в единицах устройства всегда равна 1 пикселю, независимо от режима сопоставления.

- Для второй версии конструктора, если *нпенстиле* имеет значение PS_GEOMETRIC, ширина задается в логических единицах. Если *нпенстиле* имеет значение PS_COSMETIC, то ширина должна быть равна 1.

*крколор*<br/>
Содержит цвет RGB для пера.

*плогбруш*<br/>
Указывает на `LOGBRUSH` структуру. Если *нпенстиле* имеет значение PS_COSMETIC, то `LOGBRUSH` элемент лбколор структуры определяет цвет пера, `LOGBRUSH` а элемент *лбстиле* структуры должен иметь значение BS_SOLID. Если *нпенстиле* имеет значение PS_GEOMETRIC, то для указания атрибутов кисти пера должны использоваться все элементы.

*нстилекаунт*<br/>
Задает длину массива *лпстиле* в единицах даублеворд. Это значение должно быть равно нулю, если *нпенстиле* не является PS_USERSTYLE.

*лпстиле*<br/>
Указывает на массив значений даублеворд. Первое значение задает длину первого тире в определяемом пользователем стиле, второе значение задает длину первого пробела и т. д. Если *нпенстиле* не PS_USERSTYLE, этот указатель должен иметь значение null.

### <a name="remarks"></a>Примечания

При использовании конструктора без аргументов `CPen` необходимо инициализировать результирующий объект `CreatePen`с помощью функций элементов, `CreatePenIndirect`или `CreateStockObject` .

Если вы используете конструктор, который принимает аргументы, дальнейшая инициализация не требуется. Конструктор с аргументами может вызывать исключение в случае возникновения ошибок, в то время как конструктор без аргументов всегда будет выполнен.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#99](../../mfc/codesnippet/cpp/cpen-class_1.cpp)]

##  <a name="createpen"></a>Кпен:: Креатепен

Создает логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти и прикрепляет его `CPen` к объекту.

```
BOOL CreatePen(
    int nPenStyle,
    int nWidth,
    COLORREF crColor);

BOOL CreatePen(
    int nPenStyle,
    int nWidth,
    const LOGBRUSH* pLogBrush,
    int nStyleCount = 0,
    const DWORD* lpStyle = NULL);
```

### <a name="parameters"></a>Параметры

*нпенстиле*<br/>
Задает стиль для пера. Список возможных значений см. в описании параметра *нпенстиле* в конструкторе [кпен](#cpen) .

*нвидс*<br/>
Задает ширину пера.

- Для первой версии `CreatePen`, если это значение равно 0, ширина в единицах устройства всегда равна 1 пикселю, независимо от режима сопоставления.

- Для второй версии `CreatePen`, если *нпенстиле* имеет значение PS_GEOMETRIC, ширина задается в логических единицах. Если *нпенстиле* имеет значение PS_COSMETIC, то ширина должна быть равна 1.

*крколор*<br/>
Содержит цвет RGB для пера.

*плогбруш*<br/>
Указывает на структуру [логбруш](/windows/win32/api/wingdi/ns-wingdi-logbrush) . Если *нпенстиле* имеет значение PS_COSMETIC, `lbColor` элемент `LOGBRUSH` структуры определяет цвет `LOGBRUSH` пера, а элемент *лбстиле* структуры должен иметь значение BS_SOLID. Если Нпенстиле имеет значение PS_GEOMETRIC, то для указания атрибутов кисти пера должны использоваться все элементы.

*нстилекаунт*<br/>
Задает длину массива *лпстиле* в единицах даублеворд. Это значение должно быть равно нулю, если *нпенстиле* не является PS_USERSTYLE.

*лпстиле*<br/>
Указывает на массив значений даублеворд. Первое значение задает длину первого тире в определяемом пользователем стиле, второе значение задает длину первого пробела и т. д. Если *нпенстиле* не PS_USERSTYLE, этот указатель должен иметь значение null.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение в случае успеха или нуль в случае сбоя метода.

### <a name="remarks"></a>Примечания

Первая версия `CreatePen` инициализирует перо с указанным стилем, шириной и цветом. Перо можно впоследствии выбрать в качестве текущего пера для любого контекста устройства.

Перья, ширина которых превышает 1 пиксель, должны всегда иметь стиль PS_NULL, PS_SOLID или PS_INSIDEFRAME.

Если у пера есть стиль PS_INSIDEFRAME и цвет, который не соответствует цвету в таблице логических цветов, перо рисуется с помощью раскраски. Стиль пера PS_SOLID нельзя использовать для создания пера с оттенокм цвета. Стиль PS_INSIDEFRAME идентичен PS_SOLID, если ширина пера меньше или равна 1.

Вторая версия `CreatePen` инициализирует логическое косметические или геометрическое перо с указанным стилем, шириной и атрибутами кисти. Ширина косметических перьев всегда равна 1; Ширина геометрического пера всегда указывается в универсальных единицах. После того как приложение создаст логическое перо, оно может выбрать это перо в контексте устройства, вызвав функцию [CDC:: SelectObject](../../mfc/reference/cdc-class.md#selectobject) . После выбора пера в контексте устройства его можно использовать для рисования линий и кривых.

- Если *нпенстиле* имеет значение PS_COSMETIC и PS_USERSTYLE, то записи в массиве *лпстиле* задают длины штрихов и пробелов в единицах стиля. Единица стиля определяется устройством, в котором перо используется для рисования линии.

- Если *нпенстиле* имеет значение PS_GEOMETRIC и PS_USERSTYLE, то записи в массиве *лпстиле* задают длины штрихов и пробелов в логических единицах.

- Если *нпенстиле* имеет значение PS_ALTERNATE, то единица Style не учитывается, а все остальные Пиксели задаются.

Если приложению больше не требуется заданное перо, оно должно вызвать функцию-член [кгдиобжект::D елетеобжект](../../mfc/reference/cgdiobject-class.md#deleteobject) или уничтожить `CPen` объект, чтобы ресурс больше не использовался. Приложение не должно удалять перо при выборе пера в контексте устройства.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#100](../../mfc/codesnippet/cpp/cpen-class_2.cpp)]

##  <a name="createpenindirect"></a>Кпен:: Креатепениндирект

Инициализирует перо, имеющее стиль, ширину и цвет, заданные в структуре, на которую указывает *лплогпен*.

```
BOOL CreatePenIndirect(LPLOGPEN lpLogPen);
```

### <a name="parameters"></a>Параметры

*лплогпен*<br/>
Указывает на структуру [LOGPEN](/windows/win32/api/Wingdi/ns-wingdi-logpen) Windows, содержащую сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Ненулевое значение, если функция выполнена успешно; в противном случае — 0.

### <a name="remarks"></a>Примечания

Перья, ширина которых превышает 1 пиксель, должны всегда иметь стиль PS_NULL, PS_SOLID или PS_INSIDEFRAME.

Если у пера есть стиль PS_INSIDEFRAME и цвет, который не соответствует цвету в таблице логических цветов, перо рисуется с помощью раскраски. Стиль PS_INSIDEFRAME идентичен PS_SOLID, если ширина пера меньше или равна 1.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#101](../../mfc/codesnippet/cpp/cpen-class_3.cpp)]

##  <a name="fromhandle"></a>Кпен:: FromHandle

Возвращает указатель на `CPen` объект, заданный маркером для объекта пера Windows GDI.

```
static CPen* PASCAL FromHandle(HPEN hPen);
```

### <a name="parameters"></a>Параметры

*хпен*<br/>
`HPEN`Указатель на перо Windows GDI.

### <a name="return-value"></a>Возвращаемое значение

Указатель на `CPen` объект в случае успеха; в противном случае — null.

### <a name="remarks"></a>Примечания

Если объект `CPen` не прикреплен к дескриптору, создается и прикрепляется временный объект `CPen`. Этот временный `CPen` объект действителен только до тех пор, пока приложение не найдет время простоя в цикле событий, во время которого все временные графические объекты будут удалены. Иными словами, временный объект допустим только во время обработки одного сообщения окна.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#105](../../mfc/codesnippet/cpp/cpen-class_4.cpp)]

##  <a name="getextlogpen"></a>Кпен:: Жетекстлогпен

`EXTLOGPEN` Возвращает базовую структуру.

```
int GetExtLogPen(EXTLOGPEN* pLogPen);
```

### <a name="parameters"></a>Параметры

*плогпен*<br/>
Указывает на структуру [екстлогпен](/windows/win32/api/wingdi/ns-wingdi-extlogpen) , содержащую сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

`EXTLOGPEN` Структура определяет атрибуты стиля, ширины и кисти пера. Например, вызовите `GetExtLogPen` метод, чтобы сопоставить определенный стиль пера.

Сведения об атрибутах пера см. в следующих разделах Windows SDK.

- [GetObject](/windows/win32/api/wingdi/nf-wingdi-getobject)

- [ЕКСТЛОГПЕН](/windows/win32/api/wingdi/ns-wingdi-extlogpen)

- [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen)

- [ексткреатепен](/windows/win32/api/wingdi/nf-wingdi-extcreatepen)

### <a name="example"></a>Пример

В следующем примере кода демонстрируется `GetExtLogPen` вызов метода для получения атрибутов пера, а затем создается новое косметические перо с тем же цветом.

[!code-cpp[NVC_MFCDocView#102](../../mfc/codesnippet/cpp/cpen-class_5.cpp)]

##  <a name="getlogpen"></a>Кпен:: Жетлогпен

`LOGPEN` Возвращает базовую структуру.

```
int GetLogPen(LOGPEN* pLogPen);
```

### <a name="parameters"></a>Параметры

*плогпен*<br/>
Указывает на структуру [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen) , которая содержит сведения о пере.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

`LOGPEN` Структура определяет стиль, цвет и шаблон пера.

Например, вызовите `GetLogPen` метод, чтобы сопоставить определенный стиль пера.

Сведения об атрибутах пера см. в следующих разделах Windows SDK.

- [GetObject](/windows/win32/api/wingdi/nf-wingdi-getobject)

- [LOGPEN](/windows/win32/api/wingdi/ns-wingdi-logpen)

### <a name="example"></a>Пример

В следующем примере кода показано, `GetLogPen` как вызвать метод, чтобы получить символ пера, а затем создать новое сплошное перо с тем же цветом.

[!code-cpp[NVC_MFCDocView#103](../../mfc/codesnippet/cpp/cpen-class_6.cpp)]

##  <a name="operator_hpen"></a>Кпен:: operator ХПЕН

Возвращает присоединенный к `CPen` объекту маркер GDI Windows.

```
operator HPEN() const;
```

### <a name="return-value"></a>Возвращаемое значение

В случае успеха — обработчик для объекта Windows GDI, представленного `CPen` объектом; в противном случае — null.

### <a name="remarks"></a>Примечания

Этот оператор является оператором приведения, который поддерживает прямое использование объекта ХПЕН.

Дополнительные сведения об использовании графических объектов см. в разделе [графические объекты](/windows/win32/gdi/graphic-objects) в Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#104](../../mfc/codesnippet/cpp/cpen-class_7.cpp)]

## <a name="see-also"></a>См. также

[Класс CGdiObject](../../mfc/reference/cgdiobject-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CBrush](../../mfc/reference/cbrush-class.md)
