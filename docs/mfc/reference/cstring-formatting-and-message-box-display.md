---
title: Форматирование CString и отображение окна сообщения
ms.date: 11/04/2016
f1_keywords:
- vc.mfc.macros.strings
helpviewer_keywords:
- CString objects [MFC], formatting and message boxes
ms.assetid: d1068cf4-9cc5-4952-b9e7-d612c53cbc28
ms.openlocfilehash: b22eea0a20623bb6dfbbf60703b3db25ac4065d5
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50487936"
---
# <a name="cstring-formatting-and-message-box-display"></a>Форматирование CString и отображение окна сообщения

Ряд функций, позволяющих форматирования и синтаксического анализа `CString` объектов. Эти функции можно использовать всякий раз, когда необходимо управление `CString` объекты, но они особенно полезны для форматирования строк, которые будут отображаться в окне сообщения текст.

Эта группа функций также включает глобальные подпрограммы для отображения окна сообщения.

### <a name="cstring-functions"></a>Функции CString

|||
|-|-|
|[AfxExtractSubString](#afxextractsubstring)|Извлечение подстроки, разделенных один символ из заданной исходной строки.|
|[AfxFormatString1](#afxformatstring1)|Замещает заданной строкой форматирования символов «%1» в строке содержится в таблице строк.|
|[AfxFormatString2](#afxformatstring2)|Замещает двух строк для формата символов «%1» и «%2» в строке содержится в таблице строк.|
|[AfxMessageBox](#afxmessagebox)|Отображает окно сообщения.|

### <a name="requirements"></a>Требования

  **Заголовок** afxwin.h

##  <a name="afxextractsubstring"></a>  AfxExtractSubString

Этой глобальной функции можно использовать для извлечения подстроки из заданной исходной строки.

```
BOOL AFXAPI AfxExtractSubString (
    CString& rString,
    LPCTSTR lpszFullString,
    int iSubString,
    TCHAR chSep  = '\n');
```

### <a name="parameters"></a>Параметры

*rString*<br/>
Ссылка на [CString](../../atl-mfc-shared/using-cstring.md) объект, который будет получать отдельные подстроки.

*lpszFullString*<br/>
Строка, содержащая полный текст строки для извлечения из.

*iSubString*<br/>
Отсчитываемый от нуля индекс подстроки, которую требуется извлечь из *lpszFullString*.

*chSep*<br/>
Разделитель, используемый для разделения подстрок.

### <a name="return-value"></a>Возвращаемое значение

Значение TRUE, если функция успешно извлечен подстроку по указанному индексу; в противном случае — значение FALSE.

### <a name="remarks"></a>Примечания

Эта функция полезна для извлечения несколько подстрок из исходной строки, если каждая подстрока отделяет известных один символ. Эта функция выполняет поиск от начала *lpszFullString* параметра каждый раз, он вызывается.

Эта функция возвращает значение FALSE, если параметр *lpszFullString* имеет значение NULL или функция достигает конца *lpszFullString* без поиск *iSubString*+ 1 вхождений знака заданный разделитель. *RString* параметр не будет изменяться от его исходного значения, если *lpszFullString* был установлен в значение NULL; в противном случае — *rString* параметр имеет значение пустой строки, если не удалось извлечь подстроку с указанным индексом.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_Utilities#48](../../mfc/codesnippet/cpp/cstring-formatting-and-message-box-display_1.cpp)]

### <a name="requirements"></a>Требования

  **Заголовок** afxwin.h

##  <a name="afxformatstring1"></a>  AfxFormatString1

Замещает часть строки, на которые указывают *lpsz1* для любых экземпляров символов «%1» в шаблон строковый ресурс, идентифицируемый *nIDS*.

```
void  AfxFormatString1(
    CString& rString,
    UINT nIDS,
    LPCTSTR lpsz1);
```

### <a name="parameters"></a>Параметры

*rString*<br/>
Ссылку на `CString` объект, который будет содержать результирующий строку после выполнения подстановки.

*nIDS*<br/>
Идентификатор ресурса строки шаблона, на котором будет выполняться замена.

*lpsz1*<br/>
Строка, приведет к замене формат символов «%1» в строке шаблона.

### <a name="remarks"></a>Примечания

Вновь сформированной строка хранится в *rString*. Например, если строка в таблице строк «Файл %1 не найден» и *lpsz1* равным «C:\MYFILE. TXT», затем *rString* будет содержать строку «файл C:\MYFILE. TXT не найден». Эта функция полезна для форматирования строк, отправляемых в окнах сообщений и других окнах.

Если символы форматирования «%1» более одного раза появляется в строке, выполняется несколько подстановок.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_Utilities#25](../../mfc/codesnippet/cpp/cstring-formatting-and-message-box-display_2.cpp)]

### <a name="requirements"></a>Требования

  **Заголовок** afxwin.h

##  <a name="afxformatstring2"></a>  AfxFormatString2

Замещает часть строки, на которые указывают *lpsz1* для все экземпляры символов «%1» и строка, на которые указывают *lpsz2* для любых экземпляров знаков «%2» из строкового ресурса шаблона определяется *nIDS*.

```
void AfxFormatString2(
    CString& rString,
    UINT nIDS,
    LPCTSTR lpsz1,
    LPCTSTR lpsz2);
```

### <a name="parameters"></a>Параметры

*rString*<br/>
Ссылку на `CString` , содержащий результирующие строки после выполнения подстановки.

*nIDS*<br/>
Идентификатор строки таблицы строки шаблона, на котором будет выполняться замена.

*lpsz1*<br/>
Строка, приведет к замене формат символов «%1» в строке шаблона.

*lpsz2*<br/>
Строка, приведет к замене формат символов «%2» в строке шаблона.

### <a name="remarks"></a>Примечания

Вновь сформированной строка хранится в *rString*. Например, если строка в таблице строк «Файл %1 не найден в каталоге %2» *lpsz1* указывает на «MYFILE. "TXT», и *lpsz2* указывает на «C:\MYDIR», затем *rString* будет содержать строку «файл MYFILE. TXT, не найден в каталоге C:\MYDIR»

Если формат символов «%1» или «%2» отображается в строке, более одного раза, будут выполняться несколько подстановок. Они не обязательно находиться в порядке нумерации.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFC_Utilities#26](../../mfc/codesnippet/cpp/cstring-formatting-and-message-box-display_3.cpp)]

### <a name="requirements"></a>Требования

  **Заголовок** afxwin.h

##  <a name="afxmessagebox"></a>  AfxMessageBox

Отображает окно сообщения на экране.

```
int AfxMessageBox(
    LPCTSTR lpszText,
    UINT nType = MB_OK,
    UINT nIDHelp = 0);

int AFXAPI AfxMessageBox(
    UINT nIDPrompt,
    UINT nType = MB_OK,
    UINT nIDHelp = (UINT) -1);
```

### <a name="parameters"></a>Параметры

*lpszText*<br/>
Указывает на `CString` объект или строка, завершающаяся нулем, содержащая сообщение для отображения в окне сообщения.

*nType*<br/>
Стиль окна сообщения. Применения любого из [стили окна сообщений](../../mfc/reference/styles-used-by-mfc.md#message-box-styles) в поле.

*nIDHelp*<br/>
Идентификатор контекста справки для данного сообщения; 0 указывает, что контекст справки приложения по умолчанию будет использоваться.

*nIDPrompt*<br/>
Уникальный идентификатор, используемый для ссылок на строку в таблице строк.

### <a name="return-value"></a>Возвращаемое значение

Нуль, если не хватает памяти, чтобы отобразить окно сообщения; в противном случае возвращается одно из следующих значений:

- Кнопка прерывания IDABORT был выбран.

- Кнопка отмены IDCANCEL был выбран.

- Выбрана кнопка игнорирования IDIGNORE.

- Выбрана кнопка IDNO нет.

- Выбрана кнопка ОК IDOK.

- Выбрана кнопка IDRETRY повторить.

- Был выбран IDYES кнопка "Да".

Если окно сообщения содержит кнопки "Отмена", будет возвращено значение IDCANCEL, если нажата клавиша ESC или нажатии кнопки "Отмена". Если окно сообщения содержит нет кнопки "Отмена", нажатие клавиши ESC не действует.

Функции [AfxFormatString1](#afxformatstring1) и [AfxFormatString2](#afxformatstring2) может пригодиться при форматировании текста, отображаемого в окне сообщения.

### <a name="remarks"></a>Примечания

Первая форма данной перегруженной функции отображается, строку текста, на который указывает *lpszText* в окне сообщения и использует *nIDHelp* для описания контекст справки. Контекст справки, используемый для перехода к сопоставлен справочный раздел, когда пользователь нажимает клавишу справки (обычно F1).

Вторая форма функции использует строковый ресурс с Идентификатором *nIDPrompt* для отображения сообщения в окне сообщения. Соответствующая страница справки выявлена до значения *nIDHelp*. Если значение по умолчанию *nIDHelp* используемых – (1), идентификатор строкового ресурса, *nIDPrompt*, используется для контекста справки. Дополнительные сведения об определении контекстов справки см. в разделе [Технические замечания 28](../../mfc/tn028-context-sensitive-help-support.md).

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCWindowing#133](../../mfc/reference/codesnippet/cpp/cstring-formatting-and-message-box-display_4.cpp)]

## <a name="see-also"></a>См. также

[Макросы и глобальные объекты](../../mfc/reference/mfc-macros-and-globals.md)<br/>
[Класс CStringT](../../atl-mfc-shared/reference/cstringt-class.md)
