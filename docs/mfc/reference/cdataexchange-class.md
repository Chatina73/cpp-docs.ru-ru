---
title: Cdataexchange-класс
ms.date: 11/04/2016
f1_keywords:
- CDataExchange
- AFXWIN/CDataExchange
- AFXWIN/CDataExchange::CDataExchange
- AFXWIN/CDataExchange::Fail
- AFXWIN/CDataExchange::PrepareCtrl
- AFXWIN/CDataExchange::PrepareEditCtrl
- AFXWIN/CDataExchange::PrepareOleCtrl
- AFXWIN/CDataExchange::m_bSaveAndValidate
- AFXWIN/CDataExchange::m_pDlgWnd
helpviewer_keywords:
- CDataExchange [MFC], CDataExchange
- CDataExchange [MFC], Fail
- CDataExchange [MFC], PrepareCtrl
- CDataExchange [MFC], PrepareEditCtrl
- CDataExchange [MFC], PrepareOleCtrl
- CDataExchange [MFC], m_bSaveAndValidate
- CDataExchange [MFC], m_pDlgWnd
ms.assetid: 84ed6113-325d-493e-a75d-223f03a992b8
ms.openlocfilehash: 630bc41ee20aa7cf6f62cd320b15b8dca0d3fedf
ms.sourcegitcommit: c3093251193944840e3d0a068ecc30e6449624ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2019
ms.locfileid: "57268399"
---
# <a name="cdataexchange-class"></a>Cdataexchange-класс

Поддерживает процедуры обмена данными диалогового окна (DDX) и проверки данных диалогового окна (DDV), используемые классами Microsoft Foundation.

## <a name="syntax"></a>Синтаксис

```
class CDataExchange
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание:|
|----------|-----------------|
|[CDataExchange::CDataExchange](#cdataexchange)|Создает объект `CDataExchange`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание:|
|----------|-----------------|
|[CDataExchange::Fail](#fail)|Вызывается при сбое проверки. Сбрасывает фокуса к предыдущему элементу управления и создает исключение.|
|[CDataExchange::PrepareCtrl](#preparectrl)|Подготавливает заданный элемент управления для обмена данными или проверки. Используется для элементов управления nonedit.|
|[CDataExchange::PrepareEditCtrl](#prepareeditctrl)|Подготавливает указанный элемент управления для обмена данными или проверки.|
|[CDataExchange::PrepareOleCtrl](#prepareolectrl)|Подготавливает указанный элемент управления OLE для обмена данными или проверки. Используется для элементов управления nonedit.|

### <a name="public-data-members"></a>Открытые члены данных

|Имя|Описание:|
|----------|-----------------|
|[CDataExchange::m_bSaveAndValidate](#m_bsaveandvalidate)|Флаг для направления DDX и DDV к элементам Управления.|
|[CDataExchange::m_pDlgWnd](#m_pdlgwnd)|Диалоговое окно или окно, где обмен данными выполняется.|

## <a name="remarks"></a>Примечания

`CDataExchange` не имеет базового класса.

Этот класс используется при создании процедуры данных exchange для пользовательских типов данных или элементов управления, или если вы пишете собственные программы проверки данных. Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговым окнам](../../mfc/dialog-boxes.md).

Объект `CDataExchange` объект предоставляет контекстные сведения, необходимые для DDX и DDV к элементам Управления, чтобы иметь возможность поместить. Флаг *m_bSaveAndValidate* имеет значение FALSE, если DDX используется для заполнения начального значения элементов управления диалогового окна из элементов данных. Флаг *m_bSaveAndValidate* имеет значение TRUE, если DDX используется для задания текущие значения элементов управления диалоговых окон в данные-члены и когда DDV к элементам Управления используется для проверки значений данных. Если в случае сбоя проверки DDV процедуры DDV к элементам Управления отобразит сообщение, описывающее ошибок на входе. Затем вызовет процедуру DDV `Fail` сбросить фокус к элементу управления, вызвавший ошибку и выдается исключение для остановки процесса проверки.

## <a name="inheritance-hierarchy"></a>Иерархия наследования

`CDataExchange`

## <a name="requirements"></a>Требования

**Заголовок:** afxwin.h

##  <a name="cdataexchange"></a>  CDataExchange::CDataExchange

Эта функция-член для создания вызова `CDataExchange` объекта.

```
CDataExchange(
    CWnd* pDlgWnd,
    BOOL bSaveAndValidate);
```

### <a name="parameters"></a>Параметры

*pDlgWnd*<br/>
Указатель на родительское окно, которое содержит элемент управления. Обычно это [CDialog](../../mfc/reference/cdialog-class.md)-объект, производный от.

*bSaveAndValidate*<br/>
Значение TRUE, если этот объект для проверки данных, а затем записывает данные из элементов управления к членам. Если значение равно FALSE, будет перемещен этот объект данных от членов для элементов управления.

### <a name="remarks"></a>Примечания

Создать `CDataExchange` объект для хранения дополнительной информации в объекте данных exchange, для передачи в окне [CWnd::DoDataExchange](../../mfc/reference/cwnd-class.md#dodataexchange) функция-член.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#70](../../mfc/codesnippet/cpp/cdataexchange-class_1.cpp)]

##  <a name="fail"></a>  CDataExchange::Fail

Эта функция-член вызывается платформой при сбое операции проверки (DDV) диалоговое окно данных.

```
void Fail();
```

### <a name="remarks"></a>Примечания

`Fail` восстанавливает фокус и выделенный фрагмент в элемент управления, сбой которого проверки (если имеется элемент управления для восстановления). `Fail` затем создает исключение типа [CUserException](../../mfc/reference/cuserexception-class.md) остановить процесс проверки. Исключение вызывает сообщение, описывающее ошибку для отображения. После сбоя DDV к элементам Управления проверки, пользователю можно ввести заново данных в элементе управления, вызвавший ошибку.

Средства реализации пользовательских процедур DDV к элементам Управления можно вызвать `Fail` из своих программах, в случае ошибки проверки.

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

##  <a name="m_bsaveandvalidate"></a>  CDataExchange::m_bSaveAndValidate

Этот флаг указывает направление операции с данными exchange (DDX) диалогового окна.

```
BOOL m_bSaveAndValidate;
```

### <a name="remarks"></a>Примечания

Флаг имеет ненулевое значение Если `CDataExchange` объект используется для перемещения данных из элементов управления диалоговых окон на данные-члены класса диалогового окна после пользователь редактирует элементы управления. Флаг равен нулю, если объект используется для инициализации элементов управления диалоговых окон из данные-члены класса диалогового окна.

Кроме того, флаг имеет ненулевое значение во время проверки данных диалогового окна (DDV).

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

##  <a name="m_pdlgwnd"></a>  CDataExchange::m_pDlgWnd

Содержит указатель на [CWnd](../../mfc/reference/cwnd-class.md) объекта, для какой диалог обмен данными (окон DDX) или проверки (DDV) выполняется.

```
CWnd* m_pDlgWnd;
```

### <a name="remarks"></a>Примечания

Этот объект обычно является [CDialog](../../mfc/reference/cdialog-class.md) объекта. Средства реализации пользовательских подпрограммы DDX и DDV к элементам Управления можно использовать этот указатель для получения доступа к диалоговое окно, которое содержит элементы управления они работают на.

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

##  <a name="preparectrl"></a>  CDataExchange::PrepareCtrl

Платформа вызывает эту функцию-член для подготовки указанного элемента управления обмен данными диалоговых окон (DDX) и проверки (DDV).

```
HWND PrepareCtrl(int nIDC);
```

### <a name="parameters"></a>Параметры

*nIDC*<br/>
Идентификатор элемента управления для подготовки DDX и DDV к элементам Управления.

### <a name="return-value"></a>Возвращаемое значение

HWND элемента управления, подготавливаемый для DDX и DDV к элементам Управления.

### <a name="remarks"></a>Примечания

Используйте [PrepareEditCtrl](#prepareeditctrl) вместо элементах управления для редактирования; используйте эту функцию-член для всех других элементов управления.

Подготовка состоит из хранения HWND элемента управления в `CDataExchange` класса. Инфраструктура использует этот дескриптор для восстановления фокус на элемент, ранее имевший фокус в случае сбоя DDX и DDV к элементам Управления.

Средства реализации пользовательских подпрограммы DDX и DDV к элементам Управления должны вызывать `PrepareCtrl` для всех элементов управления без редактирования, для которых они обмен данными с помощью DDX или проверка данных с помощью DDV к элементам Управления.

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

##  <a name="prepareeditctrl"></a>  CDataExchange::PrepareEditCtrl

Платформа вызывает эту функцию-член для подготовки элемента управления редактирования обмен данными диалоговых окон (DDX) и проверки (DDV).

```
HWND PrepareEditCtrl(int nIDC);
```

### <a name="parameters"></a>Параметры

*nIDC*<br/>
Идентификатор элемента управления для подготовки DDX и DDV к элементам Управления.

### <a name="return-value"></a>Возвращаемое значение

HWND элемента управления редактированием, подготавливаемый для DDX и DDV к элементам Управления.

### <a name="remarks"></a>Примечания

Используйте [PrepareCtrl](#preparectrl) вместо этого для всех элементов управления без редактирования.

Подготовка состоит из двух следующих действий. Во-первых, `PrepareEditCtrl` хранит HWND элемента управления в `CDataExchange` класса. Инфраструктура использует этот дескриптор для восстановления фокус на элемент, ранее имевший фокус в случае сбоя DDX и DDV к элементам Управления. Во-вторых, `PrepareEditCtrl` устанавливает флаг в `CDataExchange` класса, чтобы указать, что элемент управления, данные которых обмена или проверки является элементом управления.

Средства реализации пользовательских подпрограммы DDX и DDV к элементам Управления должны вызывать `PrepareEditCtrl` для всех редактировать элементы управления, для которых они обмен данными с помощью DDX или проверка данных с помощью DDV к элементам Управления.

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

##  <a name="prepareolectrl"></a>  CDataExchange::PrepareOleCtrl

Платформа вызывает эту функцию-член для подготовки указанного элемента управления OLE обмен данными диалоговых окон (DDX) и проверки (DDV).

```
COleControlSite* PrepareOleCtrl(int nIDC);
```

### <a name="parameters"></a>Параметры

*nIDC*<br/>
Идентификатор элемента управления OLE для подготовки DDX и DDV к элементам Управления.

### <a name="return-value"></a>Возвращаемое значение

Указатель на сайт элемента управления OLE.

### <a name="remarks"></a>Примечания

Используйте [PrepareEditCtrl](#prepareeditctrl) вместо элементах управления для редактирования или [PrepareCtrl](#preparectrl) для всех других элементов управления отличных от OLE.

Средства реализации пользовательских подпрограммы DDX и DDV к элементам Управления должны вызывать `PrepareOleCtrl` для всех элементов управления OLE, для которых они обмен данными с помощью DDX или проверка данных с помощью DDV к элементам Управления.

Дополнительные сведения о создании собственных процедур DDX и DDV к элементам Управления, см. в разделе [технические 26 Примечание](../../mfc/tn026-ddx-and-ddv-routines.md). Общие сведения о DDX и DDV к элементам Управления, см. в разделе [обмен данными диалоговых окон и проверка](../../mfc/dialog-data-exchange-and-validation.md) и [диалоговому](../../mfc/dialog-boxes.md).

## <a name="see-also"></a>См. также

[Пример MFC: VIEWEX](../../visual-cpp-samples.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[CWnd::DoDataExchange](../../mfc/reference/cwnd-class.md#dodataexchange)<br/>
[CWnd::UpdateData](../../mfc/reference/cwnd-class.md#updatedata)
