---
description: 'Дополнительные сведения о: TN029: окна разделителей'
title: TN029. Окна разделителей
ms.date: 11/04/2016
f1_keywords:
- vc.windows.splitter
helpviewer_keywords:
- TN029
- splitter windows [MFC], about splitter windows
ms.assetid: 2c57ce99-2a3c-4eff-9cea-baccb13af075
ms.openlocfilehash: e1079adf403b64aa47f5aae00aa32f7da702ddcf
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97215642"
---
# <a name="tn029-splitter-windows"></a>TN029. Окна разделителей

Это примечание описывает класс MFC [CSplitterWnd](../mfc/reference/csplitterwnd-class.md), который обеспечивает разбиение окна и управляет изменением размера других окон панели.

## <a name="splitter-styles"></a>Стили разделителя

`CSplitterWnd`Поддерживает два различных стиля разделенных окон.

В "статическом разделителей" окно разделителя создает панели при ее создании. Порядок и количество панелей никогда не меняются. Полосы-разделители используются для изменения размера различных панелей. Этот стиль можно использовать для отображения на каждой панели другого класса представления. В качестве примера программ, использующих этот стиль разделителя, Visual C++ графический редактор и Диспетчер файлов Windows. В этом стиле окна разделителя не используются прямоугольники разделения.

В разделе "динамические разделителей" создаются и уничтожаются дополнительные панели, так как пользователь разделяет и не разделяет новые представления. Этот разделитель начинается с одного представления и предоставляет поля-разделители для запуска разделения пользователем. Окно разделителя динамически создает новый объект представления, когда представление разбивается в одном направлении. Этот новый объект представления представляет новую панель. Если представление разбивается в двух направлениях с помощью интерфейса клавиатуры, окно разделителя создает три новых объекта представления для трех новых панелей. Пока разбиение активно, Windows отображает поле разделителя в виде разделительной линии между панелями. Windows уничтожает дополнительные объекты представления, когда пользователь удаляет разбиение, но исходное представление остается, пока не будет уничтожено окно разделителя. Microsoft Excel и Microsoft Word — примеры приложений, которые используют динамический стиль разделителя.

При создании любого вида окна разделителя необходимо указать максимальное число строк и столбцов, которыми будет управлять разделитель. Статический разделитель создаст панели для заполнения всех строк и столбцов. Динамический разделитель создаст только первую панель при `CSplitterWnd` создании.

Максимальное число панелей, которое можно указать для статического разделителей, — 16 строк по 16 столбцам. Ниже приведены рекомендуемые конфигурации.

- 1 строка x 2 столбца: обычно с непохожими панелями

- 2 строки x 1 столбец: обычно с непохожими панелями

- 2 строки x 2 столбца: обычно с аналогичными панелями

Максимальное число панелей, которое можно указать для динамического разделителей, — 2 строки на 2 столбца. Ниже приведены рекомендуемые конфигурации.

- 1 строка x 2 столбца: для данных по столбцам

- 2 строки x 1 столбец: для текстовых или других данных

- 2 строки x 2 столбца: для сетки или табличных данных

## <a name="splitter-examples"></a>Примеры разделителей

Многие из примеров программ MFC используют окна разделителей напрямую или косвенно. В общем примере MFC в [образце VIEWEX](../overview/visual-cpp-samples.md) показано несколько применений статического разделителей, включая способ размещения разделителя в разделителе.

Можно также использовать ClassWizard для создания нового дочернего окна фрейма интерфейса MDI, содержащего окно-разделитель. Дополнительные сведения о окнах разделителей см. в разделе [несколько типов документов, представлений и окон фрейма](../mfc/multiple-document-types-views-and-frame-windows.md).

## <a name="terminology-used-by-implementation"></a>Терминология, используемая реализацией

Ниже приведен список терминов, характерных для окон-разделителей.

`CSplitterWnd`: Окно, предоставляющее элементы управления разбивкой на панели и полосы прокрутки, которые являются общими для всех панелей в строке или столбце. Вы указываете строки и столбцы с числами, начинающимися с нуля (первая панель — строка = 0, а столбец = 0).

Панель: окно, зависящее от приложения, которое `CSplitterWnd` управляет. Область обычно является объектом, производным от [класса CView](../mfc/reference/cview-class.md), но может быть любым объектом [CWnd](../mfc/reference/cwnd-class.md) , имеющим соответствующий идентификатор дочернего окна.

Чтобы использовать `CWnd` объект, производный от, передайте RUNTIME_CLASS объекта в функцию, `CreateView` как при использовании `CView` класса, производного от. Класс должен использовать DECLARE_DYNCREATE и IMPLEMENT_DYNCREATE, так как платформа использует динамическое создание во время выполнения. Несмотря на то, что существует много кода `CSplitterWnd` , характерное для `CView` класса, [CObject:: IsKindOf](../mfc/reference/cobject-class.md#iskindof) всегда используется перед выполнением этих действий.

Полоса разделения: элемент управления, который помещается между строками и столбцами панелей. Он может использоваться для настройки размеров строк или столбцов панелей.

Поле разделителя: элемент управления в динамическом виде `CSplitterWnd` , который можно использовать для создания новых строк или столбцов панелей. Он находится в верхней части вертикальных полос прокрутки или слева от горизонтальных полос прокрутки.

Пересечение разделителя: пересечение вертикальной линии разделения и горизонтальной линии разделения. Его можно перетащить для одновременного изменения размера строки и столбца на панелях.

## <a name="shared-scroll-bars"></a>Общие полосы прокрутки

`CSplitterWnd`Класс также поддерживает общие полосы прокрутки. Эти элементы управления "полоса прокрутки" являются дочерними элементами элемента `CSplitterWnd` и являются общими для различных панелей в разделителе.

Например, в окне столбца 1 строка x 2 можно указать WS_VSCROLL при создании `CSplitterWnd` . Windows создает специальный элемент управления полосой прокрутки, который совместно используется двумя панелями.

```
[      ][      ][^]
[pane00][pane01][|]
[      ][      ][v]
```

Когда пользователь перемещает полосу прокрутки, WM_VSCROLL сообщения будут отправляться в оба представления. Если любое из представлений задает расположение полосы прокрутки, то будет задана общая полоса прокрутки.

Обратите внимание, что общие полосы прокрутки наиболее полезны для схожих объектов представления. При смешении представлений различных типов в разделителе может потребоваться написать специальный код для координации позиций прокрутки. Любой `CView` производный класс, использующий `CWnd` API-интерфейсы полосы прокрутки, будет делегировать общую полосу прокрутки, если она существует. `CScrollView`Реализация — это один из примеров `CView` класса, поддерживающего общие полосы прокрутки. Классы, которые не являются производными от `CView` , классы, которые используют полосы прокрутки, отличные от элементов управления, или классы, использующие стандартные реализации Windows (например, `CEditView` ), не будут работать с совместно используемой функцией полосы прокрутки `CSplitterWnd` .

## <a name="minimum-sizes"></a>Минимальный размер

Для каждой строки существует минимальная высота строки, и для каждого столбца существует минимальная ширина столбца. Это минимальное значение гарантирует, что панель не слишком мала для отображения в полном объеме.

Для статического окна разделителя начальная минимальная высота строки и ширина столбца равна 0. Для динамического окна разделителя начальная минимальная высота строки и ширина столбца задаются параметром *сиземин* `CSplitterWnd::Create` функции.

Эти минимальные размеры можно изменить с помощью функций [CSplitterWnd:: сетровинфо](../mfc/reference/csplitterwnd-class.md#setrowinfo) и [CSplitterWnd:: сетколумнинфо](../mfc/reference/csplitterwnd-class.md#setcolumninfo) .

## <a name="actual-vs-ideal-sizes"></a>Фактический и идеальный размеры

Макет панелей в окне разделителя зависит от размера фрейма, который их содержит. Когда пользователь изменяет размер содержащего фрейма, `CSplitterWnd` перемещает и изменяет размеры панелей так, чтобы они соответствовали максимальному размеру.

Пользователь может вручную задать высоту строки и ширину столбца, либо программа может задать идеальный размер с помощью `CSplitterWnd` класса. Фактический размер может быть меньше или больше идеального. Windows будет изменять фактический размер, если недостаточно места для вывода идеального размера или если в правой или нижней части окна разделителя находится слишком много места.

## <a name="custom-controls"></a>Пользовательские элементы управления

Можно переопределить многие функции, чтобы обеспечить настраиваемое поведение и пользовательский интерфейс. Этот первый набор можно переопределить, чтобы предоставить альтернативные изображения для различных графических компонентов окна-разделителя.

- `virtual void OnDrawSpltter(CDC* pDC, ESplitType nType, const CRect& rect);`

- `virtual void OnInvertTracker(const CRect& rect);`

Эта функция вызывается для создания общего элемента управления полосы прокрутки. Его можно переопределить, чтобы создать дополнительные элементы управления рядом с полосой прокрутки.

- `virtual BOOL CreateScrollBarCtrl(DWORD dwStyle, UINT nID);`

Эти функции реализуют логику динамического окна разделителя. Их можно переопределить, чтобы обеспечить более расширенную логику разделителя.

- `virtual void DeleteView(int row, int col);`

- `virtual BOOL SplitRow(int cyBefore);`

- `virtual BOOL SplitColumn(int cxBefore);`

- `virtual void DeleteRow(int rowDelete);`

- `virtual void DeleteColumn(int colDelete);`

## <a name="cview-functionality"></a>Функция CView

`CView`Класс использует следующие команды высокого уровня для делегирования `CSplitterWnd` реализации. Поскольку эти команды являются виртуальными, стандартная `CView` реализация не требует, чтобы вся `CSplitterWnd` реализация была связана в. Для приложений, которые используют `CView` `CSplitterWnd` , но не `CSplitterWnd` имеют, реализация не будет связана с приложением.

- `virtual BOOL CanActivateNext(BOOL bPrev = FALSE);`

   Проверяет, возможно ли в данный момент ID_NEXT_PANE или ID_PREV_PANE.

- `virtual void ActivateNext(BOOL bPrev = FALSE);`

   Выполняет команду "Следующая панель" или "Предыдущая панель".

- `virtual BOOL DoKeyboardSplit();`

   Выполняет команду разбиения по клавишам, обычно "разбиение окна".

## <a name="see-also"></a>См. также раздел

[Технические примечания по номеру](../mfc/technical-notes-by-number.md)<br/>
[Технические примечания по категориям](../mfc/technical-notes-by-category.md)
