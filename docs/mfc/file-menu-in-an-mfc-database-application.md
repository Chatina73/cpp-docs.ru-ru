---
description: Дополнительные сведения о меню "файл" в приложении базы данных MFC
title: Меню "Файл" в приложении базы данных MFC
ms.date: 11/04/2016
helpviewer_keywords:
- File menu
- database applications [MFC], File menu commands
ms.assetid: 92dafb75-c1b3-4860-80a0-87a83bfc36f2
ms.openlocfilehash: d8d229ce9c53e7a79044af2de03778574c18e5dd
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97335885"
---
# <a name="file-menu-in-an-mfc-database-application"></a>Меню "Файл" в приложении базы данных MFC

Если вы создаете приложение базы данных MFC и не используете сериализацию, как следует интерпретировать команды открыть, закрыть, сохранить и сохранить как в меню файл, в то время как для этого вопроса нет рекомендаций по стилю, вот несколько советов.

- Полностью удалите команду Открыть меню «файл».

- Интерпретировать команду открытия как "открытая база данных" и показывать пользователю список источников данных, распознаваемых приложением.

- Интерпретировать команду открытия как, возможно, "открыть профиль". Сохраните открытые для открытия сериализованного файла, но используйте файл для хранения сериализованного документа, содержащего сведения о профиле пользователя, например предпочтения пользователя, включая свой идентификатор входа (при необходимости исключая пароль) и источник данных, с которым он недавно работал.

Мастер приложений MFC поддерживает создание приложения без команд меню "файл", связанных с документом. На странице **Поддержка базы данных** выберите вариант **представление базы данных без файлов** .

Чтобы интерпретировать команду меню "файл" особым образом, необходимо переопределить один или несколько обработчиков команд, в основном в `CWinApp` классе, производном от. Например, если полное переопределение `OnFileOpen` (которое реализует `ID_FILE_OPEN` команду) имеет значение «открытая база данных:»,

- Не вызывайте версию базового класса `OnFileOpen` , так как вы полностью заменяете стандартную реализацию команды в платформе.

- Вместо этого используйте обработчик, чтобы отобразить диалоговое окно с перечнем источников данных. Это диалоговое окно можно отобразить, вызвав `CDatabase::OpenEx` или `CDatabase::Open` с параметром **null**. Откроется диалоговое окно ODBC, в котором отображаются все доступные источники данных на компьютере пользователя.

- Поскольку приложения баз данных обычно не сохраняют весь документ, вам, вероятно, потребуется удалить реализации сохранения и сохранения в виде, если только не используется сериализованный документ для хранения сведений о профиле. В противном случае вы можете реализовать команду Save как, например, "фиксировать транзакцию". Дополнительные сведения о переопределении этих команд см. в [техническом примечании 22](tn022-standard-commands-implementation.md) .

## <a name="see-also"></a>См. также раздел

[Сериализация: сериализация и ввод-вывод базы данных](serialization-serialization-vs-database-input-output.md)
