---
title: Обработчики для стандартных сообщений Windows
ms.date: 11/04/2016
f1_keywords:
- afx_msg
helpviewer_keywords:
- Windows messages [MFC], handlers
- message handling [MFC], Windows message handlers
- handler functions, standard Windows messages
- functions [MFC], handler
- messages [MFC], Windows
ms.assetid: 19412a8b-2c38-4502-81da-13c823c7e36c
ms.openlocfilehash: 4f512c3b9a7fce5cddd582fa774742d2b1ac0967
ms.sourcegitcommit: 3caf5261b3ea80d9cf14038c116ba981d655cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70907431"
---
# <a name="handlers-for-standard-windows-messages"></a>Обработчики для стандартных сообщений Windows

Обработчики по умолчанию для стандартных сообщений Windows (**WM_** ) предопределены в классе `CWnd`. Библиотеки классов основаны на именах этих обработчиков в имени сообщения. Например, обработчик для сообщения **WM_PAINT** объявляется в `CWnd` следующим образом:

`afx_msg void OnPaint();`

Ключевое слово **afx_msg** предлагает результат использования C++ ключевого слова **Virtual** путем различения обработчиков от `CWnd` других функций членов. Однако обратите внимание, что эти функции фактически не являются виртуальными; они вместо этого реализуются с помощью карт сообщений. Схемы сообщений зависят только от стандартных макросов препроцессора, а не от расширений C++ языка. После предварительной обработки ключевое слово **afx_msg** разрешается в пробелы.

Чтобы переопределить обработчик, определенный в базовом классе, просто определите функцию с тем же прототипом в производном классе и создайте запись схемы сообщений для обработчика. Обработчик "переопределяет" любой обработчик с тем же именем в любом из базовых классов вашего класса.

В некоторых случаях обработчик должен вызвать переопределенный обработчик в базовом классе таким образом, чтобы базовый класс (ы) и Windows мог обрабатывать сообщение. Место вызова обработчика базового класса в переопределении зависит от обстоятельств. Иногда необходимо сначала вызвать обработчик базового класса, а иногда — и Последнее. Иногда можно вызвать обработчик базового класса условно, если вы решили не выполнять обработку сообщения самостоятельно. Иногда следует вызывать обработчик базового класса, а затем условно выполнять собственный код обработчика в зависимости от значения или состояния, возвращаемого обработчиком базового класса.

> [!CAUTION]
>  Не рекомендуется изменять аргументы, передаваемые в обработчик, если предполагается передать их в обработчик базового класса. Например, может возникнуть желание изменить аргумент `OnChar` *nchar* обработчика (например, для преобразования в верхний регистр). Такое поведение довольно незаметно, но если необходимо выполнить этот результат, используйте `CWnd` функцию `SendMessage` -член.

Как определить правильный способ переопределения данного сообщения, когда [мастер классов](reference/mfc-class-wizard.md) записывает скелет функции обработчика для данного сообщения ( `OnCreate` например, обработчик для **WM_CREATE**), он наводится в виде рекомендуемого Переопределенная функция члена. В следующем примере показано, как сначала обработчик вызывает обработчик базового класса и переходит только к условию, что оно не возвращает значение-1.

[!code-cpp[NVC_MFCMessageHandling#3](../mfc/codesnippet/cpp/handlers-for-standard-windows-messages_1.cpp)]

По соглашению имена этих обработчиков начинаются с префикса "вкл.". Некоторые из этих обработчиков не имеют аргументов, а другие принимают несколько. Некоторые также имеют тип возвращаемого значения, отличный от **void**. Обработчики по умолчанию для всех сообщений **WM_** описаны в *справочнике MFC* как функции членов класса `CWnd` , имена которых начинаются на "on". Объявления функции члена в `CWnd` имеют префикс **afx_msg**.

## <a name="see-also"></a>См. также

[Объявление функций обработчиков сообщений](../mfc/declaring-message-handler-functions.md)
