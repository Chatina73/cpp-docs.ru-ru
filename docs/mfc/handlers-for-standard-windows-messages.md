---
title: Обработчики для стандартных сообщений Windows
ms.date: 11/04/2016
f1_keywords:
- afx_msg
helpviewer_keywords:
- Windows messages [MFC], handlers
- message handling [MFC], Windows message handlers
- handler functions, standard Windows messages
- functions [MFC], handler
- messages [MFC], Windows
ms.assetid: 19412a8b-2c38-4502-81da-13c823c7e36c
ms.openlocfilehash: 9a136caf3a1d22151cb9cfd48e1cd3f999ab51ec
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81370498"
---
# <a name="handlers-for-standard-windows-messages"></a>Обработчики для стандартных сообщений Windows

Обработчики по умолчанию для стандартных `CWnd`сообщений Windows **(WM_)** предопределены в классе. Библиотека класса основывает имена этих обработчиков на имени сообщения. Например, обработчик **для WM_PAINT** `CWnd` сообщения объявляется следующим образом:

`afx_msg void OnPaint();`

Ключевое слово **afx_msg** предполагает эффект **виртуального** ключевого слова СЗЗ, `CWnd` отличая обработчиков от других функций членов. Обратите внимание, однако, что эти функции на самом деле не являются виртуальными; вместо этого они реализуются через карты сообщений. Карты сообщений зависят исключительно от стандартных макросов предварительного процессора, а не от каких-либо расширений к языку СЗ. Ключевое **afx_msg** ключевое слово разрешается белому пространству после предварительной обработки.

Чтобы переопределить обработчик, определенный в базовом классе, просто определите функцию с тем же прототипом в вашем производном классе и сделайте запись на карту сообщений для обработчика. Ваш обработчик "переопределяет" любого обработчика с тем же именем в любом из базовых классов вашего класса.

В некоторых случаях обработчик должен вызвать переопределенный обработчик в базовом классе, чтобы базовый класс (es) и Windows могли работать на сообщении. Место вызова обработчика базового класса в переопределение зависит от обстоятельств. Иногда необходимо сначала позвонить обработчику базового класса, а иногда и в последнюю очередь. Иногда вы звоните обработчику базового класса условно, если вы решите не обрабатывать сообщение самостоятельно. Иногда следует вызвать обработчик базового класса, а затем условно выполнить свой собственный код обработчика, в зависимости от значения или состояния, возвращенного обработчиком базового класса.

> [!CAUTION]
> Небезопасно изменять аргументы, передаваемые в обработчик, если вы намереваетесь передать их обработчику базового класса. Например, может возникнуть соблазн изменить аргумент `OnChar` *nChar* обработчика (например, для преобразования в верхний регистр). Это поведение довольно неясно, но если вам нужно `CWnd` выполнить `SendMessage` этот эффект, вместо этого используйте функцию члена.

Как определить правильный способ переопределить данное сообщение Когда [Мастер класса](reference/mfc-class-wizard.md) записывает скелет функции `OnCreate` обработчика для данного сообщения - обработчик для **WM_CREATE,** например - он наброски в виде рекомендуемой функции переопределена члена. Следующий пример рекомендует обработчик сначала вызвать обработчик базового класса и продолжить работу только при условии, что он не возвращается -1.

[!code-cpp[NVC_MFCMessageHandling#3](../mfc/codesnippet/cpp/handlers-for-standard-windows-messages_1.cpp)]

По конвенции, имена этих обработчиков начинаются с приставки "On". Некоторые из этих обработчиков не принимают никаких аргументов, в то время как другие принимают несколько. Некоторые из них также имеют тип возврата, кроме **пустоты.** Обработчики по умолчанию для всех **WM_** сообщений задокументированы в *Ссылке MFC* как функции участника класса, `CWnd` имена которых начинаются с "On". Декларации функций `CWnd` участника в префиксируются **с afx_msg**.

## <a name="see-also"></a>См. также раздел

[Объявление функций обработчика сообщений](../mfc/declaring-message-handler-functions.md)
