---
title: 'Управление памятью: выделение кадров'
ms.date: 11/04/2016
helpviewer_keywords:
- memory leaks [MFC], frame allocation
- memory [MFC], detecting leaks
- memory [MFC], reclaiming
- memory allocation [MFC], frames
- frame variables [MFC], automatic deletion of
- scope [MFC], frame variables
- heap allocation [MFC], vs. frame allocation
- variables [MFC], frame variables
- memory leaks [MFC], detecting
- memory, releasing [MFC]
- stack frames [MFC]
- memory leaks [MFC], allocating objects on the frame
- detecting memory leaks [MFC]
- frame allocation [MFC]
- frame variables [MFC]
ms.assetid: 945a211a-6f4f-4679-bb6a-b0f2a0d4a6c1
ms.openlocfilehash: 1ecf1c08164d1a760fce62457a6019e767ed2605
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84626303"
---
# <a name="memory-management-frame-allocation"></a>Управление памятью: выделение кадров

При выделении фрейма его имя берется из "кадра стека", который настраивается при каждом вызове функции. Кадр стека — это область памяти, которая временно содержит аргументы функции, а также все переменные, определенные локально для функции. Переменные фрейма часто называются "автоматическими" переменными, так как компилятор автоматически выделяет пространство для них.

Существует два ключевых характеристики выделения кадров. Во-первых, при определении локальной переменной в кадре стека выделяется достаточно места, чтобы вместить всю переменную, даже если это большой массив или структура данных. Во вторых, переменные кадра автоматически удаляются, когда выходят за пределы области действия:

[!code-cpp[NVC_MFC_Utilities#10](codesnippet/cpp/memory-management-frame-allocation_1.cpp)]

Для локальных переменных функций этот переход области происходит при выходе из функции, но область действия переменной фрейма может быть меньше, чем функция, если используются вложенные скобки. Это автоматическое удаление переменных кадров очень важно. В случае простых примитивных типов (например, **int** или **Byte**), массивов или структур данных автоматическое удаление просто освобождает память, используемую переменной. Так как переменная выходит за пределы области видимости, она недоступна в любом случае. Однако в случае объектов C++ процесс автоматического удаления является немного более сложным.

Если объект определен как переменная кадра, его конструктор автоматически вызывается в точке, где обнаружено определение. Когда объект выходит из области действия, его деструктор автоматически вызывается до освобождения памяти для объекта. Автоматическое создание и уничтожение может оказаться очень удобным, но необходимо помнить об автоматическом вызове, особенно в деструкторе.

Ключевым преимуществом выделения объектов в кадре является то, что они автоматически удаляются. При выделении объектов в рамке не нужно беспокоиться о том, что утраченные объекты вызывают утечку памяти. (Дополнительные сведения об утечках памяти см. в статье [Обнаружение утечек памяти в MFC](/previous-versions/visualstudio/visual-studio-2010/c99kz476(v=vs.100)).) Недостатком выделения кадров является то, что переменные фрейма не могут использоваться за пределами их области действия. Другим фактором при выборе распределения кадров и выделения кучи является то, что для больших структур и объектов часто лучше использовать кучу вместо стека для хранения, так как пространство стека часто ограничено.

## <a name="see-also"></a>См. также раздел

[Управление памятью](memory-management.md)
