---
description: 'Дополнительные сведения: Задание состояния дня для элемента управления "Календарь на месяц"'
title: Установка состояния дня в элементе управления "Календарь на месяц"
ms.date: 11/04/2016
f1_keywords:
- MCN_GETDAYSTATE
helpviewer_keywords:
- CMonthCalCtrl class [MFC], setting day state info
- MCN_GETDAYSTATE notification [MFC]
- month calendar controls [MFC], day state info
ms.assetid: 435d1b11-ec0e-4121-9e25-aaa6af812a3c
ms.openlocfilehash: e7fc06516877c54aadaef715c33abd128bbd6994
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97217215"
---
# <a name="setting-the-day-state-of-a-month-calendar-control"></a>Установка состояния дня в элементе управления "Календарь на месяц"

Одним из атрибутов элемента управления "месячный календарь" является возможность хранения информации, называемой состоянием дня элемента управления, для каждого дня месяца. Эти сведения используются для выделения определенных дат для текущего отображаемого месяца.

> [!NOTE]
> `CMonthCalCtrl`Для отображения сведений о состоянии дня объект должен иметь стиль MCS_DAYSTATE.

Сведения о состоянии дня выражаются как 32-разрядный тип данных **монсдайстате**. Каждый бит в битовом поле **монсдайстате** (от 1 до 31) представляет состояние дня в месяце. Если бит включен, соответствующий день будет отображаться полужирным шрифтом; в противном случае он будет отображаться без каких бы то ни было внимания.

Существует два метода для задания состояния дня для элемента управления "Календарь на месяц": явно с вызовом [CMonthCalCtrl:: сетдайстате](../mfc/reference/cmonthcalctrl-class.md#setdaystate) или путем обработки сообщения уведомления MCN_GETDAYSTATE.

## <a name="handling-the-mcn_getdaystate-notification-message"></a>Обработка сообщения уведомления MCN_GETDAYSTATE

MCN_GETDAYSTATE сообщение отправляется элементом управления, чтобы определить, как должны отображаться дни в отображаемых месяцах.

> [!NOTE]
> Так как элемент управления кэширует предыдущий и следующий месяцы в соответствии с видимым Месяцом, вы получаете это уведомление каждый раз, когда выбран новый месяц.

Чтобы правильно обрабатывалось это сообщение, необходимо определить, для чего запрашиваются сведения о состоянии дня месяца, инициализировать массив структур **монсдайстате** с соответствующими значениями и инициализировать связанный элемент структуры с новыми данными. Следующая процедура, подробно описывающая необходимые шаги, предполагает наличие `CMonthCalCtrl` объекта с именем *m_monthcal* и массива объектов **монсдайстате** , *мдстате*.

#### <a name="to-handle-the-mcn_getdaystate-notification-message"></a>Работа с сообщением уведомления MCN_GETDAYSTATE

1. С помощью [мастера классов](reference/mfc-class-wizard.md)добавьте обработчик уведомлений для MCN_GETDAYSTATE сообщения в объект *m_monthcal* (см. раздел [сопоставление сообщений функциям](../mfc/reference/mapping-messages-to-functions.md)).

1. Добавьте в тело обработчика следующий код:

   [!code-cpp[NVC_MFCControlLadenDialog#26](../mfc/codesnippet/cpp/setting-the-day-state-of-a-month-calendar-control_1.cpp)]

   В этом примере указатель *пнмхдр* преобразуется в правильный тип, а затем определяется, сколько месяцев информации запрашивается ( `pDayState->cDayState` ). Для каждого месяца текущее значение битов ( `pDayState->prgDayState[i]` ) инициализируется нулевым значением, а затем задаются требуемые даты (в данном случае 15-й день каждого месяца).

## <a name="see-also"></a>См. также раздел

[Использование CMonthCalCtrl](../mfc/using-cmonthcalctrl.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)
