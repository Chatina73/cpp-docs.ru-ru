---
title: Обновление текса на панели строки состояния
ms.date: 11/04/2016
helpviewer_keywords:
- updating user interface objects [MFC]
- ON_UPDATE_COMMAND_UI macro [MFC]
- user interface objects [MFC], updating
- text, status bar
- CStatusBar class [MFC], updating
- SetText method [MFC]
- panes, status bar
- status bars [MFC], updating
ms.assetid: 4984a3f4-9905-4d8c-a927-dca19781053b
ms.openlocfilehash: baf5013e34f262dd3bfed82941697ab9ca21e637
ms.sourcegitcommit: c3093251193944840e3d0a068ecc30e6449624ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2019
ms.locfileid: "57280203"
---
# <a name="updating-the-text-of-a-status-bar-pane"></a>Обновление текса на панели строки состояния

В этой статье объясняется, как изменить текст, отображаемый в панели строки состояния MFC. Строка состояния — объект window класса [CStatusBar](../mfc/reference/cstatusbar-class.md) — состоит из нескольких «панелей». Каждая область — это прямоугольная область строки состояния, который можно использовать для отображения информации. Например во многих приложениях отображать состояние CAPS LOCK, NUM LOCK и другие ключи в правой области. Приложения также часто отображать информативный текст в крайней левой панели (0), иногда называют «панель сообщений». Например строки состояния MFC по умолчанию использует панель сообщений для отображения строка, объясняющая текущего выбранного пункта меню или панели инструментов кнопки. Рисунок в [строки состояния](../mfc/status-bar-implementation-in-mfc.md) отображает состояние из приложения, созданные с помощью мастера приложений MFC.

По умолчанию не поддерживает MFC `CStatusBar` области при создании области. Чтобы активировать область, необходимо использовать макрос ON_UPDATE_COMMAND_UI для каждой области в строке состояния и обновление области. Так как области не отправлять сообщения WM_COMMAND (они не требуются такие как кнопки панели инструментов), необходимо ввести код вручную.

Предположим, например, одной панели отображаются `ID_INDICATOR_PAGE` как его идентификатор команды и что он содержит номер текущей страницы в документе. Следующая процедура описывает создание новой области в строке состояния.

### <a name="to-make-a-new-pane"></a>Чтобы сделать новую область

1. Определить идентификатор панели команд.

   На **представление** меню, щелкните **представление ресурсов**. Щелкните правой кнопкой мыши ресурс проекта и нажмите кнопку **символы ресурсов**. В диалоговом окне "символы ресурсов", нажмите кнопку `New`. Введите имя идентификатор команды: например, `ID_INDICATOR_PAGE`. Укажите значение для идентификатора, или примите значение, предлагаемых в диалоговом окне "символы ресурсов". Например, для `ID_INDICATOR_PAGE`, оставьте значение по умолчанию. Закройте диалоговое окно "символы ресурсов".

1. Определите строку по умолчанию для отображения в области.

   Откройте представление ресурсов, дважды щелкните **таблица строк** в окне со списком типов ресурсов для вашего приложения. С помощью **таблица строк** в редакторе, выберите **новую строку** из **вставить** меню. В окне свойств строки выберите идентификатор команды на панели (например, `ID_INDICATOR_PAGE`) и введите строковое значение по умолчанию, такие как «Страница». Закройте редактор строк. (Требуется строка по умолчанию, чтобы избежать ошибки компилятора).

1. На панели, чтобы добавить *индикаторы* массива.

   В файле MAINFRM. CPP, найдите *индикаторы* массива. Этот массив перечислены идентификаторы команд для всех индикаторов в строке состояния, в порядке слева направо. На соответствующей точке в массиве, введите идентификатор команды в своей области, как показано ниже, для `ID_INDICATOR_PAGE`:

   [!code-cpp[NVC_MFCDocView#10](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_1.cpp)]

Рекомендуемый способ отображения текста в области является вызов `SetText` функция-член класса `CCmdUI` в функции обработчика обновления для области. Например, может потребоваться настроить целочисленная переменная *m_nPage* , содержащее номер текущей страницы и используйте `SetText` присвоить текст области строковую версию этого числа.

> [!NOTE]
>  `SetText` Подход является рекомендуемым. Возможно, для выполнения этой задачи на несколько более низкий уровень, вызвав `CStatusBar` функция-член `SetPaneText`. Тем не менее по-прежнему необходимо обработчика обновлений. Без такой обработчик для области MFC автоматически отключает области, удаляя его содержимого.

Ниже показано, как использовать функцию обработчика обновления для отображения текста в области.

#### <a name="to-make-a-pane-display-text"></a>Чтобы сделать область отображения текста

1. Добавьте обработчик команды обновления для команды.

   Вручную добавьте прототип для обработчика, как показано ниже, для `ID_INDICATOR_PAGE` (в MAINFRM. H):

   [!code-cpp[NVC_MFCDocView#11](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_2.h)]

1. В соответствующий. CPP добавьте определение обработчика, как показано ниже, для `ID_INDICATOR_PAGE` (в MAINFRM. CPP):

   [!code-cpp[NVC_MFCDocView#12](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_3.cpp)]

   Последние три строки этого обработчика не код, который отображает текст.

1. На карте соответствующее сообщение, добавить макрос ON_UPDATE_COMMAND_UI, как показано ниже, для `ID_INDICATOR_PAGE` (в MAINFRM. CPP):

   [!code-cpp[NVC_MFCDocView#13](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_4.cpp)]

После определения значения параметра *m_nPage* переменную-член (класса `CMainFrame`), этот метод вызывает номер страницы для отображения в области во время обработки бездействия таким же образом, что приложение обновляет другие показатели. Если *m_nPage* изменения "," изменяется во время следующего цикла простоя.

### <a name="what-do-you-want-to-know-more-about"></a>Выберите для получения дополнительных сведений

- [Обновление объектов пользовательского интерфейса (как обновить кнопки панели инструментов и команды меню как изменились условия программы)](../mfc/how-to-update-user-interface-objects.md)

## <a name="see-also"></a>См. также

[Реализация строки состояния в MFC](../mfc/status-bar-implementation-in-mfc.md)<br/>
[Класс CStatusBar](../mfc/reference/cstatusbar-class.md)
