---
title: Обновление текса на панели строки состояния
ms.date: 11/04/2016
helpviewer_keywords:
- updating user interface objects [MFC]
- ON_UPDATE_COMMAND_UI macro [MFC]
- user interface objects [MFC], updating
- text, status bar
- CStatusBar class [MFC], updating
- SetText method [MFC]
- panes, status bar
- status bars [MFC], updating
ms.assetid: 4984a3f4-9905-4d8c-a927-dca19781053b
ms.openlocfilehash: 723046fc1721cc46608e00f19a4431ef081be13d
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81366690"
---
# <a name="updating-the-text-of-a-status-bar-pane"></a>Обновление текса на панели строки состояния

В этой статье объясняется, как изменить текст, который появляется в панели панели адвокатов MFC. Панель статуса — объект окна класса [CStatusBar](../mfc/reference/cstatusbar-class.md) — содержит несколько «пане». Каждая панель представляет собой прямоугольную область панели статуса, которую можно использовать для отображения информации. Например, во многих приложениях отображается статус CAPS LOCK, NUM LOCK и других ключей в самых правых стеклах. Приложения также часто отображают информативный текст в левой панели (панель 0), иногда называемой "панель сообщений". Например, в строке состояния MFC по умолчанию используется панель сообщений для отображения строки, объясняющей выбранный в настоящее время элемент меню или кнопку панели инструментов. На рисунке в [«Статус-барах»](../mfc/status-bar-implementation-in-mfc.md) отображается панель статуса из приложения MFC, созданного Приложением MFC.

По умолчанию MFC не `CStatusBar` включает панель при настройке панели. Чтобы активировать панель, необходимо использовать ON_UPDATE_COMMAND_UI макрос для каждой панели на панели состояния и обновить панели. Поскольку панели не отправляют WM_COMMAND сообщений (они не похожи на кнопки панели инструментов), необходимо ввести код вручную.

Например, предположим, `ID_INDICATOR_PAGE` что одно стекло имеет в качестве идентификатора команды и содержит текущий номер страницы в документе. Следующая процедура описывает, как создать новую панель в панели статуса.

### <a name="to-make-a-new-pane"></a>Чтобы сделать новую панель

1. Определите идентификатор команды панели.

   В меню **View** нажмите **«Вид ресурсов».** Нажмите правой кнопкой мыши ресурс проекта и нажмите **Символы ресурсов**. В диалоговом поле «Символы ресурсов» щелкните кнопку `New`. Введите имя идентификатора команды: например, `ID_INDICATOR_PAGE`. Укажите значение для идентификатора или примите значение, предложенное диалоговое окно «Символы ресурсов». Например, `ID_INDICATOR_PAGE`для, принять значение по умолчанию. Закройте диалоговую коробку «Символы ресурсов».

1. Определите строку по умолчанию для отображения в панели.

   При открытии просмотра ресурсов в окне, в которое перечислены типы ресурсов для приложения, дважды щелкните **строку.** Открывредактор **струнного стола** выберите **Новую строку** из меню **Insert.** Выберите идентификатор команды панели `ID_INDICATOR_PAGE`(например, ) и введите значение строки по умолчанию, например "Страница". Закройте строку редактора. (Для предотвращения ошибки компилятора нужна строка по умолчанию.)

1. Добавьте панель в массив *индикаторов.*

   В файле MAINFRM. CPP, найдите массив *индикаторов.* В этом массиве перечислены иные иудькоманды команд для всех индикаторов панели статуса, в порядке слева направо. В соответствующей точке массива введите идентификатор `ID_INDICATOR_PAGE`команды панели, как показано здесь для:

   [!code-cpp[NVC_MFCDocView#10](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_1.cpp)]

Рекомендуемый способ отображения текста в `SetText` панели — `CCmdUI` вызвать функцию элемента класса в функции обработчика обновлений для панели. Например, можно настроить переменную integer *m_nPage,* которая содержит текущий номер страницы и использовать `SetText` для установки текста панели в строку версии этого числа.

> [!NOTE]
> Рекомендуется `SetText` такой подход. Эту задачу можно выполнить на несколько `CStatusBar` более `SetPaneText`низком уровне, позвонив в функцию участника. Несмотря на это, вам все еще нужен обработчик обновления. Без такого обработчика для панели, MFC автоматически отражает панель, сметая его содержимое.

Следующая процедура показывает, как использовать функцию обработчика обновлений для отображения текста в панели.

#### <a name="to-make-a-pane-display-text"></a>Чтобы сделать текст отображения панели

1. Добавьте обработчик обновления команды для команды.

   Вручную добавьте прототип обработчика, `ID_INDICATOR_PAGE` как показано здесь (в MAINFRM. H):

   [!code-cpp[NVC_MFCDocView#11](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_2.h)]

1. В соответствующем . Файл CPP, добавьте определение обработчика, как показано здесь `ID_INDICATOR_PAGE` (в MAINFRM. CPP):

   [!code-cpp[NVC_MFCDocView#12](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_3.cpp)]

   Последние три строки этого обработчика являются кодом, который отображает ваш текст.

1. На соответствующую карту сообщений добавьте ON_UPDATE_COMMAND_UI `ID_INDICATOR_PAGE` макрос, как показано здесь (в MAINFRM. CPP):

   [!code-cpp[NVC_MFCDocView#13](../mfc/codesnippet/cpp/updating-the-text-of-a-status-bar-pane_4.cpp)]

Как только вы определяете значение переменной `CMainFrame` *m_nPage* члена (класса), этот метод приводит к тому, что номер страницы появляется в панели во время простоя обработки таким же образом, как приложение обновляет другие индикаторы. Если *m_nPage* изменения, дисплей изменяется во время следующего цикла простоя.

### <a name="what-do-you-want-to-know-more-about"></a>Что вы хотите узнать больше о

- [Обновление объектов пользователь-интерфейса (как обновить кнопки панели инструментов и элементы меню по мере изменения условий программы)](../mfc/how-to-update-user-interface-objects.md)

## <a name="see-also"></a>См. также раздел

[Реализация status Bar в МФЦ](../mfc/status-bar-implementation-in-mfc.md)<br/>
[Класс CStatusBar](../mfc/reference/cstatusbar-class.md)
