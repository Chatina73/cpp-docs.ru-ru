---
description: Дополнительные сведения см. в статье сериализация в MFC.
title: Сериализация в MFC
ms.date: 11/04/2016
helpviewer_keywords:
- collection classes [MFC], serialization
- bypassing serialization [MFC]
- MFC, serialization
- serialization [MFC], MFC
- serialization [MFC], bypassing
ms.assetid: fb596a18-4522-47e0-96e0-192732d24c12
ms.openlocfilehash: 278de59c6e091fd59826622553f50503b12602bc
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97217579"
---
# <a name="serialization-in-mfc"></a>Сериализация в MFC

В этой статье объясняется механизм сериализации, предоставляемый в библиотека Microsoft Foundation Class (MFC), позволяющий сохранять объекты между запусками программы.

Сериализация — это процесс записи или чтения объекта в постоянном носителе хранилища, таком как файл на диске. Сериализация идеально подходит для ситуаций, когда требуется поддерживать состояние структурированных данных (таких как классы или структуры C++) во время или после выполнения программы. Использование объектов сериализации, предоставляемых MFC, позволяет выполнять эти операции в стандартном и согласованном порядке, освобождая разработчика пользователя от необходимости выполнения операций с файлами вручную.

MFC предоставляет встроенную поддержку сериализации в классе `CObject` . Таким словами, все классы, производные от, `CObject` могут использовать `CObject` протокол сериализации.

Основная идея сериализации заключается в том, что объект должен иметь возможность записи его текущего состояния, обычно определяемого значением его переменных-членов, в постоянное хранилище. Позднее объект можно создать повторно путем считывания или десериализации состояния объекта из хранилища. Сериализация обрабатывает все детали указателей объектов и циклических ссылок на объекты, используемые при сериализации объекта. Ключевой момент заключается в том, что сам объект отвечает за чтение и запись его собственного состояния. Таким же, чтобы класс был сериализуемым, он должен реализовать базовые операции сериализации. Как показано в группе сериализации статей, эту функцию легко добавить в класс.

MFC использует объект `CArchive` класса в качестве посредника между сериализуемым объектом и носителем хранилища. Этот объект всегда связан с `CFile` объектом, из которого он получает необходимую информацию для сериализации, включая имя файла и то, является ли запрошенная операция операцией чтения или записи. Объект, выполняющий операцию сериализации, может использовать `CArchive` объект без учета природы среды хранения.

`CArchive`Объект использует перегруженные операторы вставки ( **<\<**) and extraction (**>>** ) для выполнения операций записи и чтения. Дополнительные сведения см. в разделе [Хранение и загрузка CObjects с помощью архива](../mfc/storing-and-loading-cobjects-via-an-archive.md) в статье сериализация: сериализация объекта.

> [!NOTE]
> Не путайте `CArchive` класс с классами iostream общего назначения, которые предназначены только для форматированного текста. `CArchive`Класс предназначен для сериализованных объектов в двоичном формате.

При необходимости можно обойти сериализацию MFC, чтобы создать собственный механизм для постоянного хранения данных. Необходимо переопределить функции члена класса, инициирующие сериализацию в команде пользователя. Ознакомьтесь с обсуждением в [техническом примечании 22](../mfc/tn022-standard-commands-implementation.md) к командам ID_FILE_OPEN, ID_FILE_SAVE и ID_FILE_SAVE_AS стандартных команд.

В следующих статьях рассматриваются две основные задачи, необходимые для сериализации.

- [Сериализация: создание сериализуемого класса](../mfc/serialization-making-a-serializable-class.md)

- [Сериализация: сериализация объекта](../mfc/serialization-serializing-an-object.md)

Сериализация статьи [: сериализация и ввод/вывод базы данных](../mfc/serialization-serialization-vs-database-input-output.md) описывается в том случае, когда сериализация является подходящим приемом ввода-вывода в приложениях базы данных.

## <a name="see-also"></a>См. также раздел

[Основные понятия](../mfc/mfc-concepts.md)<br/>
[Общие разделы по MFC](../mfc/general-mfc-topics.md)<br/>
[Класс CArchive](../mfc/reference/carchive-class.md)<br/>
[CObject, класс](../mfc/reference/cobject-class.md)<br/>
[Класс CDocument](../mfc/reference/cdocument-class.md)<br/>
[Класс Кфиле](../mfc/reference/cfile-class.md)
