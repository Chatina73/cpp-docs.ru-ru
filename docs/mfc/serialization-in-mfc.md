---
title: Сериализация в MFC
ms.date: 11/04/2016
helpviewer_keywords:
- collection classes [MFC], serialization
- bypassing serialization [MFC]
- MFC, serialization
- serialization [MFC], MFC
- serialization [MFC], bypassing
ms.assetid: fb596a18-4522-47e0-96e0-192732d24c12
ms.openlocfilehash: eca4d0357977bc7ef21063718c738ae5bd8e7431
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81372749"
---
# <a name="serialization-in-mfc"></a>Сериализация в MFC

В этой статье объясняется механизм сериализации, предоставленный в библиотеке класса Microsoft Foundation (MFC), позволяющий объектам сохраняться между запусками программы.

Сериализация — это процесс написания или чтения объекта в или из постоянного носителя, такого как дисковый файл. Сериализация идеально подходит для ситуаций, когда желательно поддерживать состояние структурированных данных (таких как классы или структуры СЗ) во время или после выполнения программы. Использование объектов сериализации, предоставляемых MFC, позволяет это происходить стандартным и последовательным образом, освобождая пользователя от необходимости выполнять операции файлов вручную.

MFC поставляет встроенную поддержку для `CObject`сериализации в классе. Таким образом, все `CObject` классы, `CObject`полученные из могут воспользоваться 's протокол сериализации.

Основная идея сериализации заключается в том, что объект должен иметь возможность записывать свое текущее состояние, обычно очемяемое значением переменных его членов, к постоянному хранению. Позже объект может быть воссоздан путем чтения или десериализации состояния объекта из хранилища. Сериализация обрабатывает все детали указателей объектов и круговые ссылки на объекты, которые используются при сериализации объекта. Ключевым моментом является то, что сам объект отвечает за чтение и написание своего состояния. Таким образом, для того, чтобы класс был сериализируемым, он должен реализовать основные операции сериализации. Как показано в группе сериализации статей, эту функциональность легко добавить в класс.

MFC использует объект `CArchive` класса в качестве посредника между объектом для сериализации и средой хранения. Этот объект всегда связан `CFile` с объектом, из которого он получает необходимую информацию для сериализации, включая имя файла и является ли запрашиваемое действие прочитанным или записываемым. Объект, выполняя операцию сериализации, `CArchive` может использовать объект без учета характера среды хранения.

Объект `CArchive` использует перегруженную вставку**<**() и**>>** экстракции () операторов для выполнения операций по написанию и чтению. Для получения дополнительной информации смотрите [Хранение и загрузку cObjects через архив](../mfc/storing-and-loading-cobjects-via-an-archive.md) в статье Serialization: Serializing объект.

> [!NOTE]
> Не путайте `CArchive` класс с классами общего назначения иострима, которые предназначены только для отформатированного текста. Класс `CArchive` предназначен для сериализованных объектов бинарного формата.

При желании можно обойти сериализацию MFC, чтобы создать свой собственный механизм постоянного хранения данных. Вам нужно будет переопределить функции члена класса, которые инициируют сериализацию по команде пользователя. Смотрите обсуждение в [Техническом примечании 22](../mfc/tn022-standard-commands-implementation.md) ID_FILE_OPEN, ID_FILE_SAVE и ID_FILE_SAVE_AS стандартных команд.

Следующие статьи охватывают две основные задачи, необходимые для сериализации:

- [Сериализация. Создание сериализуемого класса](../mfc/serialization-making-a-serializable-class.md)

- [Сериализация. Сериализация объекта](../mfc/serialization-serializing-an-object.md)

Статья [Сериализация: Сериализация против ввода базы данных/выход](../mfc/serialization-serialization-vs-database-input-output.md) описывает, когда сериализация является подходящим методом ввода/вывода в приложениях баз данных.

## <a name="see-also"></a>См. также раздел

[Основные понятия](../mfc/mfc-concepts.md)<br/>
[Общие темы МФЦ](../mfc/general-mfc-topics.md)<br/>
[Класс CArchive](../mfc/reference/carchive-class.md)<br/>
[Класс CObject](../mfc/reference/cobject-class.md)<br/>
[Класс CDocument](../mfc/reference/cdocument-class.md)<br/>
[Класс CFile](../mfc/reference/cfile-class.md)
