---
title: Сокеты Windows. Уведомления сокетов
ms.date: 11/04/2016
helpviewer_keywords:
- Windows Sockets [MFC], notifications
- notifications [MFC], socket
- sockets [MFC], notifications
ms.assetid: 87d5bf70-6e77-49a9-9a64-aaadee2ad018
ms.openlocfilehash: 10dbe6c0e1f486257c50efc4acf917cd9d596630
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80167775"
---
# <a name="windows-sockets-socket-notifications"></a>Сокеты Windows. Уведомления сокетов

В этой статье описываются функции уведомлений в классах сокетов. Эти функции элементов являются функциями обратного вызова, которые платформа вызывает для уведомления объекта сокета важных событий. Функции уведомлений:

- [OnReceive](../mfc/reference/casyncsocket-class.md#onreceive): Уведомляет этот сокет о том, что в буфере есть данные для извлечения путем вызова [Receive](../mfc/reference/casyncsocket-class.md#receive).

- [OnSend](../mfc/reference/casyncsocket-class.md#onsend): Уведомляет этот сокет о том, что теперь он может отправить данные, вызвав метод [Send](../mfc/reference/casyncsocket-class.md#send).

- [OnAccept](../mfc/reference/casyncsocket-class.md#onaccept): Уведомляет этот сокет прослушивания о том, что он может принимать ожидающие запросы на подключение, вызывая [Accept](../mfc/reference/casyncsocket-class.md#accept).

- [OnConnect](../mfc/reference/casyncsocket-class.md#onconnect): Уведомляет этот соединительный сокет о том, что попытка подключения завершена: возможно, успешно или, возможно, произошла ошибка.

- [OnClose](../mfc/reference/casyncsocket-class.md#onclose): Уведомляет этот сокет о том, что сокет, к которому он подключен, закрыт.

    > [!NOTE]
    >  Дополнительная функция уведомления — [онаутофбанддата](../mfc/reference/casyncsocket-class.md#onoutofbanddata). Это уведомление сообщает принимающему сокету, что отправляющий сокет имеет «нестандартные» данные для отправки. Нестандартные данные — это логически независимый канал, связанный с каждой парой подключенных сокетов потоков. Канал внештатного канала обычно используется для отправки "срочных" данных. MFC поддерживает данные вне диапазона. Опытным пользователям, работающим с классом [CAsyncSocket](../mfc/reference/casyncsocket-class.md) , может потребоваться использование нестандартного канала, но пользователям класса [CSocket](../mfc/reference/csocket-class.md) не рекомендуется использовать его. Проще всего создать второй сокет для передачи таких данных. Дополнительные сведения о нестандартных данных см. в разделе Спецификация сокетов Windows, доступная в Windows SDK.

Если вы наследуете от класса `CAsyncSocket`, необходимо переопределить функции уведомления для этих сетевых событий, представляющих интерес для вашего приложения. Если класс является производным от класса `CSocket`, он выбирает, следует ли переопределять интересующие функции уведомления. Можно также использовать сам `CSocket`, в этом случае функция уведомлений по умолчанию не делает ничего.

Эти функции являются переопределяемыми функциями обратного вызова. `CAsyncSocket` и `CSocket` преобразовывают сообщения в уведомления, но необходимо реализовать, как функция уведомления отвечает, если вы хотите их использовать. Функции уведомления вызываются во время уведомления сокета о событии, например о наличии данных для чтения.

MFC вызывает функции уведомления, чтобы настроить поведение сокета на момент получения уведомления. Например, можно вызвать `Receive` из функции уведомлений `OnReceive`, то есть получать уведомления о наличии данных для чтения, вы получаете `Receive` для чтения. Этот подход не является обязательным, но является допустимым сценарием. В качестве альтернативы вы можете использовать функцию уведомления для отслеживания хода выполнения, печати сообщений **трассировки** и т. д.

Вы можете воспользоваться этими уведомлениями, переопределив функции уведомления в производном классе Socket и предоставив реализацию.

Во время операции, такой как получение или отправка данных, объект `CSocket` преобразуется в синхронный режим. Во время синхронного состояния любые уведомления, предназначенные для других сокетов, помещаются в очередь, пока текущий сокет ожидает уведомления, которое ему требуется. (Например, во время вызова `Receive` сокету требуется уведомление для чтения.) После того как сокет завершает свою синхронную операцию и снова переходит в асинхронный режим, другие сокеты могут начать получать уведомления в очереди.

> [!NOTE]
> В `CSocket`функция уведомления `OnConnect` никогда не вызывается. Для соединений вызывается `Connect`, который будет возвращать, когда соединение завершается (успешно или по ошибке). Обработка уведомлений о соединении — это сведения о реализации MFC.

Дополнительные сведения о каждой функции уведомления см. в описании функции в разделе класс `CAsyncSocket` в *справочнике по MFC*. Исходный код и сведения о примерах MFC см. в разделе [примеры MFC](../overview/visual-cpp-samples.md#mfc-samples).

Дополнительные сведения см. в разделе:

- [Сокеты Windows. Использование класса CAsyncSocket](../mfc/windows-sockets-using-class-casyncsocket.md)

- [Сокеты Windows. Наследование от классов сокета](../mfc/windows-sockets-deriving-from-socket-classes.md)

- [Сокеты Windows. Работа сокетов с архивами](../mfc/windows-sockets-how-sockets-with-archives-work.md)

- [Сокеты Windows. Блокировка](../mfc/windows-sockets-blocking.md)

- [Сокеты Windows. Порядок байтов](../mfc/windows-sockets-byte-ordering.md)

- [Сокеты Windows. Преобразование строк](../mfc/windows-sockets-converting-strings.md)

## <a name="see-also"></a>См. также раздел

[Сокеты Windows в MFC](../mfc/windows-sockets-in-mfc.md)
