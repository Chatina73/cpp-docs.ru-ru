---
title: Перетаскивание изображений из списка изображений
ms.date: 11/04/2016
helpviewer_keywords:
- CImageList class [MFC], dragging images from
- dragging images from image lists [MFC]
- image lists [MFC], dragging images from
- images [MFC], dragging from image lists
ms.assetid: af691db8-e4f0-4046-b7b9-9acc68d3713d
ms.openlocfilehash: 3035e6f21d38568b364fce02358c3baed4870bc3
ms.sourcegitcommit: fcb48824f9ca24b1f8bd37d647a4d592de1cc925
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69508649"
---
# <a name="dragging-images-from-an-image-list"></a>Перетаскивание изображений из списка изображений

[CImageList](../mfc/reference/cimagelist-class.md) включает функции для перетаскивания изображения на экране. Перетаскивая функции перемещают изображение плавно, в цвете и без мигания курсора. Можно перетащить как маскированные, так и немаскированные изображения.

Функция-член [бегиндраг](../mfc/reference/cimagelist-class.md#begindrag) начинает операцию перетаскивания. Параметры включают в себя индекс изображения, которое нужно перетащить, и расположение активной точки в изображении. Активная точка — это один пиксель, который функции перетаскивания распознаются как точное расположение изображения на экране. Как правило, приложение задает активную точку, чтобы она совпадала с активной назначением курсора мыши. Функция-член [драгмове](../mfc/reference/cimagelist-class.md#dragmove) перемещает изображение в новое расположение.

Функция-член [DragEnter](../mfc/reference/cimagelist-class.md#dragenter) задает начальное расположение изображения перетаскивания в окне и рисует изображение в позиции. Параметры включают указатель на окно, в котором рисуется изображение, и точку, указывающую координаты начальной позиции в окне. Координаты задаются относительно левого верхнего угла окна, а не клиентской области. Это справедливо и для всех функций перетаскивания изображений, которые принимают координаты в качестве параметров. Это означает, что при указании координат необходимо компенсировать ширину элементов окна, например границы, строки заголовка и строки меню. Если при вызове `DragEnter`задается нулевой указатель, то функции перетаскивания нарисуют изображение в контексте устройства, связанном с окном рабочего стола, а координаты зависят от левого верхнего угла экрана.

`DragEnter`блокирует все остальные обновления в данном окне во время операции перетаскивания. Если во время операции перетаскивания необходимо выполнить какие-либо действия, такие как выделение целевого объекта для операции перетаскивания, можно временно скрыть перетаскиваемый рисунок с помощью функции-члена [DragLeave](../mfc/reference/cimagelist-class.md#dragleave) . Можно также использовать функцию члена [драгшовнолокк](../mfc/reference/cimagelist-class.md#dragshownolock) .

Вызовите [енддраг](../mfc/reference/cimagelist-class.md#enddrag) , когда вы закончите перетаскивать изображение.

Функция-член [сетдрагкурсоримаже](../mfc/reference/cimagelist-class.md#setdragcursorimage) создает новое изображение перетаскивания, комбинируя заданный рисунок (обычно это изображение курсора мыши) с текущим изображением перетаскивания. Поскольку функции перетаскивания используют новый образ во время операции перетаскивания, следует использовать функцию Windows [шовкурсор](/windows/win32/api/winuser/nf-winuser-showcursor) , чтобы скрыть фактический курсор мыши после вызова метода `SetDragCursorImage`. В противном случае система может иметь два курсора мыши в течение операции перетаскивания.

Когда приложение вызывает `BeginDrag`, система создает временный внутренний список изображений и копирует указанное изображение перетаскивания во внутренний список. Вы можете получить указатель на временный список перетаскивания с помощью функции-члена [жетдрагимаже](../mfc/reference/cimagelist-class.md#getdragimage) . Функция также получает текущую точку перетаскивания и смещение изображения перетаскивания относительно позиции перетаскивания.

## <a name="see-also"></a>См. также

[Использование CImageList](../mfc/using-cimagelist.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)
