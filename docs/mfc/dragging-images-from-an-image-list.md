---
title: Перетаскивание изображений из списка изображений
ms.date: 11/04/2016
helpviewer_keywords:
- CImageList class [MFC], dragging images from
- dragging images from image lists [MFC]
- image lists [MFC], dragging images from
- images [MFC], dragging from image lists
ms.assetid: af691db8-e4f0-4046-b7b9-9acc68d3713d
ms.openlocfilehash: 9d42e9cdd8e2711fc6ed6aa0d08a19b8bc55d5f1
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50562205"
---
# <a name="dragging-images-from-an-image-list"></a>Перетаскивание изображений из списка изображений

[CImageList](../mfc/reference/cimagelist-class.md) включает функции для перетаскивания изображения на экране. Функции перетаскивания переместить изображения, цвета и без любой мигание курсора. Можно перетащить маскированные и немаскированные образов.

[BeginDrag](../mfc/reference/cimagelist-class.md#begindrag) функция-член начинает операцию перетаскивания. Параметры включают индекс образа для перетаскивания и расположение активную зону в изображении. Активная точка — один пиксель, который распознает функций перетаскивания как экрана точное расположение образа. Как правило приложение задает активную зону, таким образом, чтобы он совпадает с активную точку курсора мыши. [DragMove](../mfc/reference/cimagelist-class.md#dragmove) функция-член перемещает изображение в новое расположение.

[DragEnter](../mfc/reference/cimagelist-class.md#dragenter) функция-член задает начальное положение изображение перетаскивания в пределах этого периода и рисует изображение в позиции. Параметры включают указатель на окно, в котором необходимо рисовать изображения и точка, которая определяет координаты начальной позиции, в окне. Координаты указываются относительно верхнего левого угла окна, не клиентской области. То же самое верно для всех функций перетаскивания изображения, которые принимают координаты, что и параметры. Это означает, что необходимо компенсировать ширину окна элементы, такие как границу, заголовок и меню, при указании координаты. Если указать **NULL** дескриптор окна, при вызове `DragEnter`перетаскивания функции рисования изображения в контексте устройства, связанный с окном рабочего стола и координаты указываются относительно левого верхнего угла экрана.

`DragEnter` блокирует все другие обновления для заданного окна во время операции перетаскивания. Если необходимо выполнить любое изображение во время операции перетаскивания, например выделение целевого объекта для операции перетаскивания и вставки, можно временно скрыть перетаскиваемого изображения с помощью [DragLeave](../mfc/reference/cimagelist-class.md#dragleave) функция-член. Можно также использовать [DragShowNoLock](../mfc/reference/cimagelist-class.md#dragshownolock) функция-член.

Вызовите [EndDrag](../mfc/reference/cimagelist-class.md#enddrag) завершении перетаскиванием изображения мышью.

[SetDragCursorImage](../mfc/reference/cimagelist-class.md#setdragcursorimage) функция-член создает новый образ перетаскивания путем объединения с текущего изображения перетащите заданного изображения (обычно изображения курсора мыши). Так как функции перетаскивания используют новый образ во время операции перетаскивания, следует использовать Windows [функция ShowCursor](/windows/desktop/api/winuser/nf-winuser-showcursor) функции, чтобы скрыть курсор мыши после вызова метода `SetDragCursorImage`. В противном случае система может показаться имеют два курсора мыши в течение операции перетаскивания.

Если приложение вызывает `BeginDrag`, система создает список изображений временный, внутренние, и копии указанного перетащите изображение во внутренний список. Указатель на список изображений временный перетаскивания можно получить с помощью [GetDragImage](../mfc/reference/cimagelist-class.md#getdragimage) функция-член. Функция также получает текущую позицию перетаскивания и смещение изображение перетаскивания относительно положения перетаскивания.

## <a name="see-also"></a>См. также

[Использование CImageList](../mfc/using-cimagelist.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)

