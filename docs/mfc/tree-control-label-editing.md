---
description: Дополнительные сведения см. в статье Изменение метки элемента управления деревом
title: Редактирование меток древовидного элемента управления
ms.date: 11/04/2016
helpviewer_keywords:
- editing tree control labels
- CTreeCtrl class [MFC], editing labels
- label editing in CTreeCtrl class [MFC]
- tree controls [MFC], label editing
ms.assetid: 6cde2ac3-43ee-468f-bac2-cf1a228ad32d
ms.openlocfilehash: b471b2ce9773ec86b1e4f94e766d3428fef456fa
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97264015"
---
# <a name="tree-control-label-editing"></a>Редактирование меток древовидного элемента управления

Пользователь может напрямую изменять метки элементов в элементе управления "дерево" ([CTreeCtrl](../mfc/reference/ctreectrl-class.md)), который имеет стиль **TVS_EDITLABELS** . Пользователь начинает редактирование, щелкая метку элемента, который находится в фокусе. Приложение начинает редактирование с помощью функции члена [едитлабел](../mfc/reference/ctreectrl-class.md#editlabel) . Элемент управления "дерево" отправляет уведомление при начале редактирования, а также при его отмене или завершении. По завершении редактирования вы несете ответственность за обновление метки элемента, если это уместно.

Когда начинается редактирование метки, элемент управления "дерево" отправляет сообщение уведомления [TVN_BEGINLABELEDIT](/windows/win32/Controls/tvn-beginlabeledit) . Обрабатывая это уведомление, можно разрешить редактирование некоторых меток и запретить редактирование других. Возврат 0 позволяет изменять и возвращать ненулевой запрет.

При отмене или завершении редактирования метки элемент управления "дерево" отправляет сообщение уведомления [TVN_ENDLABELEDIT](/windows/win32/Controls/tvn-endlabeledit) . Параметр *lParam* является адресом структуры [нмтвдиспинфо](/windows/win32/api/commctrl/ns-commctrl-nmtvdispinfow) . Элемент **Item** является структурой [твитем](/windows/win32/api/commctrl/ns-commctrl-tvitemw) , определяющей элемент и включающей редактируемый текст. Вы несете ответственность за обновление метки элемента (при необходимости), возможно, после проверки измененной строки.  `TV_ITEM` Если редактирование отменено, член псзтекст имеет значение 0.

Во время редактирования метки, как правило, в ответ на [TVN_BEGINLABELEDIT](/windows/win32/Controls/tvn-beginlabeledit) сообщение уведомления можно получить указатель на элемент управления редактирования, используемый для редактирования меток, с помощью функции-члена [жетедитконтрол](../mfc/reference/ctreectrl-class.md#geteditcontrol) . Вы можете вызвать функцию-член [сетлимиттекст](../mfc/reference/cedit-class.md#setlimittext) элемента управления Edit, чтобы ограничить объем текста, который пользователь может ввести или подкласс элемента управления Edit для перехвата и удаления недопустимых символов. Однако обратите внимание, что элемент управления "поле ввода" отображается только *после* отправки **TVN_BEGINLABELEDIT** .

## <a name="see-also"></a>См. также раздел

[Использование CTreeCtrl](../mfc/using-ctreectrl.md)<br/>
[Элементы управления](../mfc/controls-mfc.md)
