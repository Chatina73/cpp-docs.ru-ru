---
title: Понятие объекта CArchive
ms.date: 11/04/2016
helpviewer_keywords:
- archive objects [MFC]
- archives [MFC], for serialization
- buffers, serializable objects
- CArchive class [MFC], about CArchive class [MFC]
- buffering, serializable objects
ms.assetid: 843f1825-288d-4d89-a1fa-70e1f92d9b8b
ms.openlocfilehash: 0a78385c81c43a4b0c925bbe89ccd3937873ee8b
ms.sourcegitcommit: 63784729604aaf526de21f6c6b62813882af930a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2020
ms.locfileid: "79446022"
---
# <a name="what-is-a-carchive-object"></a>Понятие объекта CArchive

Объект `CArchive` предоставляет механизм буферизации для строгой типизации для записи или чтения сериализуемых объектов в объект `CFile` или из него. Обычно объект `CFile` представляет дисковый файл; Однако он также может быть файлом памяти (`CSharedFile` объектом), возможно, представляющим буфер обмена.

Заданный `CArchive` объект либо хранит (записывает, сериализует) данные, либо загружает (считывает, десериализует) данные, но никогда не оба. Срок жизни объекта `CArchive` ограничен одним проходом при записи объектов в файл или считывании объектов из файла. Таким тем, для сериализации данных в файл и последующей десериализации их из файла потребуются два последовательных объекта `CArchive`.

Когда архив сохраняет объекты в файл, Архив прикрепляет к объектам имя `CRuntimeClass`. Затем, когда другой архив загружает объекты из файла в память, объекты, производные от `CObject`, динамически перестроятся на основе `CRuntimeClass` объектов. На данный объект можно ссылаться более одного раза, так как он записывается в файл при хранении архива. Однако загрузка архива приведет к реконструированию объекта только один раз. Подробные сведения о том, как Архив присоединяет `CRuntimeClass` сведения к объектам и реконструирует объекты, принимая во внимание возможные многочисленные ссылки, описаны в [технической статье 2](../mfc/tn002-persistent-object-data-format.md).

По мере сериализации данных в архив этот архив накапливает данные до заполнения буфера. Затем Архив записывает свой буфер в объект `CFile`, на который указывает объект `CArchive`. Аналогично, при чтении данных из архива он считывает данные из файла в буфер, а затем из буфера в десериализованный объект. Такая буферизация сокращает число физических операций чтения жесткого диска, тем самым повышая производительность приложения.

## <a name="see-also"></a>См. также раздел

[Сериализация. Сериализация объекта](../mfc/serialization-serializing-an-object.md)
