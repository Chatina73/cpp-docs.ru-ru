---
description: 'Дополнительные сведения о: TN025: документ, представление и создание кадров'
title: TN025. Создание документов, представлений и фреймов
ms.date: 11/04/2016
f1_keywords:
- vc.creation
helpviewer_keywords:
- documents [MFC], view and frame creation
- TN025
ms.assetid: 09254d72-6e1d-43db-80e9-693887dbeda2
ms.openlocfilehash: 034c3670df57de03cf7db8f713937f3d433fbb56
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97215746"
---
# <a name="tn025-document-view-and-frame-creation"></a>TN025. Создание документов, представлений и фреймов

> [!NOTE]
> Следующее техническое примечание не было обновлено, поскольку сначала оно было включено в электронную документацию. В результате некоторые процедуры и разделы могут быть устаревшими или неверными. Для получения последних сведений рекомендуется выполнить поиск интересующей темы в алфавитном указателе документации в Интернете.

Это примечание описывает проблемы создания и владения для Винаппс, Доктемплатес, документов, фреймов и представлений.

## <a name="winapp"></a>WinApp

`CWinApp`В системе имеется один объект.

Он статически конструируется и инициализируется внутренней реализацией платформы `WinMain` . Необходимо выполнить наследование от `CWinApp` , чтобы сделать что-нибудь полезное (исключение: библиотеки DLL расширения MFC не должны иметь `CWinApp` экземпляра — инициализация выполняется в `DllMain` вместо этого).

Один `CWinApp` объект владеет списком шаблонов документов (a `CPtrList` ). Существует один или несколько шаблонов документов для каждого приложения. Доктемплатес обычно загружаются из файла ресурсов (то есть массива строк) в `CWinApp::InitInstance` .

```
pTemplate = new CDocTemplate(IDR_MYDOCUMENT, ...);

AddDocTemplate(pTemplate);
```

Один `CWinApp` объект владеет всеми окнами фрейма в приложении. Главное окно для приложения должно храниться в `CWinApp::m_pMainWnd` ; как правило, вы задаете *m_pMainWnd* в `InitInstance` реализации, если вы не разрешите помощью мастера. Для интерфейса с одним документом (SDI) это то `CFrameWnd` , что служит основным окном приложения, а также единственным окном фрейма документа. Для многодокументного интерфейса (MDI) это MDI-Frame (класс `CMDIFrameWnd` ), который служит в качестве главного окна фрейма приложения, содержащего все дочерние `CFrameWnd` элементы. Каждое дочернее окно является классом `CMDIChildWnd` (производным от `CFrameWnd` ) и служит одним из потенциально большого числа окон фрейма документа.

## <a name="doctemplates"></a>доктемплатес

`CDocTemplate`— Это создатель и менеджер документов. Он владеет создаваемыми документами. Если приложение использует подход на основе ресурсов, описанный ниже, он не должен быть производным от `CDocTemplate` .

Для приложения SDI класс `CSingleDocTemplate` отслеживает один открытый документ. Для приложения MDI класс `CMultiDocTemplate` сохраняет список (a `CPtrList` ) всех открытых в данный момент документов, созданных из этого шаблона. `CDocTemplate::AddDocument` и `CDocTemplate::RemoveDocument` предоставляют виртуальные функции-члены для добавления или удаления документа из шаблона. `CDocTemplate` является дружественным, `CDocument` поэтому мы можем установить защищенный `CDocument::m_pDocTemplate` указатель назад, чтобы он указывал на шаблон документа, создавший документ.

`CWinApp` обрабатывает реализацию по умолчанию `OnFileOpen` , которая, в свою очередь, запрашивает все шаблоны документов. Реализация включает поиск уже открытых документов и выбор формата для открытия новых документов в.

`CDocTemplate` управляет привязкой пользовательского интерфейса для документов и фреймов.

`CDocTemplate` хранит количество неименованных документов.

## <a name="cdocument"></a>CDocument

Объект `CDocument` принадлежит `CDocTemplate` .

В документах есть список открытых представлений (производных от `CView` ), которые просматривают документ (а `CPtrList` ).

Документы не создают и не удаляют представления, но после их создания присоединяются друг к другу. При закрытии документа (т. е. с помощью файла или закрытия) все присоединенные представления будут закрыты. При закрытии последнего представления документа (т. е. окна/закрытия) документ будет закрыт.

`CDocument::AddView` `RemoveView` Интерфейс используется для обслуживания списка представлений. `CDocument` является дружественным, `CView` поэтому мы можем установить `CView::m_pDocument` указатель назад.

## <a name="cframewnd"></a>CFrameWnd

Объект `CFrameWnd` (также называемый кадром) играет ту же роль, что и в MFC 1,0, но теперь `CFrameWnd` класс предназначен для использования во многих случаях без создания нового класса. Производные классы `CMDIFrameWnd` и `CMDIChildWnd` также улучшены, так как уже реализованы многие стандартные команды.

`CFrameWnd`Отвечает за создание окон в клиентской области фрейма. Обычно имеется одно главное окно, заполняющее клиентскую область фрейма.

Для MDI-Frame окна область клиента заполняется элементом управления МДИКЛИЕНТ, который, в свою очередь, является родительским для всех окон MDI-Child фрейма. Для SDI-Frame окна или MDI-Child окна фрейма клиентская область обычно заполняется `CView` объектом окна, производным от. В случае `CSplitterWnd` Клиентская область представления заполняется `CSplitterWnd` объектом Window, а `CView` объекты окон производного класса (по одному на область разделения) создаются как дочерние окна `CSplitterWnd` .

## <a name="see-also"></a>См. также раздел

[Технические примечания по номеру](../mfc/technical-notes-by-number.md)<br/>
[Технические примечания по категориям](../mfc/technical-notes-by-category.md)
