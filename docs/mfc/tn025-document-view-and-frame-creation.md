---
title: TN025. Создание документов, представлений и фреймов
ms.date: 11/04/2016
f1_keywords:
- vc.creation
helpviewer_keywords:
- documents [MFC], view and frame creation
- TN025
ms.assetid: 09254d72-6e1d-43db-80e9-693887dbeda2
ms.openlocfilehash: 2fdabdcb1a87d4a5661348588d49303290c966ce
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81370372"
---
# <a name="tn025-document-view-and-frame-creation"></a>TN025. Создание документов, представлений и фреймов

> [!NOTE]
> Следующее техническое примечание не было обновлено, поскольку сначала оно было включено в электронную документацию. В результате некоторые процедуры и разделы могут быть устаревшими или неверными. Для получения последних сведений рекомендуется выполнить поиск интересующей темы в алфавитном указателе документации в Интернете.

В этой заметке описаны проблемы создания и владения для WinApps, DocTemplates, Документов, кадров и представлений.

## <a name="winapp"></a>WinApp

В системе `CWinApp` есть один объект.

Он статично построен и инициализирован внутренней `WinMain`реализацией рамок . Вы должны `CWinApp` извлечь из делать что-либо полезное (исключение: `CWinApp` расширение MFC DLLs не должно иметь экземпляр - инициализация делается в `DllMain` вместо).

Один `CWinApp` объект владеет списком шаблонов `CPtrList`документов (a ). В приложении имеется один или несколько шаблонов документов. DocTemplates обычно загружаются из файла ресурсов (т.е. массив строки) в `CWinApp::InitInstance`.

```
pTemplate = new CDocTemplate(IDR_MYDOCUMENT, ...);

AddDocTemplate(pTemplate);
```

Один `CWinApp` объект владеет всеми окнами рамы в приложении. Основное окно кадра для приложения `CWinApp::m_pMainWnd`должно храниться в; обычно вы *m_pMainWnd* устанавливаете `InitInstance` m_pMainWnd в реализации, если вы не позволили AppWizard сделать это за вас. Для интерфейса одного документа (SDI) это тот, `CFrameWnd` который служит в качестве основного окна кадра приложения, а также единственное окно кадра документа. Для интерфейса нескольких документов (MDI) это `CMDIFrameWnd`MDI-Frame (класс), который служит основным `CFrameWnd`окном кадра приложения, содержащим все данные ребенка. Каждое окно ребенка имеет `CMDIChildWnd` `CFrameWnd`класс (производные от) и служит одним из потенциально многих окон кадра документа.

## <a name="doctemplates"></a>DocTemplates

Является `CDocTemplate` создателем и менеджером документов. Он владеет документами, которые он создает. Если ваше приложение использует ресурсо-ориентированный подход, описанный `CDocTemplate`ниже, оно не будет нуждаться в выводе из.

Для приложения SDI класс `CSingleDocTemplate` отслеживает один открытый документ. Для приложения MDI класс `CMultiDocTemplate` сохраняет список `CPtrList`(a) всех открытых в настоящее время документов, созданных из этого шаблона. `CDocTemplate::AddDocument`и `CDocTemplate::RemoveDocument` предоставить функции виртуального члена для добавления или удаления документа из шаблона. `CDocTemplate`является `CDocument` другом, чтобы мы могли `CDocument::m_pDocTemplate` установить защищенный указатель назад, чтобы указать обратно на шаблон документа, который создал документ.

`CWinApp`обрабатывает реализацию `OnFileOpen` по умолчанию, которая, в свою очередь, задаёт запрос на все шаблоны документов. Реализация включает в себя поиск уже открытых документов и решение о том, в каком формате открывать новые документы.

`CDocTemplate`управляет обязательным uI для документов и кадров.

`CDocTemplate`ведет подсчет количества неназванных документов.

## <a name="cdocument"></a>CDocument

A `CDocument` принадлежит `CDocTemplate`.

Документы имеют список открытых представлений (производных `CView` `CPtrList`от), которые просматривают документ (a ).

Документы не создают/уничтожают представления, но они прикрепляются друг к другу после их создания. Когда документ закрыт (т.е. через файл/закрытие), все приложенные представления будут закрыты. Когда последнее представление на документе закрыто (т.е. Window/Close), документ будет закрыт.

`RemoveView` Интерфейс `CDocument::AddView`используется для поддержания списка представлений. `CDocument`является `CView` другом, чтобы мы `CView::m_pDocument` могли установить заднюю указатель.

## <a name="cframewnd"></a>CFrameWnd

A `CFrameWnd` (также известный как кадр) играет ту же роль, что `CFrameWnd` и в MFC 1.0, но теперь класс предназначен для использования во многих случаях без производного нового класса. Полученные классы, `CMDIFrameWnd` а `CMDIChildWnd` также расширены, так что многие стандартные команды уже реализованы.

Отвечает `CFrameWnd` за создание окон в клиентской области кадра. Обычно есть одно основное окно, заполняя клиентскую область кадра.

Для окна MDI-Frame область клиента заполнена контролем MDICLIENT, который, в свою очередь, является родителем всех окон рамки MDI-Child. Для окна SDI-Frame или окна кадровMMDI-Child область клиента `CView`обычно заполняется оконным объектом, полученным из-производного. В `CSplitterWnd`случае, если область клиента представления заполнена `CSplitterWnd` объектом окна, а `CView`объекты окна (один на сплит-панель) `CSplitterWnd`создаются как детские окна .

## <a name="see-also"></a>См. также раздел

[Технические примечания по номеру](../mfc/technical-notes-by-number.md)<br/>
[Технические заметки по категориям](../mfc/technical-notes-by-category.md)
