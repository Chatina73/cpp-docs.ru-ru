---
title: TN024. Сообщения и ресурсы, определенные MFC
ms.date: 11/04/2016
f1_keywords:
- vc.mfc.messages
helpviewer_keywords:
- resources [MFC]
- Windows messages [MFC], MFC-defined
- messages [MFC], MFC
- TN024
ms.assetid: c65353ce-8096-454b-ad22-1a7a1dd9a788
ms.openlocfilehash: 26f6effbafd8136661f0b1dc9a6b22138a23e547
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50639638"
---
# <a name="tn024-mfc-defined-messages-and-resources"></a>TN024. Сообщения и ресурсы, определенные MFC

> [!NOTE]
>  Следующее техническое примечание не было обновлено, поскольку сначала оно было включено в электронную документацию. В результате некоторые процедуры и разделы могут быть устаревшими или неверными. Для получения последних сведений рекомендуется выполнить поиск интересующей темы в алфавитном указателе документации в Интернете.

Эта заметка Описывает внутренние сообщения Windows и форматов файлов ресурсов, используемые MFC. Эта информация объясняет реализацию платформы и будет использовать при отладке приложения. Для рискнуть несмотря на то, что вся эта информация не официально поддерживается, можно использовать некоторые из этих сведений для более сложные реализации.

Эта заметка содержит сведения о закрытой реализации MFC; все содержимое в будущем могут измениться. Закрытые сообщения MFC Windows имеют значение в области только одно приложение, но будет изменяться в будущем для хранения системных сообщений.

Диапазон MFC конфиденциальных сообщений Windows и типы ресурсов в диапазоне зарезервированных «система» резервируется по Microsoft Windows. В настоящее время не все числа в диапазонах используются и в будущем, можно использовать новый числа в диапазоне. Используемые в текущий момент чисел может быть изменен.

MFC закрытый Windows, которые сообщения находятся в диапазоне 0x360 0x37F, "->".

Типы: в диапазоне 0xF0 закрытому ресурсу MFC "->" 0xFF.

**Сообщения Windows Private MFC**

Эти сообщения Windows используются вместо виртуальных функций C++, где относительно Слабая связь необходима между объектами окон и где виртуальная функция C++ не будет целесообразным.

Эти закрытые сообщения Windows и связанного параметра структуры объявляются в закрытый заголовков MFC "AFXPRIV. H ". Будьте внимательны, что любой код, который содержит этот заголовок может опираться на непредсказуемому поведению, а также будет скорее всего, переход в будущих версиях MFC.

В редких случаях необходимости обрабатывать одно из следующих сообщений следует использовать сообщение карты on_message-макрос и обработать сообщение в формате универсального LRESULT/WPARAM/LPARAM.

**WM_QUERYAFXWNDPROC**

Это сообщение отправляется в окно, который создается. Отправленное очень рано в процессе создания как метод определения при WndProc **AfxWndProc. AfxWndProc** возвращает значение 1.

|||
|-|-|
|wParam|Не используется|
|lParam|Не используется|
|returns|1, если обрабатывается **AfxWndProc**|

**WM_SIZEPARENT**

Это сообщение отправляется с окном фрейма его непосредственные дочерние элементы во время изменения размера (`CFrameWnd::OnSize` вызовы `CFrameWnd::RecalcLayout` какие вызовы `CWnd::RepositionBars`) для изменения положения панели элементов управления вокруг стороне фрейма. Структура AFX_SIZEPARENTPARAMS содержит текущий прямоугольник доступных клиентских родительского и HDWP, (которое может иметь значение NULL) с помощью которой вызывается `DeferWindowPos` свести к минимуму перерисовки.

|||
|-|-|
|wParam|Не используется|
|lParam|Адрес структуры AFX_SIZEPARENTPARAMS|
|returns|Не используется (0)|

Пропускает сообщение указывает, что окно не участвуют в макете.

**WM_SETMESSAGESTRING**

Это сообщение отправляется в фрейм окна служит для обновления строки сообщения в строке состояния. Строковый идентификатор или LPCSTR может быть задан (но не оба).

|||
|-|-|
|wParam|Строка идентификатора (или ноль)|
|lParam|LPCSTR для строки (или NULL)|
|returns|Не используется (0)|

**WM_IDLEUPDATECMDUI**

Это сообщение отправляется в время простоя для реализации обработчиков пользовательского интерфейса команды update обновление времени простоя. Если окно (обычно панель элементов управления) обрабатывает сообщение, он создает `CCmdUI` объект (или объект производного класса) и вызовите `CCmdUI::DoUpdate` для каждого из «элементы» в окне. Это в свою очередь проверяет обработчик ON_UPDATE_COMMAND_UI для объектов в цепочке обработчика команд.

|||
|-|-|
|wParam|BOOL bDisableIfNoHandler|
|lParam|Не используется (0)|
|returns|Не используется (0)|

*bDisableIfNoHandler* имеет ненулевое значение, чтобы отключить объект пользовательского интерфейса, если нет ни ON_UPDATE_COMMAND_UI, ни обработчик ON_COMMAND.

**WM_EXITHELPMODE**

Это сообщение передается `CFrameWnd` режим, чтобы выйти из контекстной справки. Получение этого сообщения завершает цикл передвижения, начатую `CFrameWnd::OnContextHelp`.

|||
|-|-|
|wParam|Не используется (0)|
|lParam|Не используется (0)|
|returns|Не используется|

**WM_INITIALUPDATE**

Это сообщение отправляется с помощью шаблона документа для всех потомков окна фрейма, когда это будет безопасно для них не их исходное обновление. Он преобразуется в вызов `CView::OnInitialUpdate` , но может использоваться в других `CWnd`-производные классы для других одноступенчатая обновления.

|||
|-|-|
|wParam|Не используется (0)|
|lParam|Не используется (0)|
|returns|Не используется (0)|

**WM_RECALCPARENT**

Это сообщение отправляется представлением своему родительскому окну (полученных с помощью `GetParent`) для принудительного повторного вычисления макета (как правило, вызовет родительского `RecalcLayout`). Используется в серверных приложениях OLE, где это необходимо для кадра к увеличению размера по мере роста общий размер этого представления.

Если родительское окно обрабатывает это сообщение следует возвращают значение TRUE и заполнить RECT, переданный lParam новый размер клиентской области. Это используется в `CScrollView` правильную обработку полосы прокрутки (места, затем за пределами окна, когда они добавляются) когда объект сервера будет активироваться на месте.

|||
|-|-|
|wParam|Не используется (0)|
|lParam|LPRECT rectClient, может быть равно NULL|
|returns|Значение TRUE, если новый клиентской прямоугольной области, значение FALSE в противном случае возвращается|

**WM_SIZECHILD**

Это сообщение отправляется по `COleResizeBar` на окно-владелец (через `GetOwner`) при изменении пользователем размера панели изменения размера с маркерами изменения размера. `COleIPFrameWnd` реагирует на это сообщение, попытка изменить положение окна фрейма, как пользователь запросил.

Новый прямоугольник, в координатах клиентской области окна относительно окна фрейма, который содержит полосу изменения размера, на который ссылается lParam.

|||
|-|-|
|wParam|Не используется (0)|
|lParam|LPRECT rectNew|
|returns|Не используется (0)|

**WM_DISABLEMODAL**

Это сообщение отправляется на все всплывающие окна, принадлежащие фрейм окна, который становится неактивным. Окна фрейма использует результат, чтобы определить, следует ли отключить всплывающее окно.

Это можно использовать для выполнения специальной обработки в всплывающем окне, когда кадр переходит в модальном состоянии или для предотвращения отключения определенных всплывающие окна. Всплывающие подсказки использовать это сообщение для уничтожения сами, когда фрейм окна переходит в модальном состоянии, например.

|||
|-|-|
|wParam|Не используется (0)|
|lParam|Не используется (0)|
|returns|Ненулевое значение для **не** отключать окно, 0 указывает на окне будут отключены|

**WM_FLOATSTATUS**

Это сообщение отправляется на все всплывающие окна, принадлежащие фрейм окна фрейма активации или деактивации, еще одно окно фрейма верхнего уровня. Это значение используется реализация MFS_SYNCACTIVE в `CMiniFrameWnd`, чтобы синхронизировать активации эти всплывающие окна с активацией окна рамки верхнего уровня.

|||
|-|-|
|wParam|Является одним из следующих значений:<br /><br /> FS_SHOW<br /><br /> FS_HIDE<br /><br /> FS_ACTIVATE<br /><br /> FS_DEACTIVATE<br /><br /> FS_ENABLEFS_DISABLE<br /><br /> FS_SYNCACTIVE|
|lParam|Не используется (0)|

Возвращаемое значение должно быть ненулевое значение, если FS_SYNCACTIVE присваивается значение и синхронизирует окно его активации с помощью родительского фрейма. `CMiniFrameWnd` возвращает ненулевое значение, если стиль имеет значение MFS_SYNCACTIVE.

Дополнительные сведения см. в разделе реализации `CMiniFrameWnd`.

## <a name="wmactivatetoplevel"></a>WM_ACTIVATETOPLEVEL

Это сообщение отправляется окна верхнего уровня при активации или отключении окна в его верхнего уровня» группа «. Окно является частью группы высшего уровня, если это окно верхнего уровня (без родительской или владелец), или оно принадлежит такое окно. Это сообщение используется аналогичны WM_ACTIVATEAPP, но работает в ситуациях, когда имеются windows, принадлежащих разных процессах смешанный в одном окне иерархии (обычно в приложениях OLE).

## <a name="wmcommandhelp-wmhelphittest-wmexithelpmode"></a>WM_EXITHELPMODE WM_COMMANDHELP WM_HELPHITTEST,

Эти сообщения используются в реализации контекстной справки. Обратитесь к [Технические замечания 28](../mfc/tn028-context-sensitive-help-support.md) Дополнительные сведения.

## <a name="mfc-private-resource-formats"></a>Форматы ресурсов частного MFC

В настоящее время MFC определяет два формата закрытому ресурсу: RT_TOOLBAR и RT_DLGINIT.

## <a name="rttoolbar-resource-format"></a>RT_TOOLBAR формат ресурса

Панель инструментов по умолчанию, предоставляемые мастером приложений основано на rt_toolbar-пользовательский ресурс, который появился в MFC 4.0. Вы можете изменить этот ресурс, с помощью панели инструментов редактора.

## <a name="rtdlginit-resource-format"></a>Формат ресурса RT_DLGINIT

Один формат закрытому ресурсу MFC используется для хранения сведений о дополнительных диалоговое окно инициализации. Сюда входят исходных строк, хранящихся в поле со списком. Формат этого ресурса не может изменить вручную, но обрабатывается Visual C++.

Visual C++ и этот ресурс RT_DLGINIT не обязаны использовать связанные функции MFC, поскольку существует API вместо по данным в ресурсе. С помощью Visual C++ позволяет гораздо легче писать, обслуживать и переводить приложения в долгосрочной перспективе.

Базовая структура ресурса RT_DLGINIT выглядит следующим образом:

```
+---------------+    \
| Control ID    |   UINT             |
+---------------+    |
| Message #     |   UINT             |
+---------------+    |
|length of data |   DWORD            |
+---------------+    |   Repeated
|   Data        |   Variable Length  |   for each control
|   ...         |   and Format       |   and message
+---------------+    /
|     0         |   BYTE
+---------------+
```

Повторяющиеся раздел содержит идентификатор элемента управления для отправки сообщения, сообщения # для отправки (обычное сообщение Windows) и переменной длины данных. Windows будет отправлено в форме:

```
SendDlgItemMessage(<Control ID>, <Message #>, 0, &<Data>);
```

Это очень общем формате, что все сообщения Windows и содержимое данных. Редактор ресурсов Visual C++ и MFC поддерживают только ограниченный набор сообщений Windows: CB_ADDSTRING для начальные параметры списка для поля со списком (данных представляет собой текстовую строку).

## <a name="see-also"></a>См. также

[Технические примечания по номеру](../mfc/technical-notes-by-number.md)<br/>
[Технические примечания по категории](../mfc/technical-notes-by-category.md)

