---
title: Добавление нескольких представлений в один документ
ms.date: 11/04/2016
helpviewer_keywords:
- multiple views [MFC], SDI applications
- documents [MFC], multiple views
- single document interface (SDI), adding views
- views [MFC], SDI applications
ms.assetid: 86d0c134-01d5-429c-b672-36cfb956dc01
ms.openlocfilehash: 593c59c73b58b4364c9d652ce8eb415c17af496c
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62394745"
---
# <a name="adding-multiple-views-to-a-single-document"></a>Добавление нескольких представлений в один документ

В приложении однооконным интерфейсом (SDI), созданные с помощью библиотеки Microsoft Foundation Class (MFC) каждый тип документа связан с типом единое представление. В некоторых случаях желательно иметь возможность переключения текущего представления документа с помощью нового представления.

> [!TIP]
>  Дополнительные процедуры по реализации нескольких представлений для одного документа, см. в разделе [CDocument::AddView](../mfc/reference/cdocument-class.md#addview) и [СОБИРАТЬ](../overview/visual-cpp-samples.md) пример MFC.

Эту функциональность можно реализовать, добавив новый `CView`-производного класса, а также дополнительный код для динамического переключения представлений в существующее приложение MFC.

Порядок действий таков:

- [Изменить существующий класс приложений](#vcconmodifyexistingapplicationa1)

- [Создавать и изменять новый класс представления](#vcconnewviewclassa2)

- [Создание и присоединение нового представления](#vcconattachnewviewa3)

- [Реализация функции переключения](#vcconswitchingfunctiona4)

- [Добавление поддержки для переключения представления](#vcconswitchingtheviewa5)

В оставшейся части этого раздела предполагается следующее:

- Имя `CWinApp`-производный объект `CMyWinApp`, и `CMyWinApp` объявляется и определяется в *MYWINAPP. H* и *MYWINAPP. CPP*.

- `CNewView` имя нового `CView`-объект, производной от и `CNewView` объявляется и определяется в *NEWVIEW. H* и *NEWVIEW. CPP*.

##  <a name="vcconmodifyexistingapplicationa1"></a> Изменить существующий класс приложений

Для приложения, для переключения между представлениями необходимо изменить класс приложения, добавив переменные-члены для хранения представлений и способ их переключение.

Добавьте следующий код к объявлению `CMyWinApp` в *MYWINAPP. H*:

[!code-cpp[NVC_MFCDocViewSDI#1](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_1.h)]

Новые переменные-члены, `m_pOldView` и `m_pNewView`, она указывала на текущее представление и вновь созданной. Новый метод (`SwitchView`) переключается представлениях, если по запросу пользователя. Тело метода рассматривается далее в этом разделе в [реализовать функцию переключения](#vcconswitchingfunctiona4).

Последнее изменение, класс приложений требует, включая новый файл заголовка, который определяет сообщение Windows (**WM_INITIALUPDATE**), используемый в функции переключения.

Вставьте следующую строку в разделе include *MYWINAPP. CPP*:

[!code-cpp[NVC_MFCDocViewSDI#2](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_2.cpp)]

Сохраните изменения и перейдите к следующему шагу.

##  <a name="vcconnewviewclassa2"></a> Создавать и изменять новый класс представления

Создание нового класса представления легко выполняется с помощью **новый класс** команд, доступных из представления классов. Единственным требованием для этого класса является то, что он является производным от `CView`. Добавьте этот новый класс в приложение. Сведения о добавлении нового класса в проект см. в разделе [Добавление класса](../ide/adding-a-class-visual-cpp.md).

После добавления класса в проект, необходимо изменить доступность некоторых членов класса представления.

Изменить *NEWVIEW. H* , изменив спецификатор доступа из **защищенные** для **открытый** для конструктора и деструктора. Это позволяет классу быть динамически создаваться и уничтожаться и изменить внешний вид, прежде чем он станет видимым.

Сохраните изменения и перейдите к следующему шагу.

##  <a name="vcconattachnewviewa3"></a> Создание и присоединение нового представления

Чтобы создать и подключить новое представление, вам потребуется изменить `InitInstance` функции класса приложения. Изменение добавляет новый код, который создает новый объект представления и инициализирует обоих `m_pOldView` и `m_pNewView` с двумя существующими объектами представления.

Так как в создается новое представление `InitInstance` функции, новые и существующие представления сохраняются в течение времени существования приложения. Тем не менее приложение может легко создать новое представление динамически.

Вставьте этот код после вызова `ProcessShellCommand`:

[!code-cpp[NVC_MFCDocViewSDI#3](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_3.cpp)]

Сохраните изменения и перейдите к следующему шагу.

##  <a name="vcconswitchingfunctiona4"></a> Реализация функции переключения

На предыдущем шаге вы добавили код, который создается и инициализируется новый объект представления. Последний элемент основных заключается в реализации метод переключения `SwitchView`.

В конце файла реализации для класса приложения (*MYWINAPP. CPP*), добавьте следующее определение метода:

[!code-cpp[NVC_MFCDocViewSDI#4](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_4.cpp)]

Сохраните изменения и перейдите к следующему шагу.

##  <a name="vcconswitchingtheviewa5"></a> Добавление поддержки для переключения представления

Последний шаг включает в себя добавление кода, который вызывает `SwitchView` метод, когда приложению для переключения между представлениями. Это можно сделать несколькими способами: путем добавления нового пункта меню для пользователя выбрать или переключения представлений внутренне, при соблюдении определенных условий.

Дополнительные сведения о добавлении новых элементов меню и функции обработчика команд, см. в разделе [обработчики для команд и уведомлений элементов управления](../mfc/handlers-for-commands-and-control-notifications.md).

## <a name="see-also"></a>См. также

[Архитектура документа/обзора](../mfc/document-view-architecture.md)
