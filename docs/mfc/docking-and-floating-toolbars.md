---
title: Закрепленные и плавающие панели инструментов
ms.date: 11/04/2016
f1_keywords:
- CBRS_SIZE_DYNAMIC
- CBRS_SIZE_FIXED
helpviewer_keywords:
- size [MFC], toolbars
- size
- frame windows [MFC], toolbar docking
- CBRS_ALIGN_ANY constant [MFC]
- palettes, floating
- toolbars [MFC], docking
- CBRS_SIZE_DYNAMIC constant [MFC]
- floating toolbars
- toolbars [MFC], size
- toolbars [MFC], floating
- fixed-size toolbars
- CBRS_SIZE_FIXED constant [MFC]
- toolbar controls [MFC], wrapping
- toolbars [MFC], wrapping
- floating palettes
ms.assetid: b7f9f9d4-f629-47d2-a3c4-2b33fa6b51e4
ms.openlocfilehash: f40d8860f2e514bf3c9e9364a664326250c9627a
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84615835"
---
# <a name="docking-and-floating-toolbars"></a>Закрепленные и плавающие панели инструментов

Библиотека Microsoft Foundation Class поддерживает закрепляемые панели инструментов. Закрепляемую панель инструментов можно прикреплять или закреплять, на любой стороне его родительского окна, а также отсоединять или перемещать в отдельном окне. В этой статье объясняется, как использовать закрепляемые панели инструментов в приложениях.

Если для создания каркаса приложения используется мастер приложений, вам будет предложено выбрать, следует ли использовать закрепляемые панели инструментов. По умолчанию мастер приложений создает код, который выполняет три действия, необходимые для размещения закрепляемой панели инструментов в приложении:

- [Включение закрепления в окне фрейма](#_core_enabling_docking_in_a_frame_window).

- [Включение закрепления для панели инструментов](#_core_enabling_docking_for_a_toolbar).

- [Закрепите панель инструментов (в окне фрейма)](#_core_docking_the_toolbar).

Если какие-либо из этих действий отсутствуют, в приложении будет отображаться стандартная панель инструментов. Последние два шага необходимо выполнить для каждой закрепляемой панели инструментов в приложении.

В число других подразделов, рассмотренных в этой статье:

- [Плавающая панель инструментов](#_core_floating_the_toolbar)

- [Динамическое изменение размера панели инструментов](#_core_dynamically_resizing_the_toolbar)

- [Установка положения перетекания для панели инструментов с фиксированным стилем](#_core_setting_wrap_positions_for_a_fixed_style_toolbar)

Примеры см. в общем примере MFC [докктул](../overview/visual-cpp-samples.md) .

## <a name="enabling-docking-in-a-frame-window"></a><a name="_core_enabling_docking_in_a_frame_window"></a>Включение закрепления в окне фрейма

Чтобы закрепить панели инструментов в окне фрейма, необходимо включить окно фрейма (или место назначения), чтобы разрешить закрепление. Это делается с помощью функции [CFrameWnd:: енабледоккинг](reference/cframewnd-class.md#enabledocking) , которая принимает один параметр *DWORD* , представляющий собой набор битов стиля, указывающий, какая часть окна фрейма принимает закрепление. Если панель инструментов будет закреплена и существует несколько Сторон, к которым можно прикрепить, то стороны, указанные в параметре, переданном в, `EnableDocking` используются в следующем порядке: сверху, снизу, слева, справа. Если вы хотите иметь возможность закреплять панели элементов управления в любом месте, передайте **CBRS_ALIGN_ANY** в `EnableDocking` .

## <a name="enabling-docking-for-a-toolbar"></a><a name="_core_enabling_docking_for_a_toolbar"></a>Включение закрепления для панели инструментов

После подготовки назначения для закрепления необходимо подготовить панель инструментов (или источник) аналогичным образом. Вызовите [CControlBar:: енабледоккинг](reference/ccontrolbar-class.md#enabledocking) для каждой панели инструментов, которую необходимо закрепить, указав конечные точки, на которые должна закрепляться панель инструментов. Если ни одна из сторон, указанных в вызове, `CControlBar::EnableDocking` не соответствует сторонам, включенным для закрепления в окне фрейма, панель инструментов не может быть закреплена — она будет плавающей. После перемещения панель инструментов остается плавающей и не может быть закреплена в окне фрейма.

Если нужного результата является постоянной плавающей панелью инструментов, вызовите `EnableDocking` с параметром 0. Затем вызовите метод [CFrameWnd:: флоатконтролбар](reference/cframewnd-class.md#floatcontrolbar). Панель инструментов остается плавающей, она не может быть закреплена в любом месте.

## <a name="docking-the-toolbar"></a><a name="_core_docking_the_toolbar"></a>Закрепление панели инструментов

Платформа вызывает метод [CFrameWnd::D оккконтролбар](reference/cframewnd-class.md#dockcontrolbar) , когда пользователь пытается удалить панель инструментов в сторону окна фрейма, допускающего закрепление.

Кроме того, эту функцию можно вызвать в любое время, чтобы закрепить панели элементов управления в окне фрейма. Обычно это выполняется во время инициализации. На определенную сторону окна фрейма можно закрепить несколько панелей инструментов.

## <a name="floating-the-toolbar"></a><a name="_core_floating_the_toolbar"></a>Плавающая панель инструментов

Отсоединение закрепляемой панели инструментов из окна фрейма называется плавающей панелью инструментов. Для этого вызовите метод [CFrameWnd:: флоатконтролбар](reference/cframewnd-class.md#floatcontrolbar) . Укажите панель инструментов, которая должна быть плавающей, точку, в которой он должен быть помещен, и стиль выравнивания, определяющий, является ли перемещаемая панель инструментов горизонтальной или вертикальной.

Платформа вызывает эту функцию, когда пользователь перетаскивает панель инструментов из закрепленного расположения и удаляет ее в месте, где не включена стыковка. Оно может находиться в любом месте или вне окна фрейма. Как и в `DockControlBar` , эту функцию можно также вызвать во время инициализации.

Реализация MFC закрепляемых панелей инструментов не предоставляет некоторые расширенные функции, доступные в некоторых приложениях, поддерживающих закрепляемые панели инструментов. Такие функции, как настраиваемые панели инструментов, не предоставляются.

## <a name="dynamically-resizing-the-toolbar"></a><a name="_core_dynamically_resizing_the_toolbar"></a>Динамическое изменение размера панели инструментов

Начиная с версии Visual C++ 4,0 можно сделать так, чтобы пользователи приложения могли динамически изменять размер плавающей панели инструментов. Обычно на панели инструментов имеется длинная линейная фигура, отображаемая горизонтально. Но можно изменить ориентацию панели инструментов и ее форму. Например, когда пользователь закрепляет панель инструментов на одной из вертикальных сторон окна фрейма, фигура превращается в вертикальный макет. Также можно изменить форму панели инструментов на прямоугольник с несколькими строками кнопок.

Можно сделать следующее:

- Укажите динамическое изменение размера в качестве характеристики панели инструментов.

- Укажите фиксированное значение размера в качестве характеристики панели инструментов.

Для обеспечения этой поддержки можно использовать два новых стиля панели инструментов для вызовов функции члена [CToolBar:: Create](reference/ctoolbar-class.md#create) . К ним относятся:

- **CBRS_SIZE_DYNAMIC** Панель элементов управления является динамической.

- **CBRS_SIZE_FIXED** Панель управления фиксирована.

Динамический размер стиля позволяет пользователю изменять размер панели инструментов, пока она не закреплена. Панель инструментов «заключает», где необходимо изменить форму при перетаскивании ее границ пользователем.

Стиль «фиксированный размер» сохраняет состояние переноса панели инструментов, исправляя расположение кнопок в каждом столбце. Пользователь приложения не может изменить форму панели инструментов. Панель инструментов заносится в заданное место, например расположение разделителей между кнопками. Эта фигура сохраняется независимо от того, закреплена или плавающая панель инструментов. Этот результат является фиксированной палитрой с несколькими столбцами кнопок.

Для получения состояния и стиля кнопок на панелях инструментов можно также использовать [CToolBar:: жетбуттонстиле](reference/ctoolbar-class.md#getbuttonstyle) . Стиль кнопки определяет, как отображается кнопка и как она реагирует на вводимые пользователем данные. состояние сообщает, находится ли кнопка в свернутом состоянии.

## <a name="setting-wrap-positions-for-a-fixed-style-toolbar"></a><a name="_core_setting_wrap_positions_for_a_fixed_style_toolbar"></a>Установка положения перетекания для панели инструментов с фиксированным стилем

Для панели инструментов с фиксированным форматом Размер укажите индексы кнопок на панели инструментов, на которых будет перенесена панель инструментов. В следующем коде показано, как это сделать в переопределении окна основного фрейма `OnCreate` :

[!code-cpp[NVC_MFCDocViewSDI#10](codesnippet/cpp/docking-and-floating-toolbars_1.cpp)]

В общем примере MFC [докктул](../overview/visual-cpp-samples.md) показано, как использовать функции-члены классов [CControlBar](reference/ccontrolbar-class.md) и [CToolBar](reference/ctoolbar-class.md) для управления динамическим макетом панели инструментов. См. файл ЕДИТБАР. CPP в ДОККТУЛ.

### <a name="what-do-you-want-to-know-more-about"></a>Что вы хотите узнать подробнее

- [Общие сведения о панелях инструментов](toolbar-fundamentals.md)

- [Советы по инструментам панели инструментов](toolbar-tool-tips.md)

- [Использование старых панелей инструментов](using-your-old-toolbars.md)

## <a name="see-also"></a>См. также раздел

[Реализация панели инструментов MFC](mfc-toolbar-implementation.md)
