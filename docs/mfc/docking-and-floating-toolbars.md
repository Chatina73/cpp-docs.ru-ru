---
title: Закрепленные и плавающие панели инструментов
ms.date: 11/04/2016
f1_keywords:
- CBRS_SIZE_DYNAMIC
- CBRS_SIZE_FIXED
helpviewer_keywords:
- size [MFC], toolbars
- size
- frame windows [MFC], toolbar docking
- CBRS_ALIGN_ANY constant [MFC]
- palettes, floating
- toolbars [MFC], docking
- CBRS_SIZE_DYNAMIC constant [MFC]
- floating toolbars
- toolbars [MFC], size
- toolbars [MFC], floating
- fixed-size toolbars
- CBRS_SIZE_FIXED constant [MFC]
- toolbar controls [MFC], wrapping
- toolbars [MFC], wrapping
- floating palettes
ms.assetid: b7f9f9d4-f629-47d2-a3c4-2b33fa6b51e4
ms.openlocfilehash: 93d1e067777b1c6f4430fe9cc44ae531559b6962
ms.sourcegitcommit: c3093251193944840e3d0a068ecc30e6449624ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2019
ms.locfileid: "57294675"
---
# <a name="docking-and-floating-toolbars"></a>Закрепленные и плавающие панели инструментов

Библиотеки Microsoft Foundation Class поддерживает закрепляемых панелей инструментов. Закрепляемая панель инструментов может быть подключен или закрепить, с любой стороны родительского окна, или он может быть отсоединена или оставить плавающим, в отдельном окне области. В этой статье описываются способы использования закрепляемых панелей инструментов в ваших приложениях.

При использовании мастера приложений для создания схемы приложения вам будет предложено выбрать, следует ли закрепляемых панелей инструментов. По умолчанию мастер приложения создает код, который выполняет три действия, необходимо поместить на закрепляемую панель инструментов в приложении:

- [Включение закрепления в окне фрейма](#_core_enabling_docking_in_a_frame_window).

- [Включение закрепления для панели инструментов](#_core_enabling_docking_for_a_toolbar).

- [Закрепить панель инструментов (окно)](#_core_docking_the_toolbar).

Если какие-либо из этих шагов отсутствуют, в приложении появится стандартной панели инструментов. Последние два шага, необходимо выполнить для каждой закрепляемой панели инструментов в приложении.

Другие статьи, описанном в этой статье:

- [Плавающие панели инструментов](#_core_floating_the_toolbar)

- [Динамическое изменение размера панели инструментов](#_core_dynamically_resizing_the_toolbar)

- [Параметр wrap позиций для панели инструментов-style](#_core_setting_wrap_positions_for_a_fixed_style_toolbar)

Ознакомьтесь с примером MFC Общие [DOCKTOOL ПОКАЗАНА](../visual-cpp-samples.md) примеры.

##  <a name="_core_enabling_docking_in_a_frame_window"></a> Включение закрепления в окне фрейма

Чтобы закрепить панели инструментов окна фрейма, или окна фрейма (назначения) необходимо включить для стыковки. Это делается с помощью [CFrameWnd::EnableDocking](../mfc/reference/cframewnd-class.md#enabledocking) функцию, которая принимает один *DWORD* параметр, который представляет собой набор стилей бит, указывающий, какие части фрейма окна поддерживает закрепление. Если панель инструментов собирается закрепляться и существует несколько сторон, ее можно закрепить, сторон в параметр, передаваемый `EnableDocking` используются в следующем порядке: сверху, снизу, слева, справа. Если вам нужна возможность для закрепления элемента управления полосы в любом месте, передайте **CBRS_ALIGN_ANY** для `EnableDocking`.

##  <a name="_core_enabling_docking_for_a_toolbar"></a> Включение закрепления для панели инструментов

После подготовки назначения закрепления, таким же образом, необходимо подготовить панели инструментов (или источника). Вызовите [CControlBar::EnableDocking](../mfc/reference/ccontrolbar-class.md#enabledocking) для каждой панели инструментов, требуется закрепить, указания целевого объекта стороны для которого следует закрепления панели инструментов. Если ни одна из сторон, указанный в вызове `CControlBar::EnableDocking` соответствуют сторон включено закрепление фрейм окна, панели инструментов нельзя закрепить — он будет «перемещаться». Как только она стала плавающей, он остается плавающую панель инструментов, который не удалось закрепить окно фрейма.

Если эффект окончательно плавающую панель инструментов, вызовите `EnableDocking` со значением параметра равным 0. Затем вызовите [CFrameWnd::FloatControlBar](../mfc/reference/cframewnd-class.md#floatcontrolbar). Панели инструментов остается с плавающей запятой, без возможности восстановления не удается закрепить в любом месте.

##  <a name="_core_docking_the_toolbar"></a> Закрепление панели инструментов

Платформа вызывает [CFrameWnd::DockControlBar](../mfc/reference/cframewnd-class.md#dockcontrolbar) когда пользователь пытается удалить панели инструментов на стороне окна фрейма, который позволяет закрепления.

Кроме того эту функцию можно вызвать в любое время для закрепления панели элементов управления в фрейме окна. Обычно это происходит во время инициализации. Более чем одной панели инструментов можно прикреплять к заданной стороне окна фрейма.

##  <a name="_core_floating_the_toolbar"></a> Плавающие панели инструментов

Отсоединение Закрепляемая панель инструментов в окне фрейма называется плавающие панели инструментов. Вызовите [CFrameWnd::FloatControlBar](../mfc/reference/cframewnd-class.md#floatcontrolbar) это сделать. Укажите панели инструментов, чтобы быть оставить плавающим, точки, где он должен размещаться и стиле выравнивание, определяющее, плавающая панель инструментов горизонтальную или вертикальную.

Платформа вызывает эту функцию, когда пользователь перетаскивает off его закрепленное расположение панели инструментов и удаляет его в расположение, где закрепление не включена. Это может быть в любом месте внутри или за пределами окна фрейма. Как и в `DockControlBar`, можно также вызвать эту функцию во время инициализации.

Реализация MFC закрепляемых панелей инструментов не поддерживает некоторые расширенные функции, приложения, поддерживающие закрепляемых панелей инструментов. Функции, такие как настраиваемые панели инструментов не предоставляются.

##  <a name="_core_dynamically_resizing_the_toolbar"></a> Динамическое изменение размера панели инструментов

Начиная с Visual C++ версии 4.0 вы можете позволяют для пользователей приложения, чтобы динамически изменить размер плавающие панели инструментов. Как правило панель инструментов имеет форму long, линейная, отображаться по горизонтали. Но вы можете изменить ориентацию элемента управления панель инструментов и его форму. Например когда пользователь закрепляет панель инструментов с одной из сторон по вертикали окна фрейма, фигуры изменяется на вертикальный макет. Можно также изменить форму на панели инструментов в прямоугольник с множеством строк для кнопок.

Можно выполнить следующие действия: 

- Укажите динамическое изменение размера как характеристики панели инструментов.

- Укажите фиксированный размер, как характеристики панели инструментов.

Предоставить эту поддержку, существуют две новые стили на панели инструментов для использования в вызовах [CToolBar::Create](../mfc/reference/ctoolbar-class.md#create) функция-член. Они приведены ниже.

- **CBRS_SIZE_DYNAMIC** панель элементов управления является динамическим.

- **CBRS_SIZE_FIXED** панель элементов управления является фиксированным.

Стиль динамический размер позволяет пользователю изменить размер панели инструментов, хотя он открывается как плавающее окно, но не в том случае, хотя она закреплена. Панели инструментов создает «оболочку» там, где требовалось изменить фигуры, когда пользователь перетаскивает его краями.

Размер фиксированной стиля сохраняет переноса состояния панели инструментов, исправления позиций кнопок в каждом столбце. В приложении пользователю запрещено изменять фигуры на панели инструментов. Создает оболочку для панели инструментов в указанный местах, например расположения разделителей между кнопками. Эта фигура поддерживает ли панель инструментов, закрепленные или с плавающей запятой. Результатом является предопределенной палитры по нескольким столбцам кнопок.

Можно также использовать [CToolBar::GetButtonStyle](../mfc/reference/ctoolbar-class.md#getbuttonstyle) для возврата состояния и стиль для кнопки на панели инструментов. Определяет стиль кнопки как кнопка отображается и как он реагирует на действия пользователя; состояние указывает, является ли кнопка в свернутом состоянии.

##  <a name="_core_setting_wrap_positions_for_a_fixed_style_toolbar"></a> Параметр Wrap позиций для панели инструментов-Style

Панель инструментов с размером фиксированной стиля можно назначьте панели инструментов кнопку индексы, в которых будет служить оболочкой панели инструментов. Ниже показано, как это сделать в окно главного фрейма `OnCreate` переопределить:

[!code-cpp[NVC_MFCDocViewSDI#10](../mfc/codesnippet/cpp/docking-and-floating-toolbars_1.cpp)]

Пример MFC Общие [DOCKTOOL ПОКАЗАНА](../visual-cpp-samples.md) показано использование функции-члены классов [CControlBar](../mfc/reference/ccontrolbar-class.md) и [CToolBar](../mfc/reference/ctoolbar-class.md) для управления динамический макет панели инструментов. См. в файле EDITBAR. CPP в DOCKTOOL ПОКАЗАНА.

### <a name="what-do-you-want-to-know-more-about"></a>Выберите для получения дополнительных сведений

- [Основные сведения о панели инструментов](../mfc/toolbar-fundamentals.md)

- [Всплывающие подсказки панели инструментов](../mfc/toolbar-tool-tips.md)

- [Использование старых панелей инструментов](../mfc/using-your-old-toolbars.md)

## <a name="see-also"></a>См. также

[Реализация панели инструментов MFC](../mfc/mfc-toolbar-implementation.md)
