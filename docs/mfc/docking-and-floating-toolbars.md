---
title: Закрепленные и плавающие панели инструментов
ms.date: 11/04/2016
f1_keywords:
- CBRS_SIZE_DYNAMIC
- CBRS_SIZE_FIXED
helpviewer_keywords:
- size [MFC], toolbars
- size
- frame windows [MFC], toolbar docking
- CBRS_ALIGN_ANY constant [MFC]
- palettes, floating
- toolbars [MFC], docking
- CBRS_SIZE_DYNAMIC constant [MFC]
- floating toolbars
- toolbars [MFC], size
- toolbars [MFC], floating
- fixed-size toolbars
- CBRS_SIZE_FIXED constant [MFC]
- toolbar controls [MFC], wrapping
- toolbars [MFC], wrapping
- floating palettes
ms.assetid: b7f9f9d4-f629-47d2-a3c4-2b33fa6b51e4
ms.openlocfilehash: 30113565167b96b0df84a65768a1dfabe92ceffe
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81369773"
---
# <a name="docking-and-floating-toolbars"></a>Закрепленные и плавающие панели инструментов

Библиотека класса Фонда Майкрософт поддерживает док-панели инструментов. Док-панель инструментов может быть прикреплена или пристыкована к любой стороне родительского окна, или она может быть отделена или размещена в собственном окне мини-рамки. В этой статье объясняется, как использовать док-панели инструментов в приложениях.

Если вы используете «Волшебник приложения» для создания скелета приложения, вас просят выбрать, хотите ли вы док-панели инструментов. По умолчанию «Мастер приложения» генерирует код, выполняемый для размещения панели инструментов док-станции в приложении:

- [Включить стыковку в окне рамы.](#_core_enabling_docking_in_a_frame_window)

- [Включить стыковку для панели инструментов.](#_core_enabling_docking_for_a_toolbar)

- [Док панели инструментов (к окну рамы)](#_core_docking_the_toolbar).

Если какой-либо из этих шагов отсутствует, приложение будет отображать стандартную панель инструментов. Последние два шага должны быть выполнены для каждой панели инструментов, пристыковаек в приложении.

Другие темы, затронутые в этой статье, включают в себя:

- [Плавающая панель инструментов](#_core_floating_the_toolbar)

- [Динамическое избавиние панели инструментов](#_core_dynamically_resizing_the_toolbar)

- [Установка обертывания для панели инструментов в фиксированном стиле](#_core_setting_wrap_positions_for_a_fixed_style_toolbar)

Сприведено примеров общей выборки MFC [DOCKTOOL.](../overview/visual-cpp-samples.md)

## <a name="enabling-docking-in-a-frame-window"></a><a name="_core_enabling_docking_in_a_frame_window"></a>Включение стыковки в окне рамы

Для пристыковки панелей инструментов к окну рамы необходимо обеспечить стыковку окна кадра (или пункта назначения). Это делается с помощью [CFrameWnd::EnableDocking](../mfc/reference/cframewnd-class.md#enabledocking) функции, которая принимает один параметр *DWORD,* который представляет собой набор битов стиля, указывающий, какая сторона окна кадра принимает стыковку. Если панель инструментов вот-вот будет пристыкована и есть несколько сторон, к `EnableDocking` которым она может быть пристыкована, стороны, указанные в пройденный параметр, используются в следующем порядке: верхний, нижний, левый, правый. Если вы хотите, чтобы иметь возможность док-баров управления в любом месте, пройти **CBRS_ALIGN_ANY** `EnableDocking`.

## <a name="enabling-docking-for-a-toolbar"></a><a name="_core_enabling_docking_for_a_toolbar"></a>Включение стыковки для панели инструментов

После того как вы подготовили пункт назначения для стыковки, вы должны подготовить панель инструментов (или источник) аналогичным образом. Вызов [CControlBar::EnableDocking](../mfc/reference/ccontrolbar-class.md#enabledocking) для каждой панели инструментов, которую вы хотите стыковки, указывая стороны назначения, к которым должна пристыковаться панель инструментов. Если ни одна из сторон, `CControlBar::EnableDocking` указанных в вызове, чтобы соответствовать сторонам, включенным для стыковки в окне рамы, панель инструментов не может стыковки - она будет плавать. После того, как он был плавал, он остается плавающей панели инструментов, не в состоянии пристыковаться к окну рамы.

Если эффект, который вы хотите, это постоянно `EnableDocking` плавающая панель инструментов, позвоните с параметром 0. Затем [позвоните cFrameWnd::FloatControlBar](../mfc/reference/cframewnd-class.md#floatcontrolbar). Панель инструментов остается плавающей, постоянно не в состоянии пристыковаться в любом месте.

## <a name="docking-the-toolbar"></a><a name="_core_docking_the_toolbar"></a>Стыковка панели инструментов

Рамочная система вызывает [CFrameWnd::DockControlBar,](../mfc/reference/cframewnd-class.md#dockcontrolbar) когда пользователь пытается сбросить панель инструментов на стороне окна кадра, что позволяет стыковки.

Кроме того, эту функцию можно вызвать в любое время, чтобы пристыковать панели управления к окну рамы. Обычно это делается во время инициализации. Более одной панели инструментов можно пристыковать к определенной стороне окна рамы.

## <a name="floating-the-toolbar"></a><a name="_core_floating_the_toolbar"></a>Плавающая панель инструментов

Отсеивание док-панели инструментов из окна кадра называется плавающей панели инструментов. Позвоните [CFrameWnd::FloatControlBar,](../mfc/reference/cframewnd-class.md#floatcontrolbar) чтобы сделать это. Укажите панель инструментов для плавания, точку, где она должна быть размещена, и стиль выравнивания, который определяет, является ли панель инструментов горизонтальной или вертикальной.

Фрейм вызывает эту функцию, когда пользователь перетаскивает панель инструментов из своего стыковочного местоположения и отбрасывает ее в место, где стыковка не включена. Это может быть где угодно внутри или за окном кадра. Как `DockControlBar`и в этом, вы также можете вызвать эту функцию во время инициализации.

Реализация MFC док-баров инструментов не обеспечивает некоторые из расширенных функций, найденных в некоторых приложениях, которые поддерживают док-панели инструментов. Такие функции, как настраиваемые панели инструментов, не предоставляются.

## <a name="dynamically-resizing-the-toolbar"></a><a name="_core_dynamically_resizing_the_toolbar"></a>Динамические изгоны панели инструментов

По состоянию на версию Visual C', 4.0, вы можете сделать возможным для пользователей приложения, чтобы изменить размер плавающих панелей инструментов динамически. Как правило, панель инструментов имеет длинную линейную форму, отображаемую горизонтально. Но вы можете изменить ориентацию панели инструментов и ее форму. Например, когда пользователь пристыковывает панель инструментов к одной из вертикальных сторон окна кадра, форма изменяется в вертикальную компоновку. Также можно изменить панель инструментов в прямоугольник с несколькими рядами кнопок.

Вы можете:

- Укажите динамические размеры в качестве характеристики панели инструментов.

- Укажите фиксированные размеры в качестве характеристики панели инструментов.

Чтобы обеспечить эту поддержку, есть два новых стиля панели инструментов для использования в ваших вызовах к [CToolBar::Создать](../mfc/reference/ctoolbar-class.md#create) функцию члена. К ним относятся:

- **CBRS_SIZE_DYNAMIC** Панель управления динамична.

- **CBRS_SIZE_FIXED** Панель управления фиксируется.

Динамический стиль размера позволяет пользователю изобразить панель инструментов во время плавания, но не во время пристыкования. Панель инструментов "обертывает", где необходимо изменить форму, как пользователь перетаскивает свои края.

Фиксированный размер стиля сохраняет состояния обертывания панели инструментов, фиксируя положение кнопок в каждом столбце. Пользователь приложения не может изменить форму панели инструментов. Панель инструментов обертывается в специально отведенных местах, таких как расположение сепараторов между кнопками. Он поддерживает эту форму ли панель инструментов состыкован или плавающей. Эффект представляет собой фиксированную палитру с несколькими столбцами кнопок.

Вы также можете использовать [CToolBar::GetButtonStyle,](../mfc/reference/ctoolbar-class.md#getbuttonstyle) чтобы вернуть состояние и стиль для кнопок на панели инструментов. Стиль кнопки определяет, как отображается кнопка и как она реагирует на ввод пользователя; состояние сообщает, находится ли кнопка в завернутом состоянии.

## <a name="setting-wrap-positions-for-a-fixed-style-toolbar"></a><a name="_core_setting_wrap_positions_for_a_fixed_style_toolbar"></a>Установка позиций wrap для панели инструментов с фиксированным стилем

Для панели инструментов с фиксированным размером стиля обозначьте индексы кнопки панели инструментов, на которых будет оберто. Следующий код показывает, как это сделать `OnCreate` в переопределение окна основного кадра:

[!code-cpp[NVC_MFCDocViewSDI#10](../mfc/codesnippet/cpp/docking-and-floating-toolbars_1.cpp)]

Общий образец MFC [DOCKTOOL](../overview/visual-cpp-samples.md) показывает, как использовать функции членов классов [CControlBar](../mfc/reference/ccontrolbar-class.md) и [CToolBar](../mfc/reference/ctoolbar-class.md) для управления динамической компоновкой панели инструментов. Смотрите файл EDITBAR. CPP в DOCKTOOL.

### <a name="what-do-you-want-to-know-more-about"></a>Что вы хотите узнать больше о

- [Общие сведения о панелях инструментов](../mfc/toolbar-fundamentals.md)

- [Советы инструмент инструментов панели инструментов](../mfc/toolbar-tool-tips.md)

- [Использование старых панелей инструментов](../mfc/using-your-old-toolbars.md)

## <a name="see-also"></a>См. также раздел

[Реализация панели инструментов MFC](../mfc/mfc-toolbar-implementation.md)
