---
title: Альтернативы для архитектуры представления документов
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], applications without
- CDocument class [MFC], space requirements
- views [MFC], applications without
ms.assetid: 2c22f352-a137-45ce-9971-c142173496fb
ms.openlocfilehash: 5a9026ca400c3e7c403ff8f2b86f486bcde79cf8
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50569784"
---
# <a name="alternatives-to-the-documentview-architecture"></a>Альтернативы для архитектуры "документ-представление"

Приложения MFC обычно используют архитектуры document/view управление информацией, форматы файлов и визуальным представлением данных пользователям. Для большинства приложений для настольных систем архитектуры document/view — это архитектура приложения соответствующий и эффективным. Эта архитектура отделяет данные от просмотра и в большинстве случаев, упрощает приложение и снижает избыточный код.

Тем не менее архитектуры document/view не подходит для некоторых ситуаций. Рассмотрим следующие примеры.

- При переносе приложения на языке C для Windows, может потребоваться выполнить порт перед добавлением поддержки документов и представлений в приложении.

- Если вы создаете упрощенный программы, может оказаться, что можно сделать без архитектуры document/view.

- Если исходный код уже содержатся одновременно управления данными с помощью данных просмотра, перемещение кода в документ представление-модель не стоит так как необходимо разделять их. Вы можете оставить кода как есть.

Чтобы создать приложение, которое не использует архитектуры document/view, снимите **поддержка архитектуры Document/View** флажок на шаге 1 мастера приложений MFC. См. в разделе [мастер приложений MFC](../mfc/reference/mfc-application-wizard.md) подробные сведения.

> [!NOTE]
>  Приложения на базе диалогового окна, созданного с помощью мастера приложений MFC не используют архитектуры document/view, поэтому **поддержка архитектуры Document/View** флажок не установлен, если выбран тип диалогового окна приложения.

Мастера Visual C++, а также редакторе источника и диалоговое окно, работать с созданного приложения так же, как и для любого другого приложения, созданные мастером. Приложение может поддерживать панели инструментов, полосы прокрутки и строка состояния и имеет **о** поле. Приложение не регистрирует все шаблоны документов и не будет содержать класс документа.

Обратите внимание, что приложение созданный класс представления, `CChildView`, который является производным от `CWnd`. MFC создает и размещает один экземпляр класса представления в пределах окна фрейма, создаваемых приложением. MFC по-прежнему обеспечивает с помощью окна представления, так как это упрощает размещение и управление содержимым приложения. Вы можете добавить код рисования для `OnPaint` член этого класса. Код следует добавить полосы прокрутки, в представление, а не к рамке.

Поскольку архитектуры document/view, предоставляемая MFC отвечает за реализацию многих основных функций приложения, его отсутствия в проекте означает, что вы несете ответственность за реализацию много важных функций вашего приложения:

- Как указано с помощью мастера приложений MFC, в меню приложения содержит только **New** и **выхода** команды **файл** меню. ( **New** команда поддерживается только для приложений MDI, поддерживают не приложения SDI без документов и представлений.) Созданный ресурс не будет поддерживать список последних Использованных (самые последние использовавшиеся).

- Необходимо добавить функции обработчика и реализации для всех команд, которые будет поддерживать приложения, включая **откройте** и **Сохранить** на **файл** меню. MFC обычно предоставляет код для поддержки этих функций, но эта поддержка жестко привязан к архитектуры document/view.

- Панели инструментов для вашего приложения, если вы запросили, будет минимальным.

Настоятельно рекомендуется использовать мастер приложений MFC для создания приложений без архитектуры document/view, так как мастер гарантирует правильной архитектуры MFC. Тем не менее если необходимо избежать с помощью мастера, ниже приведены несколько способов для обхода архитектуры document/view в коде.

- Рассматривать документ как неиспользуемые appendage и реализовать в коде управления данными в классе представления, как описано выше. Дополнительные затраты на его сравнительно мала. Один [CDocument](../mfc/reference/cdocument-class.md) объект влечет за собой небольшое количество издержек сам по себе, а также небольшой объем затрат из `CDocument`его базовые классы, [CCmdTarget](../mfc/reference/ccmdtarget-class.md) и [CObject](../mfc/reference/cobject-class.md). Оба класса последний имеют небольшой размер.

   Объявленные в `CDocument`:

   - Два `CString` объектов.

   - Три **BOOL**s.

   - Один `CDocTemplate` указатель.

   - Один `CPtrList` объект, содержащий список представлений документа.

   Кроме того документ требуется время, чтобы создать объект документа, его просмотр объектов, окно рамки и объект шаблона документа.

- Считайте неиспользуемые дополнений документов и представлений. Поместите управления данными и код рисования в фрейме окна, а не представление. Этот подход является ближе к модели языка программирования.

- Переопределите части платформы MFC, создание документов и представлений, чтобы исключить создание их вообще. В процессе создания документа начинается с вызова `CWinApp::AddDocTemplate`. Исключить этот вызов из класса приложения `InitInstance` член функции и вместо этого создать окно фрейма в `InitInstance` самостоятельно. Поместите код управления данных в классе фрейма окна. Процесс создания документов и представлений проиллюстрирован на [создание документов и представлений](../mfc/document-view-creation.md). Это больше работы и потребует более глубокого понимания платформы, но освобождает только из документов и представлений издержки.

Статья [MFC: использование классов базы данных без документов и представлений](../data/mfc-using-database-classes-without-documents-and-views.md) предоставляет более конкретные примеры документов и представлений альтернатив в контексте базы данных приложений.

## <a name="see-also"></a>См. также

[Архитектура документа/обзора](../mfc/document-view-architecture.md)

