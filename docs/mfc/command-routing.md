---
title: маршрутизация команд
ms.date: 09/06/2019
helpviewer_keywords:
- MFC, command routing
- command handling [MFC], routing commands
- handlers [MFC]
- handlers, command [MFC]
- command routing
ms.assetid: 9393a956-bdd4-47c5-9013-dbd680433f93
ms.openlocfilehash: e47ffd38b342301da32abae9690738ef83c0426b
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84620694"
---
# <a name="command-routing"></a>маршрутизация команд

Ответственность за работу с командами ограничена созданием связей между командами и их функциями обработчика, задачей, для которой используется [мастер классов MFC](reference/mfc-class-wizard.md). Также необходимо написать код для обработчиков команд.

Сообщения Windows обычно отправляются в основную область окна, однако командные сообщения затем направляются в другие объекты. Платформа перенаправляет команды через стандартную последовательность целевых объектов команд, один из которых должен иметь обработчик команды. Каждый целевой объект команды проверяет схему сообщений, чтобы определить возможность обработки входящих сообщений.

Разные целевые классы команд проверяют свои схемы сообщений в разное время. Как правило, класс направляет команду в определенные другие объекты, чтобы дать им первый шанс обработки команды. Если ни один из этих объектов не может обработать команду, исходный класс проверяет собственную схему сообщений. Затем, если он не может предоставить обработчик, оно может перенаправить команду в другие объекты. В приведенной ниже таблице [Стандартная маршрутизация команды](#_core_standard_command_route) показано, как каждый из классов формирует эту последовательность. Общая последовательность маршрутизации команды выглядит следующим образом.

1. К текущему активному дочернему целевому объекту команды.

1. К себе.

1. К другим целевым объектам команды.

Насколько дорогой механизм маршрутизации по сравнению с тем, что ваш обработчик выполняет в ответ на команду, стоимость маршрутизации мала. Следует иметь в виду, что платформа создает команды только в том случае, когда пользователь взаимодействует с объектами пользовательского интерфейса.

### <a name="standard-command-route"></a><a name="_core_standard_command_route"></a> Стандартная маршрутизация команды

|Когда объект этого типа получает команду. . .|Он и другие целевые объекты команды сначала пытаются самостоятельно обработать команду в следующем порядке:|
|----------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|Окно области MDI (`CMDIFrameWnd`)|1. активный`CMDIChildWnd`<br />2. это окно фрейма<br />3. приложение ( `CWinApp` объект)|
|Окно области документа (`CFrameWnd`, `CMDIChildWnd`)|1. активное представление<br />2. это окно фрейма<br />3. приложение ( `CWinApp` объект)|
|Просмотр|1. это представление<br />2. документ, присоединенный к представлению|
|Document|1. Этот документ<br />2. шаблон документа, присоединенный к документу|
|.|1. это диалоговое окно<br />2. окно, которому принадлежит диалоговое окно<br />3. приложение ( `CWinApp` объект)|

Если пронумерованные элементы во втором столбце таблицы указывают на другие объекты, например документ, см. соответствующий элемент в первом столбце. Например, если во втором столбце говорится, что представление перенаправляет команду в документ, см. запись "Документ" в первом столбце, чтобы отследить дальнейшую маршрутизацию.

## <a name="see-also"></a>См. также раздел

[Вызовы обработчика со стороны платформы](how-the-framework-calls-a-handler.md)
