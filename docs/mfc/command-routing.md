---
title: маршрутизация команд
ms.date: 09/06/2019
helpviewer_keywords:
- MFC, command routing
- command handling [MFC], routing commands
- handlers [MFC]
- handlers, command [MFC]
- command routing
ms.assetid: 9393a956-bdd4-47c5-9013-dbd680433f93
ms.openlocfilehash: 8d1e1e59c56439c01655a1416df645ccc6922411
ms.sourcegitcommit: 3caf5261b3ea80d9cf14038c116ba981d655cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70907622"
---
# <a name="command-routing"></a>маршрутизация команд

Ответственность за работу с командами ограничена созданием связей между командами и их функциями обработчика, задачей, для которой используется [мастер классов MFC](reference/mfc-class-wizard.md). Также необходимо написать код для обработчиков команд.

Сообщения Windows обычно отправляются в основную область окна, однако командные сообщения затем направляются в другие объекты. Платформа перенаправляет команды через стандартную последовательность целевых объектов команд, один из которых должен иметь обработчик команды. Каждый целевой объект команды проверяет схему сообщений, чтобы определить возможность обработки входящих сообщений.

Разные целевые классы команд проверяют свои схемы сообщений в разное время. Как правило, класс направляет команду в определенные другие объекты, чтобы дать им первый шанс обработки команды. Если ни один из этих объектов не может обработать команду, исходный класс проверяет собственную схему сообщений. Затем, если он не может предоставить обработчик, оно может перенаправить команду в другие объекты. В приведенной ниже таблице [Стандартная маршрутизация команды](#_core_standard_command_route) показано, как каждый из классов формирует эту последовательность. Общая последовательность маршрутизации команды выглядит следующим образом.

1. К текущему активному дочернему целевому объекту команды.

1. К себе.

1. К другим целевым объектам команды.

Насколько дорогой механизм маршрутизации по сравнению с тем, что ваш обработчик выполняет в ответ на команду, стоимость маршрутизации мала. Следует иметь в виду, что платформа создает команды только в том случае, когда пользователь взаимодействует с объектами пользовательского интерфейса.

### <a name="_core_standard_command_route"></a> Стандартная маршрутизация команды

|Когда объект этого типа получает команду. . .|Он и другие целевые объекты команды сначала пытаются самостоятельно обработать команду в следующем порядке:|
|----------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|Окно области MDI (`CMDIFrameWnd`)|1.  Активное `CMDIChildWnd`<br />2.  Это окно области<br />3.  Приложение (объект `CWinApp`)|
|Окно области документа (`CFrameWnd`, `CMDIChildWnd`)|1.  Активное представление<br />2.  Это окно области<br />3.  Приложение (объект `CWinApp`)|
|Вид|1.  Это представление<br />2.  Документ, прикрепленный к представлению|
|Document|1.  Этот документ<br />2.  Шаблон документа, прикрепленный к документу|
|Диалоговое окно|1.  Это диалоговое окно<br />2.  Окно, которому принадлежит это диалоговое окно<br />3.  Приложение (объект `CWinApp`)|

Если пронумерованные элементы во втором столбце таблицы указывают на другие объекты, например документ, см. соответствующий элемент в первом столбце. Например, если во втором столбце говорится, что представление перенаправляет команду в документ, см. запись "Документ" в первом столбце, чтобы отследить дальнейшую маршрутизацию.

## <a name="see-also"></a>См. также

[Вызовы обработчика со стороны платформы](../mfc/how-the-framework-calls-a-handler.md)
