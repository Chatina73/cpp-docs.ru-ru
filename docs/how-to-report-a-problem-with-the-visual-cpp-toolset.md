---
title: Как сообщить о проблеме с набором инструментов Visual C++ | Документы Майкрософт
ms.date: 06/21/2018
ms.technology:
- cpp-ide
ms.topic: conceptual
dev_langs:
- C++
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: e2ca0f4aa5f3965adc97e4cdaef09e01646e8809
ms.sourcegitcommit: a9dcbcc85b4c28eed280d8e451c494a00d8c4c25
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50062123"
---
# <a name="how-to-report-a-problem-with-the-visual-c-toolset-or-documentation"></a>Как сообщить о проблеме с набором инструментов Visual C++ или документацией

Если у вас возникают проблемы с компилятором, компоновщиком или другими инструментами и библиотеками Microsoft Visual C++, обязательно дайте нам знать об этом. Если проблема заключается в документации, нам нужно знать и об этом.

## <a name="how-to-report-a-c-toolset-issue"></a>Как сообщить о проблеме с набором инструментов C++

Лучший способ сообщить о проблеме — отправить нам отчет с ее описанием, сведениями о том, как выполняется сборка программы, и *данными для воспроизведения*. Последние представляют собой полный тестовый случай, который позволит нам воспроизвести проблему на собственных компьютерах. Эта информация позволит нам быстро выяснить, действительно ли проблема находится в нашем коде (то есть не ограничивается только вашей средой), определить, затрагивает ли она другие версии компилятора, и установить ее причину.

В следующих разделах вы узнаете, как выглядит хороший отчет, как создать данные для воспроизведения обнаруженной проблемы и отправить отчет команде разработчиков. Ваши отчеты важны для нас и других разработчиков. Благодарим за помощь в улучшении Visual C++!

## <a name="how-to-prepare-your-report"></a>Подготовка отчета

Создание качественного отчета имеет важное значение, так как без полной информации нам будет очень трудно воспроизвести возникшую у вас проблему на собственных компьютерах. Чем более исчерпывающим будет ваш отчет, тем эффективнее мы сможем воссоздать и диагностировать проблему.

Отчет должен содержать по меньшей мере следующие данные:

- полная информация о версии используемого набора инструментов;

- полная команда cl.exe, используемая для сборки кода;

- подробное описание возникшей проблемы;

- данные для воспроизведения — полный, упрощенный, автономный образец исходного кода, демонстрирующий проблему.

Далее мы подробно опишем, какая именно информация нам нужна, где ее найти и как оптимально создавать данные для воспроизведения.

### <a name="the-toolset-version"></a>Версия набора инструментов

Обязательно предоставьте нам полную информация о версии и целевой архитектуре набора инструментов, вызывающего проблему, чтобы мы могли протестировать ваши данные с теми же инструментами на своих компьютерах. Если мы сможем воспроизвести проблему, то затем попробуем выяснить, в каких еще версиях набора инструментов она проявляется.

#### <a name="to-report-the-full-version-of-the-compiler-youre-using"></a>Предоставление информации о полной версии используемого компилятора

1. Откройте **командную строку разработчика**, соответствующую версии Visual Studio и архитектуре конфигурации, используемой для создания проекта. Например, если сборка выполняется в Visual Studio 2017 на x64-системе для целевой архитектуры x64, выберите **Командная строка Native Tools x64 для VS 2017**. Дополнительные сведения см. в разделе [Ярлыки командной строки разработчика](build/building-on-the-command-line.md#developer-command-prompt-shortcuts).

1. В окне консоли командной строки разработчика введите команду **cl /Bv**.

Результат должен выглядеть следующим образом:

```Output
C:\Users\username\Source>cl /Bv
Microsoft (R) C/C++ Optimizing Compiler Version 19.14.26428.1 for x86
Copyright (C) Microsoft Corporation.  All rights reserved.

Compiler Passes:
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\cl.exe:        Version 19.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\c1.dll:        Version 19.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\c1xx.dll:      Version 19.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\c2.dll:        Version 19.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\link.exe:      Version 14.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\mspdb140.dll:  Version 14.14.26428.1
 C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.14.26428\bin\HostX86\x86\1033\clui.dll: Version 19.14.26428.1

cl : Command line error D8003 : missing source filename
```

Скопируйте все выходные данные и вставьте их в отчет.

### <a name="the-command-line"></a>Командная строка

Нам нужна точная команда (cl.exe и все аргументы), которую вы используете для сборки кода, чтобы мы могли выполнить сборку аналогичным образом на своих компьютерах. Это важно, так как проблема может возникать только при сборке с определенным аргументом или сочетанием аргументов.

Проще всего найти эту информацию в журнале сборки сразу после возникновения проблемы. Таким образом мы получим команду именно с теми аргументами, которые вы использовали и которые могут быть причиной проблемы.

#### <a name="to-report-the-contents-of-the-command-line"></a>Предоставление содержимого командной строки

1. Найдите файл **CL.command.1.tlog** и откройте его. По умолчанию этот файл находится в папке "Документы" в каталоге \\Visual Studio *<версия>*\\Projects\\ *<Имя_решения>*\\ *<Имя_проекта>*\\*Configuration*\\ *<Имя_проекта>*.tlog\\CL.command.1.tlog или в папке пользователя в каталоге \\Source\\Repos\\ *<Имя_решения>*\\ *<Имя_проекта>*\\*Configuration*\\ *<Имя_проекта>*.tlog\\CL.command.1.tlog. Он может находиться в другом месте, если вы используете другую систему сборки или изменили расположение своего проекта по умолчанию.

   В этом файле в отдельных строках указываются имена файлов с исходным кодом и аргументы командной строки, которые использовались для их компиляции.

1. Найдите строку с именем файла исходного кода, вызывающего проблему. Идущая следом строка содержит соответствующие аргументы команды cl.exe.

Скопируйте командную строку полностью и вставьте ее в отчет.

### <a name="a-description-of-the-problem"></a>Описание проблемы

Нам требуется подробное описание возникшей проблемы, чтобы мы могли проверить, проявляется ли она на наших компьютерах. Иногда нам также полезно знать, какую задачу вы выполняли и какого результата ожидали.

Укажите **точные сообщения об ошибках**, выдаваемые набором инструментов, или точное поведение среды выполнения. Эти сведения позволят проверить, что мы правильно воспроизвели проблему. Укажите **все** выходные данные компилятора, а не только последнее сообщение об ошибке. Нам нужны сведения обо всех процессах, которые привели к сообщаемой проблеме. Если вы можете воспроизвести проблему с помощью компилятора командной строки, лучше всего указать выходные данные именно этого компилятора. Интегрированные среды разработки и другие системы сборки могут фильтровать отображаемые сообщения об ошибках или показывать только их первые строки.

Если проблема в том, что компилятор принимает недопустимый код и не выдает данные диагностики, сообщите об этом в отчете.

Чтобы сообщить о проблеме с работой среды выполнения, приложите **точную копию** выдаваемых программой данных и то, что вы ожидаете увидеть. В идеале это должно входить в сам оператор вывода, например: `printf("This should be 5: %d\n", actual_result);`. Если программа зависает или аварийно завершает работу, также сообщите нам об этом.

Добавьте любые другие сведения, которые могут помочь нам диагностировать возникшую проблему, например найденные вами обходные пути. Старайтесь не указывать повторно сведения, которые уже имеются в других частях отчета.

### <a name="the-repro"></a>Данные для воспроизведения

Данные для воспроизведения — это полный автономный образец исходного кода, который воспроизводит возникающую у вас проблему. Данные для воспроизведения нужны нам, чтобы воспроизвести ошибку на своих компьютерах. Этот код должен прямо в текущем виде (без каких-либо добавлений) позволить создать простой исполняемый файл, который будет компилироваться и запускаться либо который компилировался и запускался бы, если бы не возникала обнаруженная вами проблема. Данные для воспроизведения — это не фрагмент кода. Код должен содержать полные варианты функций и классов, а также все необходимые директивы #include, даже для стандартных файлов заголовков.

#### <a name="what-makes-a-good-repro"></a>Как создать оптимальные данные для воспроизведения

Оптимальные данные для воспроизведения характеризует

- **Минимальный размер**. Данные для воспроизведения должны быть минимального размера, но при этом точно демонстрировать проблему. Не нужно делать их сложными или реалистичными. Они должны только показывать код, соответствующий стандартам или задокументированной реализации компилятора, либо несоответствующий код, если не выдается диагностика. Лучшие, самые понятные данные для воспроизведения включают только тот код, который нужен для демонстрации проблемы. Если вы можете исключить или упростить какой-то код, сохранив соответствие стандартам, но по-прежнему воспроизводя проблему, сделайте это. Вам не нужно для сравнения включать примеры кода, который не вызывает ошибку.

- **Автономность**. В данных для воспроизведения следует избегать лишних зависимостей. Если проблему можно воспроизвести без сторонних библиотек, то не используйте их. Если проблему можно воспроизвести без кода из библиотек, за исключением простых операторов вывода (например, `puts("this shouldn't compile");`, `std::cout << value;` и `printf("%d\n", value);` подойдут), не используйте его. В идеале следует сократить пример до одного файла исходного кода без ссылок на какие-либо пользовательские заголовки. Сокращая объем кода, который может вносить вклад в возникновение проблемы, вы оказываете нам большую услугу.

- **Использование последней версии компилятора**. По возможности используйте в данных для воспроизведения последнюю версию своего набора инструментов либо последнюю предварительную версию следующего обновления или основного выпуска. Часто бывает, что проблемы, возникающие в предыдущих версиях набора инструментов, исправлены в его более новых версиях. Исправления переносятся в более ранние версии только в исключительных случаях.

- **Тестирование с другими компиляторами**, если это необходимо. Данные для воспроизведения, включающие переносимый код C++, следует протестировать с другими компиляторами, если это возможно. Корректность программы в конечном счете определяют принятые для языка стандарты. Ни один компилятор не идеален, но если Clang и GCC принимают ваш код без диагностики, а MSVC — нет, вероятно, возникла ошибка в компиляторе. (Другие варианты: различия в поведении Unix и Windows, разные уровни реализации стандартов C++ и т. д.) С другой стороны, если все компиляторы отклоняют ваш код, скорее всего, он неправильный. Различные сообщения об ошибках могут помочь вам самостоятельно диагностировать проблему.

   Списки веб-компиляторов для тестирования кода см. в разделе [веб-компиляторов C++](https://isocpp.org/blog/2013/01/online-c-compilers) на веб-сайте ISO C++ или в курируемом [списке веб-компиляторов C++](https://arnemertz.github.io/online-compilers/) на GitHub. Примеры конкретных компиляторов: [Wandbox](https://wandbox.org/), [Compiler Explorer](https://godbolt.org/) и [Coliru](http://coliru.stacked-crooked.com/).

   > [!NOTE]
   > Сайты с веб-компиляторами не связаны с Майкрософт. Многие сайты с веб-компиляторами — это чьи-то личные проекты, и некоторые из них могут быть недоступны, когда вы читаете эти строки. Но вы можете найти и другие веб-сайты, пригодные для вашей цели.

Проблемы в компиляторе, компоновщике и библиотеках, как правило, проявляются определенным образом. Данные для воспроизведения, которые следует включить в отчет, зависят от типа возникшей проблемы. Не имея этих данных, мы не сможем провести анализ. Далее представлены несколько типов возможных проблем и указания по созданию оптимальных данных для воспроизведения, включаемых в отчеты об этих проблемах.

#### <a name="frontend-parser-crash"></a>Сбой интерфейсной части (средства синтаксического анализа)

Сбои интерфейсной части происходят на этапе выполнения синтаксического анализа компилятором. Как правило, компилятор выдает [неустранимую ошибку C1001](error-messages/compiler-errors-1/fatal-error-c1001.md) с указанием файла с исходным кодом и номера строки, в которой произошла ошибка. Часто указывается файл msc1.cpp, однако эту информацию можно игнорировать.

В случае такого сбоя предоставьте [предварительно обработанные данные для воспроизведения](#preprocessed-repros).

Вот пример выходных данных компилятора для сбоя такого типа:

```Output
SandBoxHost.cpp
d:\o\dev\search\foundation\common\tools\sandbox\managed\managed.h(929):
        fatal error C1001: An internal error has occurred in the compiler.
(compiler file 'msc1.cpp', line 1369)
To work around this problem, try simplifying or changing the program near the
        locations listed above.
Please choose the Technical Support command on the Visual C++
Help menu, or open the Technical Support help file for more information
d:\o\dev\search\foundation\common\tools\sandbox\managed\managed.h(929):
        note: This diagnostic occurred in the compiler generated function
        'void Microsoft::Ceres::Common::Tools::Sandbox::SandBoxedProcess::Dispose(bool)'
Internal Compiler Error in d:\o\dev\otools\bin\x64\cl.exe.  You will be prompted
        to send an error report to Microsoft later.
INTERNAL COMPILER ERROR in 'd:\o\dev\otools\bin\x64\cl.exe'
    Please choose the Technical Support command on the Visual C++
    Help menu, or open the Technical Support help file for more information
```

#### <a name="backend-code-generation-crash"></a>Внутренний сбой (при создании кода)

Внутренние сбои происходят на этапе создания кода компилятором. Как правило, компилятор выдает [неустранимую ошибку C1001](error-messages/compiler-errors-1/fatal-error-c1001.md) и может не указать файл исходного кода и номер строки, связанные с проблемой. Часто он указывает файл compiler\\utc\\src\\p2\\main.c, но эту информацию можно игнорировать.

В случае такого сбоя предоставьте [данные компоновки для воспроизведения](#link-repros), если вы используете создание кода во время компоновки (LTCG) при помощи аргумента командной строки **/GL** в cl.exe. Если это не так, предоставьте [предварительно обработанные данные для воспроизведения](#preprocessed-repros).

Ниже приведен пример выходных данных компилятора для внутреннего сбоя, когда не используется LTCG. Если ваши выходные данные компилятора выглядят так, следует предоставить [предварительно обработанные данные для воспроизведения](#preprocessed-repros).

```Output
repro.cpp
\\officefile\public\tadg\vc14\comperror\repro.cpp(13) : fatal error C1001:
        An internal error has occurred in the compiler.
(compiler file 'f:\dd\vctools\compiler\utc\src\p2\main.c', line 230)
To work around this problem, try simplifying or changing the program near the
        locations listed above.
Please choose the Technical Support command on the Visual C++
Help menu, or open the Technical Support help file for more information
INTERNAL COMPILER ERROR in
        'C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\BIN\cl.exe'
    Please choose the Technical Support command on the Visual C++
    Help menu, or open the Technical Support help file for more information
```

Если в строке, которая начинается со слов **ВНУТРЕННЯЯ ОШИБКА КОМПИЛЯТОРА**, упоминается программа link.exe, а не cl.exe, функция LTCG была включена и вам следует предоставить [данные компоновки для воспроизведения](#link-repros). Если из сообщения об ошибке компилятора неясно, была ли включена функция LTCG, проверьте наличие аргумента **/GL** в аргументах командной строки, скопированных из журнала сборки на предыдущем шаге.

#### <a name="linker-crash"></a>Сбой компоновщика

Сбои компоновщика происходят на этапе компоновки после выполнения компилятора. Как правило, компоновщик выдает [ошибку средств компоновщика LNK1000](error-messages/tool-errors/linker-tools-error-lnk1000.md).

> [!NOTE]
> Если в выходных данных указывается ошибка C1001 или используется создание кода во время компоновки, за дополнительными сведениями обратитесь к разделу [Внутренний сбой (при создании кода)](#backend-code-generation-crash).

В случае такого сбоя предоставьте [данные компоновки для воспроизведения](#link-repros).

Вот пример выходных данных компилятора для сбоя такого типа.

```Output
z:\foo.obj : error LNK1000: Internal error during IMAGE::Pass2

  Version 14.00.22816.0

  ExceptionCode            = C0000005
  ExceptionFlags           = 00000000
  ExceptionAddress         = 00007FF73C9ED0E6 (00007FF73C9E0000)
        "z:\tools\bin\x64\link.exe"
  NumberParameters         = 00000002
  ExceptionInformation[ 0] = 0000000000000000
  ExceptionInformation[ 1] = FFFFFFFFFFFFFFFF

CONTEXT:

  Rax    = 0000000000000400  R8     = 0000000000000000
  Rbx    = 000000655DF82580  R9     = 00007FF840D2E490
  Rcx    = 005C006B006F006F  R10    = 000000655F97E690
  Rdx    = 000000655F97E270  R11    = 0000000000000400
  Rsp    = 000000655F97E248  R12    = 0000000000000000
  Rbp    = 000000655F97EFB0  E13    = 0000000000000000
  Rsi    = 000000655DF82580  R14    = 000000655F97F390
  Rdi    = 0000000000000000  R15    = 0000000000000000
  Rip    = 00007FF73C9ED0E6  EFlags = 0000000000010206
  SegCs  = 0000000000000033  SegDs  = 000000000000002B
  SegSs  = 000000000000002B  SegEs  = 000000000000002B
  SegFs  = 0000000000000053  SegGs  = 000000000000002B
  Dr0    = 0000000000000000  Dr3    = 0000000000000000
  Dr1    = 0000000000000000  Dr6    = 0000000000000000
  Dr2    = 0000000000000000  Dr7    = 0000000000000000
```

Если включена инкрементная компоновка и сбой произошел только после выполнения начальной компоновки (то есть первой полной компоновки, на основе которой в дальнейшем осуществляется инкрементная), предоставьте также копии файлов объектов (.obj) и библиотек (.lib), соответствующие файлам исходного кода, измененным после начальной компоновки.

#### <a name="bad-code-generation"></a>Создание неверного кода

Хотя такое происходит нечасто, компилятор может по ошибке создавать неверный код, который не определяется во время компиляции, но приводит к сбою приложения во время выполнения. Если вы считаете, что возникающая проблема приводит к созданию неверного кода, следуйте указаниям, приведенным в разделе [Внутренний сбой (при создании кода)](#backend-code-generation-crash).

В случае такого сбоя предоставьте [данные компоновки для воспроизведения](#link-repros), если вы используете создание кода во время компоновки (LTCG) при помощи аргумента командной строки **/GL** в cl.exe. Если это не так, предоставьте [предварительно обработанные данные для воспроизведения](#preprocessed-repros).

## <a name="how-to-generate-a-repro"></a>Создание данных для воспроизведения

Чтобы найти источник проблемы, нам крайне важно получить [подходящие данные для воспроизведения](#what-makes-a-good-repro). Прежде чем выполнять какие-либо из описанных ниже действий по созданию определенных типов данных для воспроизведения, постарайтесь насколько возможно сократить код, демонстрирующий проблему. Попробуйте исключить или минимизировать зависимости, требуемые заголовки и библиотеки, а также ограничить используемые параметры компилятора и определения препроцессора.

Ниже приведены инструкции по созданию различных типов данных для воспроизведения в зависимости от характера проблемы.

### <a name="preprocessed-repros"></a>Предварительно обработанные данные для воспроизведения

*Предварительно обработанные данные для воспроизведения* — это отдельный файл исходного кода, который демонстрирует проблему. Этот файл создается из выходных данных препроцессора C, полученных при использовании параметра компилятора **/P** с файлом исходного кода из первоначальных (необработанных) данных для воспроизведения. В рамках этого процесса происходит встраивание включенных заголовков для устранения зависимостей от других файлов заголовков и исходного кода, а также разрешение макросов, директив #ifdef и других команд препроцессора, которые могут зависеть от вашей локальной среды.

> [!NOTE]
> Предварительно обработанные данные для воспроизведения не очень помогают в решении проблем, возникающих из-за ошибок в нашей реализации стандартных библиотек, так как мы часто для пробы используем находящиеся сейчас в разработке, еще не выпущенные реализации, в которых проблема, возможно, уже устранена. В этом случае не выполняйте предварительную обработку данных. Если вы не можете продемонстрировать проблему в одном файле исходного кода, упакуйте код в ZIP-файл или иной архив или предоставьте в качестве примера проект из вашей интегрированной среды разработки. Дополнительные сведения см. в разделе [Другие типы данных для воспроизведения](#other-repros).

#### <a name="to-preprocess-a-source-code-file"></a>Предварительная обработка файла с исходным кодом

1. Запишите аргументы командной строки, используемые для сборки данных для воспроизведения, как описано в разделе [Предоставление содержимого командной строки](#to-report-the-contents-of-the-command-line).

1. Откройте **командную строку разработчика**, соответствующую версии Visual Studio и архитектуре конфигурации, используемой для создания проекта.

1. Перейдите в каталог, содержащий проект данных для воспроизведения.

1. В окне консоли командной строки разработчика введите команду **cl /P** *<аргументы>* *<имя_файла>.cpp*, где *<аргументы>*  — это список записанных выше аргументов, а *<имя_файла>.cpp* — имя файла исходного кода для воспроизведения. Эта команда реплицирует командную строку, используемую для данных для воспроизведения, но останавливает компиляцию после этапа предварительной обработки и выводит обработанный исходный код в *<имя_файла>*.i.

Если вы выполняете предварительную обработку файла с исходным кодом C++/CX или используете функцию модулей C++, то требуются некоторые дополнительные шаги. Дополнительные сведения см. в разделе ниже.

Когда вы получите предварительно обработанный файл, рекомендуем проверить, воспроизводит ли он по-прежнему проблему.

#### <a name="to-confirm-that-the-error-still-repros-with-the-preprocessed-file"></a>Проверка воспроизведения ошибки с помощью предварительно обработанного файла

1. В окне консоли командной строки разработчика введите команду **cl** *<аргументы>* **/TP** *<имя_файла>*.i, чтобы запустить cl.exe для компиляции предварительно обработанного файла в виде файла исходного кода C++, где *<аргументы>*  — это список записанных выше аргументов, из которого удалены аргументы **/D** и **/I** (так как они уже включены в предварительно обработанный файл), и где *<имя_файла>*.i — имя предварительно обработанного файла.

1. Убедитесь в том, что проблема воспроизводится.

Наконец, вложите *<имя_файла>*.i с предварительно обработанными данными для воспроизведения в свой отчет.

### <a name="preprocessed-ccx-winrtuwp-code-repros"></a>Предварительно обработанные данные для воспроизведения кода C++/CX WinRT/UWP

Если вы используете C++/CX для создания исполняемого файла, то необходимы дополнительные действия для создания и проверки предварительно обработанных данных для воспроизведения.

#### <a name="to-preprocess-ccx-source-code"></a>Предварительная обработка исходного кода C++/CX

1. Создайте предварительно обработанный файл с исходным кодом, как описано в разделе [Предварительная обработка файла с исходным кодом](#to-preprocess-a-source-code-file).

1. Найдите созданный файл _<имя файла>_.i для директив **#using**.

1. Создайте список всех файлов, на которые есть ссылки. Исключите файлы Windows\*winmd, platform.winmd и mscorlib.dll.

Чтобы подготовить проверку того, что предварительно обработанные файлы по-прежнему воспроизводят проблему,

1. создайте новый каталог и скопируйте в него предварительно обработанный файл.

1. Скопируйте в новый каталог файлы WINMD из списка **#using**.

1. Создайте пустой файл vccorlib.h в новом каталоге.

1. Отредактируйте предварительно обработанный файл, чтобы удалить все директивы **#using** для mscorlib.dll.

1. Отредактируйте предварительно обработанный файл, чтобы изменить все абсолютные пути таким образом, чтобы они содержали только имена скопированных файлов WINMD.

Проверьте, что предварительно обработанные файлы по-прежнему воспроизводят проблему, как и раньше.

### <a name="preprocessed-c-modules-repros"></a>Предварительно обработанные модули C++ для воспроизведения

Если вы используете функцию модулей компилятора C++, то процесс создания и проверки предварительно обработанных данных для воспроизведения немного отличается.

#### <a name="to-preprocess-a-source-code-file-that-uses-a-module"></a>Предварительная обработка файла c исходным кодом, в котором используется модуль

1. Запишите аргументы командной строки, используемые для сборки данных для воспроизведения, как описано в разделе [Предоставление содержимого командной строки](#to-report-the-contents-of-the-command-line).

1. Откройте **командную строку разработчика**, соответствующую версии Visual Studio и архитектуре конфигурации, используемой для создания проекта.

1. Перейдите в каталог, содержащий проект данных для воспроизведения.

1. В окне консоли командной строки разработчика введите команду **cl /P** *<аргументы>* *<имя_файла>.cpp*, где *<аргументы>*  — это список записанных выше аргументов, а *<имя_файла>.cpp* — имя файла исходного кода, который использует модуль.

1. Перейдите в каталог, содержащий проект для воспроизведения, в котором создается интерфейс модуля (выходной файл IFC).

1. Запишите аргументы командной строки, используемые для построения интерфейса модуля.

1. В окне консоли командной строки разработчика введите команду **cl /P** *<аргументы>* *<имя_модуля>.ixx*, где *<аргументы>*  — это список записанных выше аргументов, а *<имя_модуля>.ixx* — имя файла, который создает интерфейс модуля.

Когда вы получите предварительно обработанный файл, рекомендуем проверить, воспроизводит ли он по-прежнему проблему.

#### <a name="to-confirm-that-the-error-still-repros-with-the-preprocessed-file"></a>Проверка воспроизведения ошибки с помощью предварительно обработанного файла

1. В окне консоли разработчика перейдите обратно в каталог, который содержит проект с данными для воспроизведения.

1. Введите команду **cl** *<аргументы>* **/TP** *<имя_файла>*.i, как это описано выше, чтобы скомпилировать предварительно обработанный файл так, как если бы это был файл исходного кода C++.

1. Убедитесь, что проблема по-прежнему воспроизводится предварительно подготовленным файлом.

В завершение присоедините к отчету предварительно обработанные файлы для воспроизведения (*<имя_файла>*.i и *<имя_модуля>*.i) и файл вывода IFC.

### <a name="link-repros"></a>Данные компоновки для воспроизведения

*Данные компоновки для воспроизведения* — это созданное компоновщиком содержимое каталога, указанного в переменной среды **link\_repro**. Они содержат артефакты сборки, которые вместе демонстрируют проблему, возникающую во время компоновки, например внутренний сбой с созданием кода во время компоновки (LTCG) или сбой компоновщика. Эти артефакты сборки нужны в качестве входных данных компоновщика, позволяющих воспроизвести проблему. Чтобы легко получить данные компоновки для воспроизведения, активируйте встроенную функцию компоновщика по созданию данных для воспроизведения, используя эту переменную среды.

#### <a name="to-generate-a-link-repro"></a>Создание данных компоновки для воспроизведения

1. Запишите аргументы командной строки, используемые для сборки данных для воспроизведения, как описано в разделе [Предоставление содержимого командной строки](#to-report-the-contents-of-the-command-line).

1. Откройте **командную строку разработчика**, соответствующую версии Visual Studio и архитектуре конфигурации, используемой для создания проекта.

1. В окне консоли командной строки разработчика перейдите в каталог, который содержит проект с данными для воспроизведения.

1. Введите **mkdir linkrepro**, чтобы создать каталог с данными компоновки для воспроизведения.

1. Введите команду **set link\_repro=linkrepro**, чтобы задать переменную среды **link\_repro** для созданного каталога. Если построение выполняется из другого каталога, как это обычно бывает для более сложных проектов, вместо этого задайте для **link\_repro** полный путь к каталогу linkrepro.

1. Чтобы выполнить сборку проекта данных для воспроизведения в Visual Studio, в окне консоли командной строки разработчика введите команду **devenv**. Таким образом, значение переменной среды **link\_repro** будет доступно Visual Studio. Для сборки проекта в командной строке используйте аргументы командной строки, записанные выше, чтобы повторить сборку данных для воспроизведения.

1. Выполните сборку проекта данных для воспроизведения и проверьте, возникает ли проблема.

1. Закройте Visual Studio, если вы использовали его для сборки.

1. В окне консоли командной строки разработчика введите команду **set link\_repro=**, чтобы очистить переменную среды **link\_repro**.

Наконец, упакуйте данные для воспроизведения, сжав весь каталог linkrepro в ZIP-файл или аналогичный архив, и вложите их в отчет.

### <a name="other-repros"></a>Другие типы данных для воспроизведения

Если вы не можете свести проблему к одному файлу исходного кода или представить ее в виде предварительно обработанных данных для воспроизведения, а данные компоновки не помогают описать проблему, мы можем проанализировать проект из вашей интегрированной среды разработки. При этом действуют все приведенные выше рекомендации по созданию подходящих данных для воспроизведения. Код должен быть минимальным и автономным, проблема должна возникать в последних версиях инструментов и, если актуально, она не должна возникать в других компиляторах.

Создайте данные для воспроизведения в виде проекта интегрированной среды разработки минимального размера, упакуйте его, сжав всю структуру каталогов в ZIP-файл или файл аналогичного формата, и вложите в отчет.

## <a name="ways-to-send-your-report"></a>Способы отправки отчета

Существует несколько надежных способов доставить нам отчет. Можно воспользоваться встроенным в Visual Studio [инструментом "Сообщить о проблеме"](/visualstudio/ide/how-to-report-a-problem-with-visual-studio-2017) или [страницами сообщества разработчиков Visual Studio](https://developercommunity.visualstudio.com/). Кроме того, вы можете перейти на страницы сообщества разработчиков, нажав на кнопку **Отзыв о продукте** в нижней части этой страницы. Выбор зависит от того, хотите ли вы использовать средства, встроенные в интегрированную среду разработки, для создания снимков экрана и подготовки отчета для отправки на страницу сообщества разработчиков, или вы предпочитаете использовать веб-сайт напрямую.

> [!NOTE]
> Независимо от способа отправки отчета корпорация Майкрософт сохраняет вашу конфиденциальность. Корпорация Майкрософт привержена соблюдению всех законов и положений о конфиденциальности данных. Сведения о том, как мы обращаемся с поступающей от вас информацией, см. в [Заявлении о конфиденциальности Майкрософт](https://privacy.microsoft.com/privacystatement).

### <a name="use-the-report-a-problem-tool"></a>Использование инструмента "Сообщить о проблеме"

Инструмент **Сообщить о проблеме** в Visual Studio позволяет пользователям Visual Studio сообщать о различных проблемах всего несколькими щелчками мыши. Он предоставляет простую форму, в которой можно указать подробные сведения о возникшей проблеме, а затем отправить отчет, не выходя из интегрированной среды разработки.

С помощью инструмента **Сообщить о проблеме** вы можете быстро сообщить о проблеме из интегрированной среды разработки. Этот инструмент доступен в строке заголовка. Чтобы его открыть, щелкните значок **Отправить отзыв** рядом с полем поиска **Быстрый запуск**. Либо найдите его в строке меню, последовательно выбрав **Справка** > **Отправить отзыв** > **Сообщить о проблеме**.

Решив сообщить о проблеме, сначала попытайтесь найти подобный вопрос в сообществе разработчиков. Если проблема уже была зарегистрирована ранее, проголосуйте за тему и добавьте комментарии с дополнительными аспектами. Если подобная проблема отсутствует, нажмите кнопку **Сообщить о новой проблеме**, расположенную в нижней части диалогового окна отзывов Visual Studio, и выполните действия об указании сведений об ошибке.

### <a name="use-the-visual-studio-developer-community-pages"></a>Использование страниц сообщества разработчиков Visual Studio

Страницы сообщества разработчиков Visual Studio являются еще одним удобным способом указания сведений о проблемах и поиска решений по работе с Visual Studio, а также с компилятором, средствами и библиотеками C++. Существуют определенные страницы сообщества разработчиков для [Visual Studio](https://developercommunity.visualstudio.com/spaces/8/index.html), [Visual Studio для Mac](https://developercommunity.visualstudio.com/spaces/41/index.html), [.NET](https://developercommunity.visualstudio.com/spaces/61/index.html), [C++](https://developercommunity.visualstudio.com/spaces/62/index.html), [ Azure DevOps](https://developercommunity.visualstudio.com/spaces/21/index.html) и [TFS](https://developercommunity.visualstudio.com/spaces/22/index.html). Под этими вкладками, в верхней части каждой страницы находится поле поиска, которое можно использовать для поиска сообщений или разделов, содержащих данные о проблемах, подобных вашим. Может оказаться, что решение или другие полезные сведения по вашему вопросу уже опубликованы. Если кто-то уже сообщил о подобной проблеме ранее, проголосуйте "за" и оставьте комментарий по этой теме, а не создавайте отчет о проблеме. Чтобы оставить комментарий, голос в опросе или отчет о новой проблеме, вам потребуется войти в учетную запись Visual Studio и предоставить приложению сообщества разработчиков доступ к вашему профилю.

Сведения о проблемах с компилятором C++, компоновщиком и другими средствами и библиотеками публикуются на странице [о C++](https://developercommunity.visualstudio.com/spaces/62/index.html). Если поиск покажет, что сведения по вашей проблеме отсутствуют, нажмите кнопку **Сообщить о проблеме** рядом с полем поиска в верхней части страницы. Вы можете включить код воспроизведения, командную строку, снимки экранов, ссылки на соответствующие обсуждения и любую другую информацию, которую вы считаете актуальной и полезной.

> [!TIP]
> Для проблем других типов, которые могут встречаться в Visual Studio, но не имеют прямого отношения к набору инструментов C++ (например, проблемы пользовательского интерфейса, неработающие функциональные возможности интегрированной среды разработки или сбои общего характера), используйте инструмент **Сообщить о проблеме** в интегрированной среде разработки. Это самый правильный вариант, поскольку он позволяет использовать снимки экрана и записывать действия в пользовательском интерфейсе, которые приводят к обнаруженной проблеме. Также сведения об ошибках такого рода можно искать на сайте [сообщества разработчиков](https://developercommunity.visualstudio.com/). Дополнительные сведения см. в статье [Как сообщить о проблеме с Visual Studio 2017](/visualstudio/ide/how-to-report-a-problem-with-visual-studio-2017).

### <a name="reports-and-privacy"></a>Отчеты и конфиденциальность

По умолчанию **все данные в отчетах и любые комментарии и ответы видимы для всех**. Как правило, это является преимуществом, так как позволяет всему сообществу видеть проблемы, решения и обходные пути, обнаруженные другими пользователями. Тем не менее, если вы обеспокоены тем, что ваши данные или данные о вас станут общедоступны, из-за нежелания вмешательства в личную жизнь или охраны интеллектуальной собственности, то для вас есть решение.

Если вы не хотите раскрывать вашу личность, [создайте новую учетную запись Майкрософт](https://signup.live.com/), которая не будет содержать никаких сведений о вас. Используйте эту учетную запись для создания отчета.

**Не следует размещать ничего, что необходимо сохранить в тайне, в заголовке или содержимом исходного отчета, который является общедоступным.** Вместо этого отправьте подробности в частном порядке в отдельном комментарии. Чтобы убедиться в том, что отчет попадет к нужным сотрудникам, включите **cppcompiler** в список тем вашего отчета о проблеме. После создания отчета о проблеме можно указать, кто может просматривать ответы и вложения.

#### <a name="to-create-a-problem-report-for-private-information"></a>Создание отчета о проблеме с закрытой информацией

1. В созданном отчете выберите **Добавить комментарий** для создания закрытого описания проблемы.

1. В редакторе ответа используйте раскрывающийся список элементов под кнопками **Отправить** и **Отмена**, чтобы указать тех, кто сможет увидеть ответ. Только указанные вами пользователи смогут увидеть закрытые ответы, так же как и все изображения, ссылки или код, включенные в них. Выберите **Видимый для модераторов и создателя сообщения**, чтобы ограничить видимость только сотрудниками корпорации Майкрософт и вами.

1. Добавьте описание и любые другие сведения, изображения и вложенные файлы, необходимые для воспроизведения вашей проблемы. Нажмите кнопку **Отправить**, чтобы отправить эти сведения в частном порядке.

   Обратите внимание на ограничения: максимальный размер вложенных файлов 2 ГБ, не более 10 файлов. Для загрузки файлов большего размера запросите URL-адрес для отправки в частном комментарии.

Все ответы на этот комментарий имеют те же ограничения видимости, что и заданные вами ограничения в исходном сообщении. Это верно, даже если в раскрывающемся списке элементов в ответах ограничение видимости отображается неправильно.

Чтобы сохранить вашу конфиденциальность и защитить чувствительную информацию от глаз посторонних, внимательно следите, чтобы все взаимодействие с корпорацией Майкрософт производилось в ответах на этот частный комментарий. Ответы на другие комментарии могут привести к случайному раскрытию конфиденциальной информации.

## <a name="how-to-report-a-c-documentation-issue"></a>Как сообщить о проблеме с документацией C++

Мы используем проблемы GitHub для отслеживания проблем с нашей документацией. Теперь можно создавать проблему GitHub прямо на странице содержимого. Это удобный способ взаимодействия с нашими авторами и командами разработки продуктов. Если вы заметили проблему с документом, неверный пример кода, непонятное объяснение, критическое упущение или хотя бы просто опечатку, сообщите нам об этом. В нижней части страницы нажмите **Войти и оставить отзыв о документации**. Необходимо создать учетную запись GitHub, если у вас ее еще нет, и тогда вы сможете просматривать все проблемы с документацией и их статус и получать уведомление при исправлении ошибки, о которой вы сообщили. Дополнительные сведения см. в разделе [Новая система отзывов на docs.microsoft.com](/teamblog/a-new-feedback-system-is-coming-to-docs).

Когда вы создаете проблему, связанную с документацией на GitHub, с помощью кнопки отзыва, в проблеме автоматически указываются некоторые сведения о странице, на которой вы создали проблему, чтобы мы знали о ее местонахождении. Не меняйте эти сведения. Просто добавьте информацию об ошибке и предложите вариант исправления. [Наша документация имеет открытый исходный текст](https://github.com/MicrosoftDocs/cpp-docs/), поэтому при желании вы можете самостоятельно внести или предложить исправление. Дополнительные сведения о том, какой вклад вы можете внести в нашу документацию, см. в [Руководстве о совместной работе](https://github.com/MicrosoftDocs/cpp-docs/blob/master/CONTRIBUTING.md) на GitHub.

