---
description: Дополнительные сведения о том, как управление учетными записями пользователей (UAC) влияет на приложение.
title: Влияние контроля учетных записей на приложение
ms.date: 11/19/2018
helpviewer_keywords:
- UAC [C++]
- security [C++], User Account Control
- user accounts [C++]
- User Account Control [C++]
ms.assetid: 0d001870-253e-4989-b689-f78035953799
ms.openlocfilehash: 64196e0cac0a5b4edcf0b24fd95df2e5291ec45a
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97320070"
---
# <a name="how-user-account-control-uac-affects-your-application"></a>Влияние контроля учетных записей на приложение

Функция контроля учетных записей в Windows Vista используется для назначения учетным записям ограниченных привилегий. Подробные сведения о функции контроля учетных записей см. на следующих веб-сайтах:

- [Рекомендации для разработчиков и рекомендации для приложений в среде с минимальным уровнем привилегий](/windows/win32/uxguide/winenv-uac)

## <a name="building-projects-after-enabling-uac"></a>Сборка проектов после включения контроля учетных записей

Если вы создаете проект Visual Studio C++ в Windows Vista с отключенным UAC, а затем включаете UAC, необходимо очистить и перестроить проект, чтобы он работал правильно.

## <a name="applications-that-require-administrative-privileges"></a>Приложения, для которых требуются права администратора

По умолчанию компоновщик Visual C++ внедряет фрагмент UAC в манифест приложения с уровнем выполнения `asInvoker` . Если для корректного выполнения приложения требуются права администратора (например, если в приложении изменяется узел HKLM реестра или выполняется запись в защищенные разделы диска, такие как каталог Windows), необходимо изменить приложение.

Первый способ — изменить фрагмент контроля учетных записей манифеста, чтобы изменить уровень выполнения на *requireAdministrator*. В этом случае перед выполнением приложения отображается запрос на ввод учетных данных администратора. Сведения о том, как это сделать, см. [в разделе/MANIFESTUAC (внедряет сведения о контроле учетных записей в манифесте)](../build/reference/manifestuac-embeds-uac-information-in-manifest.md).

Во-вторых, можно отменить внедрение фрагмента функции контроля учетных записей в манифест, указав параметр компоновщика `/MANIFESTUAC:NO`. В этом случае приложение выполняется в режиме виртуализации. Любые изменения, вносимые в реестр или файловую систему, не сохраняются после завершения работы приложения.

На следующей блок-схеме описывается порядок выполнения приложения в зависимости от использования функции и манифеста контроля учетных записей приложения:

![Поведение загрузчика Windows](media/uacflowchart.png "Поведение загрузчика Windows")

## <a name="see-also"></a>См. также раздел

[Рекомендации по обеспечению безопасности](security-best-practices-for-cpp.md)
