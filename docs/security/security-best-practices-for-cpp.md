---
title: Рекомендации по безопасности для C++
ms.date: 05/08/2018
f1_keywords:
- securitybestpracticesVC
helpviewer_keywords:
- Visual C++, security
- security [C++]
- security [C++], best practices
ms.assetid: 86acaccf-cdb4-4517-bd58-553618e3ec42
ms.openlocfilehash: 6816a7ffbc09d0e01659dd56282e238fdbfc4a27
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50462313"
---
# <a name="security-best-practices-for-c"></a>Рекомендации по безопасности для C++

В этой статье содержатся сведения об инструментах и методиках обеспечения безопасности. Использование этих инструментов не дает полной гарантии защиты от хакерских атак, но при этом существенно снижает шансы на успех таких атак.

## <a name="visual-c-security-features"></a>Средства безопасности в Visual C++

Эти средства обеспечения безопасности приложений встроены в компилятор и компоновщик Visual C++.

[/guard (включение защиты потока управления)](../build/reference/guard-enable-control-flow-guard.md)<br/>
Указывает компилятору на необходимость анализа потока управления для целевых объектов косвенного вызова во время компиляции и последующей вставки кода для проверки целевых объектов во время выполнения.

[/GS (проверка безопасности буфера)](../build/reference/gs-buffer-security-check.md)<br/>
Указывает компилятору на необходимость вставки кода, обнаруживающего переполнения, в функции, которыми могут воспользоваться злоумышленники. При обнаружении переполнения выполнение программы прекращается. По умолчанию этот параметр включен.

[/SAFESEH (образ содержит безопасные обработчики исключений)](../build/reference/safeseh-image-has-safe-exception-handlers.md)<br/>
Указывает компоновщику на необходимость включения в выходной образ таблицы, содержащей адрес каждого обработчика исключений. Во время выполнения операционная система проверяет по этой таблице, действительно ли используются только допустимые обработчики исключений. Это помогает предотвратить запуск обработчиков исключений, внедряемых злоумышленниками в среду выполнения. По умолчанию этот параметр выключен.

[/ NXCOMPAT](../build/reference/nxcompat.md), [/NXCOMPAT (совместимо с предотвращением выполнения данных)](../build/reference/nxcompat-compatible-with-data-execution-prevention.md) эти параметры компилятора и компоновщика включить совместимость Предотвращение выполнения данных (DEP). Функция DEP защищает ЦП от исполнения страниц, не содержащих кода.

[/analyze (анализ кода)](../build/reference/analyze-code-analysis.md)<br/>
Этот параметр компилятора запускает анализ кода с целью выявления потенциальных проблем безопасности, таких как переполнение буфера, отмена инициализации памяти, разыменование нулевого указателя и утечки памяти. По умолчанию этот параметр выключен. Дополнительные сведения см. в разделе [анализ кода для C/C++ Обзор](/visualstudio/code-quality/code-analysis-for-c-cpp-overview).

[/DYNAMICBASE (использование технологии ASRL)](../build/reference/dynamicbase-use-address-space-layout-randomization.md)<br/>
Этот параметр компоновщика позволяет собрать исполняемый образ, который можно загрузить в другое расположение в памяти в начале выполнения. Этот параметр также делает расположение стека в памяти значительно менее прогнозируемым.

## <a name="security-enhanced-crt"></a>Среда выполнения повышенной безопасности

В библиотеку времени выполнения C (CRT) были добавлены безопасные версии функций, которые могут создать угрозу безопасности, например функция копирования непроверенной строки `strcpy`. Поскольку устаревшие, небезопасные версии этих функций использовать не рекомендуется, во время компиляции они выводят предупреждения. Рекомендуется использовать безопасные версии этих функций CRT, а не подавлять вывод предупреждений компилятора. Для получения дополнительной информации см. [Security Features in the CRT](../c-runtime-library/security-features-in-the-crt.md).

## <a name="safeint-library"></a>Библиотека SafeInt

[Библиотека SafeInt](../windows/safeint-library.md) помогает предотвращать переполнение емкости целочисленных переменных и другие ошибки, которые могут возникнуть во время выполнения математических операций приложением. `SafeInt` Библиотека включает в себя [класс SafeInt](../windows/safeint-class.md), [класс SafeIntException](../windows/safeintexception-class.md)и несколько [функции SafeInt](../windows/safeint-functions.md).

Класс `SafeInt` защищает от ошибок переполнения емкости целочисленных переменных и деления на нуль, которые могут использоваться в злонамеренных целях. Его можно использовать для обработки сравнений значений различных типов. Он предоставляет две политики обработки ошибок. Политика по умолчанию класса `SafeInt` заключается в выдаче исключения класса `SafeIntException`, сообщающего о причинах невозможности выполнения математической операции. Вторая политика заключается в том, что класс `SafeInt` останавливает выполнение программы. Также можно определить пользовательскую политику.

Каждая функция класса `SafeInt` защищает от злонамеренного использования ошибок одной из математических операций. Можно использовать параметры двух различных типов без преобразования их к одному типу. Для защиты множества математических операций используйте класс `SafeInt`.

## <a name="checked-iterators"></a>Установленные итераторы

Проверяемый итератор обеспечивает принудительное соблюдение ограничений контейнера. По умолчанию при превышении ограничений проверяемого итератора создается исключение, и выполнение программы прекращается. Проверяемый итератор обеспечивает другие уровни реагирования, зависящие от значений, назначенных в определениях препроцессора, таких как определяет  **\_SECURE\_SCL\_ВЫЗЫВАЕТ** и  **\_ИТЕРАТОР\_Отладка\_уровень**. Например, в  **\_ИТЕРАТОР\_Отладка\_LEVEL = 2**, проверяемый итератор выполняет комплексные проверки правильности в режиме отладки, который становятся доступными с помощью утверждений. Дополнительные сведения см. в разделе [проверяемые итераторы](../standard-library/checked-iterators.md) и [ \_ИТЕРАТОР\_Отладка\_уровень](../standard-library/iterator-debug-level.md).

## <a name="code-analysis-for-managed-code"></a>Анализ управляемого кода

Инструмент анализа управляемого кода, также известный как FxCop, выполняет проверку сборок на соответствие рекомендациям, изложенным в Правилах разработки приложений платформы .NET Framework. FxCop анализирует код и метаданные в каждой сборке и выявляет дефекты по следующим направлениям:

- Разработка библиотек

- Локализация

- Соглашения об именах

- Производительность

- Безопасность

## <a name="windows-application-verifier"></a>Средство проверки приложений Windows

[Application Verifier (AppVerifier)](/windows-hardware/drivers/debugger/application-verifier
) может помочь выявить потенциальные проблемы совместимости, стабильности и безопасности приложений.

Средство AppVerifier контролирует использование операционной системы приложением. Он следит за файловой системой, реестром, памятью и API-интерфейсами во время работы приложения, а при обнаружении ошибок выдает рекомендации по исправлению исходного кода.

Можно использовать AppVerifier в следующих целях:

- Тестирование приложения на наличие возможных проблем совместимости, возникающих в результате типичных ошибок программирования.

- Исследовать приложения для определения утечек памяти.

- Выявлять потенциальные проблемы безопасности в приложениях.

## <a name="windows-user-accounts"></a>Учетные записи пользователей Windows

Для разработчиков и в конечном счете пользователей использование учетных записей Windows, относящихся к группе "Администраторы", создает повышенный риск для безопасности. Дополнительные сведения см. в разделе [Запуск от имени участника группы «Пользователи»](running-as-a-member-of-the-users-group.md) и [влияет на приложения способ контроля учетных записей (UAC)](how-user-account-control-uac-affects-your-application.md).

## <a name="guidance-for-speculative-execution-side-channels"></a>Рекомендации для каналов на стороне упреждающего выполнения

Сведения о том, как для идентификации и решения от уязвимостей упреждающего исполнения на стороне канала оборудования в программном обеспечении C++, см. в разделе [материалы для разработчиков C++ для каналов на стороне выполнения наблюдающая](developer-guidance-speculative-execution.md).

## <a name="see-also"></a>См. также

<xref:System.Security> <br/>
[Безопасность](/dotnet/standard/security/index)<br/>
[Влияние контроля учетных записей на приложение](how-user-account-control-uac-affects-your-application.md)