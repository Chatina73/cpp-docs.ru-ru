---
title: Рекомендации по безопасности для C++
ms.date: 05/08/2018
f1_keywords:
- securitybestpracticesVC
helpviewer_keywords:
- Visual C++, security
- security [C++]
- security [C++], best practices
ms.assetid: 86acaccf-cdb4-4517-bd58-553618e3ec42
ms.openlocfilehash: 914498a79d3d3ddae08ae672aac35c6e913ef238
ms.sourcegitcommit: 573b36b52b0de7be5cae309d45b68ac7ecf9a6d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2019
ms.locfileid: "74988071"
---
# <a name="security-best-practices-for-c"></a>Рекомендации по безопасности для C++

В этой статье содержатся сведения об инструментах и методиках обеспечения безопасности. Использование этих инструментов не дает полной гарантии защиты от хакерских атак, но при этом существенно снижает шансы на успех таких атак.

## <a name="visual-c-security-features"></a>Средства безопасности в Visual C++

Эти функции безопасности встроены в компилятор C++ и компоновщик Майкрософт:

[/guard (включение защиты потока управления)](../build/reference/guard-enable-control-flow-guard.md)<br/>
Заставляет компилятор анализировать поток управления для косвенных целей вызова во время компиляции, а затем вставлять код для проверки целевых объектов в среде выполнения.

[/GS (проверка безопасности буфера)](../build/reference/gs-buffer-security-check.md)<br/>
Указывает компилятору на необходимость вставки кода, обнаруживающего переполнения, в функции, которыми могут воспользоваться злоумышленники. При обнаружении переполнения выполнение программы прекращается. По умолчанию этот параметр включен.

[/SAFESEH (образ содержит безопасные обработчики исключений)](../build/reference/safeseh-image-has-safe-exception-handlers.md)<br/>
Указывает компоновщику на необходимость включения в выходной образ таблицы, содержащей адрес каждого обработчика исключений. Во время выполнения операционная система проверяет по этой таблице, действительно ли используются только допустимые обработчики исключений. Это помогает предотвратить запуск обработчиков исключений, внедряемых злоумышленниками в среду выполнения. По умолчанию этот параметр выключен.

[/NXCOMPAT](../build/reference/nxcompat.md), [/NXCOMPAT (совместимый с предотвращением выполнения данных)](../build/reference/nxcompat-compatible-with-data-execution-prevention.md) эти параметры компилятора и компоновщика обеспечивают совместимость с функцией предотвращения выполнения данных (DEP). Функция DEP защищает ЦП от исполнения страниц, не содержащих кода.

[/analyze (анализ кода)](../build/reference/analyze-code-analysis.md)<br/>
Этот параметр компилятора запускает анализ кода с целью выявления потенциальных проблем безопасности, таких как переполнение буфера, отмена инициализации памяти, разыменование нулевого указателя и утечки памяти. По умолчанию этот параметр выключен. Дополнительные сведения см. в разделе [анализ кода для CC++ /обзор](/visualstudio/code-quality/code-analysis-for-c-cpp-overview).

[/DYNAMICBASE (использование технологии ASRL)](../build/reference/dynamicbase-use-address-space-layout-randomization.md)<br/>
Этот параметр компоновщика позволяет собрать исполняемый образ, который можно загрузить в другое расположение в памяти в начале выполнения. Этот параметр также делает расположение стека в памяти значительно менее прогнозируемым.

## <a name="security-enhanced-crt"></a>Среда выполнения повышенной безопасности

В библиотеку времени выполнения C (CRT) были добавлены безопасные версии функций, которые могут создать угрозу безопасности, например функция копирования непроверенной строки `strcpy`. Поскольку устаревшие, небезопасные версии этих функций использовать не рекомендуется, во время компиляции они выводят предупреждения. Рекомендуется использовать безопасные версии этих функций CRT, а не подавлять вывод предупреждений компилятора. Для получения дополнительной информации см. [Security Features in the CRT](../c-runtime-library/security-features-in-the-crt.md).

## <a name="safeint-library"></a>Библиотека SafeInt

[Библиотека SafeInt](../safeint/safeint-library.md) помогает предотвратить целочисленные переполнения и другие уязвимые ошибки, которые могут возникать, когда приложение выполняет математические операции. Библиотека `SafeInt` включает [класс SafeInt](../safeint/safeint-class.md), [класс SafeIntException](../safeint/safeintexception-class.md)и несколько [функций SafeInt](../safeint/safeint-functions.md).

Класс `SafeInt` защищает от ошибок переполнения емкости целочисленных переменных и деления на нуль, которые могут использоваться в злонамеренных целях. Его можно использовать для обработки сравнений значений различных типов. Он предоставляет две политики обработки ошибок. Политика по умолчанию класса `SafeInt` заключается в выдаче исключения класса `SafeIntException`, сообщающего о причинах невозможности выполнения математической операции. Вторая политика заключается в том, что класс `SafeInt` останавливает выполнение программы. Также можно определить пользовательскую политику.

Каждая функция класса `SafeInt` защищает от злонамеренного использования ошибок одной из математических операций. Можно использовать параметры двух различных типов без преобразования их к одному типу. Для защиты множества математических операций используйте класс `SafeInt`.

## <a name="checked-iterators"></a>Проверяемые итераторы

Проверяемый итератор обеспечивает принудительное соблюдение ограничений контейнера. По умолчанию при превышении ограничений проверяемого итератора создается исключение, и выполнение программы прекращается. Проверенный итератор предоставляет другие уровни реагирования, зависящие от значений, назначенных определениям препроцессора, таким как **\_безопасное\_SCL\_выдает** и **\_итератор\_отладки\_** . Например, в **\_итераторе,\_отладки\_Level = 2**, проверяемый итератор предоставляет исчерпывающие проверки правильности в режиме отладки, которые становятся доступными с помощью утверждений. Дополнительные сведения см. в разделе [проверенные итераторы](../standard-library/checked-iterators.md) и [\_итератор\_Отладка\_уровня](../standard-library/iterator-debug-level.md).

## <a name="code-analysis-for-managed-code"></a>Анализ управляемого кода

Инструмент анализа управляемого кода, также известный как FxCop, выполняет проверку сборок на соответствие рекомендациям, изложенным в Правилах разработки приложений платформы .NET Framework. FxCop анализирует код и метаданные в каждой сборке и выявляет дефекты по следующим направлениям:

- Разработка библиотек

- Локализация

- Соглашения об именах

- Производительность

- по безопасности

## <a name="windows-application-verifier"></a>Средство проверки приложений Windows

[Средство Application Verifier (AppVerifier)](/windows-hardware/drivers/debugger/enable-application-verifier) может помочь определить потенциальные проблемы совместимости, стабильности и безопасности приложений.

Средство AppVerifier контролирует использование операционной системы приложением. Он следит за файловой системой, реестром, памятью и API-интерфейсами во время работы приложения, а при обнаружении ошибок выдает рекомендации по исправлению исходного кода.

Можно использовать AppVerifier в следующих целях:

- Тестирование приложения на наличие возможных проблем совместимости, возникающих в результате типичных ошибок программирования.

- Исследовать приложения для определения утечек памяти.

- Выявлять потенциальные проблемы безопасности в приложениях.

## <a name="windows-user-accounts"></a>Учетные записи пользователей Windows

Для разработчиков и в конечном счете пользователей использование учетных записей Windows, относящихся к группе "Администраторы", создает повышенный риск для безопасности. Дополнительные сведения см. в разделе [Запуск от имени члена группы "Пользователи"](running-as-a-member-of-the-users-group.md) и [влияние контроля учетных записей на приложение](how-user-account-control-uac-affects-your-application.md).

## <a name="guidance-for-speculative-execution-side-channels"></a>Рекомендации по использованию гипотетических каналов выполнения

Сведения о том, как определения и устранять уязвимости оборудования, связанные с согласованностью, C++ в программном обеспечении на стороне сервера см [ C++ . в руководстве для разработчиков по](developer-guidance-speculative-execution.md)наиболее согласованным каналам выполнения.

## <a name="see-also"></a>См. также:

<xref:System.Security> <br/>
[Security](/dotnet/standard/security/index)<br/>
[Влияние контроля учетных записей на приложение](how-user-account-control-uac-affects-your-application.md)
