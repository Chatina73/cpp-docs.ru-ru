---
description: Дополнительные сведения см. в статье Создание проверяемых проектов C++ (C++/CLI).
title: Практическое руководство. Создание проверяемых проектов на языке C++ (C++/CLI)
ms.date: 11/04/2016
helpviewer_keywords:
- verifiable assemblies [C++], creating
- conversions, C++ projects
- Visual Studio C++ projects
ms.assetid: 4ef2cc1a-e3e5-4d67-8d8d-9c614f8ec5d3
ms.openlocfilehash: 5f3a84a4f87db5cf390dcfbad18f167108e0ff08
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97245997"
---
# <a name="how-to-create-verifiable-c-projects-ccli"></a>Руководство. Создание проверяемых проектов C++ (C++/CLI)

Мастера Visual C++ приложений не создают проверяемые проекты.

> [!IMPORTANT]
> Visual Studio 2015 устарела и Visual Studio 2017 не поддерживает создание проверяемых проектов с помощью **/clr: pure** и **/clr:** Если требуется проверяемый код, рекомендуется преобразовать код в C#.

Однако при использовании более старой версии набора инструментов компилятора Microsoft C++, поддерживающего **/clr: pure** и **/clr: Сейф**, проекты могут быть преобразованы в проверяемые. В этом разделе описывается, как задать свойства проекта и изменить исходные файлы проекта, чтобы преобразовать проекты Visual Studio C++ для создания проверяемых приложений.

## <a name="compiler-and-linker-settings"></a>Параметры компилятора и компоновщика

По умолчанию проекты .NET используют флаг компилятора/CLR и настраивают компоновщик на целевое оборудование x86. Для проверяемого кода необходимо использовать флаг/CLR: Сейф, и необходимо указать компоновщику создать MSIL вместо машинных инструкций.

### <a name="to-change-the-compiler-and-linker-settings"></a>Изменение параметров компилятора и компоновщика

1. Отображение страницы свойств проекта. Дополнительные сведения см. в разделе [Установка компилятора и свойств сборки](../build/working-with-project-properties.md).

1. На странице **Общие** в узле **Свойства конфигурации** задайте для свойства **Поддержка общеязыковой среды выполнения** значение **безопасного MSIL support CLR (/CLR: безопасно)**.

1. На странице **Дополнительно** в узле **Компоновщик** задайте для свойства **тип образа среды CLR** значение **принудительное применение безопасного Il-образа (/CLRIMAGETYPE: Сейф)**.

## <a name="removing-native-data-types"></a>Удаление собственных типов данных

Поскольку собственные типы данных не являются проверяемыми, даже если они фактически не используются, необходимо удалить все файлы заголовков, содержащие собственные типы.

> [!NOTE]
> Следующая процедура применима к проектам Windows Forms приложения (.NET) и консольного приложения (.NET).

### <a name="to-remove-references-to-native-data-types"></a>Удаление ссылок на собственные типы данных

1. Закомментируйте все в файле stdafx. h.

## <a name="configuring-an-entry-point"></a>Настройка точки входа

Так как проверяемые приложения не могут использовать библиотеки времени выполнения C (CRT), они не могут зависеть от CRT для вызова функции Main в качестве стандартной точки входа. Это означает, что необходимо явно указать имя функции, которая должна вызываться компоновщиком изначально. (В этом случае используется Main () вместо Main () или _tmain () для обозначения точки входа, отличной от CRT, но поскольку точка входа должна быть указана явно, это имя является произвольным.)

> [!NOTE]
> Следующие процедуры применяются к проектам консольного приложения (.NET).

#### <a name="to-configure-an-entry-point"></a>Настройка точки входа

1. Измените _tmain () на Main () в главном cpp-файле проекта.

1. Отображение страницы свойств проекта. Дополнительные сведения см. в разделе [Установка компилятора и свойств сборки](../build/working-with-project-properties.md).

1. На странице **Дополнительно** в узле **Компоновщик** введите `Main` значение свойства **точка входа** .

## <a name="see-also"></a>См. также раздел

- [Чистый и проверяемый код (C++/CLI)](../dotnet/pure-and-verifiable-code-cpp-cli.md)
