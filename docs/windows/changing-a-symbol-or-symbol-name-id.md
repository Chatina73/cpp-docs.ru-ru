---
title: Руководство. Управление символами
ms.date: 02/14/2019
f1_keywords:
- vc.editors.symbol.changing
- vc.editors.symbol.restrictions.name
- vc.editors.symbol.changing.value
- vc.editors.symbol.restrictions.value
- vc.editors.symbol.changing.header
- vc.editors.symbol.changing.unassigned
- vc.editors.symbol.shared.calculated
helpviewer_keywords:
- symbol names
- symbols [C++], names
- restrictions, symbol names
- numeric values
- symbols [C++], numeric values
- numeric values, changing symbols
- symbols [C++], value restrictions
- restrictions, symbol values
- resource files [C++], multiple
- Resource Includes dialog box [C++]
- symbol header files [C++], changing names
- symbols [C++], symbol header files
- Resource.h
- symbols [C++], unassigned
- Change Symbol dialog box [C++]
- unassigned symbols
- symbols [C++], deleting
- symbols [C++], read-only
- symbols [C++], shared
- symbols [C++], calculated
- read-only symbols
- symbol directives
- calculated symbols
- shared symbols
ms.assetid: 26541832-8dba-4177-b642-e08f94502ea7
ms.openlocfilehash: 845834679bca274f1f2ca7a363b8a0681fb8f328
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80215209"
---
# <a name="how-to-manage-symbols"></a>Руководство. Управление символами

При создании нового ресурса или объекта ресурса среда разработки назначает ему имя символа по умолчанию, например `IDD_DIALOG1`. Можно использовать [окно свойств](/visualstudio/ide/reference/properties-window) для изменения имени символа по умолчанию или для изменения имени любого символа, уже связанного с ресурсом.

Для символов, связанных с одним ресурсом, можно также использовать окно **Свойства** для изменения значения символа. С помощью [диалогового окна символы ресурсов](../windows/resource-symbols-dialog-box.md) можно изменить значение символов, не назначенных ресурсу в настоящий момент.

Обычно все определения символов сохраняются в `Resource.h`. Однако может возникнуть необходимость изменить имя этого включаемого файла, чтобы, например, работать с несколькими файлами ресурсов, расположенными в одном каталоге.

> [!NOTE]
> Если в проекте еще нет RC-файла, см. раздел [как создать ресурсы](../windows/how-to-create-a-resource-script-file.md).

## <a name="symbol-name-restrictions"></a>Ограничения для имен символов

Существуют следующие ограничения на имена символов.

- Все [символы](../windows/symbols-resource-identifiers.md) должны быть уникальными в пределах области приложения, чтобы предотвратить конфликт определений символов в файлах заголовков.

- Допустимые символы в именах: буквы A-Z, a-z, цифры 0-9 и знаки подчеркивания (_).

- Имена символов не могут начинаться с цифры и ограничены 247 символами.

- Имена символов не могут содержать пробелы.

- В именах символов не учитывается регистр, но регистр первого определения символа сохраняется.

   Файл заголовков, который определяет символы, используется как компилятором и редактором ресурсов, так и программами C++, для ссылки на ресурсы, определенные в файле ресурсов. Имена символов, отличающиеся только регистром, программы C++ будут считать разными символами, а компилятор (редактор) ресурсов будет считать, что и то, и другое имя ссылается на один и тот же символ.

> [!NOTE]
> Если вы не подписаны на стандартную схему имен символов (ID * _ [keyword]), приведенную ниже, и имя символа совпадает с ключевым словом, известным компилятору скриптов ресурсов, попытка сборки файла скрипта ресурсов приведет к созданию случайных случайных ошибок. Это сложно диагностировать. Чтобы избежать этого, придерживайтесь стандартной схемы именования.

В именах символов используются описательные префиксы, указывающие на тип ресурса или объект, которые они представляют. Эти описательные префиксы начинаются с сочетания знаков "ID". Библиотека Microsoft Foundation Class (MFC) использует соглашения об именовании символов, приведенные в следующей таблице.

|Категория|Prefix|Использование|
|--------------|------------|---------|
|Ресурсы|IDR_, IDD_, IDC_, IDI_, IDB_|Ускоритель или меню (а также связанные или настраиваемые ресурсы), диалоговое окно, курсор, значок, точечный рисунок|
|Пункты меню|ID_|Элемент меню|
|Команды|ID_|Get-Help|
|Элементы управления и дочерние окна|IDC_|Control|
|строк|IDS_|Строки в таблице строк|
|MFC|AFX_|Зарезервировано для предопределенных символов MFC.|

### <a name="to-change-a-symbol-name-id"></a>Изменение имени символа (ID)

1. В [представление ресурсов](how-to-create-a-resource-script-file.md#create-resources)выберите ресурс.

1. В окне **Свойства** введите новое имя символа или выберите его из списка существующих символов в поле **идентификатор** .

   Если ввести новое имя символа, ему автоматически присваивается значение.

> [!NOTE]
> С помощью [диалогового окна символы ресурсов](../windows/resource-symbols-dialog-box.md) можно изменить имена символов, которые в настоящее время не назначены ресурсу.

## <a name="symbol-value-restrictions"></a>Ограничения для символьных значений

Значение символа может быть любым целым числом, выраженным обычным способом для `#define` директив препроцессора. Ниже приведены примеры значений символов.

```
18
4001
0x0012
-3456
```

Значения символов для таких ресурсов, как ускорители, точечные рисунки, курсоры, диалоговые окна, значки, меню, таблицы строк и сведения о версии, должны быть десятичными числами в диапазоне от 0 до 32 767, но не могут быть шестнадцатеричными. Значения символов для частей ресурсов (элементов управления диалоговых окон или отдельных строк в таблице строк) могут быть в диапазоне от 0 до 65 534 или в диапазоне от –32 768 до 32 767. Дополнительные сведения о диапазонах номеров см. в разделе [TN023: стандартные ресурсы MFC](../mfc/tn023-standard-mfc-resources.md).

Символы ресурсов — это 16-разрядные числа. Вы можете ввести их как подписанные или неподписанные, однако они используются внутри как целые числа без знака, поэтому отрицательные числа будут приведены к соответствующему положительному значению.

Ниже приведены некоторые ограничения значений символов.

- Среда разработки Visual Studio и MFC используют определенные диапазоны чисел для специальных целей. Все числа с установленным старшим разрядом (от –32 768 до –1 или от 32 768 до 65 534 в зависимости от знака) зарезервированы MFC.

- Нельзя определить значение символа с помощью других символьных строк. Например, следующее определение символа не поддерживается:

    ```cpp
    #define IDC_MYEDIT  IDC_OTHEREDIT  //not supported
    ```

- В качестве определений значений нельзя использовать макросы препроцессора с аргументами. Следующий пример не является допустимым выражением, независимо от того, какое `ID` вычисляется во время компиляции:

    ```cpp
    #define   IDD_ABOUT  ID(7) //not supported
    ```

- У приложения может быть существующий файл, содержащий символы, определенные с помощью выражений.

### <a name="to-change-a-symbol-value"></a>Изменение значения символа

1. В [представление ресурсов](how-to-create-a-resource-script-file.md#create-resources)выберите ресурс.

1. В окне **Свойства** введите имя символа, за которым следует знак равенства и целое число в поле **идентификатор** , например:

    ```
    IDC_EDITNAME=5100
    ```

   Новое значение будет сохранено в файле символов заголовков при очередном сохранении проекта. Только имя символа остается видимым в поле идентификатор, а знак равенства и значение не отображаются после проверки.

## <a name="change-or-delete-symbols"></a>Изменение или удаление символов

В [диалоговом окне символы ресурсов](../windows/resource-symbols-dialog-box.md)можно изменить или удалить существующие символы, которые еще не назначены ресурсу или объекту.

### <a name="to-change-an-unassigned-symbol"></a>Изменение неназначенного символа

1. В поле **имя** выберите неназначенный символ и нажмите кнопку **изменить**.

1. Измените имя или значение символа в полях, указанных в диалоговом окне **Изменение символа** .

> [!NOTE]
> Чтобы изменить символ, назначенный ресурсу или объекту, необходимо использовать редактор ресурсов или окно **свойств** .

### <a name="to-delete-an-unassigned-unused-symbol"></a>Удаление неназначенного (неиспользуемого) символа

В диалоговом окне **Символы ресурса** выберите символ, который необходимо удалить, и нажмите кнопку **Удалить**.

> [!NOTE]
> Перед удалением неиспользуемого символа в файле ресурсов убедитесь, что он не используется в других программах или файлах ресурсов, включаемых во время компиляции.

## <a name="include-symbols"></a>Включить символы

Когда среда разработки первый раз считывает файл ресурса, созданный другим приложением, она помечает все включаемые файлы заголовков как доступные только для чтения. Несмотря на то, что можно использовать [диалоговое окно "включения ресурсов"](../windows/resource-includes-dialog-box.md) для добавления дополнительных файлов заголовков символов только для чтения.

Одна из причин, по которой может потребоваться использование определений символов с доступом только для чтения — это наличие файлов символов, которые планируется совместно использовать в нескольких проектах.

Включаемые файлы символов могут также потребоваться при наличии существующих ресурсов с определениями символов, использующими выражения для определения значения символа, а не просто целые числа. Пример:

```cpp
#define   IDC_CONTROL1 2100
#define   IDC_CONTROL2 (IDC_CONTROL1+1)
```

Среда будет правильно интерпретировать эти вычисляемые символы при соблюдении следующих условий:

- Вычисляемые символы помещены в файл символов с доступом только для чтения.

- Файл ресурсов содержит ресурсы, которым уже назначены эти вычисляемые символы.

- Ожидается числовое выражение.

> [!NOTE]
> Если ожидается строковое или числовое выражение, выражение не вычисляется.

### <a name="to-include-shared-read-only-symbols-in-your-resource-file"></a>Включение общих (только для чтения) символов в файл ресурсов

1. В [представление ресурсов](how-to-create-a-resource-script-file.md#create-resources)щелкните правой кнопкой мыши *RC* -файл и выберите пункт [включения ресурсов](../windows/resource-includes-dialog-box.md).

1. В поле **директивы символов только для чтения** используйте директиву компилятора `#include`, чтобы указать файл, в котором должны храниться символы только для чтения.

   Не вызывайте файл `Resource.h`, так как это имя файла, обычно используемое основным файлом заголовков символов.

   > [!NOTE]
   > Текст, введенный в поле **директивы символов только для чтения** , включается в файл ресурсов точно так же, как при его вводе. Убедитесь в том, что вводимый текст не содержит орфографических или синтаксических ошибок.

   Используйте поле **директивы символов только для чтения** , чтобы включить файлы только с определениями символов. Не включайте определения ресурсов, иначе при сохранении файла будут созданы дублирующиеся определения ресурсов.

1. Поместите символы в указанный файл.

   Символы в файлах, включенных таким образом, оцениваются каждый раз при открытии файла ресурсов, но не заменяются на диске при сохранении файла.

1. Нажмите кнопку **ОК**.

### <a name="to-change-the-name-of-the-resource-symbol-header-file"></a>Изменение имени файла символов заголовков ресурсов

1. В [представление ресурсов](how-to-create-a-resource-script-file.md#create-resources)щелкните правой кнопкой мыши *RC* -файл и выберите пункт [включения ресурсов](../windows/resource-includes-dialog-box.md).

1. В поле **файл заголовка символа** введите новое имя включаемого файла.

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также раздел

[Идентификаторы ресурсов (символы)](../windows/symbols-resource-identifiers.md)<br/>
[Как создавать символы](../windows/creating-new-symbols.md)<br/>
[Стандартные идентификаторы символов](../windows/predefined-symbol-ids.md)<br/>
