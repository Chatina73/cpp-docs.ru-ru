---
title: Редактор меню (C++)
ms.date: 02/15/2019
f1_keywords:
- vc.editors.menu.F1
- vc.editors.menu
helpviewer_keywords:
- resource editors [C++], Menu editor
- editors, menus
- Menu editor
- menus [C++], Menu editor
- mnemonics [C++], associating menu items
- menus [C++], associating commands with mnemonic keys
- menus [C++], creating
- menus [C++], adding items
- commands [C++], adding to menus
- menu items, adding to menus
- submenus
- submenus [C++], creating
- menus [C++], creating
- context menus [C++], Menu Editor
- pop-up menus [C++], creating
- menus [C++], pop-up
- menus [C++], creating
- shortcut menus [C++], creating
- pop-up menus [C++], displaying
- pop-up menus [C++], connecting to applications
- context menus [C++], connecting to applications
- shortcut menus [C++], connecting to applications
- pop-up menus
- menu commands [C++], selecting
- menus [C++], selecting
- commands [C++], menu commands
- commands [C++], copying on menus
- menu items, moving
- commands [C++], moving on menus
- menu items, copying
- menu items, deleting
- commands [C++], deleting from menus
- menus [C++], deleting
ms.assetid: 421fb215-6e12-4ec9-a3af-82d77f87bfa6
ms.openlocfilehash: 09d385404edbc33883d2d2add2328b33876d23ae
ms.sourcegitcommit: ecf274bcfe3a977c48745aaa243e5e731f1fdc5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2019
ms.locfileid: "66504643"
---
# <a name="menu-editor-c"></a>Редактор меню (C++)

Меню позволяют упорядочить команды логичным и удобным для поиска способом. С помощью **редактор меню**, можно создать и изменить меню, работая прямо со строкой меню, точно напоминающее в готовом приложении.

> [!TIP]
> При использовании **редактор меню**, во многих случаях можно щелкнуть правой кнопкой мыши для отображения всплывающего меню часто используемых команд. Доступные команды зависят от объекта, на который наведен указатель мыши.

## <a name="how-to"></a>Практические руководства

**Редактор меню** позволяет:

### <a name="to-create-a-standard-menu"></a>Создание стандартного меню

1. Перейдите к меню **представление** > **представление ресурсов** и щелкните правой кнопкой мыши **меню** заголовок. Выберите **добавьте ресурс**, затем **меню**.

1. Выберите **новый элемент** поле (прямоугольник, содержащий *введите здесь*) в строке меню.

   ![«Новый элемент» в редакторе меню](../windows/media/vcmenueditornewitembox.gif "vcMenuEditorNewItemBox")<br/>
   **Новый элемент** поле

1. Например, введите имя нового меню, *файл*.

   Введенный текст отображается в обоих **редактор меню** и в **заголовок** поле [окно "Свойства"](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   Как только вы присвоите название новому меню в строке меню, поле нового элемента сдвинется вправо (чтобы вы могли добавить еще одно меню), а другое поле нового элемента откроется под первым меню, чтобы вы могли добавить в него команды.

   ![Развернутое поле "новый элемент"](../windows/media/vcmenueditornewitemboxexpanded.gif "vcMenuEditorNewItemBoxExpanded")<br/>
   **Новый элемент** сдвинуты окно с фокусом после ввода названия меню

   > [!NOTE]
   > Чтобы создать меню с одним элементом в строке меню, задайте **всплывающее окно** свойства **False**.

### <a name="to-create-a-submenu"></a>Создание подменю

1. Выберите команду меню, для которого требуется создать подменю.

1. В поле **Новый элемент** , которое появится справа, введите имя новой команды меню. Эта новая команда будет первой в подменю.

1. Добавьте остальные команды в подменю.

### <a name="to-insert-a-new-menu-between-existing-menus"></a>Вставка нового меню между существующими меню

Выберите имя существующего меню и нажмите клавишу **вставить** , либо щелкните правой кнопкой мыши в строке меню и выберите **вставить новое**.

   **Новый элемент** перед выбранным элементом будет вставлено поле.

### <a name="to-add-commands-to-a-menu"></a>Добавление команд в меню

1. Создание меню. Выберите имя меню, к примеру, **файл**.

   Каждое меню разворачивается и открывает поле нового пункта для команд. Например, можно добавить в него команды **New**, **откройте**, и **закрыть** для **файл** меню.

1. В поле нового пункта введите имя для новой команды меню.

   > [!NOTE]
   > Введенный текст отображается в обоих **редактор меню** и в **заголовок** поле [окно "Свойства"](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   > [!TIP]
   > Можно определить мнемонический ключ (сочетание клавиш), с помощью которого пользователь может выбрать команду меню. Введите знак амперсанда (`&`) перед буквой, чтобы указать ее как мнемонический символ. Пользователь сможет выбрать команду меню, введя эту букву.

1. В **свойства** окно, выберите применяемые свойства команды меню. Дополнительные сведения см. в разделе [свойства команды меню](../windows/menu-command-properties.md).

1. В **строке** поле **свойства** окно, введите строку приглашения, будет отображаться в строке состояния приложения.

   Этот шаг создает запись в таблице строк с тем же идентификатором ресурса, что у созданной команды меню.

   > [!NOTE]
   > Подсказки могут применяться только к пунктам меню **всплывающее окно** свойство **True**. Например, пункты меню верхнего уровня могут иметь подсказки, если у них имеются вложенные пункты меню. Цель **Prompt** необходимо указать, что произойдет, если пользователь выбирает элемент меню.

1. Нажмите клавишу **ввод** для выполнения данной команды меню.

   Поле нового элемента выделено, так что вы можете создать дополнительные команды меню.

### <a name="to-select-multiple-menu-commands-to-run-bulk-operations-such-as-deleting-or-changing-properties"></a>Чтобы выбрать несколько меню команд для выполнения массовых операций, таких как удаление или изменение свойств

Удерживая нажатой **Ctrl** ключа, выберите меню или подменю команды.

### <a name="to-move-and-copy-menus-and-menu-commands"></a>Перемещение и копирование меню и команд меню

- Используйте метод перетаскивания и вставки:

   1. Перетащите или скопируйте элемент, который требуется переместить.

      - Новое расположение в текущем меню.

      - Другое меню. Можно перейти к другим меню, перетащив указатель мыши над ними.

   1. Удалите команды меню, когда направляющая покажет нужное положение.

- Используйте команды контекстного меню:

   1. Щелкните правой кнопкой мыши один или несколько меню или команд меню, а затем выберите **Вырезать** (для перемещения) или **копирования**.

   1. При перемещении элементов в другое меню ресурса или файл описания ресурсов, [открыть его в другом окне](/visualstudio/ide/customizing-window-layouts-in-visual-studio).

   1. Выберите положение меню или команды меню, которую нужно переместить или скопировать.

   1. Выберите в контекстном меню команду **Вставить**. Перемещенный или скопированный пункт помещается перед выбранным пунктом.

> [!NOTE]
> Вы также можете перетаскивать, копировать и вставлять в другие меню в других окнах меню.

### <a name="to-delete-a-menu-or-menu-command"></a>Удаление меню или команды меню

Щелкните правой кнопкой мыши имя меню или команду и выберите **удалить**.

> [!NOTE]
> Аналогично, контекстное меню можно использовать для выполнения других действий, таких как: копирование, вырезание, вставка, создание и вставка, вставка разделителя, изменение идентификатора, просмотр в виде всплывающих элементов, проверка назначенных клавиш и т. д.

## <a name="pop-up-menus"></a>Всплывающие меню

[Всплывающие меню](../mfc/menus-mfc.md) отображают часто используемые команды. Они могут быть контекстно-зависимыми, т. е. зависеть от положения указателя. Использование всплывающего меню в приложении требует создания самого меню и привязки его к коду приложения.

После создания ресурса меню, код приложения должен загрузить ресурс и использовать [метод TrackPopupMenu](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) чтобы вызвать меню на экране. Когда пользователь закрывает всплывающего меню, выбрав за его пределами или выбрал команду, чтобы вызвать эту функцию. Если пользователь выберет команду, будет отправлено сообщение этой команды в то окно, дескриптор которого был передан.

> [!NOTE]
> Для программ библиотеки Microsoft Foundation Class (MFC) и программ ATL используйте **мастеров кода** для привязки команд меню к коду. Дополнительные сведения см. в разделе [Добавление события](../ide/adding-an-event-visual-cpp.md) и [сопоставление сообщений с функциями](../mfc/reference/mapping-messages-to-functions.md).

- Создание всплывающих меню, создать меню с пустым заголовком и не предоставляют *заголовок*. Затем, добавьте команду меню в новое меню — Переход к первую команду меню под строку пустого заголовка с временный заголовок *введите здесь* и введите *заголовок* и прочие сведения.

   Повторите эту процедуру для остальных команд контекстного меню и обязательно сохраните ресурс меню.

- Чтобы подключение всплывающего меню к приложению, например, добавление обработчика сообщений для WM_CONTEXTMENU, а затем добавьте следующий код в обработчик событий:

    ```cpp
    CMenu menu;
    VERIFY(menu.LoadMenu(IDR_MENU1));
    CMenu* pPopup = menu.GetSubMenu(0);
    ASSERT(pPopup != NULL);
    pPopup->TrackPopupMenu(TPM_LEFTALIGN | TPM_RIGHTBUTTON, point.x, point.y, AfxGetMainWnd());
    ```

   > [!NOTE]
   > [CPoint](../atl-mfc-shared/reference/cpoint-class.md) передается сообщение обработчика задается в экранных координатах.

Как правило, при работе **редактор меню**, ресурс меню отображается в виде строки меню. Однако у вас могут оказаться ресурсы, добавленные в строку меню приложения, во время работы программы.

- Чтобы просмотреть ресурс меню как всплывающего меню, щелкните меню правой кнопкой мыши и выберите **отобразить как всплывающее**.

   Этот параметр является только режим отображения. само и не будет изменять меню.

> [!TIP]
> Чтобы вернуться в представление строки меню, выберите **отобразить как всплывающее** еще раз. Это действие удаляет флажок и возвращает представление строки меню.

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также

[Редакторы ресурсов](../windows/resource-editors.md)<br/>
[Команды меню](../windows/menu-command-properties.md)<br/>
[Объекты пользовательского интерфейса и идентификаторы команд](../mfc/user-interface-objects-and-command-ids.md)<br/>
[Меню](../mfc/menus-mfc.md)<br/>
[Меню](/windows/desktop/menurc/menus)