---
title: Редактор меню (C++)
ms.date: 02/15/2019
f1_keywords:
- vc.editors.menu.F1
- vc.editors.menu
helpviewer_keywords:
- resource editors [C++], Menu editor
- editors, menus
- Menu editor
- menus [C++], Menu editor
- mnemonics [C++], associating menu items
- menus [C++], associating commands with mnemonic keys
- menus [C++], creating
- menus [C++], adding items
- commands [C++], adding to menus
- menu items, adding to menus
- submenus
- submenus [C++], creating
- menus [C++], creating
- context menus [C++], Menu Editor
- pop-up menus [C++], creating
- menus [C++], pop-up
- menus [C++], creating
- shortcut menus [C++], creating
- pop-up menus [C++], displaying
- pop-up menus [C++], connecting to applications
- context menus [C++], connecting to applications
- shortcut menus [C++], connecting to applications
- pop-up menus
- menu commands [C++], selecting
- menus [C++], selecting
- commands [C++], menu commands
- commands [C++], copying on menus
- menu items, moving
- commands [C++], moving on menus
- menu items, copying
- menu items, deleting
- commands [C++], deleting from menus
- menus [C++], deleting
ms.assetid: 421fb215-6e12-4ec9-a3af-82d77f87bfa6
ms.openlocfilehash: f2a5f1ac63007bf44dc331e2104c6e9e5cac23da
ms.sourcegitcommit: 389c559918d9bfaf303d262ee5430d787a662e92
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2019
ms.locfileid: "69514827"
---
# <a name="menu-editor-c"></a>Редактор меню (C++)

Меню позволяют упорядочить команды логичным и удобным для поиска способом. С помощью **редактора меню**можно создавать и изменять меню, работая непосредственно с строкой меню, которая похожа на ту, что закончена в готовом приложении.

> [!TIP]
> При использовании **редактора меню**во многих случаях можно щелкнуть правой кнопкой мыши для отображения всплывающего меню часто используемых команд. Доступные команды зависят от объекта, на который наведен указатель мыши.

## <a name="how-to"></a>Практические руководства

**Редактор меню** позволяет:

### <a name="to-create-a-standard-menu"></a>Создание стандартного меню

1. Перейдите в **представление** > меню**представление ресурсов** и щелкните правой кнопкой мыши заголовок **меню** . Выберите **Добавить ресурс**, а затем — **меню**.

1. В строке меню выберите поле **новый элемент** (прямоугольник, содержащий *тип*).

   ![Поле "новый элемент" в редакторе меню](../windows/media/vcmenueditornewitembox.gif "вкменуедиторневитембокс")<br/>
   Поле " **создать элемент** "

1. Введите имя для нового меню, например *файл*.

   Введенный текст отображается как в **редакторе меню** , так и в поле **заголовка** в [окне Свойства](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   Как только вы присвоите название новому меню в строке меню, поле нового элемента сдвинется вправо (чтобы вы могли добавить еще одно меню), а другое поле нового элемента откроется под первым меню, чтобы вы могли добавить в него команды.

   ![Расширенное поле "новый элемент"](../windows/media/vcmenueditornewitemboxexpanded.gif "вкменуедиторневитембоксекспандед")<br/>
   Поле " **новый элемент** " с фокусом, перемещенным после ввода имени меню

   > [!NOTE]
   > Чтобы создать меню с одним элементом в строке меню, задайте для свойства **Popup** значение **false**.

### <a name="to-create-a-submenu"></a>Создание подменю

1. Выберите команду меню, для которой нужно создать подменю.

1. В поле **Новый элемент** , которое появится справа, введите имя новой команды меню. Эта новая команда будет первой в подменю.

1. Добавьте остальные команды в подменю.

### <a name="to-insert-a-new-menu-between-existing-menus"></a>Вставка нового меню между существующими меню

Выберите существующее имя меню, нажмите клавишу **INSERT** или щелкните правой кнопкой мыши строку меню и выберите команду **Вставить новый**.

   Поле **нового элемента** будет вставлено перед выбранным элементом.

### <a name="to-add-commands-to-a-menu"></a>Добавление команд в меню

1. Создайте меню. Затем выберите имя меню, например **файл**.

   Каждое меню разворачивается и открывает поле нового пункта для команд. Например, можно добавить команды " **создать**", " **Открыть**" и " **Закрыть** " в меню " **файл** ".

1. В поле нового пункта введите имя для новой команды меню.

   > [!NOTE]
   > Введенный текст отображается как в **редакторе меню** , так и в поле **заголовка** в [окне Свойства](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   > [!TIP]
   > Можно определить мнемонический ключ (сочетание клавиш), с помощью которого пользователь может выбрать команду меню. Введите амперсанд (`&`) перед буквой, чтобы указать ее как назначенную клавишу. Пользователь сможет выбрать команду меню, введя эту букву.

1. В окне **Свойства** выберите Свойства команды меню, которые применяются. Дополнительные сведения см. в разделе [Свойства команды меню](../windows/menu-command-properties.md).

1. В поле **запроса** в окне **свойства** введите строку запроса, которая будет отображаться в строке состояния приложения.

   На этом шаге создается запись в таблице строк с тем же идентификатором ресурса, что и у созданной команды меню.

   > [!NOTE]
   > Запросы могут применяться только к пунктам меню со свойством **Popup** , равным **true**. Например, пункты меню верхнего уровня могут иметь подсказки, если у них имеются вложенные пункты меню. Предназначение **запроса** — указать, что произойдет, если пользователь выберет пункт меню.

1. Нажмите клавишу **Ввод** , чтобы завершить команду меню.

   Поле нового элемента выделено, так что вы можете создать дополнительные команды меню.

### <a name="to-select-multiple-menu-commands-to-run-bulk-operations-such-as-deleting-or-changing-properties"></a>Выбор нескольких команд меню для выполнения таких операций, как удаление или изменение свойств

Удерживая нажатой клавишу **CTRL** , выберите нужные команды меню или подменю.

### <a name="to-move-and-copy-menus-and-menu-commands"></a>Перемещение и копирование меню и команд меню

- Используйте метод перетаскивания:

   1. Перетащите или скопируйте элемент, который требуется переместить.

      - Новое расположение в текущем меню.

      - Другое меню. Можно перейти к другим меню, перетащив на них указатель мыши.

   1. Удалите команды меню, когда направляющая покажет нужное положение.

- Используйте команды контекстного меню:

   1. Щелкните правой кнопкой мыши одно или несколько меню или команд меню, а затем выберите команду **Вырезать** (для перемещения) или **Копировать**.

   1. Если вы перемещаете элементы в другой ресурс меню или файл сценария ресурсов, [откройте его в другом окне](/visualstudio/ide/customizing-window-layouts-in-visual-studio).

   1. Выберите положение меню или команды меню, которую нужно переместить или скопировать.

   1. Выберите в контекстном меню команду **Вставить**. Перемещенный или скопированный пункт помещается перед выбранным пунктом.

> [!NOTE]
> Вы также можете перетаскивать, копировать и вставлять в другие меню в других окнах меню.

### <a name="to-delete-a-menu-or-menu-command"></a>Удаление меню или команды меню

Щелкните правой кнопкой мыши имя меню или команду и выберите команду **Удалить**.

> [!NOTE]
> Аналогично, контекстное меню можно использовать для выполнения других действий, таких как: копирование, вырезание, вставка, создание и вставка, вставка разделителя, изменение идентификатора, просмотр в виде всплывающих элементов, проверка назначенных клавиш и т. д.

## <a name="pop-up-menus"></a>Всплывающие меню

[Всплывающие меню](../mfc/menus-mfc.md) отображают часто используемые команды. Они могут быть контекстно-зависимыми, т. е. зависеть от положения указателя. Использование всплывающего меню в приложении требует создания самого меню и привязки его к коду приложения.

После создания ресурса меню код приложения должен загрузить ресурс меню и использовать [метод TrackPopupMenu](/windows/win32/api/winuser/nf-winuser-trackpopupmenu) для отображения меню. Когда пользователь отправит всплывающее меню, выбрав за его пределами, или выберет команду, она возвратит. Если пользователь выберет команду, будет отправлено сообщение этой команды в то окно, дескриптор которого был передан.

> [!NOTE]
> Для программ библиотеки Microsoft Foundation Class (MFC) и программ ATL используйте **мастера кода** для привязки команд меню к коду. Дополнительные сведения см. в разделе [Добавление события](../ide/adding-an-event-visual-cpp.md) и [сопоставление сообщений в функции](../mfc/reference/mapping-messages-to-functions.md).

- Чтобы создать всплывающее меню, создайте меню с пустым заголовком и не запишите *заголовок*. Затем добавьте команду меню в меню создать, перейдите к первой команде меню, расположенной под пустым названием, с *типом* временного заголовка и введите *заголовок* и другие сведения.

   Повторите эту процедуру для всех остальных команд меню во всплывающем меню и не забудьте сохранить ресурс меню.

- Например, чтобы подключить к приложению всплывающее меню, добавьте обработчик сообщений для WM_CONTEXTMENU, а затем добавьте следующий код в обработчик сообщений:

    ```cpp
    CMenu menu;
    VERIFY(menu.LoadMenu(IDR_MENU1));
    CMenu* pPopup = menu.GetSubMenu(0);
    ASSERT(pPopup != NULL);
    pPopup->TrackPopupMenu(TPM_LEFTALIGN | TPM_RIGHTBUTTON, point.x, point.y, AfxGetMainWnd());
    ```

   > [!NOTE]
   > [CPoint](../atl-mfc-shared/reference/cpoint-class.md) , переданный обработчиком сообщений, находится в экранных координатах.

Обычно при работе в **редакторе меню**ресурс меню отображается в виде строки меню. Однако у вас могут оказаться ресурсы, добавленные в строку меню приложения, во время работы программы.

- Чтобы просмотреть ресурс меню в виде всплывающего меню, щелкните меню правой кнопкой мыши и выберите пункт **Просмотреть как всплывающее окно**.

   Этот параметр является только параметром просмотра и не изменяет меню.

> [!TIP]
> Чтобы вернуться к представлению в виде строки меню, последовательно выберите **Просмотреть как всплывающее окно** . Это действие удаляет галочку и возвращает представление в виде строки меню.

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также

[Редакторы ресурсов](../windows/resource-editors.md)<br/>
[Команды меню](../windows/menu-command-properties.md)<br/>
[Объекты пользовательского интерфейса и идентификаторы команд](../mfc/user-interface-objects-and-command-ids.md)<br/>
[Меню](../mfc/menus-mfc.md)<br/>
[Меню](/windows/win32/menurc/menus)