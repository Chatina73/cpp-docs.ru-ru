---
title: Руководство. Создание ресурсов (C++)
ms.date: 02/14/2019
f1_keywords:
- vc.editors.resource
- vc.resvw.add.MFC
- vs.resourceview.F1
- vc.editors.insertresource
- vc.editors.newcustomresource
helpviewer_keywords:
- rc files [C++], creating
- .rc files [C++], creating
- resource script files [C++], creating
- resources [C++], viewing
- rc files [C++], viewing resources
- .rc files [C++], viewing resources
- resource script files [C++], viewing resources
- resource script files [C++], opening in text format
- .rc files [C++], opening in text format
- rc files [C++], opening in text format
- rc files [C++], adding MFC support
- .rc files [C++], adding MFC support
- MFC, adding support to resource scripts files
- resource script files [C++], adding MFC support
- toolbars [C++], resources
- resource toolbars
- resources [C++], creating
- Resource View window
- resources [C++], adding
- Add Resource dialog box [C++]
- Custom Resource Type dialog box [C++]
- language-specific template files [C++]
- resource templates
- rct files [C++]
- templates, resource templates
- resources [C++], templates
- .rct files [C++]
ms.assetid: 82be732a-cdcd-4a58-8de7-976d1418f86b
ms.openlocfilehash: c997c7a1b2d7fb3a852a42fa78faf2be6074705e
ms.sourcegitcommit: 7ecd91d8ce18088a956917cdaf3a3565bd128510
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2020
ms.locfileid: "79426585"
---
# <a name="how-to-create-resources-c"></a>Руководство. Создание ресурсов (C++)

Вы можете создать ресурсы для проекта, выполнив следующие действия.

- Использование файла скрипта ресурсов.

   > [!NOTE]
   > Этот шаг необходим перед добавлением ресурсов.

- Добавление ресурсов в проект и использование **представление ресурсов**.

- Использование шаблона ресурса для создания настраиваемых ресурсов.

## <a name="use-resource-script-files"></a>Использование файлов скриптов ресурсов

Перед созданием и добавлением новых ресурсов в проект необходимо сначала создать файл скрипта ресурсов (RC).

> [!NOTE]
> Файл скрипта ресурсов можно добавить только в существующий проект, загруженный в интегрированную среду разработки Visual Studio. Нельзя создать автономный скрипт ресурсов за пределами проекта, хотя файлы шаблона ресурсов (RCT) можно создавать в любое время.

### <a name="to-create-a-resource-script-file"></a>Создание файла описания ресурсов

1. Установите фокус на существующую папку проекта в **Обозреватель решений**, например *MyProject*.

   > [!NOTE]
   > Не путайте папку проекта с папкой решения в **Обозреватель решений**. Если поместить фокус на папку **решения** , то вы не сможете **добавлять новые элементы** .

1. В меню выберите **проект** > **Добавить новый элемент**.

1. Выберите папку **визуальный C++**  элемент и выберите **файл ресурсов (. RC)** в правой области.

1. Укажите имя файла скрипта ресурсов в текстовом поле **имя** и нажмите кнопку **Открыть**.

### <a name="to-open-a-resource-script-file"></a>Открытие файла скрипта ресурсов

Вы можете просматривать ресурсы в файле скрипта ресурсов, не открывая проект. Файл скрипта откроется в окне документа, а не в **представление ресурсов**.

> [!NOTE]
> Некоторые команды доступны только в том случае, если файл открыт автономно, то есть вне проекта без предварительной загрузки проекта. Например, чтобы использовать команду **Сохранить как** и сохранить файл с другим форматом или именем файла, файл должен быть открыт автономно.

- Чтобы открыть файл скрипта ресурсов вне проекта, в меню выберите **файл** > **Открыть**, а затем выберите **файл**. Перейдите к файлу описания ресурсов, выделите его и нажмите кнопку **Открыть**.

    > [!NOTE]
    > Иногда требуется просмотреть содержимое файла скрипта ресурсов проекта без использования редакторов ресурсов для открытия ресурса. Например, может требоваться найти строку во всех диалоговых окнах в файле ресурсов без открытия каждого из этих окон. Файл ресурсов можно легко открыть в текстовом формате для просмотра всех содержащихся в нем ресурсов и выполнения глобальных операций, поддерживаемых текстовым редактором.
    >
    > Чтобы открыть файл сценария ресурсов в текстовом формате, используйте стрелку раскрывающегося списка в правой части кнопки **Открыть** на предыдущем шаге и выберите **Открыть с помощью**. Выберите **Редактор исходного кода (текстовый)** и в раскрывающемся списке **Открыть как** выберите **текст** , и ресурс откроется в редакторе **исходного кода** .

- Чтобы открыть несколько сценариев ресурсов, выполните описанные выше действия для каждого открываемого файла, например *Source1. RC* и *source2. RC*. Затем, когда оба RC-файла открыты в отдельных окнах документов, либо используйте меню **окно** , либо щелкните правой кнопкой мыши один из файлов и выберите пункт **Новая группа горизонтальных вкладок** или **Новая группа вертикальных вкладок**. Теперь окна выводятся мозаикой, чтобы их можно было просматривать одновременно.

> [!TIP]
> Чтобы открыть файлы скриптов ресурсов, щелкните RC-файл правой кнопкой мыши в **Обозреватель решений**, выберите команду **Открыть с помощью** и выберите **Редактор исходного кода (текстовый)** .

При создании приложения Microsoft Foundation Class (MFC) для Windows с помощью [мастера приложений MFC](../mfc/reference/mfc-application-wizard.md)мастер создает базовый набор файлов, включая файл скрипта ресурсов (RC), который содержит основные функции MFC. Однако эти функции, относящиеся к MFC, недоступны при редактировании RC-файла для приложений Windows, не основанных на MFC. К ним относятся мастера кода, строки команд меню, содержимое списка для элементов управления "поле со списком" и размещение элементов управления ActiveX.

- Чтобы добавить поддержку MFC с открытым файлом скрипта ресурсов, в **представление ресурсов**выделите папку Resources (например, *MFC. RC*). Затем в [окно свойств](/visualstudio/ide/reference/properties-window)задайте для **режима MFC** **значение true**.

  > [!NOTE]
  > Кроме установки **режима MFC**, RC-файл должен быть частью проекта MFC. Установка **режима MFC** в **значение true** для RC-файла в проекте Win32 не предоставляет возможности MFC.

## <a name="create-resources"></a>Создание ресурсов

Ресурс можно создать как новый ресурс по умолчанию, что означает ресурс, который не основан на шаблоне, или как ресурс, шаблон которого находится после шаблона.

Используйте окно **представление ресурсов** для просмотра файлов ресурсов, включаемых в проекты. При раскрытии верхней папки, например *проект1. RC*, отображаются типы ресурсов в этом файле. Разверните каждый тип ресурса, чтобы отобразить отдельные ресурсы этого типа.

> [!TIP]
> Чтобы открыть окно **представление ресурсов** , перейдите в **представление** меню > **другой > Windows** **представление ресурсов** или нажмите клавиши **CTRL**+**SHIFT**+**E**.

Можно также щелкнуть правой кнопкой мыши окно **представление ресурсов** , чтобы открыть контекстное меню команд, или дважды щелкнуть строку заголовка, чтобы закрепить и открепить окно. Щелкните правой кнопкой мыши строку заголовка команд, управляющих поведением окна. Дополнительные сведения см. в разделе [Управление Windows](/visualstudio/ide/customizing-window-layouts-in-visual-studio).

**Представление ресурсов** Windows включает диалоговое окно **Добавление ресурса** со следующими свойствами для добавления ресурсов в проект классического C++ приложения Windows:

| Свойство | Description |
|---|---|
| **Тип ресурса** | Укажите тип ресурса, который необходимо создать.<br/><br/>Можно развернуть категории ресурсов курсора и диалогового окна, чтобы открыть дополнительные ресурсы, расположенные в *. \Microsoft Visual Studio \<версии\>\Вк\вкресаурцетемплатес\\< LCID\>\мфк.РКТ*. Если необходимо добавить RCT Files, поместите их сюда или укажите другой [путь включения](../windows/how-to-specify-include-directories-for-resources.md). Ресурсы, отображаемые на верхнем уровне элемента управления "дерево", являются ресурсами по умолчанию, предоставляемыми Visual Studio. Ресурсы в RCT – файлах отображаются на втором уровне в соответствующей категории. Число файлов RCT, которые можно добавить, не ограничено.<br/><br/> |
| **Создать** | Создайте ресурс на основе типа, выбранного в поле **тип ресурса** , и откройте ресурс в соответствующем редакторе.<br/><br/>Например, при создании ресурса диалогового окна этот ресурс открывается в [редакторе диалоговых окон](../windows/dialog-editor.md). |
| **Импорт** | Откройте диалоговое окно **Импорт** , чтобы перейти к ресурсу, который необходимо импортировать в текущий проект.<br/><br/>Вы можете импортировать точечный рисунок, значок, курсор, HTML, звук (. WAV) или файл настраиваемого ресурса. |
| **Custom** | Откройте диалоговое окно **Создание настраиваемого ресурса** , чтобы создать настраиваемый ресурс.<br/><br/>Также включает свойство **типа ресурса** , которое предоставляет текстовое поле для ввода имени настраиваемого типа ресурса. Визуальный C++ элемент автоматически заводит имя в прописную букву при выходе из программы. Пользовательские ресурсы редактируются только в [двоичном редакторе](../windows/binary-editor.md). |

При создании нового ресурса визуальный C++ элемент присваивает ему уникальное имя, например `IDD_Dialog1`. Этот идентификатор ресурса можно настроить, изменив свойства ресурса либо в соответствующем редакторе ресурсов, либо в [окно свойств](/visualstudio/ide/reference/properties-window).

> [!NOTE]
> Не указывайте имя или идентификатор ресурса, зарезервированного Visual Studio. Зарезервированные имена — это `DESIGNINFO`, `HWB`и `TEXTINCLUDE`, а зарезервированный идентификатор — `255`.

### <a name="to-create-a-resource"></a>Создание ресурса

- В **представление ресурсов**выберите RC-файл, а затем используйте команду **изменить** > **Добавить ресурс** и выберите тип ресурса для добавления в проект.

   > [!TIP]
   > Можно также щелкнуть правой кнопкой мыши RC-файл в **представление ресурсов** и выбрать в контекстном меню пункт **Добавить ресурс** .

- В **Обозреватель решений**щелкните правой кнопкой мыши папку проекта, выберите **Добавить** > **Добавить ресурс** и выберите тип ресурса для добавления в проект.

   > [!NOTE]
   > Если у вас еще нет RC-файла в проекте, этот шаг создаст его. Затем можно повторить этот шаг, чтобы добавить конкретные типы ресурсов в новый RC-файл.

- В [представление классов](/visualstudio/ide/viewing-the-structure-of-code)щелкните правой кнопкой мыши класс, выберите **Добавить** > **Добавить ресурс** и выберите тип ресурса для добавления в проект.

- Используйте **проект** меню > **Добавить ресурс**.

## <a name="use-resource-templates"></a>Использование шаблонов ресурсов

Шаблон ресурса — это настраиваемый ресурс, сохраненный в виде RCT-файла. Затем шаблон ресурсов служит отправной точкой для создания ресурсов. Шаблоны ресурсов сохраняют время в разработке дополнительных ресурсов или групп ресурсов, совместно использующих функции, такие как стандартные элементы управления или повторяющиеся элементы. Например, если вы хотите включить кнопку "Справка" с значком логотипа компании в несколько диалоговых окон, создайте новый шаблон диалогового окна и настройте его с помощью кнопки "Справка" и логотипа.

После настройки шаблона ресурса сохраните изменения в папке шаблона или в расположении, указанном в пути включения, чтобы новый шаблон ресурса отображался под типом ресурса в диалоговом окне **Добавление ресурса** . Теперь можно использовать новый шаблон ресурсов при необходимости.

> [!NOTE]
> Редактор ресурсов автоматически предоставляет уникальный идентификатор ресурса. При необходимости можно изменить [свойства ресурсов](../windows/changing-the-properties-of-a-resource.md) .

> [!NOTE]
> Разместите зависящие от языка файлы шаблонов в подкаталогах основного каталога шаблонов. Например, файлы шаблонов только для английского языка попадают в *..\\< каталог шаблонов ресурсов\>\ 1033*.
>
> Visual Studio выполняет поиск новых RCT-файлов в *\Program Files\Microsoft Visual studio \<версии\>\вк\вкресаурцетемплатес*, *\Program Files\Microsoft Visual studio \<version > \ВК\ВКРЕСАУРЦЕТЕМПЛАТЕС\\< LCID\>* (например, LCID 1033 для английского языка) или в любом месте [пути включения](../windows/how-to-specify-include-directories-for-resources.md). Если вы предпочитаете хранить RCT – файлы в другом расположении, необходимо добавить расположение в путь поиска включаемых файлов.

### <a name="to-create-and-use-a-resource-template"></a>Создание и использование шаблона ресурса

1. В **Обозреватель решений**щелкните правой кнопкой мыши проект и выберите **Добавить** > **Добавить новый элемент**.

1. В области **шаблоны:** выберите **файл шаблона ресурсов (. RCT)** .

1. Укажите имя и расположение для нового *RCT* -файла и нажмите кнопку **Открыть**.

   Новый *RCT* -файл добавляется в проект и отображается в **Обозреватель решений** в папке **ресурсов** .

1. Дважды щелкните *RCT* -файл, чтобы открыть его в окне документа. Чтобы добавить ресурсы, щелкните правой кнопкой мыши файл в окне документа и выберите команду **Добавить ресурс**.

   Вы можете настроить добавленные ресурсы и сохранить *RCT* – файл.

1. В области **представление ресурсов** щелкните правой кнопкой мыши *RC* -файл и выберите команду **Добавить ресурс**.

1. Щелкните знак "плюс" ( **+** ) рядом с ресурсом, чтобы развернуть узел ресурса и просмотреть доступные для этого ресурса шаблоны.

1. Дважды щелкните шаблон, который нужно использовать.

   Добавленный ресурс можно изменить по мере необходимости в редакторе ресурсов.

### <a name="to-convert-an-existing-resource-file-to-a-template"></a>Преобразование существующего файла ресурсов в шаблон

Откройте файл скрипта ресурсов и в меню выберите **файл** > **сохранить \<*имя файла*> как**. Укажите расположение и нажмите кнопку **ОК**.

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также раздел

[Файлы ресурсов](../windows/resource-files-visual-studio.md)<br/>
[Руководство. Управление ресурсами](../windows/how-to-copy-resources.md)<br/>
[Практическое руководство. Включение ресурсов во время компиляции](../windows/how-to-include-resources-at-compile-time.md)<br/>