---
title: Создание меню (C++)
ms.date: 11/04/2016
f1_keywords:
- vc.editors.menu
helpviewer_keywords:
- mnemonics [C++], associating menu items
- menus [C++], associating commands with mnemonic keys
- menus [C++], creating
- menus [C++], adding items
- commands [C++], adding to menus
- menu items, adding to menus
- submenus
- submenus [C++], creating
- menus [C++], creating
- context menus [C++], Menu Editor
- pop-up menus [C++], creating
- menus [C++], pop-up
- menus [C++], creating
- shortcut menus [C++], creating
- pop-up menus [C++], displaying
- pop-up menus [C++], connecting to applications
- context menus [C++], connecting to applications
- shortcut menus [C++], connecting to applications
- pop-up menus
- menu commands [C++], selecting
- menus [C++], selecting
- commands [C++], menu commands
- commands [C++], copying on menus
- menu items, moving
- commands [C++], moving on menus
- menu items, copying
- menu items, deleting
- commands [C++], deleting from menus
- menus [C++], deleting
ms.assetid: 66f94448-9b97-4b73-bf97-10d4bf87cc65
ms.openlocfilehash: da5fc355ae11ee5efb1c58be9e33bd4fb8bff02d
ms.sourcegitcommit: 470de1337035dd33682d935b4b6c6d8b1bdb0bbb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2019
ms.locfileid: "56320527"
---
# <a name="creating-menus-c"></a>Создание меню (C++)

> [!NOTE]
> **Окно ресурсов** недоступна в выпусках Express.

Сведения о добавлении ресурсов в управляемые проекты см. в разделе [ресурсы в приложениях для настольных систем](/dotnet/framework/resources/index) в *руководства разработчика .NET Framework*. Сведения о вручную добавлять файлы ресурсов в управляемые проекты, осуществлять доступ к ресурсам, отображать статические ресурсы и присваивать строки ресурсов свойствам, см. в разделе [Создание файлов ресурсов для приложений рабочего стола](/dotnet/framework/resources/creating-resource-files-for-desktop-apps). Сведения о глобализации и локализации ресурсов в управляемых приложениях, см. в разделе [Globalizing and Localizing .NET Framework Applications](/dotnet/standard/globalization-localization/index).

## <a name="create-a-standard-menu"></a>Создание стандартного меню

1. Из **представление** меню, выберите **представление ресурсов** щелкните правой кнопкой мыши **меню** заголовок и выберите **добавить ресурс**. Выберите **Меню**.

1. Выберите в строке меню поле **Новый элемент** (прямоугольник с надписью "Прототип для текста").

   ![«Новый элемент» в редакторе меню](../windows/media/vcmenueditornewitembox.gif "vcMenuEditorNewItemBox")<br/>
   Поле "Новый элемент"

1. Введите название нового меню, например "Файл".

   Введенный текст отображается в редакторе **меню** и в поле **Заголовок** [окна свойств](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   Как только вы присвоите название новому меню в строке меню, поле нового элемента сдвинется вправо (чтобы вы могли добавить еще одно меню), а другое поле нового элемента откроется под первым меню, чтобы вы могли добавить в него команды.

   ![Развернутое поле "новый элемент"](../windows/media/vcmenueditornewitemboxexpanded.gif "vcMenuEditorNewItemBoxExpanded")<br/>
   Поле нового элемента со смещенным фокусом после ввода названия меню

   > [!NOTE]
   > Чтобы создать меню с одним элементом в строке меню, задайте **всплывающее окно** свойства **False**.

## <a name="create-a-submenu"></a>Создание подменю

1. Выберите команду меню, для которого требуется создать подменю.

1. В поле **Новый элемент** , которое появится справа, введите имя новой команды меню. Эта новая команда будет первой в подменю.

1. Добавьте остальные команды в подменю.

## <a name="to-insert-a-new-menu-between-existing-menus"></a>Вставка нового меню между существующими меню

Выберите имя существующего меню и нажмите клавишу **вставить** ключ. **Новый элемент** перед выбранным элементом будет вставлено поле.

   \- или -

Щелкните правой кнопкой мыши в строке меню и выберите **вставить новое** в контекстном меню.

## <a name="add-commands-to-a-menu"></a>Добавление команд в меню

1. Создание меню.

1. Выберите имя меню, например **файл**.

   Каждое меню разворачивается и открывает поле нового пункта для команд. Например, можно добавить в него команды **New**, **откройте**, и **закрыть** для **файл** меню.

1. В поле нового пункта введите имя для новой команды меню.

   > [!NOTE]
   > Введенный текст отображается в редакторе **меню** и в поле **Заголовок** [окна свойств](/visualstudio/ide/reference/properties-window). Вы можете изменять свойства нового пункта меню в любом из этих мест.

   > [!TIP]
   > Можно определить мнемонический ключ (сочетание клавиш), с помощью которого пользователь может выбрать команду меню. Введите знак амперсанда (`&`) перед буквой, чтобы указать ее как мнемонический символ. Пользователь сможет выбрать команду меню, введя эту букву.

1. В **свойства** окно, выберите применяемые свойства команды меню. Дополнительные сведения см. в разделе [свойства команды меню](../windows/menu-command-properties.md).

1. В **строке** поле **свойства** окно, введите строку приглашения, будет отображаться в строке состояния приложения.

   Этот шаг создает запись в таблице строк с тем же идентификатором ресурса, что у созданной команды меню.

   > [!NOTE]
   > Подсказки могут применяться только к пунктам меню **всплывающее окно** свойство **True**. Например, пункты меню верхнего уровня могут иметь подсказки, если у них имеются вложенные пункты меню. Цель **Prompt** необходимо указать, что произойдет, если пользователь выбирает элемент меню.

1. Нажмите клавишу **ввод** для выполнения данной команды меню.

   Поле нового элемента выделено, так что вы можете создать дополнительные команды меню.

## <a name="create-pop-up-menus"></a>Создание всплывающих меню

[Всплывающие меню](../mfc/menus-mfc.md) отображают часто используемые команды. Они могут быть контекстно-зависимыми, т. е. зависеть от положения указателя. Использование всплывающего меню в приложении требует создания самого меню и привязки его к коду приложения.

После создания ресурса меню, код приложения должен загрузить ресурс и использовать [метод TrackPopupMenu](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) чтобы вызвать меню на экране. Когда пользователь закрывает всплывающего меню, выбрав за его пределами или выбрал команду, чтобы вызвать эту функцию. Если пользователь выберет команду, будет отправлено сообщение этой команды в то окно, дескриптор которого был передан.

### <a name="to-create-a-pop-up-menu"></a>Создание всплывающего меню

1. [Создайте меню](../windows/creating-a-menu.md) с пустым заголовком (не вводите **заголовок**).

1. [Добавьте команды в новое меню](../windows/adding-commands-to-a-menu.md). Переместите первую команду меню под строку пустого заголовка (появится временный заголовок `Type Here`). Введите **заголовок** и прочие сведения.

   Повторите эту процедуру для остальных команд всплывающего меню.

1. Сохраните ресурс меню.

### <a name="to-connect-a-pop-up-menu-to-your-application"></a>Подключение к приложению всплывающего меню

1. Добавление обработчика сообщений для WM_CONTEXTMENU (к примеру). Дополнительные сведения см. в разделе [сопоставление сообщений с функциями](../mfc/reference/mapping-messages-to-functions.md).

1. Добавьте в обработчик сообщений следующий код:

    ```cpp
    CMenu menu;
    VERIFY(menu.LoadMenu(IDR_MENU1));
    CMenu* pPopup = menu.GetSubMenu(0);
    ASSERT(pPopup != NULL);
    pPopup->TrackPopupMenu(TPM_LEFTALIGN | TPM_RIGHTBUTTON, point.x, point.y, AfxGetMainWnd());
    ```

   > [!NOTE]
   > [CPoint](../atl-mfc-shared/reference/cpoint-class.md) передается сообщение обработчика задается в экранных координатах.

   > [!NOTE]
   > Подключение всплывающего меню к приложению требуется MFC.

### <a name="to-view-a-menu-resource-as-a-pop-up-menu"></a>Отображение ресурса меню в виде всплывающего меню

Как правило, при работе **меню** редактора, ресурс меню отображается в виде строки меню. Однако у вас могут оказаться ресурсы, добавленные в строку меню приложения, во время работы программы.

Щелкните правой кнопкой мыши меню и выберите **отобразить как всплывающее** в контекстном меню.

   Этот параметр является только режим отображения. само и не будет изменять меню.

   > [!NOTE]
   > Чтобы вернуться в представление строки меню, щелкните **отобразить как всплывающее** снова (которая снимается флажок и возвращает представление строки меню).

## <a name="edit-multiple-menus-or-menu-commands"></a>Изменение нескольких меню или команд меню

### <a name="to-select-multiple-menu-commands"></a>Выбор нескольких команд меню

Можно выбрать несколько меню или команд меню для выполнения массовых операций, таких как удаление или изменение свойств.

Удерживая нажатой **Ctrl** ключа, выберите меню или подменю команды.

### <a name="to-move-and-copy-menus-and-menu-commands"></a>Перемещение и копирование меню и команд меню

Вы можете перемещать или копировать меню и команды меню с помощью метода перетаскивания или с помощью команд контекстного меню (щелкните правой кнопкой мыши меню).

#### <a name="to-move-or-copy-menus-or-menu-commands-using-the-drag-and-drop-method"></a>Перемещение или копирование меню или команд меню с помощью метода перетаскивания

1. Перетащите или скопируйте элемент, который требуется переместить.

   - Новое расположение в текущем меню.

   - Другое меню. (Можно перейти к другим меню, перетащив на них указатель мыши.)

1. Удалите команды меню, когда направляющая покажет нужное положение.

#### <a name="to-move-or-copy-menus-or-menu-commands-using-shortcut-menu-commands"></a>Перемещение или копирование меню или команд меню с помощью команд контекстного меню

1. Щелкните правой кнопкой мыши одно или несколько меню или команд меню.

1. В контекстном меню выберите **Вырезать** (для перемещения) или **Копировать**.

1. При перемещении элементов в другое меню ресурса или файл описания ресурсов, [открыть его в другом окне](/visualstudio/ide/customizing-window-layouts-in-visual-studio).

1. Выберите положение меню или команды меню, которую нужно переместить или скопировать.

1. Выберите в контекстном меню команду **Вставить**. Перемещенный или скопированный пункт помещается перед выбранным пунктом.

   > [!NOTE]
   > Вы также можете перетаскивать, копировать и вставлять в другие меню в других окнах меню.

### <a name="to-delete-a-menu-or-menu-command"></a>Удаление меню или команды меню

1. Щелкните правой кнопкой мыши имя меню или команду.

1. В контекстном меню выберите команду **Удалить** .

   > [!NOTE]
   > Аналогично, контекстное меню можно использовать для выполнения других действий, таких как: копирование, вырезание, вставка, создание и вставка, вставка разделителя, изменение идентификатора, просмотр в виде всплывающих элементов, проверка назначенных клавиш и т. д.

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также

[Редактор меню](../windows/menu-editor.md)