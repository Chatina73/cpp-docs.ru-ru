---
title: Распространение библиотеки MFC
ms.date: 11/04/2016
helpviewer_keywords:
- MFC, redistributing
- redistributing MFC library
ms.assetid: 72714ce1-385e-4c1c-afa5-96b03e873866
ms.openlocfilehash: faca2e7213ab0ad0c9b1a1a0fd6a7274094853f1
ms.sourcegitcommit: 5cecccba0a96c1b4ccea1f7a1cfd91f259cc5bde
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2019
ms.locfileid: "58786445"
---
# <a name="redistributing-the-mfc-library"></a>Распространение библиотеки MFC

Если вы динамически связываете приложение с библиотекой MFC, нужно повторно распространить соответствующую библиотеку DLL MFC. Например, если ваше приложение MFC собрано с использованием версии MFC, поставляемой с Visual Studio 2015, нужно повторно распространить mfc140.dll или mfc140u.dll в зависимости от того, компилируется ли приложение с поддержкой обычных символов или Юникода.

> [!NOTE]
>  В Visual Studio 2015 RTM файлы mfc140.dll были исключены из каталога распространяемых файлов. Вместо этого вы можете использовать версии, установленные Visual Studio 2015 в каталогах Windows\system32 и Windows\syswow64.

Так как все библиотеки DLL MFC используют общую версию библиотеки времени выполнения C (CRT), вам также может потребоваться повторно распространить CRT. Версия MFC, поставляемая с Visual Studio 2015, использует универсальную библиотеку CRT, входящую в состав Windows 10. Чтобы запустить приложение MFC, собранное с использованием Visual Studio 2015 в более ранних версиях Windows, необходимо повторно распространить универсальную библиотеку CRT. Сведения о повторном распространении универсальной библиотеки CRT в качестве компонента операционной системы или с помощью локального развертывания см. в разделе [Знакомство с универсальной библиотекой CRT](https://devblogs.microsoft.com/cppblog/introducing-the-universal-crt/). Чтобы скачать универсальную библиотеку CRT для централизованного развертывания в поддерживаемых версиях Windows, см. раздел [Универсальная среда выполнения C в Windows 10](https://www.microsoft.com/en-us/download/details.aspx?id=48234). Распространяемые версии ucrtbase.dll под конкретную архитектуру для локального развертывания находятся в пакете Windows SDK. По умолчанию Visual Studio устанавливает их в подкаталоге конкретной архитектуры внутри папки C:\Program Files (x86)\Windows Kits\10\Redist\ucrt\DLLs\.

Если приложение создано с использованием более ранней версии библиотеки MFC, нужно повторно распространить соответствующую библиотеку DLL CRT из каталога распространяемых файлов. Например, если приложение MFC создано с помощью набора инструментов Visual Studio 2013 (vc120), нужно повторно распространить msvcr120.dll. Кроме того, нужно повторно распространить соответствующий файл mfc`<version>`u.dll или mfc`<version>`.dll.

В случае статического связывания приложения с MFC (то есть при указании значения **Использовать MFC в статической библиотеке** на вкладке **Общие** диалогового окна **Страницы свойств**) повторно распространять библиотеку DLL MFC не требуется. Однако хотя статическое связывание может работать для тестирования и внутреннего развертывания приложений, мы не рекомендуем использовать его для повторного распространения MFC. Дополнительные сведения о рекомендуемых стратегиях развертывания библиотек Visual C++ см. в разделе [Выбор метода развертывания](choosing-a-deployment-method.md).

Если приложение использует классы MFC, реализующие элемент управления WebBrowser (например, [класс CHtmlView](../mfc/reference/chtmlview-class.md) или [класс CHtmlEditView](../mfc/reference/chtmleditview-class.md)), рекомендуется установить актуальную версию Microsoft Internet Explorer, чтобы на конечном компьютере были доступны самые новые файлы общих элементов управления. (Требуется Internet Explorer 4.0 или более поздней версии.) Сведения об установке компонентов Internet Explorer можно найти в "Статье 185375: как создать установку одного EXE-файла Internet Explorer" на веб-сайте службы поддержки Майкрософт.

Если в приложении используются классы баз данных MFC (например, [CRecordset Class](../mfc/reference/crecordset-class.md) и [CRecordView Class](../mfc/reference/crecordview-class.md)), нужно также повторно распространить ODBC и все драйверы ODBC, которые использует приложение.

Если в приложении MFC используются элементы управления Windows Forms, вместе с приложением нужно повторно распространить файл mfcmifc80.dll. Эта библиотека DLL является сборкой .NET, подписанной строгим именем, которую можно повторно распространить с помощью приложения в локальной папке приложения или развернуть в глобальном кэше сборок (GAC) с помощью [Gacutil.exe (инструмент глобального кэша сборок)](/dotnet/framework/tools/gacutil-exe-gac-tool).

При повторном распространении библиотеки DLL MFC следует убедиться, что повторно распространяется окончательная, а не отладочная версия. Отладочные версии библиотек DLL непригодны для повторного распространения. Имена файлов отладочных версий библиотек DLL MFC заканчиваются символом d, например Mfc140d.dll.

Повторно распространить MFC можно с помощью средства VCRedist_*архитектура*.exe, модулей слияния, установленных вместе с Visual Studio, либо путем развертывания библиотеки DLL MFC в одной папке с приложением. Дополнительные сведения о повторном распространении MFC см. в разделе [Распространение файлов Visual C++](redistributing-visual-cpp-files.md).

## <a name="installation-of-localized-mfc-components"></a>Установка локализированных компонентов MFC

Если локализация приложения выполняется путем установки локализационной библиотеки DLL MFC, следует использовать распространяемые повторно файлы слияния (MSM). Например, для локализации приложения на компьютере x86 нужно включить файл Microsoft_VC`<version>`_MFCLOC_x86.msm в пакет установки для компьютера x86.

Распространяемые повторно MSM-файлы содержат библиотеки DLL, которые используются для локализации. Для каждого поддерживаемого языка используется одна библиотека DLL. В процессе установки эти библиотеки DLL устанавливаются в папку %windir%\system32\ на конечном компьютере.

Дополнительные сведения о локализации приложений MFC см. в разделе [TN057: локализация компонентов MFC](../mfc/tn057-localization-of-mfc-components.md).

Локализационные библиотеки DLL MFC можно распространить повторно, развернув библиотеку DLL MFC в локальной папке приложения. Дополнительные сведения о повторном распространении библиотек Visual C++ см. в разделе [Распространение файлов Visual C++](redistributing-visual-cpp-files.md).

## <a name="see-also"></a>См. также

[Распространение файлов Visual C++](redistributing-visual-cpp-files.md)
