---
title: Развертывание приложения Visual C++ с помощью проекта установки
ms.date: 04/25/2019
helpviewer_keywords:
- deployment for Visual C++
ms.assetid: 66735cda-8fe3-4211-a19a-2cf717a12a3f
ms.openlocfilehash: 4ded30695647b3e9377bc35227283f367816edfa
ms.sourcegitcommit: 9c2b3df9b837879cd17932ae9f61cdd142078260
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2020
ms.locfileid: "92918855"
---
# <a name="walkthrough-deploying-a-visual-c-application-by-using-a-setup-project"></a>Пошаговое руководство. Развертывание приложения Visual C++ с помощью проекта установки

Описывает использование проекта установки для развертывания приложения Visual C++.

## <a name="prerequisites"></a>Предварительные требования

Для выполнения этого пошагового руководства требуются следующие компоненты:

- Компьютер с установленной средой Visual Studio.

- Дополнительный компьютер, где не установлены библиотеки Visual C++.

## <a name="create-the-setup-project"></a>Создание проекта установки

Инструкции по созданию проекта программы установки зависят от установленной версии Visual Studio. Чтобы ознакомиться с документацией по предпочтительной версии Visual Studio, используйте селектор **Версия** . Он находится в верхней части оглавления на этой странице.

::: moniker range="=msvc-160"

### <a name="to-create-the-project-in-visual-studio-2019"></a>Создание проекта в Visual Studio 2019

1. В строке меню выберите **Файл**  > **Создать**  > **Проект** , чтобы открыть диалоговое окно **Создание проекта** .

   ![Проект приложения MFC](media/vs2019-mfc-app-new-project.png "Новое приложение MFC")

1. В верхней части диалогового окна введите `MFC` в поле поиска и выберите **приложение MFC** в списке результатов. Если он не отображается, необходимо запустить программу Visual Studio Installer из меню "Пуск" Windows и щелкнуть плитку **Рабочая нагрузка разработки настольных приложений C++** . В разделе **отдельные компоненты** убедитесь, что установлен компонент MFC.

1. На следующей странице введите имя проекта и при необходимости укажите расположение проекта.

1. Нажмите кнопку **Создать** , чтобы создать клиентский проект. Когда откроется **Мастер приложений MFC** , примите все значения по умолчанию.

1. Измените активную конфигурацию решения, указав значение **Выпуск** . Из меню **Сборка** выберите элемент **Диспетчер конфигураций** . В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск** . Щелкните **Закрыть** .

1. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение** . Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Скачайте расширение проектов Microsoft Visual Studio Installer, если вы еще этого не сделали. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Когда вы подключитесь к Интернету, в Visual Studio выберите **расширения**  >  **Управление расширениями** . В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio* . Нажмите клавишу **Ввод** , выберите **Microsoft Visual Studio \<version> проекты установщика** и нажмите кнопку **скачать** . Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

   ![Проект установки Visual Studio](media/vs2019-extension-dialog-installer-project.png "Присвоение имени клиентскому проекту")

1. В строке меню Visual Studio последовательно выберите **Файл** > **Последние проекты и решения** , а затем действие открытия проекта.

1. В строке меню выберите **файл**  >  **создать**  >  **проект** , чтобы открыть диалоговое окно **Создание нового проекта** . В поле поиска введите "Установка" и выберите в списке результатов пункт **Проект установки** .

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение** . Нажмите кнопку **ОК** , чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=msvc-150"

### <a name="to-create-the-project-in-visual-studio-2017"></a>Создание проекта в Visual Studio 2017

1. Создайте новый проект. В меню **Файл** укажите **Создать** , затем нажмите **Проект** .

1. Используйте **Мастер приложений MFC** для создания нового решения Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++** , выберите **MFC** и **Приложение MFC** , введите имя проекта и нажмите кнопку **ОК** . Нажмите кнопку **Готово** .

   > [!NOTE]
   > Если тип **приложения MFC** отсутствует, выберите **открыть Visual Studio Installer** в левой области диалогового окна **Новый проект** . Установите вариант, расположенный в области **Разработка классических приложений C++** в разделе **необязательных компонентов** под именем **Visual C++ MFC для x86 и x64** .

1. Измените активную конфигурацию решения, указав значение **Выпуск** . Из меню **Сборка** выберите элемент **Диспетчер конфигураций** . В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск** . Щелкните **Закрыть** .

1. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение** . Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Скачайте расширение проектов Microsoft Visual Studio Installer, если вы еще этого не сделали. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Когда вы подключитесь к Интернету, в Visual Studio выберите **инструменты**  >  **расширения и обновления** . В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio* . Нажмите клавишу **Ввод** , выберите **Microsoft Visual Studio \<version> проекты установщика** и нажмите кнопку **скачать** . Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню последовательно выберите **Файл** > **Последние проекты и решения** и выберите действие открытия проекта.

1. В строке меню выберите **файл**  >  **создать**  >  **проект** , чтобы открыть диалоговое окно **Новый проект** . Затем в левой области диалогового окна разверните узлы **установленные**  >  **другие типы проектов** и выберите **Visual Studio Installer** . В центральной области выберите **Настройка проекта** .

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение** . Нажмите кнопку **ОК** , чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=msvc-140"

### <a name="to-create-the-project-in-visual-studio-2015"></a>Создание проекта в Visual Studio 2015

1. Создайте новый проект. В меню **Файл** укажите **Создать** , затем нажмите **Проект** .

1. Используйте **Мастер приложений MFC** для создания нового решения Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++** , выберите **MFC** и **Приложение MFC** , введите имя проекта и нажмите кнопку **ОК** . Нажмите кнопку **Готово** .

   > [!NOTE]
   > Если тип **приложения MFC** отсутствует, нажмите кнопку Пуск Windows и введите команду **Add Remove Programs** . Откройте программу из списка результатов и найдите установку Microsoft Visual Studio 2015 в списке установленных программ. Дважды щелкните ее, выберите **Изменить** и компонент **Microsoft Foundation Classes** в категории **Visual C++** .

1. Измените активную конфигурацию решения, указав значение **Выпуск** . В меню **Сборка** выберите **Configuration Manager** . В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск** . Щелкните **Закрыть** .

1. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение** . Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Скачайте расширение проектов Microsoft Visual Studio Installer, если вы еще этого не сделали. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Когда вы подключитесь к Интернету, в Visual Studio выберите **инструменты**  >  **расширения и обновления** . В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio* . Нажмите клавишу **Ввод** , выберите **Microsoft Visual Studio \<version> проекты установщика** и нажмите кнопку **скачать** . Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню последовательно выберите **Файл** > **Последние проекты и решения** и выберите действие открытия проекта.

1. В строке меню выберите **файл**  >  **создать**  >  **проект** , чтобы открыть диалоговое окно **Новый проект** . Затем в левой области диалогового окна разверните узлы **установленные**  >  **другие типы проектов** и выберите **Visual Studio Installer** . В центральной области выберите **Настройка проекта** .

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение** . Нажмите кнопку **ОК** , чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

## <a name="add-items-to-the-project"></a>Добавление элементов в проект

1. Щелкните правой кнопкой мыши узел **Папка приложения** и последовательно выберите **Добавить**   > **Выходной элемент проекта** , чтобы открыть диалоговое окно **Добавление выходной группы проекта** . В этом диалоговом окне выберите **Основные выходные файлы** и щелкните **OK** . Появится новый элемент с именем **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)).

1. Щелкните правой кнопкой мыши узел **Application Folder** (Папка приложения) и выберите **Добавить** > **Сборка** , чтобы открыть диалоговое окно **Выбор компонента** . Выберите и добавьте все библиотеки DLL, необходимые для этой программы, как описано в статье об [Определение библиотек DLL для распространения](determining-which-dlls-to-redistribute.md).

1. Выберите этот элемент **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)), щелкните его правой кнопкой мыши и выберите пункт **Create Shortcut to Primary Output from ProjectName (Active)** (Создать ярлык для основных выходных файлов [имя проекта] (активно)). Появится новый элемент с именем **Shortcut to Primary Output from ProjectName (Active)** (Ярлык для основных выходных файлов [имя проекта] (активно)). Присвойте этому ярлыку другое имя, затем перетащите его в узел **Меню "Программы" пользователя** в левой части окна.

1. В строке меню последовательно выберите пункты **Сборка** > **Диспетчер конфигураций** . В таблице **Проект** установите флажок в столбце **Сборка** для проекта развертывания. Щелкните **Закрыть** .

1. В строке меню выберите **Сборка**  >  **построить решение** , чтобы построить проект MFC и проект развертывания.

1. В папке решения найдите программу setup.exe, которая была создана из проекта развертывания. Можно скопировать этот файл (вместе с MSI-файлом), чтобы установить приложение и все необходимые файлы библиотеки на другом компьютере. Запустите программу установки на втором компьютере, где не установлены библиотеки Visual C++.

## <a name="see-also"></a>См. также статью

[Примеры развертывания](deployment-examples.md)<br/>
