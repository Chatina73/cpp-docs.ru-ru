---
title: Развертывание приложения Visual C++ с помощью проекта установки
ms.date: 04/25/2019
helpviewer_keywords:
- deployment for Visual C++
ms.assetid: 66735cda-8fe3-4211-a19a-2cf717a12a3f
ms.openlocfilehash: 8a1242140154c5a0123d71b83983fae20cab5d7e
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81374361"
---
# <a name="walkthrough-deploying-a-visual-c-application-by-using-a-setup-project"></a>Пошаговое руководство. Развертывание приложения Visual C++ с помощью проекта установки

Описывает использование проекта установки для развертывания приложения Visual C++.

## <a name="prerequisites"></a>Предварительные требования

Для выполнения этого пошагового руководства требуются следующие компоненты:

- Компьютер с установленной средой Visual Studio.

- Дополнительный компьютер, где не установлены библиотеки Visual C++.

## <a name="create-the-setup-project"></a>Создание проекта настройки

Инструкции по созданию проекта настройки варьируются в зависимости от того, какую версию Visual Studio вы установили. Чтобы просмотреть документацию для предпочтительной версии Visual Studio, используйте элемент управления селектора **версии.** Он находится в верхней части таблицы содержимого на этой странице.

::: moniker range="=vs-2019"

### <a name="to-create-the-project-in-visual-studio-2019"></a>Создать проект в Visual Studio 2019

1. В строке меню выберите **Файл** > **Создать** > **Проект**, чтобы открыть диалоговое окно **Создание проекта**.

   ![Проект MFC App](media/vs2019-mfc-app-new-project.png "Новое приложение MFC")

1. В верхней части диалога `MFC` введите в поле поиска, а затем выберите **приложение MFC** из списка результатов. Если вы не видите его, вам нужно будет запустить программу Visual Studio Installer из меню Windows Start и нажать на рабочую нагрузку на рабочий стол для разработки **рабочей нагрузки на рабочей кнопке .** В соответствии с **индивидуальными компонентами,** убедитесь, что компонент MFC проверяется.

1. На следующей странице введите имя проекта и при желании укажите местоположение проекта.

1. Нажмите кнопку **Создать**, чтобы создать клиентский проект. При пояснении **мастера приложения MFC** примите все по умолчанию.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из меню **Сборка** выберите элемент **Диспетчер конфигураций**. В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите **Ctrl**+**Shift**+**B,** чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не сделали этого, загрузите расширение Microsoft Visual Studio Installer Projects. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. При подключении к Интернету в Visual Studio выберите > **расширения.** **Extensions** В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмив **Введите**, выберите **Microsoft Visual \<Studio версия> Установщик проектов**, и нажмите **Скачать**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

   ![Проект установки Visual Studio](media/vs2019-extension-dialog-installer-project.png "Назовите проект клиента")

1. В строке меню Visual Studio последовательно выберите **Файл ** > **Последние проекты и решения**, а затем действие открытия проекта.

1. В панели меню выберите **Файл** > **Новый** > **проект,** чтобы открыть окно диалога **Создать новый проект.** В поле поиска введите "Установка" и выберите в списке результатов пункт **Проект установки**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=vs-2017"

### <a name="to-create-the-project-in-visual-studio-2017"></a>Создание проекта в Visual Studio 2017

1. Создайте новый проект. В меню **Файл** укажите **Создать**, затем нажмите **Проект**.

1. Используйте **MFC Application Wizard** для создания нового решения Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++**, выберите **MFC** и **Приложение MFC**, введите имя проекта и нажмите кнопку **ОК**. Нажмите кнопку **Готово**.

   > [!NOTE]
   > Если тип **приложения MFC** отсутствует, выберите **Open Visual Studio Installer** в левом стекле диалогового окна **нового проекта.** Установите вариант, расположенный в области **Разработка классических приложений C++** в разделе **необязательных компонентов** под именем **Visual C++ MFC для x86 и x64**.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из меню **Сборка** выберите элемент **Диспетчер конфигураций**. В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите **Ctrl**+**Shift**+**B,** чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не сделали этого, загрузите расширение Microsoft Visual Studio Installer Projects. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. При подключении к Интернету в Visual Studio выберите**расширения и обновления инструментов.** **Tools** >  В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмив **Введите**, выберите **Microsoft Visual \<Studio версия> Установщик проектов**, и нажмите **Скачать**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню последовательно выберите **Файл** > **Последние проекты и решения** и выберите действие открытия проекта.

1. В панели меню выберите **Файл** > **Новый** > **проект,** чтобы открыть диалоговую коробку **Нового проекта.** Затем в левом стеле диалогового окна расширьте **установленные** > другие узлы**типов проектов** и выберите Visual Studio **Installer.** В центральной области выберите **Настройка проекта**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=vs-2015"

### <a name="to-create-the-project-in-visual-studio-2015"></a>Создание проекта в Visual Studio 2015

1. Создайте новый проект. В меню **Файл** укажите **Создать**, затем нажмите **Проект**.

1. Используйте **MFC Application Wizard** для создания нового решения Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++**, выберите **MFC** и **Приложение MFC**, введите имя проекта и нажмите кнопку **ОК**. Нажмите кнопку **Готово**.

   > [!NOTE]
   > Если тип **приложения MFC** отсутствует, нажмите на кнопку «Пуск Windows» и введите **программы «Добавить удалить».** Откройте программу из списка результатов и найдите установку Microsoft Visual Studio 2015 в списке установленных программ. Дважды щелкните ее, выберите **Изменить** и компонент **Microsoft Foundation Classes** в категории **Visual C++**.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из меню **сборки** выберите **менеджер конфигурации.** В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите **Ctrl**+**Shift**+**B,** чтобы создать приложение. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не сделали этого, загрузите расширение Microsoft Visual Studio Installer Projects. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. При подключении к Интернету в Visual Studio выберите**расширения и обновления инструментов.** **Tools** >  В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмив **Введите**, выберите **Microsoft Visual \<Studio версия> Установщик проектов**, и нажмите **Скачать**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню последовательно выберите **Файл** > **Последние проекты и решения** и выберите действие открытия проекта.

1. В панели меню выберите **Файл** > **Новый** > **проект,** чтобы открыть диалоговую коробку **Нового проекта.** Затем в левом стеле диалогового окна расширьте **установленные** > другие узлы**типов проектов** и выберите Visual Studio **Installer.** В центральной области выберите **Настройка проекта**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

## <a name="add-items-to-the-project"></a>Добавление элементов в проект

1. Щелкните правой кнопкой мыши узел **Папка приложения** и последовательно выберите **Добавить**  > **Выходной элемент проекта**, чтобы открыть диалоговое окно **Добавление выходной группы проекта**. В этом диалоговом окне выберите **Основные выходные файлы** и щелкните **OK**. Появится новый элемент с именем **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)).

1. Щелкните правой кнопкой мыши узел **Application Folder** (Папка приложения) и выберите **Добавить** > **Сборка**, чтобы открыть диалоговое окно **Выбор компонента**. Выберите и добавьте все библиотеки DLL, необходимые для этой программы, как описано в статье об [Определение библиотек DLL для распространения](determining-which-dlls-to-redistribute.md).

1. Выберите этот элемент **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)), щелкните его правой кнопкой мыши и выберите пункт **Create Shortcut to Primary Output from ProjectName (Active)** (Создать ярлык для основных выходных файлов [имя проекта] (активно)). Появится новый элемент с именем **Shortcut to Primary Output from ProjectName (Active)** (Ярлык для основных выходных файлов [имя проекта] (активно)). Присвойте этому ярлыку другое имя, затем перетащите его в узел **Меню "Программы" пользователя** в левой части окна.

1. В панели меню выберите**менеджер конфигурации** **сборки.** >  В таблице **Проект** установите флажок в столбце **Сборка** для проекта развертывания. Нажмите кнопку **Закрыть**.

1. В панели меню выберите решение **Build** > **Build для** построения проекта MFC и проекта развертывания.

1. В папке решения найдите программу setup.exe, которая была создана из проекта развертывания. Можно скопировать этот файл (вместе с MSI-файлом), чтобы установить приложение и все необходимые файлы библиотеки на другом компьютере. Запустите программу установки на втором компьютере, где не установлены библиотеки Visual C++.

## <a name="see-also"></a>См. также раздел

[Примеры развертывания](deployment-examples.md)<br/>
