---
title: Развертывание приложения Visual C++ с помощью проекта установки
ms.date: 04/25/2019
helpviewer_keywords:
- deployment for Visual C++
ms.assetid: 66735cda-8fe3-4211-a19a-2cf717a12a3f
ms.openlocfilehash: 6829e917ed0a0e27bea7f42eb9bcfb2b9ad5d2e1
ms.sourcegitcommit: 18d3b1e9cdb4fc3a76f7a650c31994bdbd2bde64
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2019
ms.locfileid: "64877378"
---
# <a name="walkthrough-deploying-a-visual-c-application-by-using-a-setup-project"></a>Пошаговое руководство. Развертывание приложения Visual C++ с помощью проекта установки

Описывает использование проекта установки для развертывания приложения Visual C++.

## <a name="prerequisites"></a>Предварительные требования

Ниже приведены компоненты, необходимые для выполнения данного пошагового руководства.

- Компьютер с установленной средой Visual Studio.

- Дополнительный компьютер, где не установлены библиотеки Visual C++.

## <a name="create-the-setup-project"></a>Создание проекта установки

Инструкции по созданию проекта установки зависят от установленной версии Visual Studio. Убедитесь, что у вас есть выбора версий в верхнем левом углу задайте правильную версию.

::: moniker range="=vs-2019"

### <a name="to-create-the-project-in-visual-studio-2019"></a>Чтобы создать проект в Visual Studio 2019 г.

1. В строке меню выберите **файл** > **New** > **проекта** открыть **создайте новый проект** диалоговое окно.

   ![Проект приложения MFC](media/vs2019-mfc-app-new-project.png "новые MFC-приложения")

1. В верхней части диалогового окна, введите `MFC` для поиска и нажмите кнопку **приложение MFC** из списка результатов. Если вы не видите его, необходимо будет запустить программу установщика Visual Studio в меню Windows Пуск и выберите команду  **C++ рабочая нагрузка разработки классических приложений** плитку. В разделе **отдельные компоненты**, убедитесь, что компонент MFC установлен.

1. На следующей странице введите имя для проекта и указать расположение проекта, при необходимости.

1. Выберите **создать** кнопку, чтобы создать клиентский проект. Когда **мастер приложений MFC** появится, примите значения по умолчанию.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из меню **Сборка** выберите элемент **Диспетчер конфигураций**. В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите сочетание клавиш **CTRL**+**SHIFT**+**B** для сборки приложения. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не скачали расширения проектов установщика Microsoft Visual Studio, сделайте это сейчас. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Если вы подключены к Интернету, в Visual Studio, выберите **расширения** > **Управление расширениями**. В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмите клавишу **ввод**выберите **Microsoft Visual Studio \<версии > проекты установщика**и нажмите кнопку **загрузить**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

   ![Настройка проекта Visual Studio](media/vs2019-extension-dialog-installer-project.png "назовите проект клиента")

1. В строке меню Visual Studio, выберите **файл** > **последние проекты и решения**, а затем повторно откройте проект.

1. В строке меню выберите **файл** > **New** > **проекта** открыть **создайте новый проект** диалоговое окно. В поле поиска введите «Настройка» и в списке результатов выберите **проекта установки**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=vs-2017"

### <a name="to-create-the-project-in-visual-studio-2017"></a>Чтобы создать проект в Visual Studio 2017

1. Создайте новый проект. В меню **Файл** выберите пункт **Создать**, а затем команду **Проект**.

1. Используйте **мастер приложений MFC** создать новое решение Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++**, выберите **MFC** и **Приложение MFC**, введите имя проекта и нажмите кнопку **ОК**. Нажмите кнопку **Готово**.

   > [!NOTE]
   > Если **приложения MFC** тип отсутствует, выберите **открыть установщик Visual Studio** в левой части **новый проект** диалоговое окно. Установите вариант, расположенный в области **Разработка классических приложений C++** в разделе **необязательных компонентов** под именем **Visual C++ MFC для x86 и x64**.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из меню **Сборка** выберите элемент **Диспетчер конфигураций**. В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите сочетание клавиш **CTRL**+**SHIFT**+**B** для сборки приложения. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не скачали расширения проектов установщика Microsoft Visual Studio, сделайте это сейчас. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Если вы подключены к Интернету, выберите в Visual Studio **Средства** > **Расширения и обновления**. В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмите клавишу **ввод**выберите **Microsoft Visual Studio \<версии > проекты установщика**и нажмите кнопку **загрузить**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню выберите **файл** > **последние проекты и решения**, а затем повторно откройте проект.

1. В строке меню последовательно выберите пункты **Файл** > **Создать** > **Проект**, чтобы открыть диалоговое окно **Новый проект**. В левой области диалогового окна разверните узлы **Установленные** > **Другие типы проектов**, а затем выберите пункт **Visual Studio Installer**. В центральной области выберите **Настройка проекта**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

::: moniker range="=vs-2015"

### <a name="to-create-the-project-in-visual-studio-2015"></a>Чтобы создать проект в Visual Studio 2015

1. Создайте новый проект. В меню **Файл** выберите пункт **Создать**, а затем команду **Проект**.

1. Используйте **мастер приложений MFC** создать новое решение Visual Studio. Чтобы найти мастер, в диалоговом окне **Новый проект** разверните узел **Visual C++**, выберите **MFC** и **Приложение MFC**, введите имя проекта и нажмите кнопку **ОК**. Нажмите кнопку **Готово**.

   > [!NOTE]
   > Если **приложения MFC** тип отсутствует, нажмите кнопку Пуск Windows и введите **Установка и удаление программ**. Откройте программу из списка результатов и найдите установку Microsoft Visual Studio 2015 в списке установленных программ. Дважды щелкните ее, выберите **Изменить** и компонент **Microsoft Foundation Classes** в категории **Visual C++**.

1. Измените активную конфигурацию решения, указав значение **Выпуск**. Из **построения** меню, выберите **Configuration Manager**. В диалоговом окне **Диспетчер конфигураций** выберите в раскрывающемся списке **Активная конфигурация решения** пункт **Выпуск**. Нажмите кнопку **Закрыть**.

1. Нажмите сочетание клавиш **CTRL**+**SHIFT**+**B** для сборки приложения. Либо в меню **Сборка** выберите **Собрать решение**. Сборка приложения позволяет проекту установки использовать выходные данные этого проекта приложения MFC.

1. Если вы еще не скачали расширения проектов установщика Microsoft Visual Studio, сделайте это сейчас. Это расширение предоставляется использующим Visual Studio разработчикам бесплатно. Оно добавляет в Visual Studio функции шаблонов для проектов установки и развертывания. Если вы подключены к Интернету, выберите в Visual Studio **Средства** > **Расширения и обновления**. В диалоговом окне **Расширения и обновления** выберите вкладку **В сети** и введите в поле поиска строку *проекты установщика Microsoft Visual Studio*. Нажмите клавишу **ввод**выберите **Microsoft Visual Studio \<версии > проекты установщика**и нажмите кнопку **загрузить**. Выберите запуск и установку расширения, а затем перезапустите Visual Studio.

1. В строке меню выберите **файл** > **последние проекты и решения**, а затем повторно откройте проект.

1. В строке меню последовательно выберите пункты **Файл** > **Создать** > **Проект**, чтобы открыть диалоговое окно **Новый проект**. В левой области диалогового окна разверните узлы **Установленные** > **Другие типы проектов**, а затем выберите пункт **Visual Studio Installer**. В центральной области выберите **Настройка проекта**.

1. В поле **Имя** введите имя проекта установки. В раскрывающемся списке **Решение** выберите пункт **Добавить в решение**. Нажмите кнопку **ОК**, чтобы создать проект установки. В окне редактора откроется вкладка **File Assistant (ProjectName)** (Помощник по файлам (имя проекта)).

::: moniker-end

## <a name="add-items-to-the-project"></a>Добавление элементов в проект

1. Щелкните правой кнопкой мыши узел **Application Folder** (Папка приложения) и последовательно выберите **Добавить** > **Выходной элемент проекта**, чтобы открыть диалоговое окно **Добавление выходной группы проекта**. В этом диалоговом окне выберите **Основные выходные файлы** и щелкните **OK**. Появится новый элемент с именем **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)).

1. Щелкните правой кнопкой мыши узел **Application Folder** (Папка приложения) и выберите **Добавить** > **Сборка**, чтобы открыть диалоговое окно **Выбор компонента**. Выберите и добавьте все библиотеки DLL, необходимые для этой программы, как описано в статье об [Определение библиотек DLL для распространения](determining-which-dlls-to-redistribute.md).

1. Выберите этот элемент **Primary Output from ProjectName (Active)** (Основные выходные файлы [имя проекта] (активно)), щелкните его правой кнопкой мыши и выберите пункт **Create Shortcut to Primary Output from ProjectName (Active)** (Создать ярлык для основных выходных файлов [имя проекта] (активно)). Появится новый элемент с именем **Shortcut to Primary Output from ProjectName (Active)** (Ярлык для основных выходных файлов [имя проекта] (активно)). Присвойте этому ярлыку другое имя, затем перетащите его в узел **Меню "Программы" пользователя** в левой части окна.

1. В строке меню последовательно выберите пункты **Сборка** > **Диспетчер конфигураций**. В таблице **Проект** установите флажок в столбце **Сборка** для проекта развертывания. Нажмите кнопку **Закрыть**.

1. В строке меню последовательно выберите **Сборка** > **Собрать решение**, чтобы собрать проект MFC и проект развертывания.

1. В папке решения найдите программу setup.exe, которая была создана из проекта развертывания. Можно скопировать этот файл (вместе с MSI-файлом), чтобы установить приложение и все необходимые файлы библиотеки на другом компьютере. Запустите программу установки на втором компьютере, где не установлены библиотеки Visual C++.

## <a name="see-also"></a>См. также

[Примеры развертывания](deployment-examples.md)<br/>
