---
title: Пошаговое руководство. Компиляция программы на языке C в командной строке
ms.custom: conceptual
ms.date: 04/25/2019
helpviewer_keywords:
- command-line applications [C++], C programs
- Visual C, compiling
- compiling programs [C++]
- C program compiling [C++]
ms.assetid: 7e74cc2d-54b1-49de-b7ad-d3ae6b39ab8d
ms.openlocfilehash: 03876ba47270252caa21d7e2994a4f8321a6d59e
ms.sourcegitcommit: 18d3b1e9cdb4fc3a76f7a650c31994bdbd2bde64
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2019
ms.locfileid: "64877189"
---
# <a name="walkthrough-compile-a-c-program-on-the-command-line"></a>Пошаговое руководство. Компиляция программы на языке C в командной строке

Visual C++ включен компилятор C, можно использовать, позволяющий создавать как простые консольные программы для полного приложения для настольных компьютеров Windows, мобильные приложения и многое другое.

В этом пошаговом руководстве показано, как создать простую, «Hello, World»-в стиле программы на языке C с помощью текстового редактора, а затем скомпилировать его в командной строке. Если работать и в C++ в командной строке, см. в разделе [Пошаговое руководство: Компиляция собственной программы на языке C++ из командной строки](walkthrough-compiling-a-native-cpp-program-on-the-command-line.md). Если вы хотите воспользоваться Visual Studio IDE, а не с помощью командной строки, см. в разделе [Пошаговое руководство: Работа с проектами и решениями (C++)](../ide/walkthrough-working-with-projects-and-solutions-cpp.md) или [с помощью интегрированной среды разработки Visual Studio для разработки C++ Desktop](../ide/using-the-visual-studio-ide-for-cpp-desktop-development.md).

## <a name="prerequisites"></a>Предварительные требования

Для выполнения этого пошагового руководства, необходимо установить Visual Studio и дополнительных компонентов Visual C++ или Build Tools для Visual Studio.

Visual Studio — мощная интегрированная среда разработки, поддерживающий это полнофункциональный редактор, диспетчеры ресурсов, отладчики и компиляторы для множества языков и платформ. Сведения об этих возможностях и загрузке и установке Visual Studio, включая бесплатный выпуск Visual Studio Community, см. в разделе [установка Visual Studio](/visualstudio/install/install-visual-studio).

Build Tools для Visual Studio версии Visual Studio устанавливает только программ командной строки, компиляторы, средства и библиотеки, необходимые для сборки программ C и C++. Это идеальное средство для построения лабораторий или аудитории проверяет и устанавливает относительно быстро. Чтобы установить только программ командной строки, загрузите Build Tools для Visual Studio из [загрузки Visual Studio](https://visualstudio.microsoft.com/downloads/) странице и запустите установщик.

Перед созданием программы C или C++ в командной строке, необходимо убедиться, что они установлены, и что они будут доступны из командной строки. Visual C++ имеет сложные требования к среде командной строки для средства, заголовки и библиотеки, используемые в нем. **Нельзя использовать в простой командной строке Visual C++** без некоторой подготовки. Вам потребуется *Командная строка разработчика* окно, которое является регулярное окно командной строки, имеет все необходимые переменные среды значение. К счастью Visual C++ устанавливает клавиш запускать разработчика командные строки, в которых среда, настроенная для сборок командной строки. К сожалению отличаются имена ярлыки командной строки разработчика и где они находятся, в практически в каждой версии Visual C++ и в разных версиях Windows. Пошаговое руководство первых, для поиска справа ярлык для использования.

> [!NOTE]
> Ярлык командной строки разработчика автоматически задает правильные пути для компилятора и инструментов, а также для любых обязательных заголовков и библиотек. Некоторые из этих значений отличаются для каждой конфигурации сборки. Необходимо задать эти значения среде самостоятельно, если вы не используете один из ярлыков. Дополнительные сведения см. в разделе [задать пути и переменных среды в построении из командной строки](setting-the-path-and-environment-variables-for-command-line-builds.md). Так как в среде сборки является сложным, настоятельно рекомендуется использовать ярлык командной строки разработчика вместо создания собственного.

Эти инструкции зависят от используемой версии Visual Studio. Прежде чем продолжить, убедитесь, что выбора версий в верхнем левом углу этой страницы имеет правильное значение.

::: moniker range="vs-2019"

## <a name="open-a-developer-command-prompt-in-visual-studio-2019"></a>Откройте командную строку разработчика в Visual Studio 2019 г.

Если вы установили 2019 г. Visual Studio в Windows 10, откройте меню «Пуск» и затем прокрутите экран вниз и откройте **Visual Studio 2019** папку (не приложение Visual Studio 2019 г.). Выберите **Командная строка разработчика для VS 2019** чтобы открыть окно командной строки.

При использовании другой версии Windows, искать в меню «Пуск» или с начальной страницы для папки средств Visual Studio, содержащий ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите ту, которая соответствует установленной версии Visual Studio. Используйте сочетание, чтобы открыть окно командной строки.

::: moniker-end

::: moniker range="vs-2017"

## <a name="open-a-developer-command-prompt-in-visual-studio-2017"></a>Откройте командную строку разработчика в Visual Studio 2017

Если вы установили Visual Studio 2017 в Windows 10, откройте меню «Пуск» и затем прокрутите экран вниз и откройте **Visual Studio 2017** папку (не приложение Visual Studio 2017). Выберите **Командная строка разработчика для VS 2017** чтобы открыть окно командной строки.

Если у вас другая версия Windows, искать в меню «Пуск» или с начальной страницы для папки средств Visual Studio, содержащий ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите ту, которая соответствует установленной версии Visual Studio. Используйте сочетание, чтобы открыть окно командной строки.

::: moniker-end

::: moniker range="vs-2015"

## <a name="open-a-developer-command-prompt-in-visual-studio-2015"></a>Откройте командную строку разработчика в Visual Studio 2015

Если вы установили Microsoft Visual C++ Build Tools 2015 в Windows 10, откройте **запустить** меню, а затем прокрутите вниз и откройте **Visual C++ Build Tools** папки. Выберите **Командная строка Native Tools Visual C++ 2015 x86** чтобы открыть окно командной строки.

Если у вас другая версия Windows, искать в меню «Пуск» или с начальной страницы для папки средств Visual Studio, содержащий ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите ту, которая соответствует установленной версии Visual Studio. Используйте сочетание, чтобы открыть окно командной строки.
   
::: moniker-end


Затем проверьте правильность настройки командной строки разработчика Visual C++. В окне командной строки введите `cl` и убедитесь, что выходные данные выглядят примерно следующим образом:

```Output
C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>cl
Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86
Copyright (C) Microsoft Corporation.  All rights reserved.

usage: cl [ option... ] filename... [ /link linkoption... ]
```

Возможно, различия в текущем каталоге или номера версий, в зависимости от версии Visual C++ и никаких установленных обновлений. Если приведенные выше выходные данные аналогичен результату, вы будете готовы создавать программы на C или C++ в командной строке.

> [!NOTE]
> Если отобразится сообщение об ошибке, например ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл,» ошибка C1034 или LNK1104 при запуске **cl** команды, а затем либо вы не используете командную строку разработчика или что-то проблемы с вашей установкой Visual C++. Необходимо устранить эту проблему, перед тем как продолжить.

Если разработчик не может найти ярлык командной строки, или если вы получаете сообщение об ошибке при вводе `cl`, а затем установки Visual C++ может вызвать проблемы. Если вы используете Visual Studio 2017 или более поздней версии, попробуйте переустановить **разработка классических приложений на C++**  рабочей нагрузки в установщике Visual Studio. Дополнительные сведения см. в разделе [Установка поддержки C++ в Visual Studio](vscpp-step-0-installation.md). Или переустановить средства построения из [загрузки Visual Studio](https://visualstudio.microsoft.com/downloads/) страницы. Не переходите к следующему разделу пока это работает. Дополнительные сведения об установке и устранении неполадок Visual Studio см. в разделе [установка Visual Studio](/visualstudio/install/install-visual-studio).

> [!NOTE]
> В зависимости от версии Windows на компьютере и конфигурации системы безопасности, возможно, щелкните правой кнопкой мыши, чтобы открыть контекстное меню для ярлык командной строки разработчика, а затем выберите **Запуск от имени администратора** для успешно Постройте и запустите программу, созданные с помощью описанной в этом пошаговом руководстве.

## <a name="create-a-c-source-file-and-compile-it-on-the-command-line"></a>Создание исходного файла C и его компиляция в командной строке

1. В окне командной строки разработчика введите `cd c:\` для изменения текущего рабочего каталога в корень диска C:. Затем введите `md c:\simple` для создания каталога, а затем введите `cd c:\simple` для изменения в этот каталог. В этом каталоге хранятся файле исходного кода и скомпилированная программа.

1. Введите `notepad simple.c` в командной строке разработчика. В диалоговом окне предупреждения Блокнот, возникающего, выберите **Да** для создания нового файла simple.c в рабочем каталоге.

1. В Блокноте введите следующие строки кода:

    ```C
    #include <stdio.h>

    int main()
    {
        printf("Hello, World! This is a native C program compiled on the command line.\n");
        return 0;
    }
    ```

1. В строке меню Блокнота выберите **файл** > **Сохранить** сохранить simple.c в рабочем каталоге.

1. Переключитесь в окно командной строки разработчика. Введите `dir` в командной строке, чтобы вывести список содержимого каталога c:\simple. Вы должны увидеть simple.c файл источника в каталоге, который имеет следующий вид:

    ```Output
    C:\simple>dir
     Volume in drive C has no label.
     Volume Serial Number is CC62-6545

     Directory of C:\simple

    10/02/2017  03:46 PM    <DIR>          .
    10/02/2017  03:46 PM    <DIR>          ..
    10/02/2017  03:36 PM               143 simple.c
                   1 File(s)            143 bytes
                   2 Dir(s)  514,900,566,016 bytes free

    ```

   Даты и другие сведения будут отличаться на вашем компьютере. Если вы не видите файла исходного кода, simple.c, убедитесь, что вы открыли созданный каталог c:\simple и в блокноте, убедитесь, что вы сохранили файл источника, в этом каталоге. Также убедитесь, что исходный код сохранен с расширением имени файла .c, не с расширением txt.

1. Чтобы скомпилировать свою программу, введите `cl simple.c` в командной строке разработчика.

   Вы увидите имя исполняемого файла, simple.exe в строках информации, компилятор выводимой:

    ```Output
    c:\simple>cl simple.c
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86
    Copyright (C) Microsoft Corporation.  All rights reserved.

    simple.c
    Microsoft (R) Incremental Linker Version 14.10.25017.0
    Copyright (C) Microsoft Corporation.  All rights reserved.

    /out:simple.exe
    simple.obj
    ```

   > [!NOTE]
   > Если отобразится сообщение об ошибке, например ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл,» ошибка C1034 или LNK1104, командной строке разработчика не настроено правильно. Сведения о том, как устранить эту проблему, вернитесь к **откройте командную строку разработчика** раздел.

   > [!NOTE]
   > Если вы получаете компилятора или компоновщика ошибки или предупреждения, просмотрите исходный код, чтобы исправить ошибки, а затем сохраните его и снова запустите компилятор. Сведения о конкретных ошибках используйте поле поиска в верхней части этой страницы для поиска номер ошибки.

1. Чтобы запустить программу, введите `simple` в командной строке.

   Программа выводит следующий текст и затем закрывается:

    ```Output
    Hello, World! This is a native C program compiled on the command line.
    ```

   Поздравляем, вы компиляции и запуска программы на языке C с помощью командной строки.

## <a name="next-steps"></a>Следующие шаги

В этом примере «Hello, World» примерно так же просто, как можно получить в программе на языке C. Реальные программы имеют файлы заголовков и другие исходные файлы, компоновку в библиотеках и выполните полезную работу.

Шаги в этом пошаговом руководстве можно использовать для создания собственного кода C, вместо того чтобы вводить следующий образец кода. Также можно создавать много C примеры программ, обнаруженные в другом месте. Для компиляции программы, содержащей дополнительные исходные файлы кода, введите их все в командной строке, например:

`cl file1.c file2.c file3.c`

Компилятор выводит программу под названием file1.exe. Чтобы изменить имя на program1.exe, добавьте [/out](reference/out-output-file-name.md) параметр компоновщика:

`cl file1.c file2.c file3.c /link /out:program1.exe`

Для автоматического перехвата дополнительные ошибки программирования, мы рекомендуем компиляции с помощью [/W3](reference/compiler-option-warning-level.md) или [/W4](reference/compiler-option-warning-level.md) порога предупреждений:

`cl /W4 file1.c file2.c file3.c /link /out:program1.exe`

Компилятор, cl.exe, предоставляет больше возможностей можно применить можно создавать, оптимизировать, отладка и анализ кода. Краткий список, введите `cl /?` в командной строке разработчика. Также можно скомпилировать и компоновка выполняются отдельно и применить параметры компоновщика в более сложных сценариях сборки. Дополнительные сведения о компилятора и параметры компоновщика, а также использования, см. в разделе [ссылка на построение C/C++](reference/c-cpp-building-reference.md).

NMAKE и файлы makefile или файлы проекта MSBuild можно использовать для настройки и создания более сложных проектов в командной строке. Дополнительные сведения об использовании этих средств см. в разделе [справочнике NMAKE](reference/nmake-reference.md) и [MSBuild](msbuild-visual-cpp.md).

В языках C и C++ похожи, но не совпадают. Microsoft C /C++ компилятор (MSVC) использует простое правило, чтобы определить, какой язык следует использовать при компиляции кода. По умолчанию компилятор MSVC обрабатывает все файлы, которые заканчиваются расширением .c как исходный код C и всех файлов, которые заканчиваются на .cpp как исходные. Чтобы заставить компилятор C не зависящие от расширения имени файла следует считать все файлы, используйте [/Tc](reference/tc-tp-tc-tp-specify-source-file-type.md) параметр компилятора.

MSVC совместима со стандартом ISO C99, но не строго соответствует. В большинстве случаев переносимого кода C будет Скомпилируйте и запустите должным образом. Visual C++ не поддерживает большинство изменений в ISO C11. Некоторые функции библиотеки и имена функций POSIX устарели по MSVC. Функции поддерживаются, но предпочтительные имена были изменены. Дополнительные сведения см. в разделе [функции безопасности в CRT](../c-runtime-library/security-features-in-the-crt.md) и [Предупреждение компилятора (уровень 3) C4996](../error-messages/compiler-warnings/compiler-warning-level-3-c4996.md).

## <a name="see-also"></a>См. также

[Пошаговое руководство: Создание стандартной программы C++ (C++)](../windows/walkthrough-creating-a-standard-cpp-program-cpp.md)<br/>
[Справочник по языку C#](../c-language/c-language-reference.md)<br/>
[Проекты и системы сборки](projects-and-build-systems-cpp.md)<br/>
[Совместимость](../c-runtime-library/compatibility.md)
