---
description: 'Подробнее о следующем: Практическое руководство. Изменение требуемой версии платформы и набора средств платформы'
title: Практическое руководство. Изменение требуемой версии платформы и набора средств платформы
ms.custom: contperf-fy21q3
ms.date: 03/31/2021
helpviewer_keywords:
- 'msbuild (c++), howto: modify target framework and platform toolset'
ms.openlocfilehash: 3242b79f2b939d2b668a9bcd7d13ea80c424d2fe
ms.sourcegitcommit: 82a0d23b04d0776c00209d885689cbc5be36d3b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "106099330"
---
# <a name="how-to-modify-the-target-framework-and-platform-toolset"></a>Практическое руководство. Изменение требуемой версии платформы и набора средств платформы

Файл проекта Visual Studio C++ можно изменить, чтобы указать другие версии набора инструментов платформы C++. Также можно указать другие версии Windows SDK и .NET Framework. (Изменить версию .NET Framework можно только для проектов C++/CLI). В новом проекте используется платформа .NET Framework по умолчанию и набор инструментов версии Visual Studio, используемой для создания проекта. Все эти значения можно изменить в файле VCXPROJ, чтобы использовать одну и ту же базу кода для каждого целевого объекта компиляции.

## <a name="platform-toolset"></a>Набор инструментов платформы

Набор инструментов платформы состоит из компилятора C++ (cl.exe) и компоновщика (link.exe) вместе со стандартными библиотеками C/C++. Studio 2015, Visual Studio 2017 и Visual Studio 2019 совместимы на уровне двоичного кода. Об этом свидетельствует основной номер версии набора инструментов, который остался равным 14. Проекты, скомпилированные в Visual Studio 2019 или Visual Studio 2017 обратно совместимы на уровне ABI с проектами, скомпилированными в Visual Studio 2017 или Visual Studio 2015. Дополнительный номер версии обновляется на 1 для каждой версии с выпуска Visual Studio 2015:

- Visual Studio 2015: v140
- Visual Studio 2017: v141
- Visual Studio 2019: v142

Эти наборы инструментов поддерживают .NET Framework 4.5 и более поздних версий.

Visual Studio также поддерживает настройку для различных версий для проектов C++. Вы можете использовать последнюю версию интегрированной среды разработки Visual Studio для редактирования и сборки проектов, созданных в более ранних версиях Visual Studio. При этом не требуется обновлять проект, чтобы в нем использовалась новая версия набора инструментов. На компьютере должны быть установлены более ранние версии наборов инструментов. Дополнительные сведения см. в разделе [Использование собственной настройки для использования различных версий в Visual Studio](../porting/use-native-multi-targeting.md). Например, в Visual Studio 2015 можно выбрать .NET Framework 2.0 *в качестве целевой платформы*, но необходимо использовать более раннюю версию набора инструментов, поддерживающую .NET Framework 2.0.

## <a name="target-framework-ccli-project-only"></a>Целевая платформа (только для проектов C++/CLI)

При изменении целевой версии платформы одновременно изменяется набор инструментов платформы для обеспечения поддержки этой версии. Например, при выборе .NET Framework 4.5 в качестве целевой платформы необходимо использовать совместимый набор инструментов платформы. Эти наборы инструментов включают Visual Studio 2015 (версия 140), Visual Studio 2013 (версия 120) или Visual Studio 2012 (версия 110). При выборе .NET Framework 2.0, 3.0, 3.5 и 4 в качестве целевой платформы можно использовать [пакет SDK для Windows 7.1](https://www.microsoft.com/download/details.aspx?id=8279).

Создавая пользовательские наборы инструментов платформы, можно расширить поддержку целевой платформы. Дополнительные сведения см. в блоге по Visual C++ [Нативное многоплатформенное нацеливание в C++](https://devblogs.microsoft.com/cppblog/c-native-multi-targeting/) .

### <a name="to-change-the-target-framework"></a>Изменение требуемой версии .NET Framework

1. В **обозревателе решений** Visual Studio выберите проект. В строке меню откройте меню **Проект** и выберите **Выгрузить проект**. Это выгружает файл проекта (VCXPROJ) для вашего проекта.

   > [!NOTE]
   >  Проект на языке C++ не может быть загружен, пока вы редактируете файл проекта в Visual Studio. Однако можно использовать другой редактор, например блокнот, чтобы изменить файл проекта, пока проект загружен в Visual Studio. Visual Studio определяет, что файл проекта был изменен и отображает запрос о необходимости перезагрузить проект.

1. В строке меню последовательно выберите **Файл**, **Открыть**, **Файл**. В диалоговом окне **Открыть файл** перейдите к папке проекта и откройте файл проекта (с расширением VCXPROJ).

1. В файле проекта найдите запись для требуемой версии платформы. Например, если проект ориентирован на платформу .NET Framework 4.5, найдите запись `<TargetFrameworkVersion>v4.5</TargetFrameworkVersion>` в элементе `<PropertyGroup Label="Globals">` элемента `<Project>` . Если элемент `<TargetFrameworkVersion>` отсутствует, проект не использует платформу .NET Framework и изменений не требуется.

1. Измените значение на требуемую версию .NET Framework, например 3.5 или 4.6.

1. Сохраните изменения и закройте редактор.

1. В разделе **Обозреватель решений** откройте контекстное меню своего проекта и выберите **Перезагрузить проект**.

1. Чтобы проверить изменение, выберите **Проект** > **Свойства** в строке меню, чтобы открыть диалоговое окно **Страницы свойств** для вашего проекта. В диалоговом окне выберите страницу свойств **Свойства конфигурации** > **Общие**. Убедитесь, что в области **Целевая версия платформы .NET Framework** отображается новая версия платформы .NET Framework.

### <a name="to-change-the-platform-toolset"></a>Изменение набора инструментов платформы

1. В строке меню Visual Studio выберите **Проект** > **Свойства**, чтобы открыть диалоговое окно **Страницы свойств** для вашего проекта.

1. В верхней части диалогового окна **Страницы свойств** в раскрывающемся списке **Конфигурация** выберите **Все конфигурации**.

1. В диалоговом окне выберите страницу свойств **Свойства конфигурации** > **Общие**.

1. На странице свойств щелкните **Набор инструментов платформы** и выберите необходимый набор инструментов из раскрывающегося списка. Например, если вы установили набор инструментов Visual Studio 2010, выберите **Visual Studio 2010 (версия 100)** для использования в проекте.

1. Чтобы сохранить внесенные изменения, нажмите кнопку **OK**.

## <a name="next-steps"></a>Next Steps

[Пошаговое руководство. Работа с проектами и решениями (C++)](../ide/walkthrough-working-with-projects-and-solutions-cpp.md)

## <a name="see-also"></a>См. также

[MSBuild в командной строке — C++](msbuild-visual-cpp.md)
