---
title: Практическое руководство. Изменение целевой платформы и набора инструментов платформы
ms.custom: conceptual
ms.date: 07/24/2019
helpviewer_keywords:
- 'msbuild (c++), howto: modify target framework and platform toolset'
ms.assetid: 031b1d54-e6e1-4da7-9868-3e75a87d9ffe
ms.openlocfilehash: 6af7a4eb47c1d3f8b9c52eec39795c9307ca9d8e
ms.sourcegitcommit: ce3393846c86e7905ff0c86e4cd6610476809585
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/25/2019
ms.locfileid: "68492232"
---
# <a name="how-to-modify-the-target-framework-and-platform-toolset"></a>Практическое руководство. Изменение целевой платформы и набора инструментов платформы

Файл проекта Visual Studio C++ можно изменить для использования с различными версиями набора инструментов C++ платформы, Windows SDK и .NET Framework (C++только проекты/CLI). По умолчанию система проектов использует версию платформы .NET Framework и версию набора инструментов, соответствующие версии Visual Studio, используемой для создания проекта. Все эти значения можно изменить в файле vcxproj, чтобы можно было использовать одну и ту же базу кода для каждого целевого объекта компиляции.

## <a name="platform-toolset"></a>Набор инструментов платформы

Набор инструментов платформы состоит из C++ компилятора (Cl. exe) и компоновщика (Link. exe) вместе с библиотеками C/C++ Standard. Начиная с версии Visual Studio 2015, основная версия набора инструментов оставалась на 14. Это означает, что проекты, скомпилированные с помощью Visual Studio 2019 или Visual Studio 2017, имеют интерфейс ABI-обратно-совместим с проектами, скомпилированными с помощью Visual Studio 2015. Дополнительная версия обновлена на 1 для каждой версии с момента выпуска Visual Studio 2015:

- Visual Studio 2015: V140
- Visual Studio 2017: v141
- Visual Studio 2019: v142

Эти наборы инструментов поддерживают .NET Framework 4,5 и более поздних версий.

Visual Studio также поддерживает многоцелевой выбор для C++ проектов. Вы можете использовать интегрированную среду разработки Visual Studio для редактирования и сборки проектов, созданных с помощью более старых версий Visual Studio, не обновляя их до использования новой версии набора инструментов. На компьютере должны быть установлены более старые наборы инструментов. Дополнительные сведения см. [в статье Использование собственного многоплатформенного нацеливания в Visual Studio](../porting/use-native-multi-targeting.md). Например, в Visual Studio 2015 можно *выбрать* .NET Framework 2,0, но необходимо использовать более ранний набор инструментов, который его поддерживает.

## <a name="target-framework-ccli-project-only"></a>Целевая платформаC++(только для проектов/CLI)

При изменении целевой версии платформы одновременно изменяется набор инструментов платформы для обеспечения поддержки этой версии. Например, для поддержки версии .NET Framework 4.5 необходимо использовать совместимый набор средств платформы, например Visual Studio 2015 (версия 140), Visual Studio 2013 (версия 120) или Visual Studio 2012 (версия 110). Набор средств платформы [SDK для Windows 7,1](https://www.microsoft.com/en-us/download/details.aspx?id=8279) можно использовать для .NET Framework 2,0, 3,0, 3,5 и 4, а также на платформах x86 и x64.

Создавая пользовательские наборы инструментов платформы, можно расширить поддержку целевой платформы. Дополнительные сведения см. в блоге по Visual C++ [Нативное многоплатформенное нацеливание в C++](https://blogs.msdn.microsoft.com/vcblog/2009/12/08/c-native-multi-targeting/) .

### <a name="to-change-the-target-framework"></a>Изменение требуемой версии .NET Framework

1. В **обозревателе решений**Visual Studio выберите проект. В строке меню откройте меню **Проект** и выберите **Выгрузить проект**. Это разгружает файл проекта (VCXPROJ) для вашего проекта.

   > [!NOTE]
   >  Проект на языке C++ невозможно загрузить, пока в файл проекта вносятся изменения в Visual Studio. Однако можно использовать другой редактор, например блокнот, чтобы изменить файл проекта, пока проект загружен в Visual Studio. Visual Studio определяет, что файл проекта был изменен и отображает запрос о необходимости перезагрузить проект.

1. В строке меню последовательно выберите **Файл**, **Открыть**, **Файл**. В диалоговом окне **Открыть файл** перейдите к папке проекта и откройте файл проекта (с расширением VCXPROJ).

1. В файле проекта найдите запись для требуемой версии платформы. Например, если проект ориентирован на платформу .NET Framework 4.5, найдите запись `<TargetFrameworkVersion>v4.5</TargetFrameworkVersion>` в элементе `<PropertyGroup Label="Globals">` элемента `<Project>` . Если элемент `<TargetFrameworkVersion>` отсутствует, проект не использует платформу .NET Framework и изменений не требуется.

1. Измените значение на требуемую версию .NET Framework, например 3.5 или 4.6.

1. Сохраните изменения и закройте редактор.

1. В разделе **Обозреватель решений**откройте контекстное меню своего проекта и выберите **Перезагрузить проект**.

1. Чтобы проверить изменение, в **обозревателе решений**щелкните правой кнопкой мыши проект, чтобы открыть его контекстное меню (а не решения) и выберите **Свойства** , чтобы открыть диалоговое окно проекта **Страницы свойств** . В левой области диалогового окна разверните узел **Свойства конфигурации** и выберите **Общие**. Убедитесь, что в области **Целевая версия платформы .NET Framework** отображается новая версия платформы .NET Framework.

### <a name="to-change-the-platform-toolset"></a>Изменение набора инструментов платформы

1. В **Обозревателе решений**Visual Studio откройте контекстное меню проекта (не решения) и выберите **Свойства** , чтобы открыть диалоговое окно проекта **Страницы свойств** .

1. В диалоговом окне **Страницы свойств** откройте папку **Конфигурация** и выберите **Все конфигурации**.

1. В левой области диалогового окна разверните узел **Свойства конфигурации** и выберите **Общие**.

1. В правой области щелкните элемент **Набор инструментов платформы** и выберите необходимый набор инструментов из раскрывающегося списка. Например, если вы установили набор инструментов Visual Studio 2010, выберите **Visual studio 2010 (V100)** , чтобы использовать его для вашего проекта.

1. Нажмите кнопку **ОК** .

## <a name="see-also"></a>См. также

[MSBuild в командной строке — C++](msbuild-visual-cpp.md)
