---
title: Практическое руководство. Слияние нескольких профилей для профильной оптимизации
ms.date: 03/14/2018
helpviewer_keywords:
- merging profiles
- profile-guided optimizations, merging profiles
ms.assetid: aab686b5-59dd-40d1-a04b-5064690f65a6
ms.openlocfilehash: 451c0f30a271f5dce3974e172766da4a23340b93
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62188877"
---
# <a name="how-to-merge-multiple-pgo-profiles-into-a-single-profile"></a>Практическое руководство. Слияние нескольких профилей для профильной оптимизации

Профильная оптимизация (PGO) — это отличное средство для создания оптимизированных двоичных файлов на основе сценария, для которого применяется профилирование. Но что если у вас есть приложение с несколькими важными, но разными сценариями? Как создать один профиль, который профильная оптимизация может использовать в нескольких различных сценариях? В Visual Studio эту задачу решает диспетчер профильной оптимизации, [pgomgr.exe](pgomgr.md).

Для слияния профилей используется следующий синтаксис:

`pgomgr /merge[:num] [.pgc_files] .pgd_files`

где `num` — необязательный весовой коэффициент, используемый для PGC-файлов, добавленных этим слиянием. Весовые коэффициенты обычно используются, если существуют сценарии, более важные по сравнению с другими, или сценарии, которые должны выполняться несколько раз.

> [!NOTE]
> Диспетчер профильной оптимизации не работает с устаревшими данными профиля. Чтобы можно было объединить PGC-файл с PGD-файлом, PGC-файл должен создаваться исполняемым файлом, который был создан с помощью вызова ссылки, создавшего PGD-файл.

## <a name="examples"></a>Примеры

В этом примере диспетчер профильной оптимизации добавляет pgcFile.pgc в pgdFile.pgd шесть раз:

`pgomgr /merge:6 pgcFile.pgc pgdFile.pgd`

В этом примере диспетчер профильной оптимизации добавляет pgcFile1.pgc и pgcFile2.pgc в pgdFile.pgd два раза для каждого PGC-файла:

`pgomgr /merge:2 pgcFile1.pgc pgcFile2.pgc pgdFile.pgd`

Если диспетчер профильной оптимизации запущен без аргументов PGC-файла, он ищет в локальном каталоге все PGC-файлы с тем же базовым именем, что и PGD-файл, за которым следует восклицательный знак (!), а затем один или несколько произвольных символов. Например, если в локальном каталоге есть файлы test.pgd, test!1.pgc, test2.pgc и test!hello.pgc, и следующая команда выполняется из локального каталога, то **pgomgr** объединяет test!1.pgc и test!hello.pgc в test.pgd.

`pgomgr /merge test.pgd`

## <a name="see-also"></a>См. также

[Профильная оптимизация](profile-guided-optimizations.md)
