---
title: Практическое руководство. Интеграция пользовательских средств в свойства проекта
description: Практическое руководство. Интеграция пользовательских средств в свойства проекта в проектах Visual Studio C++.
ms.date: 10/08/2020
helpviewer_keywords:
- 'MSBuild (C++), howto: integrate custom tools'
ms.openlocfilehash: 58626101d54c5b1f9749174e5f3e8938c431d025
ms.sourcegitcommit: 9c2b3df9b837879cd17932ae9f61cdd142078260
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2020
ms.locfileid: "92922157"
---
# <a name="how-to-integrate-custom-tools-into-the-project-properties"></a>Практическое руководство. Интеграция пользовательских средств в свойства проекта

Вы можете добавить параметры пользовательских средств в Visual Studio в окно **Страницы свойств** путем создания XML-файла.

В разделе **Свойства конфигурации** в окне **Страницы свойств** отображаются группы параметров, известные как *правила*. Каждое правило содержит параметры для средства или группы функций. Например, правило **компоновщика** содержит параметры для средства компоновщика. Параметры в правиле можно разделить на *категории*.

Вы можете создать файл правил, который содержит свойства для пользовательского средства, чтобы эти свойства загружались при запуске Visual Studio. Сведения о том, как изменить файл, см. в разделе [Расширяемость платформы. Часть 2](/archive/blogs/vsproject/platform-extensibility-part-2) в блоге группы проекта Visual Studio.

::: moniker range="msvc-140"

Папка, в которой размещается файл правил, зависит от языкового стандарта и используемой версии Visual Studio. В командной строке разработчика Visual Studio 2015 или более ранних версий папка правил располагается по пути *`%ProgramFiles(x86)%\MSBuild\Microsoft.Cpp\v4.0\<version>\<locale>`* . Для Visual Studio 2015 `<version>` имеет значение *`v140`* . `<locale>` определяет код языка, например `1033` для английского языка. У вас будет отдельный путь для каждого устанавливаемого выпуска Visual Studio и каждого языка. Например, путь к папке с правилами по умолчанию для Visual Studio 2015 Community на английском языке может выглядеть так: *`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\v140\1033\`* .

::: moniker-end

::: moniker range="msvc-150"

Папка, в которой размещается файл правил, зависит от языкового стандарта и используемой версии Visual Studio. В командной строке разработчика Visual Studio 2017 папка правил располагается по пути *`%VSINSTALLDIR%Common7\IDE\VC\VCTargets\<locale>\`* . `<locale>` определяет код языка, например `1033` для английского языка. В командной строке разработчика Visual Studio 2015 или более ранних версий папка правил располагается по пути *`%ProgramFiles(x86)%\MSBuild\Microsoft.Cpp\v4.0\<version>\<locale>\`* , где `<version>` для Visual Studio 2015 имеет значение *`v140`* . У вас будет отдельный путь для каждого устанавливаемого выпуска Visual Studio и каждого языка. Например, путь к папке с правилами по умолчанию для Visual Studio 2017 Community на английском языке может выглядеть так: *`C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\VC\VCTargets\1033\`* .

::: moniker-end

::: moniker range=">=msvc-160"

Папка, в которой размещается файл правил, зависит от языкового стандарта и используемой версии Visual Studio. В командной строке разработчика Visual Studio 2019 или более поздних версий папка правил располагается по пути *`%VSINSTALLDIR%MSBuild\Microsoft\VC\<version>\<locale>\`* , где `<version>` для Visual Studio 2019 имеет значение *`v160`* . `<locale>` определяет код языка, например `1033` для английского языка. В Visual Studio 2017 папка правил располагается по пути *`%VSINSTALLDIR%Common7\IDE\VC\VCTargets\<locale>\`* . В командной строке разработчика Visual Studio 2015 или более ранних версий папка правил располагается по пути *`%ProgramFiles(x86)%\MSBuild\Microsoft.Cpp\v4.0\<version>\<locale>\`* . У вас будет отдельный путь для каждого устанавливаемого выпуска Visual Studio и каждого языка. Например, путь к папке с правилами по умолчанию для Visual Studio 2019 Community на английском языке может выглядеть так: *`C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Microsoft\VC\v160\1033\`* .

::: moniker-end

### <a name="to-add-or-change-project-properties"></a>Добавление или изменение свойств проекта

1. В редакторе XML создайте XML-файл.

1. Сохраните файл в папке правил по умолчанию. Измените путь для своего языка и выпуска Visual Studio. Каждое правило в окне **страницы свойств** представлено XML-файлом в этой папке. Убедитесь, что файл имеет уникальное имя в папке.

1. Скопируйте содержимое существующего файла правил, например *`rc.xml`* , закройте его без сохранения изменений, а затем вставьте содержимое в новый XML-файл. Вы можете скопировать любой XML-файл схемы для использования в качестве шаблона. Выбирайте файл, который лучше всего подходит для вашего средства.

1. В новом файле XML измените содержимое в соответствии с требованиями. Не забудьте заменить **Rule Name** и **Rule.DisplayName** в верхней части файла.

1. Сохраните изменения и закройте файл.

1. XML-файлы в папке правил загружаются при запуске Visual Studio. Чтобы проверить новый файл, перезапустите Visual Studio.

1. В **обозревателе решений** щелкните правой кнопкой мыши проект и выберите пункт **Свойства**. В окне **Страницы свойств** проверьте наличие нового узла с именем правила.

## <a name="see-also"></a>См. также

[MSBuild в командной строке — C++](msbuild-visual-cpp.md)
