---
description: 'Подробнее о следующем: Практическое руководство. Создание проекта C++ из существующего кода'
title: Практическое руководство. Создание проекта C++ из существующего кода
ms.date: 05/06/2019
helpviewer_keywords:
- C++, creating projects from existing code
- Create New Project From Existing Code Files Wizard, project settings
f1_keywords:
- vc.appwiz.importwiz.location
- vc.appwiz.importwiz.appsettings
- vc.appwiz.importwiz.debugsettings
- vc.appwiz.importwiz.releasesettings
ms.assetid: e328a938-395c-48ea-9e35-dd433de12b31
ms.openlocfilehash: 0bd08275a812ebc6a2a99d0e12c8b71e30a24b90
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97162785"
---
# <a name="how-to-create-a-c-project-from-existing-code"></a>Практическое руководство. Создание проекта C++ из существующего кода

В Visual Studio существующие файлы кода можно перенести в проект C++ с помощью мастера **создания проектов из существующих файлов кода**. Этот мастер создает проект, использующий систему MSBuild для управления исходными файлами и конфигурацией сборки. Лучше всего она работает с относительно простыми проектами, в которых нет сложных иерархий папок. Мастер недоступен в более старых выпусках Visual Studio Express.

Перенос существующих файлов кода в проект C++ позволяет использовать собственные функции управления проектами MSBuild, встроенные в интегрированную среду разработки. Если вы предпочитаете использовать существующую систему сборки, например файлы makefile NMake, CMake или альтернативные варианты, вместо этого можно использовать функцию "Открыть папку" или средство CMake. Дополнительные сведения см. в статьях [Проекты "Открыть папку" в C++](open-folder-projects-cpp.md) или [Проекты CMake в Visual Studio](cmake-projects-in-visual-studio.md). Оба варианта позволяют использовать возможности интегрированной среды разработки, такие как [IntelliSense](/visualstudio/ide/using-intellisense) и [Свойства проекта](working-with-project-properties.md).

### <a name="to-create-a-c-project-from-existing-code"></a>Создание проекта C++ из существующего кода

1. В меню **Файл** выберите пункт **Создать** > **Проект из существующего кода**.

1. Укажите расположение проекта, каталог исходных файлов и типы файлов, которые мастер импортирует в новый проект. Чтобы продолжить, нажмите кнопку **Далее** .

    | Параметр | Описание |
    | --- | --- |
    | **Расположение файла проекта** | Определяет путь к каталогу нового проекта. В это расположение мастер будет помещать все файлы (и подкаталоги) нового проекта.<br/><br/>Щелкните **Обзор**, чтобы открыть диалоговое окно **Расположение файлов проекта**. Перейдите в нужную папку и укажите каталог, который содержит новый проект. |
    | **Имя проекта** | Указывает имя нового проекта. Это имя получают файлы проекта с расширениями VCXPROJ, а существующие файлы кода сохраняют свои исходные имена. |
    | **Добавить файлы в проект из этих папок** | Установите флажок, чтобы мастер копировал существующие файлы кода из исходных каталогов (заданных в списке под этим элементом управления) в новый проект.<br/><br/>Установите флажок **Добавить вложенные папки**, чтобы файлы кода копировались в проект из всех подкаталогов. Каталоги перечислены в столбце **Папка**.<br/>— Выберите **Добавить**, чтобы отобразилось диалоговое окно **Добавление файлов в проект из этой папки**, чтобы указать каталоги в которых мастер будет искать существующие файлы кода.<br/>— Выберите **Удалить**, чтобы удалить путь к каталогу, выбранный в списке.<br/><br/>В поле **Типы файлов для добавления в проект** укажите типы файлов, которые мастер добавит в новый проект с учетом заданных расширений. Расширениям файлов предшествует подстановочный знак "звездочка", а для разделения их в списке используется точка с запятой. |
    | **Показать все файлы в обозревателе решений** | Указывает, что все файлы в новом проекте должны быть видимыми и отображаться в окне **обозревателя решений**. Этот параметр по умолчанию включен. |

    ![Расположение проекта](media/location.png)

1. Укажите настройки проекта, например, среду сборки и ее параметры, соответствующие конкретному типу нового проекта. Чтобы продолжить, нажмите кнопку **Далее** .

    | Параметр | Описание |
    | --- | --- |
    | **Использовать Visual Studio** | Предписывает использовать средства сборки, включенные в Visual Studio, для сборки нового проекта. Этот параметр установлен по умолчанию.<br/><br/>Выберите **Тип проекта**, чтобы указать тип проекта, создаваемого мастером. Выберите **Проект приложения Windows**, **Проект консольного приложения**, **Проект библиотеки DLL** или **Проект статической библиотеки (LIB)** .<br/><br/>Установите флажок **Добавить поддержку для ATL**, чтобы добавить ее в новый проект.<br/><br/>Установите флажок **Добавить поддержку для MFC**, чтобы добавить ее в новый проект.<br/><br/>Установите флажок **Добавить поддержку для среды CLR**, чтобы добавить ее в новый проект. Выберите **Поддержка общеязыковой среды выполнения (CLR)** в качестве типа соответствия, например **Общеязыковая среда выполнения (CLR), старый синтаксис** для соответствия с управляемыми расширениями для синтаксиса C++, синтаксис для программирования в CLR до Visual Studio 2005. |
    | **Использовать внешнюю систему сборки** | Предписывает использовать средства сборки, не включенные в Visual Studio, для сборки нового проекта. Если этот параметр выбран, можно указать командные строки сборки на страницах **Задать конфигурационные параметры отладки** и **Задать параметры конфигурации выпуска**. |

    ![Параметры проекта](media/settings.png)

    > [!NOTE]
    > Если установлен флажок **Использовать внешнюю систему сборки**, интегрированная среда разработки не создает проект, поэтому параметры /D, /I, /FI, /AI и /FU для компиляции не требуются. Однако эти параметры должны быть заданы правильно для надлежащей работы IntelliSense.

1. Задайте нужные параметры отладочной конфигурации. Чтобы продолжить, нажмите кнопку **Далее** .

    | Параметр | Описание |
    | --- | --- |
    | **Командная строка для сборки** | Указывает командную строку для сборки проекта. Введите имя компилятора (а также все параметры или аргументы) либо скрипты сборки, которые вы хотите использовать для сборки проекта. |
    | **Командная строка перестроения** | Указывает командную строку, которая перестраивает новый проект. |
    | **Командная строка для очистки** | Указывает командную строку для удаления вспомогательных файлов, создаваемых средствами сборки для проекта. |
    | **Вывод (для отладки)** | Указывает путь к каталогу выходных файлов для конфигурации отладки проекта. |
    | **Определения препроцессора (/D)** | Определяет символы препроцессора для проекта. См. раздел [/D (определения препроцессора)](../build/reference/d-preprocessor-definitions.md). |
    | **Путь поиска включаемых файлов (/I)** | Указывает пути к каталогам, где компилятор будет производить поиск для разрешения ссылок на файлы, переданных в директивы препроцессора в проекте. См. раздел [/I (дополнительные включаемые каталоги)](../build/reference/i-additional-include-directories.md). |
    | **Принудительно включенные файлы (/FI)** | Указывает файлы заголовков, которые нужно обрабатывать при сборке проекта. См. раздел [/FI (задание имени обязательно включаемого файла)](../build/reference/fi-name-forced-include-file.md). |
    | **Пути для поиска сборки .NET (/AI)** | Указывает пути к каталогам, где компилятор будет производить поиск для разрешения ссылок на сборки .NET, переданных в директивы препроцессора в проекте. См. раздел [/AI (указание каталогов метаданных)](../build/reference/ai-specify-metadata-directories.md). |
    | **Принудительно использовать сборки .NET (/FU)** | Указывает сборки .NET, которые нужно обрабатывать при сборке проекта. См. раздел [/FU (задание имени обязательного файла #using)](../build/reference/fu-name-forced-hash-using-file.md). |

    ![Конфигурация проекта](media/config.png)

    > [!NOTE]
    > Команды **Создать**, **Перестроить**, **Очистить** и параметры **Выходные данные (для отладки)** включены, только если на странице **Указание параметров проекта** задан параметр **Использовать внешнюю систему сборки**.

1. Укажите параметры конфигурации выпуска. Они совпадают с параметрами конфигурации отладки. Нажмите кнопку **Готово**, чтобы создать проект.

    > [!NOTE]
    > Здесь вы можете установить флажок **Совпадает с конфигурацией отладки**: он укажет, что мастер будет создавать параметры для конфигурации выпуска, аналогичные параметрам проекта для конфигурации отладки. Этот параметр выбран по умолчанию. Пока этот флажок установлен, все остальные параметры на этой странице неактивны.
