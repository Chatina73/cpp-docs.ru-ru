---
title: Построение кода C/C++ в командной строке
ms.custom: conceptual
ms.date: 06/21/2018
helpviewer_keywords:
- command-line builds [C++]
- compiling source code [C++], command line
- builds [C++], command-line
- command line [C++], building from
- command line [C++], compilers
ms.assetid: 7ca9daed-a003-4162-842d-908f79058365
ms.openlocfilehash: bc5080ff14cf8629c98077bf1e3e39e4b824b48b
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50452043"
---
# <a name="build-cc-code-on-the-command-line"></a>Построение кода C/C++ в командной строке

Приложениям C и C++ в командной строке можно создавать с помощью средств, включенных в Visual Studio.

## <a name="how-to-get-the-command-line-tools"></a>Как получить средства командной строки

При выборе одного из рабочих нагрузках C++ в Visual Studio Installer, он устанавливает в Visual Studio *набор инструментов платформы*. Набор инструментов платформы имеет средства C и C++ для определенной версии Visual Studio, включая компиляторы C/C++, компоновщики, сборки и других средств построения, а также соответствующие библиотеки. Все эти средства можно использовать в командной строке, и они также используются внутри Visual Studio IDE. Существуют отдельные компиляторы размещенных x86 и размещенных x64 и средства для создания кода для x86, x 64, ARM и ARM64 целевых объектов. Каждый набор средств для конкретного компьютера и целевой архитектуры сборки хранятся в собственном каталоге.

Для правильной работы средства требуется несколько переменных конкретной среды, устанавливаемое значение. Они используются для добавления их к пути и задания включают файл, файл библиотеки и расположения SDK. Чтобы упростить процесс задать эти переменные среды, программа установки создает настраиваемые *командные файлы*, или пакетных файлов, во время установки. При выполнении в одной из этих файлов команд в окне командной строки для задания конкретного узла и целевой архитектуры сборки, версия пакета SDK для Windows, целевая платформа и набор инструментов платформы. Для удобства, программа установки создает ярлыки в меню «Пуск» (или начальной странице в Windows 8.x), запустите windows командную строку разработчика с помощью эти командные файлы, поэтому все необходимые переменные среды, задайте и готова к использованию.

Необходимые переменные среды относятся к установке и архитектуру сборки, следует выбрать и могут изменяться при обновлении продукта. Таким образом настоятельно рекомендуется использовать ярлыки установленных командной строки или командных файлов вместо настройки переменных среды в Windows самостоятельно. Дополнительные сведения см. в разделе [задать пути и переменных среды в построении из командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md).

Наборы инструментов командной строки, командные файлы и ярлыки командной строки, установленные зависят от процессора компьютера и параметры, выбранные во время установки. Как минимум будут установлены 32-разрядные размещенные x86 средства, создающие 32-разрядного x86 и машинного кода и кроссплатформенных средств, создающих 64-разрядный машинный код x64 код. Если у вас есть 64-разрядной Windows, также устанавливается 64-разрядные размещенные x64 средства, создающие 64-разрядный машинный код и кросс-средства, которые занимаются 32-разрядный машинный код. Если вы решили установить дополнительные средства C++ универсальной платформы Windows, 32-разрядных и 64-разрядных собственных средств, создающих код ARM также устанавливаются. Другие рабочие нагрузки могут устанавливать дополнительные средства.

## <a name="developer-command-prompt-shortcuts"></a>Ярлыки командной строки разработчика

Ярлыки командной строки устанавливаются в папке конкретной версии Visual Studio в меню «Пуск». Ниже приведен список ярлыки базовый командную строку и построения архитектуры, которые они поддерживают:

- **Командная строка разработчика** -задает среду для использования 32-разрядной, машинный код x86 средства для сборки 32-разрядной, x86 и машинного кода.
- **x86 Командная строка native Tools** -задает среду для использования 32-разрядной, машинный код x86 средства для сборки 32-разрядной, x86 и машинного кода.
- **x64 Командная строка native Tools** -задает среду для использования 64-разрядной, машинный код x64 средства для создания 64-разрядной, x64 и машинного кода.
- **x86_x64 Cross Tools Command Prompt** -задает среду для использования 32-разрядной, машинный код x86 средства для создания 64-разрядной, x64 и машинного кода.
- **x64_x86 Cross Tools Command Prompt** -задает среду для использования 64-разрядной, машинный код x64 средства для сборки 32-разрядной, x86 и машинного кода.

Фактическое начало меню имен папок и ярлык зависят от версии Visual Studio, установки и установки псевдоним, если задается один. Например, если вы установили Visual Studio 2017, и вы уже заданного его установки псевдонимом из *предварительной версии*, называется ярлык командной строки разработчика **Командная строка разработчика для Visual STUDIO 2017 (Предварительная версия)**, в папку с именем **Visual Studio 2017**.

Если вы уже установили [Build Tools для Visual Studio 2017](https://go.microsoft.com/fwlink/p/?linkid=875721) (который также содержит набор инструментов компилятора Visual Studio 2015 с обновлением 3), только машинный код для конкретной архитектуры или нескольких средств командной строки разработчика установлены параметры , а не Общие **Командная строка разработчика** ярлык.

<a name="developer_command_prompt"></a>
### <a name="to-open-a-developer-command-prompt-window"></a>Чтобы открыть окно командной строки разработчика

1. На рабочем столе, откройте Windows **запустить** меню, а затем выберите, чтобы найти и открыть папку для вашей версии Visual Studio, например, **Visual Studio 2017**. В некоторых более старых версиях Visual Studio, сочетания клавиш используются во вложенной папке **средств Visual Studio**.

1. В папке, выберите **Командная строка разработчика** для вашей версии Visual Studio. Это сочетание клавиш запускает окно командной строки разработчика, используется по умолчанию архитектура сборки 32-разрядной, машинный код x86 средств для сборки 32-разрядной, x86 и машинного кода. Если вы предпочитаете архитектура сборки не по умолчанию, выберите один из собственных или нескольких средств командные строки для указания компьютера и целевой архитектуры.

Еще более быстрый способ открыть окно командной строки разработчика — введите *Командная строка разработчика* в поле поиска на рабочем столе, затем выберите нужный результат.

## <a name="developer-command-files-and-locations"></a>Разработчик командные файлы и расположения

Если вы предпочитаете установить среду построения архитектуры в существующем окне командной строки, можно использовать один из файлов команд (пакетные файлы) созданный установщиком присвоить требуемая среда. Только рекомендуется это сделать в новом окне командной строки, и мы не рекомендуем вам более поздних версий коммутатора, в том же окне. Расположение этих файлов зависит от версии Visual Studio, установки и от расположения и имен значений, выбранных во время установки. Для Visual Studio 2017, обычной установки на 64-разрядном компьютере находятся в \Program файлы (x86) \Microsoft Visual Studio\2017\\*edition*, где *edition* может быть сообщества, Вы задали, Профессиональная, Корпоративная, BuildTools или другое имя. Для Visual Studio 2015 каталог установки находится в \Program Files (x86) \Microsoft Visual Studio 14.0.

Основным разработчиком командной командный файл VsDevCmd.bat, находится в подкаталоге "Common7\Tools" каталога установки. Если параметры не указаны, это задает среду, и сервер узла и целевой создания архитектуры использовать 32-разрядные средства x86-машинный код для создания 32-разрядный x86 кода.

Дополнительные командные файлы доступны для настройки архитектуры определенной сборки, в зависимости от архитектуры процессора и рабочих нагрузок Visual Studio и параметры установки. В Visual Studio 2017 они находятся в подкаталоге VC\Auxiliary\Build каталога установки Visual Studio. В Visual Studio 2015, они находятся в VC, VC\bin или VC\bin\\*архитектур* подкаталоги в каталоге установки, где *архитектур* является одним из собственных или Параметры кросс компилятор. Эти командные файлы Установка параметров по умолчанию и вызовите VsDevCmd.bat, чтобы настроить среду архитектура указанной сборки. Обычная установка может включать эти командные файлы:

|Командный файл|Сервер узла и целевой архитектуры|
|---|---|
|**файл vcvars32.bat**| Использовать 32-разрядные средства x86-машинный код для создания 32-разрядный x86 кода.|
|**vcvars64.bat**| Использование средств x64 изначально 64-разрядных для создания 64-разрядных x64 кода.|
|**vcvarsx86_amd64.bat**| Использование средств перекрестного x86-машинный код 32-разрядных для создания 64-разрядных x64 кода.|
|**vcvarsamd64_x86.bat**| Использование средств перекрестного x64 изначально 64-разрядных для создания 32-разрядный x86 кода.|
|**vcvarsx86_arm.bat**| Используйте средства перекрестного 32-разрядных x86-машинный код для сборки кода ARM.|
|**vcvarsamd64_arm.bat**| Используйте межплатформенные инструменты x64 изначально 64-разрядных для создания кода ARM.|
|**файл Vcvarsall.bat**| Используйте параметры для задания узла и целевой архитектуры, а также варианты пакета SDK и платформы. Список поддерживаемых параметров, вызовите с помощью **/help** параметра.|

> [!CAUTION]
> Файл vcvarsall.bat и других командных файлов Visual Studio, могут различаться на разных компьютерах. Не заменяйте отсутствующий или поврежденный файл vcvarsall.bat файлом с другого компьютера. Перезапустите установщик Visual Studio, чтобы заменить отсутствующий файл.
>
> Файл vcvarsall.bat также может иметь отличия в разных версиях. Если текущая версия Visual Studio установлена на компьютере с более ранней версии Visual Studio, не запускайте файл vcvarsall.bat или другой файл команды Visual Studio из разных версий в том же окне командной строки.

## <a name="use-the-developer-tools-in-an-existing-command-window"></a>Использование средств разработчика в существующее окно команд

Для указания архитектуры конкретной сборки в существующее окно команд проще всего использовать файл vcvarsall.bat. Можно использовать файл vcvarsall.bat для установки переменных среды для настройки командной строки для собственной компиляции на 32-разрядная или 64-разрядной или для перекрестной компиляции для x86 x64 и процессорами ARM. для Microsoft Store, универсальной платформы Windows то платформ Windows Desktop; Чтобы указать, какой пакет SDK Windows для использования; и укажите версию набора инструментов платформы. Если аргументы не предоставлены, файл vcvarsall.bat настраивает переменные среды для использования текущего собственного 32-разрядных компилятора для x86 целевых объектов рабочего стола Windows. Тем не менее его можно использовать для настройки любых собственного или кросс-компилятора средства. Если указать конфигурацию компилятора, которая не установлена или недоступна в архитектуре компьютера сборки, отображается сообщение об ошибке.

### <a name="vcvarsall-syntax"></a>синтаксис Vcvarsall

> **файл Vcvarsall.bat** [*архитектура*] [*platform_type*] [*winsdk_version*] [**-vcvars_ver =** _vcversion_]

*Архитектура*<br/>
Этот необязательный аргумент указывает компьютера и целевой архитектуры для использования. Если *архитектура* не указан, используется среда построения по умолчанию. Поддерживаются следующие аргументы:

|*Архитектура*|Компилятор|Архитектура компьютера узла|Архитектура выходных данных (целевой) сборки|
|----------------------------|--------------|----------------------------------|-------------------------------|
|**x86**|собственный 32-разрядный x86|x86, x64|x86|
|**x86\_amd64** или **x86\_x64**|x64 на x86 cross|x86, x64|X64|
|**x86_arm**|ARM для x86 (кросс-компилятор)|x86, x64|ARM|
|**x86_arm64**|ARM64 на x86 кросс-|x86, x64|ARM64|
|**AMD64** или **x64**|x64 собственный 64-разрядный|X64|X64|
|**AMD64\_x86** или **x64\_x86**|cross x86 в x64|X64|x86|
|**AMD64\_arm** или **x64\_arm**|ARM в x64 кросс-|X64|ARM|
|**AMD64\_arm64** или **x64\_arm64**|ARM64 в x64 кросс-|X64|ARM64|

*platform_type*<br/>
Этот необязательный аргумент позволяет указать **хранения** или **uwp** платформ. По умолчанию среды имеет значение для создания классических и консольных приложений.

*winsdk_version*<br/>
При необходимости указывает версию пакета SDK Windows для использования. По умолчанию используется последняя установленных SDK Windows. Чтобы указать версию пакета SDK для Windows, можно использовать полный номер пакета SDK для Windows 10 таких как **10.0.10240.0**, или указать **8.1** использовать пакет SDK для Windows 8.1.

*vcversion*<br/>
При необходимости указывает набор инструментов компилятора Visual Studio для использования. По умолчанию среде присваивается использовать текущий набор инструментов компилятора Visual Studio 2017. Используйте **-vcvars_ver = 14.0** указать набор инструментов компилятора Visual Studio 2015.

<a name="vcvarsall"></a>
#### <a name="to-set-up-the-build-environment-in-an-existing-command-prompt-window"></a>Чтобы настроить среду сборки в существующее окно командной строки

1. В командной строке выполните команду CD, чтобы перейдите в каталог установки Visual Studio. Затем с помощью компакт-диска снова изменить в подкаталог, который содержит зависящие от конфигурации командных файлов. Для Visual Studio 2017 это подкаталог VC\Auxiliary\Build. Для Visual Studio 2015 используйте подкаталоге VC.

1. Введите команду для вашей среды предпочтительный разработчика. Например для построения кода ARM для универсальной платформы Windows на 64-разрядной платформе, используя последнюю версию пакета Windows SDK и набор инструментов компилятора Visual Studio 2017 RTM, используйте эту командную строку:

   `vcvarsall.bat amd64_arm uwp -vcvars_ver=14.10`

## <a name="create-your-own-command-prompt-shortcut"></a>Создание собственных ярлык командной строки

Если вы откроете диалоговое окно свойств для одного из существующих ярлыки командной строки разработчика, вы увидите, что использовать целевой объект команды. Например, целевой объект для **x64 Командная строка Native Tools для Visual STUDIO 2017** ярлык — примерно такой результат:

`%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars64.bat"`

Набор файлов пакета конкретной архитектуры *архитектура* параметр и вызов vcvarsall.bat. Те же дополнительные параметры можно передать эти пакетные файлы, которые будут передаваться в файл vcvarsall.bat или можно просто вызвать vcvarsall.bat непосредственно. Чтобы задать параметры для ярлыка собственные команды, их необходимо добавьте в конец команды в двойные кавычки. Например чтобы настроить ярлык для создания кода ARM для универсальной платформы Windows на 64-разрядной платформе, используя последнюю версию пакета Windows SDK и набор инструментов компилятора Visual Studio 2017 RTM, используйте нечто вроде этого целевого объекта команды в ярлык:

`%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat amd64_arm uwp -vcvars_ver=14.10"`

Необходимо изменить путь к каталога установки Visual Studio.

## <a name="command-line-tools"></a>Средства командной строки

Для сборки проекта C/C++ в командной строке, Visual Studio предоставляет эти программы командной строки:

[CL](../build/reference/compiling-a-c-cpp-program.md)<br/>
Используйте компилятор (cl.exe) для компиляции и компоновки файлов исходного кода в приложения, библиотеки и DLL.

[Ссылка](../build/reference/linking.md)<br/>
Используйте компоновщик (link.exe) для компоновки скомпилированных объектных файлов и библиотек в приложения и DLL.

[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)<br/>
Используйте MSBuild (msbuild.exe) для сборки проектов Visual C++ и решения Visual Studio. Это аналогично выполнению **построения** проекта или **построить решение** команду в Интегрированной среде разработки Visual Studio.

[DEVENV](/visualstudio/ide/reference/devenv-command-line-switches)<br/>
Используйте DEVENV (devenv.exe) в сочетании с помощью параметра командной строки, например, **/Build** или **/Clean**— для выполнения определенных команд сборки без отображения Интегрированной среды разработки Visual Studio.

[(NMAKE)](../build/nmake-reference.md)<br/>
Используйте NMAKE (nmake.exe) для автоматизации задач построения проектов Visual C++ с помощью традиционного файла makefile.

При построении в командной строке команда F1 для мгновенной Справка недоступна. Вместо этого механизм поиска можно использовать для получения сведений о предупреждения, ошибки и сообщения, или можно использовать файлы автономной справки. Использование поиска в [docs.microsoft.com](https://docs.microsoft.com/cpp/), введите строку поиска в поле поиска в верхней части страницы.

## <a name="in-this-section"></a>В этом разделе

В этом разделе документа приводятся статьи, в которых показано, как выполнять сборку приложений из командной строки, описывается, как настроить среду сборки из командной строки для использования 64-разрядного набора программ и платформ x86, x64 и ARM, а также демонстрируется использование программ сборки из командной строки MSBuild и NMAKE.

[Пошаговое руководство. Компиляция машинной программы на языке C++ из командной строки](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md)<br/>
Содержит пример создания и компиляции простой программы на языке C++ из командной строки.

[Пошаговое руководство: Компиляция программы на языке C в командной строке](../build/walkthrough-compile-a-c-program-on-the-command-line.md)<br/>
Описывается компиляция программы, написанной на языке программирования C.

[Пошаговое руководство. Компиляция программы на языке C++/CLI из командной строки](../build/walkthrough-compiling-a-cpp-cli-program-on-the-command-line.md)<br/>
Описывается создание и компиляция программы C++/CLI, в которой используется платформа .NET Framework.

[Пошаговое руководство. Компиляция программы на языке C++/CX из командной строки](../build/walkthrough-compiling-a-cpp-cx-program-on-the-command-line.md)<br/>
Описывается создание и компиляция программы C++/CX, в которой используется среда выполнения Windows.

[Установка переменных пути и среды при построении из командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md)<br/>
Описывает, как запустить окно командной строки, имеющий необходимые переменные среды для построения из командной строки, предназначенных x86, x64 и ARM с помощью набора инструментов 32-разрядная или 64-разрядных платформах.

[Справочник по программе NMAKE](../build/nmake-reference.md)<br/>
Содержит ссылки на статьи, в которых описывается служебная программа обслуживания программ Майкрософт (NMAKE.EXE).

[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)<br/>
Содержит ссылки на статьи, в которых рассматривается использование программы MSBuild.EXE.

## <a name="related-sections"></a>Связанные разделы

[/MD, /MT, /LD (использование библиотеки времени выполнения)](../build/reference/md-mt-ld-use-run-time-library.md)<br/>
Описывается использование этих параметров компилятора для работы с библиотекой времени выполнения отладки или выпуска.

[Параметры компилятора C/C++](../build/reference/compiler-options.md)<br/>
Содержит ссылки на статьи, посвященные параметрам компилятора C и C++, а также программе CL.exe.

[Параметры компоновщика](../build/reference/linker-options.md)<br/>
Содержит ссылки на статьи, посвященные параметрам компоновщика и программе LINK.exe.

[Средства сборки С/C++](../build/reference/c-cpp-build-tools.md)<br/>
Предоставляет ссылки на C/C++ создавать средств, включенных в Visual Studio.

## <a name="see-also"></a>См. также

[Сборка программ C/C++](../build/building-c-cpp-programs.md)