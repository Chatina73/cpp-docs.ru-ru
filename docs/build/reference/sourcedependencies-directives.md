---
title: /sourceDependencies:directives (список зависимостей модулей и блоков заголовков)
description: 'Справочное руководство по параметру компилятора/СаурцедепенденЦиес: directives в Microsoft C++.'
ms.date: 04/13/2020
author: tylermsft
ms.author: twhitney
f1_keywords:
- /sourceDependencies:directives
helpviewer_keywords:
- /sourceDependencies:directives compiler option
- /sourceDependencies:directives
ms.openlocfilehash: 6ac33db30a007226382d3ac331ab5f2699a85c8c
ms.sourcegitcommit: 83a396e9491fd6bdecfb48ff225ef01c959829a6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2021
ms.locfileid: "107577136"
---
# <a name="sourcedependenciesdirectives-list-module-and-header-unit-dependencies"></a>`/sourceDependencies:directives` (Список зависимостей модулей и заголовков)

Этот параметр командной строки создает JSON-файл, в котором перечислены зависимости модулей и заголовков.

Он определяет, какие модули и единицы заголовков должны быть скомпилированы до компиляции проекта, использующего их. Например, он будет выводить список `import <library>;` или `import "library";` как зависимость единицы заголовка, а `import name;` также как зависимость модуля.

Этот параметр командной строки аналогичен [`/sourceDependencies`](sourcedependencies.md) , но отличается следующим образом.

- Компилятор не создает скомпилированные выходные данные. Вместо этого файлы проверяются на наличие директив модуля. Скомпилированный код, модули или блоки заголовков не создаются.
- В выходном JSON-файле не перечислены импортированные модули и импортированные единицы заголовков ( *`.ifc`* файлы), так как этот параметр выполняет проверку файлов проекта, а не компиляцию. Поэтому в списке нет готовых модулей или блоков заголовков.
- Отображаются только непосредственно импортированные модули или единицы заголовков. В нем не перечислены зависимости импортируемых модулей или самих блоков заголовков.
- Зависимости файла заголовков не перечислены. То есть `#include <file>` зависимости или отсутствуют в `#include "file"` списке.
- `/sourceDependencies:directives` предназначен для использования перед *`.ifc`* построением файлов.

## <a name="syntax"></a>Синтаксис

> **`/sourceDependencies:directives`** -\
> **`/sourceDependencies:directives`***имя файла*\
> **`/sourceDependencies:directives`***Каталог*\

## <a name="arguments"></a>Аргументы

*`-`*\
Если указано одно тире, компилятор выдает JSON исходных зависимостей в `stdout` или в место, где будут перенаправляться выходные данные компилятора.

*`filename`*\
Компилятор записывает выходные данные исходной зависимости в указанное имя файла, которое может включать относительный или абсолютный путь.

*`directory`*\
Если аргумент является каталогом, компилятор создает исходные файлы зависимостей в указанном каталоге. Имя выходного файла основано на полном имени входного файла с добавленным *`.json`* расширением. Например, если файл, предоставленный компилятору, имеет значение *`main.cpp`* , то созданное выходное имя файла будет равно *`main.cpp.json`* .

## <a name="remarks"></a>Замечания

**`/sourceDependencies:directives`** доступен начиная с Visual Studio 2019 версии 16,10 (Предварительная версия 2). По умолчанию оно отключено.

При указании **`/MP`** параметра компилятора рекомендуется использовать **`/sourceDependencies`** с аргументом каталога. Если указать один аргумент имени файла, два экземпляра компилятора могут попытаться открыть выходной файл одновременно и вызвать ошибку. Дополнительные сведения о **`/MP`** см. в разделе [ `/MP` (сборка с несколькими процессами)](mp-build-with-multiple-processes.md).

При возникновении неустранимой ошибки компилятора сведения о зависимостях по-прежнему записываются в выходной файл.

Все пути к файлам отображаются в выходных данных в виде абсолютных путей.

### <a name="examples"></a>Примеры

С учетом следующего примера кода:

```cpp
//main.cpp:
#include <vector>

import m;
import std.core;

import <utility>;

import "t.h";

int main() {}
```

> `cl /std:c++latest /sourceDependencies:directives output.json main.cpp`

Эта командная строка создает JSON-файл *`output.json`* с содержимым, например:

```JSON
{
   "Version":"1.1",
   "Data":{
      "Source":"C:\\a\\b\\main.cpp",
      "ProvidedModule":"",
      "ImportedModules":[
         "m",
         "std.core"
      ],
      "ImportedHeaderUnits":[
         "C:\\...\\utility",
         "C:\\a\\b\\t.h"
      ]
   }
}
```

Мы использовали `...` для сокращения путей в отчете. В отчете будут содержаться абсолютные пути. Полученные пути зависят от того, где компилятор находит зависимости. Если результаты являются непредвиденными, может потребоваться проверить параметры пути включения проекта.

`ProvidedModule` Выводит список имен экспортированных модулей или разделов модулей.

*`.ifc`* В выходных данных не указаны файлы, так как они не были собраны. В отличие от `/sourceDependencies` , компилятор не создает скомпилированные выходные данные `/sourceDependencies:directives` , если указан параметр, поэтому скомпилированные модули или блоки заголовков не создаются для импорта.

## <a name="to-set-this-compiler-option-in-visual-studio"></a>Установка параметра компилятора в Visual Studio

Обычно это не должно быть задано в среде разработки Visual Studio. Он задается системой сборки.

## <a name="see-also"></a>См. также раздел

[Параметры компилятора КОМПИЛЯТОРОМ MSVC](compiler-options.md)\
[Синтаксис командной строки компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)