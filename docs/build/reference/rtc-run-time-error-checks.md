---
title: /RTC (проверки ошибок во время выполнения)
ms.date: 11/04/2016
f1_keywords:
- /rtc
- VC.Project.VCCLCompilerTool.SmallerTypeCheck
- VC.Project.VCCLCompilerTool.UninitializedVariableCheck
- VC.Project.VCCLCompilerTool.StackFrameCheck
- VC.Project.VCCLCompilerTool.BasicRuntimeChecks
helpviewer_keywords:
- /RTCs compiler option [C++]
- -RTC1 compiler option [C++]
- run-time errors, error checks
- -RTCu compiler option [C++]
- /RTC1 compiler option [C++]
- /RTCc compiler option [C++]
- /RTCu compiler option [C++]
- __MSVC_RUNTIME_CHECKS macro
- -RTCs compiler option [C++]
- RTCs compiler option
- RTC1 compiler option
- run-time errors, run-time checks
- run-time checks, /RTC option
- RTCu compiler option
- RTCc compiler option
- -RTCc compiler option [C++]
ms.assetid: 9702c558-412c-4004-acd5-80761f589368
ms.openlocfilehash: 77dc97ee07499b7df37a115dafafddd71acb7bb1
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50655006"
---
# <a name="rtc-run-time-error-checks"></a>/RTC (проверки ошибок во время выполнения)

Используется для включения и отключения функции проверки ошибок во время выполнения, в сочетании с [runtime_checks](../../preprocessor/runtime-checks.md) директивы pragma.

## <a name="syntax"></a>Синтаксис

```
/RTC1
/RTCc
/RTCs
/RTCu
```

## <a name="arguments"></a>Аргументы

**1**<br/>
Эквивалент **/RTC**`su`.

**c**<br/>
Сообщает, когда значение назначается типу данных меньшего размера и приводит к потере данных. Например, если значение типа `short 0x101` присваивается переменной типа `char`.

Этот параметр сообщает о ситуациях, в которых планируется усечение, например, если вы хотите, чтобы первые восемь бита `int` возвращаются в виде `char`. Так как **/RTC** `c` приводит к ошибке времени выполнения утери сведений о результате присваивания, можно замаскировать, сведения, необходимые для предотвращения ошибок времени выполнения в результате использования **/RTC** `c`. Пример:

```
#include <crtdbg.h>

char get8bits(int value, int position) {
   _ASSERT(position < 32);
   return (char)(value >> position);
   // Try the following line instead:
   // return (char)((value >> position) & 0xff);
}

int main() {
   get8bits(12341235,3);
}
```

**s**<br/>
Включает стека кадра во время выполнения проверки ошибок, как показано ниже:

- Инициализация локальных переменных в ненулевое значение. Это помогает выявить ошибки, которые не отображаются при работе в режиме отладки. Есть вероятность, что переменные стека по-прежнему будет ноль в отладочной сборке по сравнению с сборки выпуска из-за оптимизаций компилятора переменных стека в сборке выпуска. Когда программа использовала область стека, он никогда не сбрасывается в 0 компилятором. Таким образом последующие неинициализированные стековые переменные, использующие ту же область стека может возвращать значения, оставшиеся после первого использования этой стековой памяти.

- Обнаружение переполнения и Опустошение локальных переменных, таких как массивы. **/ RTC** `s` не обнаружит переполнения при доступе к памяти, полученный в результате заполнения компилятора внутри структуры. Заполнение может возникать с помощью [выровнять](../../cpp/align-cpp.md), [/Zp (выравнивание членов структур)](../../build/reference/zp-struct-member-alignment.md), или [пакет](../../preprocessor/pack.md), или если заказ элементы структуры таким образом, компилятору Добавление заполнения.

- Проверка указателя стека, который обнаруживает повреждение указателя стека. Повреждение указателя стека может быть вызвана несоответствия соглашений о вызовах. Например, используя указатель на функцию, вызвать функцию в библиотеке DLL, экспортируемых в качестве [__stdcall](../../cpp/stdcall.md) , но объявить указатель на функцию в качестве [__cdecl](../../cpp/cdecl.md).

**u**<br/>
Сообщает, когда переменная используется без предварительной инициализации. Например, инструкцию, которая приводит к возникновению ошибки `C4701` также могут формироваться ошибку времени выполнения в разделе **/RTC**`u`. Любая инструкция, приводит к возникновению ошибки [Предупреждение компилятора (уровень 1 и уровень 4) C4700](../../error-messages/compiler-warnings/compiler-warning-level-1-and-level-4-c4700.md) приведет к ошибке времени выполнения, в разделе **/RTC**`u`.

Тем не менее рассмотрим следующий фрагмент кода:

```cpp
int a, *b, c;
if ( 1 )
b = &a;
c = a;  // No run-time error with /RTCu
```

Если переменная может быть инициализирована, он не будут отображаться во время выполнения с **/RTC**`u`. Например после того как переменную-указатель псевдонима, компилятор не отслеживать и сообщать об ее использовании. По сути можно инициализировать переменную, используя его адрес. & Оператор действует как оператор присваивания в этой ситуации.

## <a name="remarks"></a>Примечания

Проверки ошибок во время выполнения — это способ обнаружения проблем в выполняющемся коде. Дополнительные сведения см. в разделе [как: Использование собственного проверок во время выполнения](/visualstudio/debugger/how-to-use-native-run-time-checks).

При компиляции программы командной строки, с помощью любого из **/RTC** параметры компилятора, все директивы pragma [оптимизировать](../../preprocessor/optimize.md) автоматически завершится ошибкой в коде. Это обусловлено проверки ошибок во время выполнения не допускаются в сборке выпуска (оптимизированный).

Следует использовать **/RTC** для сборок разработки; **/RTC** не должны использоваться для окончательной сборки. **/ RTC** нельзя использовать с оптимизации компилятора ([параметры /O (оптимизация кода)](../../build/reference/o-options-optimize-code.md)). Созданный образ программы с помощью **/RTC** будет немного больше и немного медленнее, чем образ, построенный с **/Od** (на 5 процентов медленнее, чем **/Od** сборки).

Директива препроцессора __MSVC_RUNTIME_CHECKS будут определены при использовании любого **/RTC** параметр или [/GZ](../../build/reference/gz-enable-stack-frame-run-time-error-checking.md).

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Дополнительные сведения см. в разделе [Работа со свойствами проекта](../../ide/working-with-project-properties.md).

1. Откройте папку **C/C++** .

1. Нажмите кнопку **создание кода** страницу свойств.

1. Измените одно или оба из следующих свойств: **основные проверки времени выполнения** или **меньшего размера тип проверки**.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. описание свойств <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.BasicRuntimeChecks%2A> и <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.SmallerTypeCheck%2A>.

## <a name="see-also"></a>См. также

[Параметры компилятора](../../build/reference/compiler-options.md)<br/>
[Настройка параметров компилятора](../../build/reference/setting-compiler-options.md)<br/>
[Практическое руководство. Настройка проверок во время выполнения машинного кода](/visualstudio/debugger/how-to-use-native-run-time-checks)