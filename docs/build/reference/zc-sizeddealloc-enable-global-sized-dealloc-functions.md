---
description: 'Дополнительные сведения о:/Zc: sizedDealloc (включение глобальных размеров функций освобождения)'
title: '/Zc: sizedDealloc (включение глобальных размеров, функции освобождения)'
ms.date: 03/06/2018
f1_keywords:
- sizedDealloc
- /Zc:sizedDealloc
helpviewer_keywords:
- -Zc compiler options (C++)
- sizedDealloc
- Enable Global Sized Deallocation Functions
- /Zc compiler options (C++)
- Zc compiler options (C++)
ms.assetid: 3a73ace0-4d36-420a-b699-0ca6fc0dd134
ms.openlocfilehash: 4e40355dc3c61f725ca9996dc4c91c0604866fe4
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97269072"
---
# <a name="zcsizeddealloc-enable-global-sized-deallocation-functions"></a>/Zc: sizedDealloc (включение глобальных размеров, функции освобождения)

Параметр компилятора **/Zc: sizedDealloc** указывает компилятору на необходимость вызова Global `operator delete` или `operator delete[]` функций, имеющих второй параметр типа, `size_t` Если размер объекта доступен. Эти функции могут использовать `size_t` параметр для оптимизации производительности дераспределения.

## <a name="syntax"></a>Синтаксис

> **/Zc: sizedDealloc**[ **-** ]

## <a name="remarks"></a>Комментарии

В стандарте C++ 11 можно определить статические функции-члены `operator delete` , `operator delete[]` которые принимают второй `size_t` параметр. Обычно они используются в сочетании с [оператором new](../../cpp/new-operator-cpp.md) functions для реализации более эффективных распределителя и отсчета распределителя для объекта. Однако C++ 11 не определил эквивалентный набор функций освобождения в глобальной области. В C++ 11 функции глобального освобождения, имеющие второй параметр типа, `size_t` считаются функциями удаления размещения. Их необходимо вызывать явным образом путем передачи аргумента размера.

Стандарт C++ 14 изменяет поведение компилятора. Когда вы определяете глобальное `operator delete` и `operator delete[]` принимаете второй параметр типа `size_t` , компилятор предпочитает вызывать эти функции, если версии области членов не вызываются и размер объекта доступен. Компилятор передает аргумент size неявным образом. Версии одного аргумента вызываются, когда компилятор не может определить размер освобожденного объекта. В противном случае обычные правила выбора версии функции освобождения для вызова по-прежнему применяются. Вызовы глобальных функций можно явно указать, добавив оператор разрешения области ( `::` ) в вызов функции освобождения.

По умолчанию Visual C++, начиная с Visual Studio 2015, реализует это стандартное поведение C++ 14. Это можно явно указать с помощью параметра компилятора **/Zc: sizedDealloc** . Это может привести к потенциально критическому изменению. Используйте параметр **/Zc: sizedDealloc-** для сохранения старого поведения, например, когда код определяет операторы размещения, которые используют второй параметр типа `size_t` . Реализации глобальных функций освобождения библиотеки Visual Studio по умолчанию, которые имеют второй параметр типа, `size_t` вызывают версии одного параметра. Если код предоставляет только однопараметрный оператор DELETE и оператор delete [], то библиотеки по умолчанию, используемые в глобальных функциях выделения размеров, вызывают глобальные функции.

Параметр компилятора **/Zc: sizedDealloc** включен по умолчанию. Параметр [/permissive-](permissive-standards-conformance.md) не влияет на **/Zc: sizedDealloc**.

Дополнительные сведения о вопросах соответствия в Visual C++ см. в статье [Nonstandard Behavior](../../cpp/nonstandard-behavior.md).

## <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. В раскрывающемся меню **конфигурации** выберите пункт **все конфигурации**.

1. Выберите страницу свойств **Свойства конфигурации**  >  **C/C++**  >  **Командная строка** .

1. Измените свойство **Дополнительные параметры** , чтобы включить **/Zc: sizedDealloc** или **/Zc: SizedDealloc-** и нажмите кнопку **ОК**.

## <a name="see-also"></a>См. также раздел

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис Command-Line компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)<br/>
[/Zc (соответствие)](zc-conformance.md)<br/>
