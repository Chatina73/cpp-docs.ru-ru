---
description: Дополнительные сведения о:/GENPROFILE,/FASTGENPROFILE (создание инструментированной сборки профилирования)
title: /GENPROFILE, /FASTGENPROFILE (создание инструментированной сборки профилирования)
ms.date: 04/14/2021
f1_keywords:
- GENPROFILE
- FASTGENPROFILE
- /GENPROFILE
- /FASTGENPROFILE
helpviewer_keywords:
- GENPROFILE
- FASTGENPROFILE
ms.openlocfilehash: 3b966148525fc470d53e2af9052a666aa39d7d99
ms.sourcegitcommit: d531c567c268b676b44abbc8416ba7e20d22044b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2021
ms.locfileid: "107539495"
---
# <a name="genprofile-fastgenprofile-generate-profiling-instrumented-build"></a>`/GENPROFILE`, `/FASTGENPROFILE` (Создание инструментированной сборки профилирования)

Указывает создание *`.pgd`* файла компоновщиком для поддержки профильной оптимизации (PGO). **`/GENPROFILE`** и **`/FASTGENPROFILE`** используют разные параметры по умолчанию. Используйте **`/GENPROFILE`** , чтобы предпочитать точность по скорости и использованию памяти во время профилирования. Используйте **`/FASTGENPROFILE`** , чтобы предпочитать меньшее использование памяти и скорость по сравнению с точностью.

## <a name="syntax"></a>Синтаксис

> **`/GENPROFILE`**\[**`:`**_`profile-argument`_\[**`,`**_`profile-argument`_ ...]]\
> **`/FASTGENPROFILE`**\[**`:`**_`profile-argument`_\[**`,`**_`profile-argument`_ ...]]\

> *`profile-argument`*\
> &emsp;{ **`COUNTER32`** &vert; **`COUNTER64`** }\
> &emsp;{ **`EXACT`** &vert; **`NOEXACT`** }\
> &emsp;**`MEMMAX=`**_значений_\
> &emsp;**`MEMMIN=`**_значений_\
> &emsp;{ **`PATH`** &vert; **`NOPATH`** }\
> &emsp;{ **`TRACKEH`** &vert; **`NOTRACKEH`** }\
> &emsp;**`PGD=`**_файлов_

### <a name="arguments"></a>Аргументы

Любой из *`profile-argument`* аргументов может быть указан в **`/GENPROFILE`** или **`/FASTGENPROFILE`** . Аргументы в списке, разделенные символом вертикальной черты ( **`|`** ), являются взаимоисключающими. **`,`** Для разделения аргументов используйте запятую (). Не вставляйте пробелы между аргументами, запятыми или после двоеточия ( **`:`** ).

**`COUNTER32`** &vert; **`COUNTER64`**\
Используется **`COUNTER32`** для указания использования 32-разрядных счетчиков зонда, а **`COUNTER64`** также для указания 64-разрядных счетчиков зонда. При указании **`/GENPROFILE`** значения по умолчанию используется значение **`COUNTER64`** . При указании **`/FASTGENPROFILE`** значения по умолчанию используется значение **`COUNTER32`** .

**`EXACT`** &vert; **`NOEXACT`**\
Используйте **`EXACT`** , чтобы указать потокобезопасные инкрементно заблокированные приращения для зондов. **`NOEXACT`** Указывает незащищенные операции приращения для зондов. Значение по умолчанию — **`NOEXACT`** .

**`MEMMAX`**=*значение*, **`MEMMIN`** = *значение*\
Используйте **`MEMMAX`** и **`MEMMIN`** для указания максимального и минимального размера резервирования для обучающих данных в памяти. Значение представляет резервируемый объем памяти в байтах. По умолчанию эти значения определяются внутренней эвристикой.

**`PATH`**  &vert; **`NOPATH`**\
Используйте **`PATH`**  , чтобы указать отдельный набор счетчиков профильной оптимизации для каждого уникального пути к функции. Используйте **`NOPATH`**  , чтобы указать только один набор счетчиков для каждой функции. При указании **`/GENPROFILE`** значения по умолчанию используется значение **`PATH`** . При указании **`/FASTGENPROFILE`** значения по умолчанию используется значение **`NOPATH`** .

**`TRACKEH`**  &vert; **`NOTRACKEH`**\
Указывает, следует ли использовать дополнительные счетчики для ведения точного подсчета возникновения исключений во время обучения. Используйте **`TRACKEH`**  , чтобы указать дополнительные счетчики для точного числа. Используйте **`NOTRACKEH`**  для указания одного счетчика для кода, который не использует обработку исключений или не выполняет исключения в сценариях обучения.  При указании **`/GENPROFILE`** значения по умолчанию используется значение **`TRACKEH`** . При указании **`/FASTGENPROFILE`** значения по умолчанию используется значение **`NOTRACKEH`** .

**`PGD`**=*файлов*\
Указывает базовое имя файла для *`.pgd`* файла. По умолчанию компоновщик использует базовое имя файла исполняемого образа с *`.pgd`* расширением.

## <a name="remarks"></a>Комментарии

**`/GENPROFILE`** Параметры и **`/FASTGENPROFILE`** указывают компоновщику создать файл инструментирования профилирования, необходимый для поддержки обучения приложений для профильной оптимизации (PGO). Эти варианты являются новыми в Visual Studio 2015. Предпочитать эти параметры нерекомендуемым **`/LTCG:PGINSTRUMENT`** **`/PGD`** параметрам,, и **`/POGOSAFEMODE`** , а также **`PogoSafeMode`** **`VCPROFILE_ALLOC_SCALE`** **`VCPROFILE_PATH`** переменным среды,, и. Данные профилирования, созданные при обучении приложения, используются в качестве входных данных для целевой оптимизации всей программы во время сборок. Можно также задать другие параметры для управления различными функциями профилирования для повышения производительности во время обучения и сборки приложения. Параметры по умолчанию, указанные в параметре, **`/GENPROFILE`** предоставляют наиболее точные результаты, особенно для больших и сложных многопоточных приложений. **`/FASTGENPROFILE`** Параметр использует различные значения по умолчанию для уменьшения объема памяти и более высокой производительности во время обучения за счет точности.

Данные профилирования фиксируются при запуске инструментированного приложения после сборки с помощью **`/GENPROFILE`** **`/FASTGENPROFILE`** . Эта информация записывается при указании [`/USEPROFILE`](useprofile.md) параметра компоновщика для шага профилирования, а затем используется для указания оптимизированного этапа сборки. Дополнительные сведения о том, как обучить приложение и сведения о собранных данных, см. в статье [Профильная оптимизация](../profile-guided-optimizations.md).

Всегда указывайте **`/LTCG`** при указании **`/GENPROFILE`** или **`/FASTGENPROFILE`** .

### <a name="to-set-this-linker-option-in-the-visual-studio-development-environment"></a>Задание данного параметра компоновщика в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Перейдите на страницу свойств **Свойства конфигурации** > **Компоновщик** > **Командная строка**.

1. Введите **`/GENPROFILE`** **`/FASTGENPROFILE`** Параметры и аргументы в поле **Дополнительные параметры** . Выберите **`OK`** , чтобы сохранить изменения.

### <a name="to-set-this-linker-option-programmatically"></a>Задание данного параметра компоновщика программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также

[Справочник по компоновщику КОМПИЛЯТОРОМ MSVC](linking.md)\
[Параметры компоновщика КОМПИЛЯТОРОМ MSVC](linker-options.md)\
[`/LTCG` (Создание кода во время компоновки)](ltcg-link-time-code-generation.md)
