---
title: /Yu (использование файла предкомпилированного заголовка)
ms.date: 11/04/2016
f1_keywords:
- /yu
helpviewer_keywords:
- Yu compiler option [C++]
- /Yu compiler option [C++]
- -Yu compiler option [C++]
- PCH files, use existing
- .pch files, use existing
- precompiled header files, use existing
ms.assetid: 24f1bd0e-b624-4296-a17e-d4b53e374e1f
ms.openlocfilehash: c0dcb045450d6e6eca31b8c76a92726e62400656
ms.sourcegitcommit: 8105b7003b89b73b4359644ff4281e1595352dda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2019
ms.locfileid: "57810124"
---
# <a name="yu-use-precompiled-header-file"></a>/Yu (использование файла предкомпилированного заголовка)

Предписывает компилятору использовать файл предкомпилированного заголовка (PCH) в текущей компиляции.

## <a name="syntax"></a>Синтаксис

```
/Yu[filename]
```

## <a name="arguments"></a>Аргументы

*filename*<br/>
Имя файла заголовка, который включен в исходный файл с помощью **#include** директивы препроцессора.

## <a name="remarks"></a>Примечания

Имя включаемого файла должно быть одинаковым для обоих **/Yc** параметр, который создает предкомпилированный заголовок и все последующие **/Yu** параметр, указывающий, использование предкомпилированного заголовка.

Для **/Yc**, `filename` указывающий точку, в какие предварительной компиляции останавливает; компилятор выполняет предварительную компиляцию весь код хотя `filename` и называет результирующий предкомпилированный заголовок, используя базовое имя включаемого файла и расширение из .pch.

PCH-файл должен быть создан с помощью **/Yc**.

Компилятор обрабатывает весь код, стоящий перед h-файл как предкомпилированный. Переход к только что дальше **#include** директива, связанный с файлом .h, использует код, содержащийся в PCH-файл и затем компилирует весь код после `filename`.

В командной строке не должно быть пробела между **/Yu** и `filename`.

При указании **/Yu** должен содержать параметр без имени файла, а исходная программа [#pragma hdrstop](../../preprocessor/hdrstop.md) директива pragma, которая задает имя файла предкомпилированного заголовка PCH-файла. В этом случае компилятор будет использовать предкомпилированного заголовка (PCH-файла) с именем, [/Fp (имя. PCH-файл)](fp-name-dot-pch-file.md). Компилятор пропускает расположение директивы pragma, восстанавливает состояние компиляции из файла предкомпилированного заголовка, указанного в директиве pragma и компилирует только код, который следует за директивой pragma. Если **#pragma hdrstop** не соответствует имени файла, компилятор ищет файл с именем, производным от базового имени исходного файла с расширением .pch. Можно также использовать **/FP** параметр, чтобы указать другого PCH-файла.

Если указать **/Yu** параметр без имени файла и не указать **hdrstop** pragma, создается сообщение об ошибке и компиляция завершается неудачно.

Если **/Yc** `filename` и **/Yu** `filename` параметры возникают в одной командной строке, и оба ссылаются на то же имя файла, **/Yc** `filename` принимает приоритет, предкомпиляции весь код до и включая названного файла. Эта функция упрощает создание файлов makefile.

Поскольку PCH-файлы содержат сведения о среде машины и адрес памяти о программе, следует использовать только PCH-файл на компьютере, в котором он был создан.

Дополнительные сведения о предкомпилированных заголовках см. в разделе:

- [/Y (предкомпилированные заголовки)](y-precompiled-headers.md)

- [Файлы предварительно скомпилированных заголовков](../creating-precompiled-header-files.md)

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Укажите [/Yc (создать предкомпилированный заголовочный файл)](yc-create-precompiled-header-file.md) в CPP-файл в проекте.

1. Откройте диалоговое окно **Страницы свойств** проекта. Дополнительные сведения см. в разделе [свойств компилятора и собранной задать C++ в Visual Studio](../working-with-project-properties.md).

1. Откройте папку **C/C++** .

1. Нажмите кнопку **предкомпилированные заголовки** страницу свойств.

1. Изменить **создать или используемый PCH-файл** свойство или **создать/использовать предварительно скомпилированный заголовочный файл** свойство.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. разделы <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.PrecompiledHeaderThrough%2A> и <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.UsePrecompiledHeader%2A>.

## <a name="examples"></a>Примеры

Если следующий код:

```
#include <afxwin.h>   // Include header for class library
#include "resource.h" // Include resource definitions
#include "myapp.h"    // Include information specific to this app
...
```

компилируется с помощью командной строки `CL /YuMYAPP.H PROG.CPP`, компилятор не выполняет три включают инструкции, но использует предкомпилированный код из MYAPP.pch, тем самым экономя время, участвующих в ходе предварительной обработки всех трех файлов (и все файлы, они могут включать).

Можно использовать [/Fp (имя. PCH-файл)](fp-name-dot-pch-file.md) с параметром **/Yu** параметр, чтобы указать имя PCH-файл, если имя отличается от имени аргумент файла для **/Yc** или базовое имя исходного файла, как и в следующие:

```
CL /YuMYAPP.H /FpMYPCH.pch PROG.CPP
```

Эта команда указывает файл предкомпилированного заголовка с именем MYPCH.pch. Компилятор использует его содержимое для восстановления всех файлов заголовка вплоть до и включая MYAPP.h предкомпилированного состояния. Компилятор компилирует код, стоящий после MYAPP.h **включают** инструкции.

## <a name="see-also"></a>См. также

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора MSVC](compiler-command-line-syntax.md)
