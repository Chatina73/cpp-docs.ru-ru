---
title: /Z7, /Zi, /ZI (формат отладочной информации)
ms.date: 04/08/2019
f1_keywords:
- VC.Project.VCCLCompilerTool.DebugInformationFormat
- /ZI
- /Zi
- /Z7
- VC.Project.VCCLWCECompilerTool.DebugInformationFormat
helpviewer_keywords:
- C7 compatible compiler option [C++]
- Debug Information Format compiler option
- ZI compiler option
- -Zi compiler option [C++]
- /ZI compiler option [C++]
- Z7 compiler option [C++]
- debugging [C++], debug information files
- Zi compiler option [C++]
- /Zi compiler option [C++]
- program database compiler option [C++]
- full symbolic debugging information
- /Z7 compiler option [C++]
- line numbers only compiler option [C++]
- cl.exe compiler, debugging options
- -Z7 compiler option [C++]
ms.openlocfilehash: aeaf435874b6d6b9dbc8a3d12ec06d38bf33aaae
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80078266"
---
# <a name="z7-zi-zi-debug-information-format"></a>/Z7, /Zi, /ZI (формат отладочной информации)

Указывает тип отладочной информации, создаваемой для программы, и сведения о том, хранятся ли эти данные в объектных файлах или в файле базы данных программы (PDB).

## <a name="syntax"></a>Синтаксис

> **/Z**{**7**|**i**|**I**

## <a name="remarks"></a>Примечания

Когда код компилируется и строится в режиме отладки, компилятор создает имена символов для функций и переменных, сведения о типе и позиции номеров строк для использования отладчиком. Эта Символьная отладочная информация может быть включена либо в объектные файлы (OBJ-файлы), созданные компилятором, либо в отдельный PDB-файл (PDB-файл) для исполняемого файла.  Параметры формата отладочной информации описаны в следующих разделах.

### <a name="none"></a>Нет

По умолчанию, если не указан параметр формата отладочной информации, компилятор не создает отладочную информацию, поэтому компиляция выполняется быстрее.

### <a name="z7"></a>/Z7

Параметр **/Z7** создает объектные файлы, которые также содержат полные символьные отладочные данные для использования с отладчиком. Эти файлы объектов и исполняемый файл могут быть значительно больше, чем файлы, не имеющие отладочной информации. Символьная отладочная информация включает имена и типы переменных, а также функции и номера строк. PDB-файл не создается.

Для распространителей отладочных версий библиотек сторонних производителей существует преимущество отсутствия PDB-файла. Однако объектные файлы для всех предкомпилированных заголовков необходимы на этапе компоновки библиотеки и для отладки. При наличии только сведений о типе (без кода) в PCH-файле объекта необходимо также использовать параметр [/Yl (Вставка ссылки на PCH для библиотеки отладки)](yl-inject-pch-reference-for-debug-library.md) , который включен по умолчанию при сборке библиотеки.

Нерекомендуемый параметр [/GM (включение минимального перестроения)](gm-enable-minimal-rebuild.md) недоступен, если указан **/Z7** .

### <a name="zi"></a>/ZI

Параметр **/Zi** создает отдельный PDB-файл, содержащий все символьные отладочные данные для использования с отладчиком. Отладочная информация не включается в объектные файлы или исполняемый файл, что делает их намного меньшей.

Использование параметра **/Zi** не влияет на оптимизацию. Однако параметр **/Zi** подразумевает параметр **/Debug**; Дополнительные сведения см. в разделе [/Debug (создание отладочной информации)](debug-generate-debug-info.md) .

При указании как **/Zi** , так и **/CLR**атрибут <xref:System.Diagnostics.DebuggableAttribute> не помещается в метаданные сборки. При необходимости его необходимо указать в исходном коде. Этот атрибут может повлиять на производительность приложения во время выполнения. Дополнительные сведения о том, как атрибут **отлаживаемого кода** влияет на производительность и как можно изменить влияние на производительность, см. в разделе [Упрощение отладки образа](/dotnet/framework/debug-trace-profile/making-an-image-easier-to-debug).

Компилятор присваивает имя PDB-файлу *Project*. pdb. При компиляции файла вне проекта компилятор создает PDB-файл с именем VC*x*. pdb, где *x* — это объединение основного и дополнительного номеров версий используемого компилятора. Компилятор внедряет имя PDB и определение подписи метки времени в каждом объектном файле, созданном с помощью этого параметра, который указывает отладчику на расположение символьной и строковой информации. Имя и подпись в PDB-файле должны соответствовать исполняемому файлу для загрузки символов в отладчике. Отладчик WinDBG может загружать несовпадающие символы с помощью команды `.symopt+0x40`. Visual Studio не имеет аналогичного варианта загрузки несовпадающих символов.

При создании библиотеки на основе объектов, скомпилированных с помощью **/Zi**, связанный PDB-файл должен быть доступен, если библиотека связана с программой. Таким же, при распространении библиотеки необходимо также распространить PDB-файл. Чтобы создать библиотеку, содержащую отладочную информацию без использования PDB-файлов, необходимо выбрать параметр **/Z7** . При использовании параметров предкомпилированных заголовков отладочная информация как для предкомпилированного заголовка, так и остальной части исходного кода помещается в PDB-файл.

### <a name="zi"></a>/ZI

Параметр **/Zi** аналогичен **/Zi**, но он создает PDB-файл в формате, поддерживающем функцию " [изменить и продолжить](/visualstudio/debugger/edit-and-continue-visual-cpp) ". Чтобы использовать функции "изменить и продолжить отладку", необходимо использовать этот параметр. Функция "изменить и продолжить" полезна для повышения производительности труда разработчиков, но может вызвать проблемы с размером кода, производительностью и соответствием компилятора. Так как большинство оптимизаций несовместимы с параметром "изменить и продолжить", использование функции **/Zi** отключает все `#pragma optimize` операторы в коде. Параметр **/Zi** также несовместим с использованием [ &#95; &#95;встроенного&#95; &#95; макроса Line](../../preprocessor/predefined-macros.md). код, скомпилированный с **/Zi** , не может использовать **&#95; &#95;строку&#95;** в качестве аргумента шаблона, который не является типом, хотя **&#95; &#95;&#95;** в расширениях макросов можно использовать строку.

Параметр **/Zi** задает использование параметров [/Gy (включить компоновку на уровне функций)](gy-enable-function-level-linking.md) и [/FC (полный путь к файлу исходного кода в диагностике)](fc-full-path-of-source-code-file-in-diagnostics.md) для использования при компиляции.

Параметр **/Zi** несовместим с [/CLR (компиляция общеязыковой среды выполнения)](clr-common-language-runtime-compilation.md).

> [!NOTE]
> Параметр **/Zi** доступен только в компиляторах, предназначенных для процессоров x86 и x64. Этот параметр компилятора недоступен в компиляторах, предназначенных для процессоров ARM.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Откройте страницу свойств **Свойства конфигурации** > **Общие** свойства **CC++ /**  > .

1. Измените свойство **Формат отладочной информации** . Выберите **ОК** для сохранения внесенных изменений.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.DebugInformationFormat%2A>.

## <a name="see-also"></a>См. также:

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора MSVC](compiler-command-line-syntax.md)
