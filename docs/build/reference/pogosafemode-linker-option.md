---
description: Дополнительные сведения о:/ПОГОСАФЕМОДЕ (запуск профильной оптимизации в потокобезопасный режим)
title: /ПОГОСАФЕМОДЕ (запуск PGO в защищенном режиме потока)
ms.date: 03/14/2018
f1_keywords:
- POGOSAFEMODE
ms.openlocfilehash: dfe8d46a3008a1d41156d077e5b87e50ac345e18
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97225925"
---
# <a name="pogosafemode-run-pgo-in-thread-safe-mode"></a>/ПОГОСАФЕМОДЕ (запуск PGO в защищенном режиме потока)

**Параметр/погосафемоде является устаревшим, начиная с Visual Studio 2015**. Используйте вместо него параметры [/GENPROFILE: СОВПАД](genprofile-fastgenprofile-generate-profiling-instrumented-build.md) и **/GENPROFILE: СОВПАД** . Параметр компоновщика **/погосафемоде** указывает, что для создания инструментированной сборки используется потокобезопасный режим для отслеживания данных профилирования во время обучения с помощью профильной оптимизации (PGO).

## <a name="syntax"></a>Синтаксис

> **/POGOSAFEMODE**

## <a name="remarks"></a>Комментарии

Профильная оптимизация (PGO) имеет два возможных режима на этапе профилирования: *быстрый режим* и *безопасный режим*. Если профилирование выполняется в быстром режиме, для увеличения счетчиков данных используется инструкция инкремента. Инструкция инкремента выполняется быстрее, но не является потокобезопасной. Когда профилирование выполняется в защищенном режиме, для увеличения счетчиков данных используется инструкция с блокировкой инкремента. Эта инструкция имеет те же функциональные возможности, что и инструкция инкремента, и является потокобезопасной, но работает медленнее.

Параметр **/погосафемоде** задает для инструментированной сборки использование безопасного режима. Этот параметр можно использовать только в том случае, если указан нерекомендуемый [/LTCG: PGINSTRUMENT](ltcg-link-time-code-generation.md) на этапе компоновщика для ИНСТРУМЕНТИРОВАНия профильной оптимизации.

По умолчанию профилирование с использованием профильной оптимизации работает в быстром режиме. **/Погосафемоде** требуется только в том случае, если вы хотите использовать в качестве безопасного режима.

Для запуска профилирования с помощью профильной оптимизации в защищенном режиме необходимо использовать **/GENPROFILE: СОВПАД** (предпочтительный) или использовать переменную среды [PogoSafeMode](../environment-variables-for-profile-guided-optimizations.md) или компоновщик **/погосафемоде** в зависимости от системы. При выполнении профилирования на компьютере с архитектурой x64 необходимо использовать параметр компоновщика. При выполнении профилирования на компьютере с архитектурой x86 можно использовать переключатель компоновщика или определить переменную среды в любом значении перед началом процесса инструментирования профильной оптимизации.

### <a name="to-set-this-linker-option-in-the-visual-studio-development-environment"></a>Задание данного параметра компоновщика в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите   >    >  страницу свойств **Оптимизация** компоновщика свойств конфигурации.

1. В свойстве **время создания кода времени компоновки** выберите **Профильная оптимизация — инструментирование (/LTCG: PGInstrument)**.

1. Перейдите на страницу свойств **Свойства конфигурации** > **Компоновщик** > **Командная строка**.

1. Введите параметр **/погосафемоде** в поле **Дополнительные параметры** . Выберите **ОК** для сохранения внесенных изменений.

### <a name="to-set-this-linker-option-programmatically"></a>Задание данного параметра компоновщика программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также раздел

[/GENPROFILE и /FASTGENPROFILE](genprofile-fastgenprofile-generate-profiling-instrumented-build.md)<br/>
[Указан](ltcg-link-time-code-generation.md)<br/>
[Профильная оптимизация](../profile-guided-optimizations.md)<br/>
[Переменные среды для оптимизации Profile-Guided](../environment-variables-for-profile-guided-optimizations.md)<br/>
