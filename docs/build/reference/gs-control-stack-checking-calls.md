---
description: Дополнительные сведения о:/GS (управление вызовами проверки стека)
title: /Gs (управлять вызовами проверки стека)
ms.date: 10/25/2018
f1_keywords:
- /GS
helpviewer_keywords:
- disabling stack probes
- GS compiler option [C++]
- /GS compiler option [C++]
- stack, stack probes
- stack probes
- -GS compiler option [C++]
- stack checking calls
ms.assetid: 40daed7c-f942-4085-b872-01e12b37729e
ms.openlocfilehash: 128a5ad4dbcba15dfc5b76313b8576ce1448ec68
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97200170"
---
# <a name="gs-control-stack-checking-calls"></a>/Gs (управлять вызовами проверки стека)

Управляет пороговостью проверок стека.

## <a name="syntax"></a>Синтаксис

> **/GS**[*Размер*]

## <a name="arguments"></a>Аргументы

*size*<br/>
(Необязательно) Число байтов, которое могут занимать локальные переменные перед инициацией стекового зонда. Между **/GS** и *size* не допускаются пробелы.

## <a name="remarks"></a>Комментарии

*Зонд стека* — это последовательность кода, которую компилятор вставляет в начало вызова функции. При активации стекового зонда он занимает количество памяти, требуемое для хранения локальных переменных функции. Это приводит к тому, что операционная система прозрачно размещает страницу в дополнительной памяти стека, если это необходимо, перед выполнением оставшейся части функции.

По умолчанию компилятор создает код, который активирует стековый зонд, если функции требуется более одной страницы стека. Это эквивалентно параметру компилятора **/Gs4096** для платформ x86, x64, ARM и ARM64. Это значение позволяет приложению и диспетчеру памяти Windows динамически увеличивать количество памяти, выделенной стеку программы, во время выполнения.

> [!NOTE]
> Значение по умолчанию **/Gs4096** позволяет программному стеку приложений для Windows увеличиваться правильно во время выполнения. Мы рекомендуем не изменять значение по умолчанию, если вы не уверены, что это необходимо.

Некоторым программам, таким как драйверы виртуальных устройств, не требуется этот механизм увеличения стека по умолчанию. В таких случаях проверка стека не требуется, и можно предотвратить их создание компилятором, установив для параметра *size* значение, превышающее любую функцию, которая потребуется для хранения локальных переменных.

**/Gs0** инициирует зонды стека для каждого вызова функции, для которого требуется хранилище локальных переменных. Это может отрицательно сказываться на производительности.

Для целевых объектов x64, если параметр **/GS** указан без аргумента *size* , он совпадает с **/Gs0**. Если аргумент *size* имеет значение от 1 до 9, выдается предупреждение D9014, и результат будет таким же, как и при указании **/Gs0**.

Для целевых объектов x86, ARM и ARM64 параметр **/GS** без аргумента *size* будет таким же, как и **/Gs4096**. Если аргумент *size* имеет значение от 1 до 9, выдается предупреждение D9014, и результат будет таким же, как и при указании **/Gs4096**.

Для всех целевых объектов аргумент *размера* от 10 до 2147485647 задает пороговое значение в указанном значении. *Размер* 2147485648 или выше приводит к неустранимой ошибке C1049.

Включить или отключить проверку стека можно с помощью директивы [check_stack](../../preprocessor/check-stack.md) . **/GS** и `check_stack` pragma не влияют на стандартные библиотеки C, они влияют только на компилируемые функции.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите страницу свойств **Свойства конфигурации**  >  **C/C++**  >  **Командная строка** .

1. Введите параметр компилятора **/GS** и необязательный размер в **дополнительных параметрах**. Нажмите кнопку **ОК** или **Применить** , чтобы сохранить изменения.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также раздел

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис Command-Line компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)
