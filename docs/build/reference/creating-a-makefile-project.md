---
title: Создание проекта makefile на C++ в Visual Studio
ms.date: 05/16/2019
f1_keywords:
- vc.appwiz.makefile.project
helpviewer_keywords:
- Makefile projects, creating
- project files [C++], Makefile projects
ms.assetid: dd077af3-97a8-48fb-baaa-cf7e07ddef61
ms.openlocfilehash: b460b16b3a64818501187b00e503ad0179d26443
ms.sourcegitcommit: a10c9390413978d36b8096b684d5ed4cf1553bc8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2019
ms.locfileid: "65837394"
---
# <a name="create-a-c-makefile-project"></a>Создание проекта makefile на C++

Объект *makefile* представляет собой текстовый файл с инструкциями по компиляции и компоновке (или *сборке*) некоторого набора файлов исходного кода C++. Программа *make* считывает файл makefile и вызывает компилятор, компоновщик и другие программы для создания исполняемого файла. Реализация *make*, созданная корпорацией Майкрософт, носит имя [NMAKE](nmake-reference.md).

Если у вас есть существующий проект Makefile, который вы хотите развивать и (или) отлаживать в интегрированной среде разработки Visual Studio, у вас есть следующие варианты.

- Создайте в Visual Studio проект makefile, который использует существующий файл makefile для настройки файла VCXPROJ, используемого средой Visual Studio для IntelliSense. (Вам будут доступны не все возможности интегрированной среды разработки, которые есть в собственном проекте MSBuild.) См. также раздел [о создании проекта Makefile](#create_a_makefile_project) ниже.
- Используйте мастер **создания нового проекта из существующих файлов кода**, чтобы создать собственный проект MSBuild из исходного кода. Исходный файл makefile после этого использоваться не будет. Дополнительные сведения см. в разделе [Практическое руководство. создать проект C++ из существующего кода](../how-to-create-a-cpp-project-from-existing-code.md).
- **Visual Studio 2017 и более поздних версий**: используйте функцию **Открыть папку**, чтобы открыть проект makefile и выполнить его сборку "как есть", не задействуя систему MSBuild. Дополнительные сведения см. в статье [Проекты "Открыть папку" для C++](../open-folder-projects-cpp.md).
- **Visual Studio 2019 и более поздних версий**: создайте проект makefile UNIX для Linux.

## <a name="a-namecreateamakefileproject-to-create-a-makefile-project-with-the-makefile-project-template"></a><a name="create_a_makefile_project"> Создание проекта makefile с использованием шаблона проекта makefile

В Visual Studio 2017 и более поздних версиях шаблон проекта Makefile доступен, если установлена рабочая нагрузка разработки классических приложений на C++.

Используйте мастер, чтобы указать команды и среду, используемые файлом makefile. Затем этот проект можно использовать для сборки кода в Visual Studio.

По умолчанию проект makefile не отображает в обозревателе решений никаких файлов. Проект makefile задает параметры сборки, которые показаны на странице свойств проекта.

Выходной файл, который задается в проекте, не влияет на имя, которое формирует скрипт построения; он указывает только на намерения. Файл makefile по-прежнему управляет процессом сборки и указывает ее целевые объекты.

::: moniker range="vs-2019"

### <a name="to-create-a-makefile-project-in-visual-studio-2019"></a>Создание проекта makefile в Visual Studio 2019

1. В главном меню Visual Studio выберите **Файл** > **Создать** > **Проект** и в поле поиска введите "makefile". Или же откройте диалоговое окно **Новый проект**, разверните узел **Visual C++** > **Общие** (Visual Studio 2015) или **Прочие** (Visual Studio 2017) и выберите один из двух вариантов в зависимости от того, предназначен ли проект для Windows или Linux.

1. **Только для Windows**: На странице **Параметры конфигурации отладки** предоставьте сведения о команде, выводе, удалении и повторной сборке для отладочной и окончательной сборок. Чтобы указать другие параметры для конфигурации выпуска, нажмите кнопку **Далее**.

1. Нажмите кнопку **Готово**, чтобы закрыть диалоговое окно и открыть созданный проект в **обозревателе решений**.

::: moniker-end

::: moniker range="<=vs-2017"

### <a name="to-create-a-makefile-project-in-visual-studio-2015-or-visual-studio-2017"></a>Создание проекта makefile в Visual Studio 2015 или Visual Studio 2017

1. На начальной странице Visual Studio введите строку "makefile" в поле поиска **Новый проект**. Или же откройте диалоговое окно **Новый проект**, разверните узел **Visual C++** > **Общие** (Visual Studio 2015) или **Прочие** (Visual Studio 2017) и в области шаблонов выберите **Проект Makefile**, чтобы открыть мастер проектов.

1. На странице **Параметры приложения** предоставьте сведения о команде, выводе, удалении и перестроении для отладочной и окончательной сборок.

1. Нажмите кнопку **Готово**, чтобы закрыть мастер и открыть вновь созданный проект в **обозревателе решений**.

::: moniker-end

На этой странице свойств можно просматривать и изменять свойства проекта. Сведения об отображении страницы свойств см. в статье [Настройка компилятора C++ и свойств сборки в Visual Studio](../working-with-project-properties.md).

## <a name="makefile-project-wizard"></a>Мастер проекта makefile

Создав проект makefile, вы можете просматривать и изменять каждый из следующих параметров на странице **Nmake** свойств проекта.

- **Командная строка для сборки:** Указывает командную строку, выполняемую, когда пользователь выбирает пункт "Сборка" в меню "Сборка". Отображается в поле "Командная строка для сборки" на странице "Nmake" свойств проекта.

- **Выходные данные:** Определяет имя файла, который будет содержать выходные данные для командной строки. По умолчанию этот параметр основан на имени проекта. Отображается в поле "Вывод" на странице "Nmake" свойств проекта.

- **Команды очистки:** Указывает командную строку, выполняемую, когда пользователь выбирает пункт "Очистить" в меню "Сборка". Отображается в поле "Командная строка для очистки" на странице "Nmake" свойств проекта.

- **Командная строка перестроения:** Указывает командную строку, выполняемую, когда пользователь выбирает пункт "Перестроить" в меню "Сборка". Отображается в поле "Командная строка для перестроения всех файлов" на странице "Nmake" свойств проекта.

## <a name="how-to-enable-intellisense-for-makefile-projects"></a>Практическое руководство. Использование IntelliSense для проектов Makefile

IntelliSense не работает в проектах makefile, если определенные параметры проекта или компилятора заданы неправильно. Чтобы настроить проекты makefile для правильной работы IntelliSense, выполните указанные ниже действия.

1. Откройте диалоговое окно **Страницы свойств**. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Разверните узел **Свойства конфигурации**.

1. Выберите страницу свойств **NMake** и соответствующим образом измените свойства в разделе **IntelliSense**.

   - Задайте свойство **Определения препроцессора**, чтобы определить символы препроцессора в проекте makefile. Дополнительные сведения см. в разделе [/D (определения препроцессора)](d-preprocessor-definitions.md).

   - Задайте свойство **Путь поиска включаемых файлов**, чтобы указать список каталогов, где компилятор будет производить поиск для разрешения ссылок на файлы, передаваемых в директивы препроцессора в новом проекте makefile. Дополнительные сведения см. в разделе [/I (дополнительные каталоги включения)](i-additional-include-directories.md).

    - Для проектов, созданных с использованием CL.EXE из командного окна, задайте переменную среды **INCLUDE**, чтобы указать каталоги, где компилятор будет производить поиск для разрешения ссылок на файлы, передаваемых в директивы препроцессора в новом проекте makefile.

   - Задайте свойство **Принудительно включаемые файлы**, чтобы указать файлы заголовков, обрабатываемые при сборке проекта makefile. Дополнительные сведения см. в разделе [/FI (имя принудительно включаемого файла)](fi-name-forced-include-file.md).

   - Задайте свойство **Путь поиска сборок**, чтобы указать список каталогов, где компилятор будет производить поиск для разрешения ссылок на сборки .NET в проекте. Дополнительные сведения см. в разделе [/AI (указание каталогов метаданных)](ai-specify-metadata-directories.md).

   - Задайте свойство **Обязательно используемые сборки**, чтобы указать, какие сборки .NET обрабатываются при сборке проекта makefile. Дополнительные сведения см. в разделе [/FU (именование файла с принудительно используемым атрибутом #using)](fu-name-forced-hash-using-file.md).

   - Задайте свойство **Дополнительные параметры**, чтобы указать дополнительные параметры компилятора, которые должны использоваться IntelliSense при анализе файлов C++.

1. Нажмите кнопку **ОК**, чтобы закрыть страницы свойств.

1. Используйте команду **Сохранить все**, чтобы сохранить измененные параметры проекта.

При следующем открытии проекта makefile в среде разработки Visual Studio запустите команду **Очистить решение**, а затем — команду **Собрать решение** для проекта makefile. Технология IntelliSense должна работать в интегрированной среде разработки правильно.

## <a name="see-also"></a>См. также

[Использование технологии IntelliSense](/visualstudio/ide/using-intellisense)<br>
[Справочник по программе NMAKE](nmake-reference.md)<br>
[Практическое руководство. Создание проекта C++ из существующего кода](../how-to-create-a-cpp-project-from-existing-code.md)
[Специальные символы в файле makefile](special-characters-in-a-makefile.md)<br/>
[Содержимое файла Makefile](contents-of-a-makefile.md)<br/>
