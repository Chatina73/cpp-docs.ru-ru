---
title: Справочник по MSVC компоновщика
ms.date: 12/10/2018
ms.assetid: bb736587-d13b-4f3c-8982-3cc2c015c59c
ms.openlocfilehash: 3a9eebef0a264b0131311b5ca96011a4d56264a1
ms.sourcegitcommit: 8105b7003b89b73b4359644ff4281e1595352dda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2019
ms.locfileid: "57820381"
---
# <a name="linking"></a>Компоновка

В проекте C++ *связывание* действие выполняется после компилятор компиляции исходного кода в объектных файлах (*.obj). Компоновщик (link.exe) объединяет объектные файлы в один исполняемый файл. 

Параметры компоновщика можно задать внутри или вне Visual Studio. В Visual Studio, доступ параметры компоновщика, щелкнув правой кнопкой узел проекта в **обозревателе решений** и выбрав **свойства** для отображения страницы свойств. Выберите **компоновщика** в левой области разверните узел и просмотреть все параметры. 


## <a name="linker-command-line-syntax"></a>Синтаксис командной строки компоновщика

При выполнении ссылки вне Visual Studio, можно указать входные данные в одной или несколькими способами:

- В командной строке

- Использование командных файлов

- В переменных среды

ССЫЛКА первого обрабатывает параметры, заданные в переменной среды LINK, следуют параметры в том порядке, они указаны в командной строке и в командных файлах. Если параметр повторяется с различными аргументами, обработано последним имеет приоритет.

Параметры применяются ко всей сборки; параметры не могут применяться для определенных входных файлов.

Чтобы выполнить LINK. EXE-файла, используйте следующий синтаксис команды:

```
LINK arguments
```

`arguments` Параметры и имена файлов и может быть указан в любом порядке. Параметры, сначала обрабатываются, а затем файлы. Для разделения аргументов используйте пробелы или вкладки.

> [!NOTE]
>  Это средство можно запустить только из командной строки Visual Studio. В системной командной строке или проводнике это невозможно.

## <a name="command-line"></a>Командная строка

В командной строке параметр состоит из спецификатора дефисом (-) или косой черты (/), а затем имя параметра. Имена параметров не может быть сокращены. Некоторые параметры принимают аргумент, указанный после двоеточия (:). Не пробелы или символы табуляции, допустимы внутри параметра, за исключением в строку в кавычках в параметре/COMMENT. Укажите числовым аргументам в десятичном или нотации языка. Имена параметров, а также их аргументы ключевое слово или имя файла не учитывается регистр, но идентификаторов в качестве аргументов чувствительны к регистру.

Чтобы передать файл компоновщику, укажите имя файла в командной строке после команды LINK. Можно указать абсолютный или относительный путь с именем файла, и можно использовать подстановочные знаки в имени файла. Если опустить точку (.) и расширение имени файла, ссылка предполагается .obj целью поиск файла. ССЫЛКА не использует расширения имен файлов или отсутствие таких предположения о содержимом файлов; он определяет тип файла путем проверки его и обрабатывает его соответствующим образом.

LINK.exe возвращает ноль при успешном завершении (без ошибок).  В противном случае компоновщик возвращает номер ошибки, которое остановило ссылку.  Например если компоновщик создает LNK1104, компоновщик возвращает 1104.  Соответственно наименьшее номер ошибки, возвращаемый при возникновении ошибки компоновщика — 1000.  Возвращаемое значение 128 представляет на проблемы настройки операционной системы или config-файла; загрузчик не удалось загрузить c2.dll или link.exe.

## <a name="link-command-files"></a>Командные файлы LINK

Аргументы командной строки можно передать ССЫЛКУ в виде командного файла. Чтобы указать командному файлу, который компоновщик, используйте следующий синтаксис:

> **ССЫЛКА \@**  <em>commandfile</em>

*Commandfile* имя текстового файла. Нет пробел или символ табуляции должны разделяться знаком (**\@**) и имя файла. Отсутствует расширение по умолчанию; необходимо указать полное имя файла, включая любое расширение. Нельзя использовать подстановочные знаки. Можно указать абсолютный или относительный путь с именем файла. ССЫЛКА не использует переменную среды для поиска файла.

В файле команд, аргументы могут быть разделены пробелами или знаками табуляции (как и в командной строке) и символом новой строки.

Можно указать часть командной строки или в файле команд. Можно использовать более одного командного файла в команде LINK. СВЯЗЬ принимает входные данные командного файла, как если бы он был указан в этом расположении, в командной строке. Командные файлы не могут быть вложенными. LINK выводит на экран содержимого командные файлы, если не [/nologo](nologo-suppress-startup-banner-linker.md) параметра.

## <a name="example"></a>Пример

Следующую команду, чтобы создать библиотеку DLL передает имена файлов объектов и библиотек в отдельных командных файлах и использует файл для спецификации параметра/EXPORTS команд, третий:

```cmd
link /dll @objlist.txt @liblist.txt @exports.txt
```

## <a name="link-environment-variables"></a>Переменные среды инструмента LINK

Средство LINK использует следующие переменные среды:

- ССЫЛКИ и \_ССЫЛКУ\_, если определен. Средство LINK добавляет параметры и аргументы, заданные в переменной среды LINK и добавляет параметры и аргументы определены в \_ССЫЛКУ\_ переменную среды, чтобы аргументы командной строки перед обработкой.

- LIB, если определено. Средство LINK использует путь LIB при поиске объекта, библиотеки или другого файла, указанного в командной строке или с помощью [/BASE](base-base-address.md) параметр. Средство также использует путь LIB для поиска PDB-файла, указанного в объекте. Переменная LIB может содержать один или несколько путей, разделенных точкой с запятой. Один путь должен указывать на подкаталог \lib папки установки Visual C++.

- PATH, если средству необходимо запускать программу CVTRES и не удается найти файл в том же каталоге, где находится LINK. (CVTRES необходима LINK для связи с RES-файлом.) Переменная PATH должна указывать на подкаталог \bin папки установки Visual C++.

- TMP для указания каталога при связывании OMF или RES-файлов.

## <a name="see-also"></a>См. также

[Ссылка на построение C/C++](c-cpp-building-reference.md)
[параметры компоновщика MSVC](linker-options.md)
[файлы определения модуля (DEF)](module-definition-dot-def-files.md)
[поддержка компоновщика для Библиотеки DLL, загружаемых с задержкой](linker-support-for-delay-loaded-dlls.md)
