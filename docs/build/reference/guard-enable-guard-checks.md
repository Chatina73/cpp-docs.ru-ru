---
title: /GUARD (Включить проверки защиты)
ms.date: 11/04/2016
ms.assetid: 72758e23-70ac-4616-94d7-d767477406d1
ms.openlocfilehash: e48921e57977cc7a1ca6a580fed78a6a2a960a02
ms.sourcegitcommit: 8105b7003b89b73b4359644ff4281e1595352dda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2019
ms.locfileid: "57818418"
---
# <a name="guard-enable-guard-checks"></a>/GUARD (Включить проверки защиты)

Указывает поддержку для проверок защиты потока управления в исполняемом образе.

## <a name="syntax"></a>Синтаксис

```
/GUARD:{CF|NO}
```

## <a name="remarks"></a>Примечания

Если задано /GUARD:CF, компоновщик изменяет заголовок файла DLL или EXE, чтобы указать поддержку для проверок среды выполнения защиты потока управления (CFG). Компоновщик также добавляет в заголовок требуемый целевой поток управления. По умолчанию параметр /GUARD:CF отключен. Его можно отключить явным образом, если задать /GUARD:NO. Для обеспечения эффективности/Guard: CF также требуется [/DYNAMICBASE (использование адрес места Придание случайного характера)](dynamicbase-use-address-space-layout-randomization.md) параметр компоновщика, которая включена по умолчанию.

При компиляции исходного кода с помощью [/Guard: CF](guard-enable-control-flow-guard.md) параметр, компилятор анализирует поток управления путем проверки всех косвенных вызовов на наличие возможных конечных адресов. Компилятор вставляет код, чтобы убедиться, что целевой адрес инструкции косвенного вызова находится в списке известных целевых адресов во время выполнения. Операционные системы, поддерживающие CFG, останавливают программу, для которой проверка в среде выполнения CFG завершается сбоем. Это позволяет усложнить для злоумышленника процесс выполнения вредоносного кода путем повреждения данных для изменения целевого объекта вызова.

Чтобы компилятор и компоновщик смогли создавать исполняемые образы с включенной функцией CFG, необходимо задать параметр /GUARD:CF. Код, компилируемый, но не скомпонованный с помощью /GUARD:CF, снижает стоимость проверки среды выполнения, но не включает защиту CFG. При указании параметра/Guard: CF для `cl` команду, чтобы компиляцию и компоновку за один шаг, компилятор передает флаг компоновщику. Когда **защиты потока управления** свойство задается в Visual Studio, параметр/Guard: CF передается компилятора и компоновщика. Когда файлы объектов или библиотеки скомпилированы отдельно, необходимо явно указать параметр в `link` команды.

### <a name="to-set-this-linker-option-in-visual-studio"></a>Настройка этого параметра компоновщика в Visual Studio

1. Откройте диалоговое окно **Окна свойств** проекта. Дополнительные сведения см. в разделе [свойств компилятора и собранной задать C++ в Visual Studio](../working-with-project-properties.md).

1. Разверните **свойства конфигурации**, **компоновщика**, **командной строки**.

1. В **Дополнительные параметры**, введите `/GUARD:CF`.

## <a name="see-also"></a>См. также

[/guard (включение защиты потока управления)](guard-enable-control-flow-guard.md)<br/>
[Справочник по компоновщику MSVC](linking.md)<br/>
[Параметры компоновщика MSVC](linker-options.md)
