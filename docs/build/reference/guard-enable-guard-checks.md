---
description: Дополнительные сведения о:/GUARD (Включение проверок защиты)
title: /GUARD (Включить проверки защиты)
ms.date: 11/04/2016
ms.assetid: 72758e23-70ac-4616-94d7-d767477406d1
ms.openlocfilehash: 4f76de815bc10f8e1203510b25b237fe8db93444
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97191723"
---
# <a name="guard-enable-guard-checks"></a>/GUARD (Включить проверки защиты)

Указывает поддержку для проверок защиты потока управления в исполняемом образе.

## <a name="syntax"></a>Синтаксис

```
/GUARD:{CF|NO}
```

## <a name="remarks"></a>Remarks

Если задано /GUARD:CF, компоновщик изменяет заголовок файла DLL или EXE, чтобы указать поддержку для проверок среды выполнения защиты потока управления (CFG). Компоновщик также добавляет в заголовок требуемый целевой поток управления. По умолчанию параметр /GUARD:CF отключен. Его можно отключить явным образом, если задать /GUARD:NO. Для вступления в силу/GUARD: CF также требуется параметр компоновщика [/DynamicBase (использовать случайное расположение макета адресного пространства)](dynamicbase-use-address-space-layout-randomization.md) , который включен по умолчанию.

При компиляции исходного кода с помощью параметра [/Guard: CF](guard-enable-control-flow-guard.md) компилятор анализирует поток управления, изучая все непрямые вызовы для возможных целевых адресов. Компилятор вставляет код, чтобы убедиться, что целевой адрес инструкции косвенного вызова находится в списке известных целевых адресов во время выполнения. Операционные системы, поддерживающие CFG, останавливают программу, для которой проверка в среде выполнения CFG завершается сбоем. Это позволяет усложнить для злоумышленника процесс выполнения вредоносного кода путем повреждения данных для изменения целевого объекта вызова.

Чтобы компилятор и компоновщик смогли создавать исполняемые образы с включенной функцией CFG, необходимо задать параметр /GUARD:CF. Код, компилируемый, но не скомпонованный с помощью /GUARD:CF, снижает стоимость проверки среды выполнения, но не включает защиту CFG. Если параметр/GUARD: CF указан для `cl` команды, компилируемой и связываемой за один шаг, компилятор передает флаг компоновщику. Если свойство **Guard потока управления** задано в Visual Studio, параметр/Guard: CF передается как компилятору, так и компоновщику. Если объектные файлы или библиотеки были скомпилированы отдельно, параметр должен быть явно указан в `link` команде.

### <a name="to-set-this-linker-option-in-visual-studio"></a>Настройка этого параметра компоновщика в Visual Studio

1. Откройте диалоговое окно **Окна свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойств сборки в Visual Studio](../working-with-project-properties.md).

1. Разверните узел **Свойства конфигурации**, **Компоновщик**, **Командная строка**.

1. В окне **Дополнительные параметры** введите `/GUARD:CF` .

## <a name="see-also"></a>См. также раздел

[/guard (включение защиты потока управления)](guard-enable-control-flow-guard.md)<br/>
[Справочник по компоновщику MSVC](linking.md)<br/>
[Параметры компоновщика MSVC](linker-options.md)
