---
description: 'Дополнительные сведения: перехватчики ошибок'
title: Обработчики сбоев
ms.date: 11/04/2016
helpviewer_keywords:
- delayed loading of DLLs, failure hooks
ms.assetid: 12bb303b-ffe6-4471-bffe-9ef4f8bb2d30
ms.openlocfilehash: a0e74e3413fc81505941dd6f4545988a0d39436f
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2020
ms.locfileid: "97200732"
---
# <a name="failure-hooks"></a>Обработчики сбоев

Ловушка сбоя включена так же, как [обработчик уведомлений](notification-hooks.md). Подпрограммы-ловушки должны возвращать подходящее значение, чтобы обработка может быть продолжена (HINSTANCE или ФАРПРОК) или 0, чтобы указать, что должно быть создано исключение.

Переменная указателя, ссылающаяся на определяемую пользователем функцию, имеет следующие вид:

```
// This is the failure hook, dliNotify = {dliFailLoadLib|dliFailGetProc}
ExternC
PfnDliHook   __pfnDliFailureHook2;
```

Структура **делайлоадинфо** содержит все соответствующие данные, необходимые для точной отчетности об ошибке, включая значение из `GetLastError` .

Если уведомление — **длифаиллоадлиб**, функция-обработчик может вернуть:

- 0, если не может справиться с ошибкой.

- ХМОДУЛЕ, если обработчик сбоев устранил проблему и загрузил саму библиотеку.

Если уведомление — **длифаилжетпрок**, функция-обработчик может вернуть:

- 0, если не может справиться с ошибкой.

- Допустимый адрес процедуры (адрес функции импорта), если обработчик сбоев успешно получает адрес.

## <a name="see-also"></a>См. также раздел

[Обработка ошибок и уведомление](error-handling-and-notification.md)
