---
description: Дополнительные сведения:/D (определения препроцессора)
title: Определения препроцессора (/D)
ms.date: 09/18/2019
f1_keywords:
- VC.Project.VCNMakeTool.PreprocessorDefinitions
- VC.Project.VCCLCompilerTool.PreprocessorDefinitions
- /d
helpviewer_keywords:
- preprocessor definition symbols
- constants, defining
- macros, compiling
- /D compiler option [C++]
- -D compiler option [C++]
- D compiler option [C++]
ms.assetid: b53fdda7-8da1-474f-8811-ba7cdcc66dba
ms.openlocfilehash: 2e94c28c094f6ea03eacdb04c452785511fb3a3f
ms.sourcegitcommit: d531c567c268b676b44abbc8416ba7e20d22044b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2021
ms.locfileid: "107539661"
---
# <a name="d-preprocessor-definitions"></a>Определения препроцессора (/D)

Определяет символ предварительной обработки для исходного файла.

## <a name="syntax"></a>Синтаксис

> **`/D`**\[]_имя_ \[ `=` &vert; `#` \[ {  &vert; *номер* строки}]] \
> **`/D`**\[] `"` _имя_ \[ `=` &vert; `#` \[ {  &vert; *номер* строки}]]`"`

## <a name="remarks"></a>Комментарии

Этот символ можно использовать совместно с `#if` или `#ifdef` для условной компиляции исходного кода. Определение символа действует до тех пор, пока оно не будет переопределено в коде или не определено в коде `#undef` директивой.

**`/D`** имеет тот же результат, что и `#define` директива в начале файла исходного кода. Разница заключается в том, что **`/D`** в командной строке размещаются кавычки, и `#define` директива сохраняет их. Между **`/D`** символом и может быть пробел. Между символом и знаком равенства не должно быть пробелов либо между знаком равенства и любым присвоенным значением.

По умолчанию значение, связанное с символом, равно 1. Например, выражение `/D name` будет эквивалентно `/D name=1`. В примере в конце этой статьи определение отображается `TEST` для печати `1` .

При компиляции с помощью функции `/D name=` *имя* символа не имеет связанного значения. Хотя символа все равно можно использовать для условной компиляции кода, в остальных случаях использование символа будет бесполезным. В примере, если компиляция выполняется с помощью `/DTEST=` , возникает ошибка. Это поведение напоминает использование `#define` со значением или без значения.

**`/D`** Параметр не поддерживает определения макросов, сходных с функциями. Для вставки определений, которые не могут быть определены в командной строке, следует использовать параметр компилятора [ `/FI` (имя принудительно включаемого файла)](fi-name-forced-include-file.md) .

В **`/D`** командной строке можно использовать несколько раз для определения дополнительных символов. Если один и тот же символ определен более одного раза, используется последнее определение.

Эта команда определяет символ DEBUG в файле TEST.c:

```cmd
CL /DDEBUG TEST.C
```

Эта команда удаляет все вхождения ключевого слова **`__far`** в Test. c:

```cmd
CL /D __far= TEST.C
```

Переменной среды **CL** не может быть присвоена строка, содержащая знак равенства. Для **`/D`** совместного использования с **`CL`** переменной среды необходимо указать знак решетки ( `#` ) вместо знака равенства:

```cmd
SET CL=/DTEST#0
```

При определении символа предварительной обработки в командной строке необходимо учитывать правила синтаксического разбора компилятора и правила синтаксического разбора оболочки. Например, чтобы определить в программе символ препроцессора в процентах ( `%` ), укажите в командной строке два символа процента ( `%%` ). Если указать только один, будет выдаваться ошибка синтаксического анализа.

```cmd
CL /DTEST=%% TEST.C
```

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Окна свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойств сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите   >  страницу свойств препроцессора свойства конфигурации **C/C++**  >   .

1. Откройте раскрывающееся меню свойства **определения препроцессора** и выберите **изменить**.

1. В диалоговом окне **определения препроцессора** добавьте, измените или удалите одно или несколько определений, по одному на строку. Выберите **ОК** для сохранения внесенных изменений.

   В определениях, указанных здесь, не нужно включать префикс параметра "/D". На странице свойств определения разделяются точкой с запятой ( `;` ).

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.PreprocessorDefinitions%2A>.

## <a name="example"></a>Пример

```cpp
// cpp_D_compiler_option.cpp
// compile with: cl /EHsc /DTEST cpp_D_compiler_option.cpp
#include <stdio.h>

int main( )
{
#ifdef TEST
    printf_s("TEST defined %d\n", TEST);
#else
    printf_s("TEST not defined\n");
#endif
}
```

```Output
TEST defined 1
```

## <a name="see-also"></a>См. также раздел

[Параметры компилятора КОМПИЛЯТОРОМ MSVC](compiler-options.md)\
[Синтаксис командной строки компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)\
[`/FI` (Имя принудительно включаемого файла)](fi-name-forced-include-file.md)\
[`/U`, `/u` (Отменить определение символов)](u-u-undefine-symbols.md)\
[`#undef` Директива (C/C++)](../../preprocessor/hash-undef-directive-c-cpp.md)\
[`#define` Директива (C/C++)](../../preprocessor/hash-define-directive-c-cpp.md)
