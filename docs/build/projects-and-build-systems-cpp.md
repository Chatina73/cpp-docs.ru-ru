---
title: Системы сборки и проекты C/C++ в Visual Studio
ms.description: Use Visual Studio to compile and build C++ projects for Windows, ARM or Linux based on any project system.
ms.date: 07/17/2019
helpviewer_keywords:
- builds [C++]
- C++ projects, building
- projects [C++], building
- builds [C++], options
- C++, build options
ms.assetid: fa6ed4ff-334a-4d99-b5e2-a1f83d2b3008
ms.topic: overview
ms.openlocfilehash: 3d82ac4569e06a4472047a79da60032ad2db43ca
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80078473"
---
# <a name="cc-projects-and-build-systems-in-visual-studio"></a>Системы сборки и проекты C/C++ в Visual Studio

Visual Studio можно использовать для изменения, компиляции и сборки любой базы кода C++ с полной поддержкой IntelliSense без преобразования этого кода в проект Visual Studio или компиляции с помощью набора инструментов MSVC. Например, можно изменить кроссплатформенный проект CMake в Visual Studio на компьютере Windows, а затем скомпилировать его для Linux с помощью g++ на удаленном компьютере Linux.

## <a name="c-compilation"></a>Компиляция C++

*Сборка* программы C++ — это компиляция исходного кода из одного или нескольких файлов и последующее связывание этих файлов в исполняемый файл (EXE), библиотеку динамической загрузки (DLL) или статическую библиотеку (LIB).

Процесс базовой компиляции C++ состоит из трех основных этапов.

- Препроцессор C++ преобразует все определения #директив и макросов в каждом исходном файле. При этом создается *единица трансляции*.
- Компилятор C++ компилирует каждую единицу трансляции в объектные файлы (OBJ), применяя заданные параметры компилятора.
- *Компоновщик* объединяет объектные файлы в один исполняемый файл, применяя заданные параметры компоновщика.

## <a name="the-msvc-toolset"></a>Набор инструментов MSVC

В набор инструментов компилятора MSVC (также называемого цепочкой инструментов или средствами сборки) входят компилятор, компоновщик, стандартные библиотеки и связанные служебные программы Microsoft C++. Они включены в состав в Visual Studio. Этот набор инструментов можно бесплатно скачать со страницы [средств сборки для Visual Studio 2019](https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019) и использовать в качестве автономного пакета.

Вы можете создавать простые программы, вызывая компилятор MSVC (cl.exe) непосредственно из командной строки. Следующая команда принимает один файл исходного кода и вызывает cl.exe для создания исполняемого файла с именем *hello.exe*:

```cmd
cl /EHsc hello.cpp
```

Обратите внимание, что здесь компилятор (cl.exe) автоматически вызывает препроцессор и компоновщик C++ для создания окончательного выходного файла.  Дополнительные сведения см. в статье [Сборка из командной строки](building-on-the-command-line.md).

## <a name="build-systems-and-projects"></a>Системы сборки и проекты

Большинство реальных программ используют некую *систему сборки* для управления сложностями компиляции нескольких исходных файлов для нескольких конфигураций (т. е. для отладки и выпуска), нескольких платформ (x86, x64, ARM и т. д.), настраиваемых шагов сборки и даже нескольких исполняемых файлов, которые должны быть скомпилированы в определенном порядке. Вы выполняете настройки в файле конфигурации сборки, а система сборки принимает этот файл в качестве входных данных перед вызовом компилятора. Набор файлов исходного кода и файлов конфигурации сборки, необходимых для создания исполняемого файла, называется *проектом*.

Далее приведены различные варианты для проектов Visual Studio — C++.

- Создайте проект Visual Studio с помощью интегрированной среды разработки Visual Studio и настройте его, используя страницы свойств. Проекты Visual Studio создают программы, работающие в Windows. Общие сведения см. в статье [Компиляция и сборка](/visualstudio/ide/compiling-and-building-in-visual-studio) в документации по Visual Studio.

- Откройте папку, содержащую файл CMakeLists.txt. Поддержка CMake интегрирована в Visual Studio. Интегрированную среду разработки можно использовать для редактирования, тестирования и отладки без изменения файлов CMake. При этом вы можете работать в том же проекте CMake, что и другие пользователи, которые могут использовать другие редакторы. Поэтому CMake является рекомендуемым вариантом для кроссплатформенной разработки. Дополнительные сведения см. в статье [Проекты CMake](cmake-projects-in-visual-studio.md).

- Откройте свободную папку исходных файлов, где нет файла проекта. Для создания файлов в Visual Studio будет использоваться эвристика. Это простой способ компиляции и запуска небольших консольных приложений. Дополнительные сведения см. в статье [Проекты "Открыть папку" для C++](open-folder-projects-cpp.md).

- Откройте папку, содержащую файл makefile или любой другой файл конфигурации системы сборки. Вы можете настроить Visual Studio для вызова любых произвольных команд сборки, добавив файлы JSON в папку. Дополнительные сведения см. в статье [Проекты "Открыть папку" для C++](open-folder-projects-cpp.md).

- Откройте файл makefile Windows в Visual Studio. Дополнительные сведения см. в разделе [Справочник по программе NMAKE](reference/nmake-reference.md).

## <a name="msbuild-from-the-command-line"></a>Использование MSBuild из командной строки

Вы можете вызвать систему MSBuild из командной строки, передав ей VCXPROJ-файл вместе с параметрами командной строки. Для реализации этого подхода требуется хорошее понимание MSBuild, а использовать его рекомендуется только в случае крайней необходимости. Дополнительные сведения см. в разделе [MSBuild](msbuild-visual-cpp.md).

## <a name="in-this-section"></a>В этом разделе

[Проекты Visual Studio](creating-and-managing-visual-cpp-projects.md). Создание, настройка и сборка проектов C++ в Visual Studio с помощью собственной системы сборки (MSBuild).

[Проекты CMake](cmake-projects-in-visual-studio.md). Создание, сборка и развертывание проектов CMake в Visual Studio.

[Проекты "Открыть папку"](open-folder-projects-cpp.md). Создание, сборка и развертывание проектов C++ в Visual Studio с помощью любой произвольной системы сборки или без нее .

[Сборки выпуска](release-builds.md). Создание и устранение неполадок оптимизированных сборок выпуска для развертывания в системах конечных пользователей.

[Использование набора средств MSVC из командной строки](building-on-the-command-line.md)<br/>
Описание использования компилятора C/C++ и средств сборки непосредственно из командной строки, а не с помощью интегрированной среды разработки Visual Studio.

[Создание библиотек DLL в Visual Studio](dlls-in-visual-cpp.md). Создание, отладка и развертывание библиотек DLL (общих библиотек) C/C++ в Visual Studio.

[Пошаговое руководство: Создание и использование статической библиотеки](walkthrough-creating-and-using-a-static-library-cpp.md). Создание двоичного файла LIB.

[Создание изолированных приложений и параллельных сборок C/C++](building-c-cpp-isolated-applications-and-side-by-side-assemblies.md). Описание модели развертывания для классических приложений Windows, основанную на концепции изолированных приложений и параллельных сборок.

[Настройка проектов C++ для 64-разрядных целевых платформ с архитектурой x64](configuring-programs-for-64-bit-visual-cpp.md). Использование средств сборки MSVC для работы с оборудованием для 64-разрядных платформ с архитектурой x64C.

[Настройка проектов C++ для процессоров ARM](configuring-programs-for-arm-processors-visual-cpp.md). Использование средств сборки MSVC для работы с оборудованием ARM

[Оптимизация кода](optimizing-your-code.md). Оптимизация кода различными способами, включая программную оптимизацию.

[Настройка программ для Windows XP](configuring-programs-for-windows-xp.md). Использование средств сборки MSVC для работы с Windows XP.

[Справочные сведения о сборке C/C++](reference/c-cpp-building-reference.md)<br/>
Содержит ссылки на справочные статьи о сборке программ на C++, о параметрах компилятора и компоновщика, а также о различных средствах сборки.
