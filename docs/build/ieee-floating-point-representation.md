---
title: IEEE-представление с плавающей точкой
ms.date: 05/06/2019
helpviewer_keywords:
- float keyword
- real*8 value
- floating-point numbers, IEEE representation
- double data type, floating-point representation
- IEEE floating point representation
- real*10 value
- long double
- real*4 value
ms.assetid: 537833e8-fe05-49fc-8169-55fd0314b195
ms.openlocfilehash: bb8523256c05479b303dec66ca79caa28e7cda03
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80169816"
---
# <a name="ieee-floating-point-representation"></a>IEEE-представление с плавающей точкой

Microsoft C++ (компилятором MSVC) согласуется с числовыми стандартами IEEE. Стандарт IEEE-754 описывает форматы с плавающей запятой, способ представления реальных чисел в оборудовании. Существует по крайней мере пять внутренних форматов для чисел с плавающей запятой, которые могут быть представлены в оборудовании, используемом компилятором КОМПИЛЯТОРОМ MSVC, однако компилятор использует только два из них. В КОМПИЛЯТОРОМ MSVC используются форматы с *одинарной точностью* (4 байта) и *двойной точностью* (8 байт). Одинарная точность объявляется с помощью ключевого слова **float**. Двойной точности объявляется с помощью ключевого слова **Double**. Стандарт IEEE также определяет форматы с *половинной точностью* (2 байта) и *четверной точностью* (16 байт), а также формат с *удвоенной точностью* (10 байт), который некоторые C и C++ компиляторы реализуются как тип данных **long double** . В компиляторе КОМПИЛЯТОРОМ MSVC тип данных **long double** обрабатывается как отдельный тип, но тип хранилища сопоставляется с **Double**. Однако, встроенная поддержка и язык ассемблера для вычислений, использующих другие форматы, включая формат с удвоенной точностью (10 байт), поддерживаемый оборудованием.

Значения сохраняются следующим образом:

|Значение|Хранится как|
|-----------|---------------|
|одиночная точность|бит подписи, 8-разрядная экспонента, 23-разрядная значащим|
|Двойная точность|бит подписи, 11-разрядный показатель степени, 52-разрядный значащим|
|Двойная-Расширенная точность|бит подписи, 15-разрядный показатель степени, 64-разрядный значащим|

В форматах с одиночной точностью и двойной точностью в дробной части предполагается ведущий 1, именуемый *значащим* (и иногда называемый *мантиссаом*), который не хранится в памяти, поэтому сигнификандс — это 24 или 53 бит, несмотря на то, что сохраняются только 23-или 52-биты. Формат двойной точности, в действительности, сохраняет этот бит.

Показатель степени смещен на половину их возможного значения. Это означает, что вы вычитаете этот сдвиг из хранимой степени, чтобы получить фактическую показатель степени. Если хранимая степень экспоненты меньше, чем смещение, то фактически это отрицательная степень.

Показатели степени смещены следующим образом:

|Exponent|Смещено на|
|--------------|---------------|
|8-разрядная (одиночная точность)|127|
|11-разрядная (двойная точность)|1023|
|15-разрядная (двойная-Расширенная точность)|16383|

Эти экспоненты не являются степенями десяти; они являются степенью двойки. Это значит, что 8-разрядные хранимые экспоненты могут находиться в диапазоне от-127 до 127, где 0 – 254. Значение 2<sup>127</sup> приблизительно эквивалентно 10<sup>38</sup>, то есть фактическим предельным значением с одинарной точностью.

Значащим хранится в виде двоичной части формы 1.XXX.... Эта дробь имеет значение, большее или равное 1 и меньшее 2. Обратите внимание, что реальные числа всегда хранятся в *нормализованной форме*. то есть значащим смещается влево так, что старший бит значащим всегда равен 1. Поскольку этот бит всегда равен 1, предполагается (не хранится) в форматах с одинарной точностью и двойной точностью. Предполагается, что двоичная (не десятичная) точка находится справа от первого.

Ниже приведен формат для различных размеров.

|Формат|байт 1|байт 2|байт 3|байт 4|...|Byte n|
|------------|------------|------------|------------|------------|---------|------------|
|одиночная точность| `SXXXXXXX`|`XMMMMMMM`|`MMMMMMMM`|`MMMMMMMM`|||
|Двойная точность|`SXXXXXXX`|`XXXXMMMM`|`MMMMMMMM`|`MMMMMMMM`|...|`MMMMMMMM`|
|Двойная-Расширенная точность|`SXXXXXXX`|`XXXXXXXX`|`1MMMMMMM`|`MMMMMMMM`|...|`MMMMMMMM`|

`S` представляет бит знака, `X`являются битовой степенью смещения, а `M`— значащим битами. Обратите внимание, что крайний левый бит предполагается в форматах с одиночной точностью и двойной точностью, но он представлен как "1" в байтовом 3 формата с двойной точностью.

Чтобы правильно сдвинуть двоичную точку, сначала нужно растянуть экспоненту, а затем переместить двоичную точку вправо или влево на соответствующее количество битов.

## <a name="special-values"></a>Специальные значения

Форматы с плавающей запятой включают некоторые значения, которые обрабатываются особым образом.

### <a name="zero"></a>Ноль

Ноль не может быть нормализован, что делает его недоступным в нормализованной форме значения с одинарной точностью или двойной точностью. Специальный битовый шаблон с нулями представляет 0. Можно также представить значение-0 в виде нуля с заданным битом знака, но-0 и 0 всегда сравнимы как равные.

### <a name="infinities"></a>Бесконечности действительных чисел

Значения + ∞ и − ∞ представлены экспонентой всех и значащим всех нулей. Положительные и отрицательные бесконечные значения можно представить с помощью знака bit.

### <a name="subnormals"></a>Поднормали

Можно представить числа меньшей величины, чем наименьший нормализованный номер. Эти числа называются *поднормальными* или *нормальными* числами. Если показатель степени равен нулю и значащим имеет ненулевое значение, то неявный начальный бит значащим считается равным нулю, а не одному. Точность числа поднормалей снижается, так как число ведущих нулей в значащим продолжается.

### <a name="nan---not-a-number"></a>NaN — не число

Можно представить значения, которые не являются реальными числами, например 0/0, в формате IEEE с плавающей запятой. Значение этого типа называется *NaN*. Значение NaN представляется экспонентой всех и ненулевой значащим. Существует два вида значений NaN, *quiet* значений NaN или кнанс, а также *сигнализация* значений NaN или снанс. В тихом значений NaN в значащим, и они обычно распространяются с помощью выражения. Они представляют неопределенное значение, например результат деления на бесконечность или умножения бесконечности на ноль. сигнализация значений NaN в значащим в начале нуля. Они используются для недопустимых операций, чтобы сообщить об исключении оборудования с плавающей точкой.

## <a name="examples"></a>Примеры

Ниже приведены некоторые примеры в формате одиночной точности.

- Для значения 2 бит знака равен нулю, а сохраненное значение экспоненты — 128, или 1000 0000 в двоичном виде, который равен 127 плюс 1. Сохраненный двоичный значащим имеет значение (1.) 000 0000 0000 0000 0000 0000, которое содержит неявные начальные значения 1 и binary, поэтому фактический значащим является единицей.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |2|1 * 2<sup>1</sup>|0100 0000 0000 0000 0000 0000 0000 0000|0x40000000|

- Значение-2. То же, что и + 2, за исключением того, что задан бит знака. Это справедливо для отрицательного числа всех чисел с плавающей запятой в формате IEEE.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |-2|-1 * 2<sup>1</sup>|1100 0000 0000 0000 0000 0000 0000 0000|0xC0000000|

- Значение 4. Тот же значащим, показатель степени увеличивается на единицу (смещенное значение 129 или 100 0000 1 в двоичном формате).

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |4|1 * 2<sup>2</sup>|0100 0000 1000 0000 0000 0000 0000 0000|0x40800000|

- Значение 6. Та же экспонента, значащим больше половины — это (1.) 100 0000... 0000 0000, что, поскольку это двоичная дробь, имеет значение 1 1/2, так как значения дробных разрядов равны 1/2, 1/4, 1/8 и т. д.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |6|1,5<sup>* 2</sup>|0100 0000 1100 0000 0000 0000 0000 0000|0x40C00000|

- Значение 1. Те же значащим, что и у других степеней двух, смещенное значение экспоненты меньше двух в 127 или 011 1111 1 в двоичном виде.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |1|1 * 2<sup>0</sup>|0011 1111 1000 0000 0000 0000 0000 0000|0x3F800000|

- Значение 0,75. Смещенный показатель степени равен 126, 011 1111 0 в двоичном формате, а значащим имеет значение (1.) 100 0000... 0000 0000, то есть 1 1/2.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |0.75|1,5 * 2<sup>– 1</sup>|0011 1111 0100 0000 0000 0000 0000 0000|0x3F400000|

- Значение 2,5. Точно так же, как и два, за исключением того, что в значащим установлен бит, представляющий 1/4.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |2.5|1,25<sup>* 2</sup>|0100 0000 0010 0000 0000 0000 0000 0000|0x40200000|

- 1/10 — это повторяющаяся часть в двоичном формате. Значащим — это просто Шай 1,6, а смещенная степень говорит о том, что 1,6 должен быть разделен на 16 (это 011 1101 1 в двоичном файле, т. е. 123 в десятичном формате). Истинная экспонента — 123-127 =-4. Это означает, что коэффициент, с которым умножается, равен 2<sup>-4</sup> = 1/16. Обратите внимание, что хранимая значащим округляется в течение последнего бита — попытка представить непредставляемое число как можно точнее. (Причина, по которой 1/10 и 1/100 не является полностью представленной в двоичном виде, аналогична причине, по которой 1/3 не будет полностью представлен в десятичном формате.)

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |0,1|1,6 * 2<sup>– 4</sup>|0011 1101 1100 1100 1100 1100 1100 1101|0x3DCCCCCD|

- Ноль является особым случаем, которая использует формулу для минимально возможного недействительного положительного значения, которое равно нулю.

   |Значение|Формула|Двоичное представление|Шестнадцатеричный|
   |-|-|-|-|
   |0|1 * 2<sup>— 128</sup>|0000 0000 0000 0000 0000 0000 0000 0000|0x00000000|

## <a name="see-also"></a>См. также раздел

[Почему может уменьшиться точность чисел с плавающей запятой](why-floating-point-numbers-may-lose-precision.md)
