---
title: Оптимизация кода
ms.date: 05/06/2019
helpviewer_keywords:
- performance, optimizing code
- optimization
- cl.exe compiler, performance
- optimization, C++ code
- code, optimizing
- performance, compiler
ms.openlocfilehash: 00356cf50ca8e50c80e8a1142adf654816490c9b
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80078497"
---
# <a name="optimizing-your-code"></a>Оптимизация кода

Оптимизируя исполняемый файл, можно добиться баланса между быстрым выполнением и небольшим размером кода. В этом разделе обсуждаются механизмы, предоставляемые Visual Studio для оптимизации кода.

## <a name="language-features"></a>Возможности языка

В следующих разделах описываются некоторые функции оптимизации в C/C++ языке.

[Директивы pragma и ключевые слова оптимизации](optimization-pragmas-and-keywords.md) \
Список ключевых слов и директив pragma, которые можно использовать в коде для повышения производительности.

[Параметры компилятора, перечисленные по категориям](reference/compiler-options-listed-by-category.md) \
Список параметров компилятора **/o** , которые влияют на скорость выполнения или размер кода.

[Декларатор ссылки rvalue: & &](../cpp/rvalue-reference-declarator-amp-amp.md) \
Ссылки rvalue поддерживают реализацию *семантики перемещения*. Если для реализации библиотек шаблонов используются семантики перемещения, производительность приложений, использующих эти шаблоны, может значительно повыситься.

### <a name="the-optimize-pragma"></a>Директива pragma optimize

Если оптимизированный раздел кода вызывает ошибки или замедление, можно использовать директиву pragma [optimize](../preprocessor/optimize.md) , чтобы отключить оптимизацию для этого раздела.

Заключите код между двумя директивами pragma, как показано ниже:

```cpp
#pragma optimize("", off)
// some code here
#pragma optimize("", on)
```

## <a name="programming-practices"></a>Рекомендации по программированию

При компиляции кода с оптимизацией можно заметить дополнительные предупреждающие сообщения. Такое поведение является ожидаемым, так как некоторые предупреждения относятся только к оптимизированному коду. При возникновении этих предупреждений можно избежать многих проблем оптимизации.

Парадоксикалли. Оптимизация программы для ускорения может привести к снижению скорости выполнения кода. Это обусловлено тем, что некоторые оптимизации скорости увеличивают размер кода. Например, функции встраивания устраняют издержки, вызванные вызовами функций. Однако встраивание слишком большого объема кода может сделать программу настолько большой, что число ошибок страниц виртуальной памяти увеличится. Таким образом, скорость, полученная при исключении вызовов функций, может быть потеряна при обмене памятью.

В следующих разделах рассматриваются оптимальные методы программирования.

[Советы по улучшению критичного по времени кода](tips-for-improving-time-critical-code.md) \
Улучшенные методы программирования могут повысить производительность. В этом разделе предлагаются приемы кодирования, которые помогут убедиться в том, что критически важные для времени части кода выполняются удовлетворительно.

Рекомендации по [оптимизации](optimization-best-practices.md) \
Общие рекомендации относительно оптимальной оптимизации приложения.

## <a name="debugging-optimized-code"></a>Отладка оптимизированного кода

Поскольку оптимизация может изменить код, созданный компилятором, рекомендуется выполнить отладку приложения и оценить его производительность, а затем оптимизировать код.

В следующих разделах содержатся сведения об отладке сборок выпуска.

- [Отладка в Visual Studio](/visualstudio/debugger/debugging-in-visual-studio)

- [Практическое руководство. Отладка оптимизированного кода](/visualstudio/debugger/how-to-debug-optimized-code)

- [Почему может уменьшиться точность чисел с плавающей запятой](why-floating-point-numbers-may-lose-precision.md)

В следующих разделах содержатся сведения о том, как оптимизировать создание, загрузку и выполнение кода.

- [Улучшение производительности компилятора](improving-compiler-throughput.md)

- [При использовании имен функций без скобок () код не создается](using-function-name-without-parens-produces-no-code.md)

- [Оптимизация встроенного кода на языке ассемблера](../assembler/inline/optimizing-inline-assembly.md)

- [Настройка оптимизации компилятора для проекта ATL](../atl/reference/specifying-compiler-optimization-for-an-atl-project.md)

- [Какие методы оптимизации следует использовать для повышения производительности клиентского приложения при загрузке?](../build/dll-frequently-asked-questions.md#mfc_optimization)

## <a name="in-this-section"></a>В этом разделе

[Директивы pragma и ключевые слова оптимизации](optimization-pragmas-and-keywords.md) \
[Повышение пропускной способности компилятора](improving-compiler-throughput.md) \
[Почему числа с плавающей запятой могут потерять точность](why-floating-point-numbers-may-lose-precision.md) \
 \ [представления с плавающей запятой IEEE](ieee-floating-point-representation.md)
[Советы по улучшению критичного по времени кода](tips-for-improving-time-critical-code.md) \
При [использовании имени функции без () код не создается](using-function-name-without-parens-produces-no-code.md) \
Рекомендации по [оптимизации](optimization-best-practices.md) \
[Оптимизация по профилям](profile-guided-optimizations.md) \
[Переменные среды для профильной оптимизации](environment-variables-for-profile-guided-optimizations.md) \
[Пгоаутосвип](pgoautosweep.md) \
 \ [pgomgr](pgomgr.md)
[pgosweep](pgosweep.md) \
[Практическое руководство. Слияние нескольких профилей PGO в единый профиль](how-to-merge-multiple-pgo-profiles-into-a-single-profile.md)

## <a name="see-also"></a>См. также:

[Справочные сведения о сборке C/C++](reference/c-cpp-building-reference.md)
