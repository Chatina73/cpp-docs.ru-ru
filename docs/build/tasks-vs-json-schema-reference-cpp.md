---
title: Справочник по схеме Tasks. vs.C++JSON ()
ms.date: 08/20/2019
helpviewer_keywords:
- tasks.vs.json file [C++]
ms.assetid: abd1985e-3717-4338-9e80-869db5435175
ms.openlocfilehash: 1e533babafad554e8f7413d2bc1a88933a6eca42
ms.sourcegitcommit: ace42fa67e704d56d03c03745b0b17d2a5afeba4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69975915"
---
# <a name="tasksvsjson-schema-reference-c"></a>Справочник по схеме Tasks. vs.C++JSON ()

Чтобы сообщить Visual Studio о том, как создать исходный код в проекте открытой папки, добавьте файл *tasks. vs. JSON* . Здесь можно определить любую произвольную задачу, а затем вызвать ее из контекстного меню **Обозреватель решений** . Проекты CMak не используют этот файл, так как все команды сборки указаны в *CMakeLists. txt*. Для систем сборки, отличных от CMak, *tasks. vs. JSON* , можно указать команды сборки и вызвать скрипты сборки. Общие сведения об использовании *tasks. vs. JSON*см. в разделе [Настройка задач сборки и отладки для разработки "Открытие папки"](/visualstudio/ide/customize-build-and-debug-tasks-in-visual-studio).

Задача `type` имеет свойство, которое может иметь одно из четырех значений: `default`, `launch`, `remote`или `msbuild`. Большинство задач следует использовать `launch` , если не требуется удаленное подключение.

## <a name="default-properties"></a>Свойства по умолчанию

Свойства по умолчанию доступны для всех типов задач.

||||
|-|-|-|
|**Property**|**Type**|**Описание**|
|`taskLabel`|string| (Обязательно). Указывает метку задачи, используемую в пользовательском интерфейсе.|
|`appliesTo`|string| (Обязательно). Указывает, на какие файлы может быть выполнена команда. Поддерживается использование подстановочных знаков, например: " *", "* . cpp", "/*. txt"|
|`contextType`|string| Допустимые значения: "Custom", "Build", "Clean", "Rebuild". Определяет, где в контекстном меню будет отображаться задача. По умолчанию используется значение Custom.|
|`output`|string| Указывает выходной тег для задачи.|
|`inheritEnvironments`|array| Задает набор переменных среды, унаследованных из нескольких источников. Вы можете определить переменные в таких файлах, как *CMakeSettings. JSON* или *CppProperties. JSON* , и сделать их доступными для контекста задачи.|
|`passEnvVars`|boolean| Указывает, следует ли включать дополнительные переменные среды в контекст задачи. Эти переменные отличаются от тех, которые определены с помощью `envVars` свойства. Значение по умолчанию — true.|

## <a name="launch-properties"></a>Свойства запуска

Если тип задачи — `launch`, доступны следующие свойства:

||||
|-|-|-|
|**Property**|**Type**|**Описание**|
|`command`|string| Указывает полный путь к запускаемому процессу или скрипту.|
|`args`|array| Задает разделенный запятыми список аргументов, передаваемых команде.|
|`launchOption`|string| Допустимые значения: "None", "ContinueOnError", "IgnoreError". Указывает, как продолжить выполнение команды при возникновении ошибок.|
|`workingDirectory`|string| Указывает каталог, в котором будет выполняться команда. По умолчанию используется текущий рабочий каталог проекта.|
|`customLaunchCommand`|string| Задает глобальную настройку области, применяемую перед выполнением команды. Полезно для задания переменных среды, таких как% PATH%.|
|`customLaunchCommandArgs`|string| Указывает аргументы для Кустомлаунчкомманд. (Требуется `customLaunchCommand`.)|
 `env`| Указывает список значений ключа для настраиваемых переменных среды. Например, "myEnv": "мивал"|
|`commands`|array| Указывает список команд для вызова по порядку.|

### <a name="example"></a>Пример

Следующие задачи вызывают командлет *make. exe* , если в папке содержится файл makefile, а `Mingw64` среда определена в *CppProperties. JSON*, как показано в справочнике по [схеме CppProperties. JSON](cppproperties-schema-reference.md#user_defined_environments):

```json
 {
  "version": "0.2.1",
  "tasks": [
    {
      "taskLabel": "gcc make",
      "appliesTo": "*.cpp",
      "type": "launch",
      "contextType": "custom",
      "inheritEnvironments": [
        "Mingw64"
      ],
      "command": "make"
    },
    {
      "taskLabel": "gcc clean",
      "appliesTo": "*.cpp",
      "type": "launch",
      "contextType": "custom",
      "inheritEnvironments": [
        "Mingw64"
      ],
      "command": "make",
      "args": ["clean"]
    }
  ]
}
```

Эти задачи можно вызвать из контекстного меню при щелчке файла *cpp* правой кнопкой мыши в **Обозреватель решений**.

## <a name="remote-properties"></a>Удаленные свойства

Удаленные задачи включаются при установке разработки Linux с C++ рабочей нагрузкой и добавлении подключения к удаленному компьютеру с помощью диспетчера соединений Visual Studio. Удаленная задача запускает команды в удаленной системе и также может копировать в нее файлы.

Если тип задачи — `remote`, доступны следующие свойства:

||||
|-|-|-|
|**Property**|**Type**|**Описание**|
|`remoteMachineName`|string|Имя удаленного компьютера. Должно соответствовать имени компьютера в **диспетчере соединений**.|
|`command`|string|Команда для отправки на удаленный компьютер. По умолчанию команды выполняются в каталоге $HOME в удаленной системе.|
|`remoteWorkingDirectory`|string|Текущий рабочий каталог на удаленном компьютере.|
|`localCopyDirectory`|string|Локальный каталог для копирования на удаленный компьютер. По умолчанию используется текущий рабочий каталог.|
|`remoteCopyDirectory`|string|Каталог на удаленном компьютере `localCopyDirectory` , куда копируется.|
|`remoteCopyMethod`|string| Метод, используемый для копирования. Допустимые значения: "None", "SFTP", "rsync". rsync рекомендуется использовать для больших проектов.|
|`remoteCopySourcesOutputVerbosity`|string| Допустимые значения: "Обычная", "verbose", "Диагностика".|
|`rsyncCommandArgs`|string|По умолчанию используется значение "-t--Delete".|
|`remoteCopyExclusionList`|array|Разделенный запятыми список файлов `localCopyDirectory` в для исключения из операций копирования.|

### <a name="example"></a>Пример

Следующая задача появится в контекстном меню при щелчке правой кнопкой мыши на странице *Main. cpp* в **Обозреватель решений**. Это зависит от удаленного компьютера, вызываемого `ubuntu` в **диспетчере соединений**. Задача копирует текущую открытую папку в Visual Studio `sample` в каталог на удаленном компьютере, а затем вызывает g + + для сборки программы.

```json
{
  "version": "0.2.1",
  "tasks": [
    {
      "taskLabel": "Build",
      "appliesTo": "main.cpp",
      "type": "remote",
      "contextType": "build",
      "command": "g++ main.cpp",
      "remoteMachineName": "ubuntu",
      "remoteCopyDirectory": "~/sample",
      "remoteCopyMethod": "sftp",
      "remoteWorkingDirectory": "~/sample/hello",
      "remoteCopySourcesOutputVerbosity": "Verbose"
    }
  ]
}
```

## <a name="msbuild-properties"></a>свойства MSBuild

Если тип задачи — `msbuild`, доступны следующие свойства:

||||
|-|-|-|
|**Property**|**Type**|**Описание**|
|`verbosity`|string| Указывает выходные значения Вербоситялловед сборки проекта MSBuild: "Quiet", "минимальный", "Стандартный", "подробный", "диагностический".|
|`toolsVersion`|string| Указывает версию набора инструментов для сборки проекта, например "2,0", "3,5", "4,0", "Current". По умолчанию используется значение Current.|
|`globalProperties`|object|Указывает список ключевых значений глобальных свойств для передачи в проект, например "Configuration": "Release"|
|`properties`|object| Указывает список "ключ-значение" только дополнительных свойств проекта.|
|`targets`|array| Указывает список целевых объектов для вызова по порядку в проекте. Если значение не указано, используется целевой объект проекта по умолчанию.|
