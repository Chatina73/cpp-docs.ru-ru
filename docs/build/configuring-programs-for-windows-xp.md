---
title: Настройка программ для Windows XP
ms.date: 05/16/2019
ms.assetid: 1e4487b3-d815-4123-878b-5718b22f0fd5
ms.openlocfilehash: 6c94c6a66d0f22b8707012856a65df4b19965acb
ms.sourcegitcommit: a10c9390413978d36b8096b684d5ed4cf1553bc8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2019
ms.locfileid: "65837136"
---
# <a name="configuring-programs-for-windows-xp"></a>Настройка программ для Windows XP

Так как Visual Studio поддерживает наборы инструментов для нескольких платформ, вы можете осуществлять разработку для операционных систем и библиотек времени выполнения, которые не поддерживаются набором инструментов по умолчанию. Например, путем переключения набора инструментов платформы вы можете использовать усовершенствования C++ 11, C++ 14 и C++ 17, поддерживаемые компилятором MSVC, в Visual Studio, чтобы создавать приложения для Windows XP и Windows Server 2003. Вы также можете применять наборы инструментов для старых платформ, чтобы обеспечивать совместимость прежнего кода на двоичном уровне, пользуясь при этом последними возможностями интегрированной среды разработки Visual Studio.

Visual Studio 2019 и более поздних версий не поддерживает создание кода для Windows XP с помощью набора инструментов v142. Поддержка разработки Windows XP с помощью набора инструментов v141, которая реализована в Visual Studio 2017, доступна как дополнительный компонент в установщике Visual Studio.

## <a name="install-the-windows-xp-platform-toolset"></a>Установка набора инструментов платформы Windows XP

Чтобы получить набор инструментов платформы и компоненты для Windows XP и Windows Server 2003 в Visual Studio 2017, запустите Visual Studio Installer. При первоначальной установке Visual Studio или при выборе пункта **Изменить** для изменения существующей установки убедитесь, что выбрана рабочая нагрузка **Разработка классических приложений на C++** . В списке дополнительных компонентов для этой рабочей нагрузки выберите **Поддержка Windows XP для C++** , а затем **Установить** или **Изменить**.

## <a name="windows-xp-targeting-experience"></a>Нацеливание на Windows XP

Набор инструментов для платформы Windows XP, включенный в Visual Studio, является версией пакета SDK для Windows 7, но использует текущий компилятор C++. Он также присваивает свойствам проекта соответствующие значения по умолчанию. Например, он задает спецификацию совместимого компоновщика для нисходящего нацеливания. Только классические приложения Windows, созданные с помощью набора инструментов для платформы Windows XP, выполняются в Windows XP и Windows Server 2003. Эти же приложения могут выполняться в более новых операционных системах Windows.

#### <a name="to-target-windows-xp"></a>Нацеливание на Windows XP

1. В **обозревателе решений** откройте контекстное меню своего проекта и выберите пункт **Свойства**.

1. В диалоговом окне **Страницы свойств** проекта откройте папку **Свойства конфигурации** > **Общие** выберите для свойства **Набор инструментов платформы** нужный набор инструментов Windows XP. Например, выберите **Visual Studio 2017 — Windows XP (v141_xp)** , чтобы создать код для Windows XP и Windows Server 2003 с помощью компилятора Microsoft C++ в Visual Studio 2017.

### <a name="c-runtime-support"></a>Поддержка среды выполнения C++

Помимо набора инструментов для платформы Windows XP, поддержка среды выполнения для Windows XP и Windows Server 2003 включена в библиотеку времени выполнения C (CRT), стандартную библиотеку C++, библиотеку шаблонных классов (ATL), библиотеку среды выполнения с параллелизмом (ConCRT), библиотеку параллельных шаблонов (PPL), библиотеку Microsoft Foundation Class (MFC) и среду выполнения C++ AMP (C++ Accelerated Massive Programming). Поддерживаются следующие минимальные версии этих операционных систем: Windows XP с пакетом обновления 3 (SP3) для x86, Windows XP с пакетом обновления 2 (SP2) для x64 и Windows Server 2003 c пакетом обновления 2 (SP2) как для x86, так и для x64.

Эти библиотеки поддерживаются наборами инструментов платформ, устанавливаемыми вместе с Visual Studio, в зависимости от целевой платформы:

|Библиотека|Набор инструментов платформы по умолчанию для классических приложений Windows|Набор инструментов платформы по умолчанию для приложений Store|Набор инструментов платформы Windows XP для Windows XP и Windows Server 2003|
|---|---|---|---|
|CRT - библиотека|X|X|X|
|Стандартная библиотека C++|X|X|X|
|ATL|X|X|X|
|ConCRT/PPL|X|X|X|
|MFC|X||X|
|C++ AMP|X|X||

> [!NOTE]
> Приложения, написанные на C++/CLI и предназначенные для платформы .NET Framework 4, выполняются в Windows XP и Windows Server 2003.

### <a name="differences-between-the-toolsets"></a>Различия между наборами инструментов

Из-за различий в поддержке платформ и библиотек процесс разработки приложений с помощью набора инструментов платформы Windows XP не так многофункционален, как в случае с приложениями, использующими набор инструментов платформы Visual Studio по умолчанию.

- **Возможности языка C++**

   В приложениях, использующих набор инструментов платформы v110\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2012. В приложениях, использующих набор инструментов платформы v120\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2013. В приложениях, использующих набор инструментов платформы v140\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2015. При сборке с помощью более старых наборов инструментов платформы среда Visual Studio использует соответствующий компилятор. Выберите более новый набор инструментов платформы Windows XP, чтобы воспользоваться реализованными в этой версии компилятора дополнительными возможностями C++.

- **Удаленная отладка**

   Инструменты удаленной отладки для Visual Studio не поддерживают удаленную отладку в Windows XP или Windows Server 2003. Для локальной или удаленной отладки приложения, выполняющегося в Windows XP или Windows Server 2003, можно использовать отладчик из более старой версии Visual Studio. Ситуация здесь схожа с отладкой приложений в Windows Vista, которые могут являться целью выполнения для набора инструментов платформы, но не могут являться целью удаленной отладки.

- **Статический анализ**

   Наборы инструментов платформы для Windows XP не поддерживают статический анализ, так как примечания SAL для пакета SDK Windows 7 и библиотек времени выполнения несовместимы. Если вы хотите выполнить статический анализ приложения, поддерживающего Windows XP или Windows Server 2003, вы можете временно переключиться на набор инструментов платформы по умолчанию для анализа решения, а затем вернуться к набору инструментов платформы Windows XP для сборки приложения.

- **Отладка графики DirectX**

   Так как отладчик графики не поддерживает API Direct3D 9, его нельзя применять для отладки приложений, использующих Direct3D, в Windows XP или Windows Server 2003. Однако если в приложении реализован альтернативный модуль прорисовки, использующий API Direct3D 10 или Direct3D 11, с помощью отладчика графики можно диагностировать проблемы с использованием этих API.

- **Сборка HLSL**

   По умолчанию набор инструментов Windows XP не компилирует файлы с исходным кодом HLSL. Для компиляции файлов HLSL загрузите и установите пакет SDK DirectX за июнь 2010 года, а затем включите его в каталоги VC проекта. Дополнительные сведения см. в разделе "Пакет SDK DirectX не регистрирует пути включения и пути к библиотекам в Visual Studio 2010" на [странице загрузки пакета SDK DirectX за июнь 2010 года](http://www.microsoft.com/download/details.aspx?displaylang=en&id=6812).
