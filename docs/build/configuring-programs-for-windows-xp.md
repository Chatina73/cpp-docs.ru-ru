---
title: Настройка программ для Windows XP
description: Установка и использование инструментов C++ Windows XP в Visual Studio.
ms.date: 03/16/2020
ms.assetid: 1e4487b3-d815-4123-878b-5718b22f0fd5
ms.openlocfilehash: 92364d7fd25ac617baacc125b279fb0ee9c92f62
ms.sourcegitcommit: 63784729604aaf526de21f6c6b62813882af930a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2020
ms.locfileid: "79440482"
---
# <a name="configuring-programs-for-windows-xp"></a>Настройка программ для Windows XP

Visual Studio поддерживает несколько наборов инструментов платформы. Это означает, что можно использовать операционные системы и библиотеки среды выполнения, которые не поддерживаются набором инструментов по умолчанию. Например, при переключении набора инструментов платформы можно использовать компилятор Visual Studio 2017 C++ для создания приложений, предназначенных для Windows XP и windows Server 2003. Вы также можете применять наборы инструментов для старых платформ, чтобы обеспечивать совместимость прежнего кода на двоичном уровне, пользуясь при этом последними возможностями интегрированной среды разработки Visual Studio.

::: moniker range="vs-2019"

Набор средств v142, предоставляемый в Visual Studio 2019, не поддерживает создание кода для Windows XP. Поддержка разработки Windows XP с помощью набора инструментов v141_xp Visual Studio 2017 доступна как отдельный компонент в Visual Studio Installer.

::: moniker-end

## <a name="install-the-windows-xp-platform-toolset"></a>Установка набора инструментов платформы Windows XP

::: moniker range="<=vs-2017"

Чтобы получить набор инструментов платформы Visual Studio 2017 и компоненты, предназначенные для Windows XP и Windows Server 2003, запустите Visual Studio Installer. При первоначальной установке Visual Studio или изменении существующей установки убедитесь, что выбран параметр **Разработка классических приложений с C++**  рабочей нагрузкой. В списке дополнительных компонентов для этой рабочей нагрузки выберите **Поддержка Windows XP для C++** , а затем **Установить** или **Изменить**.

::: moniker-end

::: moniker range="vs-2019"

Чтобы получить набор инструментов v141_xp платформы и компоненты, предназначенные для Windows XP и Windows Server 2003, запустите Visual Studio Installer. При первоначальной установке Visual Studio или при изменении существующей установки убедитесь, что выбран параметр **Разработка классических приложений с C++**  рабочей нагрузкой. На вкладке **отдельные компоненты** в разделе **компиляторы, средства сборки и среды выполнения**выберите  **C++ поддержка Windows XP для средств VS 2017 (v141) \[устаревшие]** , а затем выберите **установить** или **изменить**.

::: moniker-end

## <a name="windows-xp-targeting-experience"></a>Нацеливание на Windows XP

Набор средств платформы Windows XP, включенный в Visual Studio, является версией пакета SDK для Windows 7, но использует компилятор Visual Studio 2017 C++ . Он также присваивает свойствам проекта соответствующие значения по умолчанию. Например, он задает спецификацию совместимого компоновщика для нисходящего нацеливания. В Windows XP и Windows Server 2003 может работать только классическое приложение Windows, созданное с помощью набора средств платформы Windows XP. Эти приложения также могут работать в более новых операционных системах Windows.

### <a name="to-target-windows-xp"></a>Нацеливание на Windows XP

1. В **обозревателе решений** откройте контекстное меню своего проекта и выберите пункт **Свойства**.

1. В диалоговом окне **страницы свойств** проекта выберите **Свойства конфигурации** > **Общие**. Задайте для свойства набор **инструментов платформа** нужный набор инструментов Windows XP. Например, выберите **Visual Studio 2017 — Windows XP (v141_xp)** , чтобы создать код для Windows XP и Windows Server 2003 с помощью компилятора Microsoft C++ в Visual Studio 2017.

### <a name="c-runtime-support"></a>Поддержка среды выполнения C++

Помимо набора инструментов платформы Windows XP, несколько библиотек включают поддержку среды выполнения для Windows XP и Windows Server 2003. Это следующие библиотеки: Библиотека времени выполнения C (CRT), C++ Стандартная библиотека, Библиотека ATL, Библиотека среда выполнения с параллелизмом Library (ConCRT), Библиотека параллельных шаблонов (PPL), Библиотека Microsoft Foundation Class (MFC) и C++ amp (C++ Ускоренное программирование). Для этих операционных систем минимальными поддерживаемыми версиями являются: Windows XP с пакетом обновления 3 (SP3) для x86, Windows XP с пакетом обновления 2 (SP2) для x64 и Windows Server 2003 с пакетом обновления 2 (SP2) для x86 и x64.

Эти библиотеки поддерживаются наборами инструментов платформ, устанавливаемыми вместе с Visual Studio, в зависимости от целевой платформы:

|Библиотека|Набор инструментов платформы по умолчанию для классических приложений Windows|Набор инструментов платформы по умолчанию для приложений Store|Набор инструментов платформы Windows XP для Windows XP и Windows Server 2003|
|---|---|---|---|
|CRT - библиотека|X|X|X|
|Стандартная библиотека C++|X|X|X|
|ATL|X|X|X|
|ConCRT/PPL|X|X|X|
|MFC|X||X|
|C++ AMP|X|X||

> [!NOTE]
> Приложения, написанные на C++/CLI и предназначенные для платформы .NET Framework 4, выполняются в Windows XP и Windows Server 2003.

### <a name="differences-between-the-toolsets"></a>Различия между наборами инструментов

Из-за различий в поддержке платформ и библиотек, процесс разработки приложений, использующих набор средств платформы Windows XP, не так готов, как для приложений, использующих набор инструментов платформы Visual Studio по умолчанию.

- **Возможности языка C++**

   В приложениях, использующих набор инструментов платформы v110\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2012. В приложениях, использующих набор инструментов платформы v120\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2013. В приложениях, использующих набор инструментов платформы v140\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2015. В C++ приложениях, использующих набор инструментов платформы v141\_XP, поддерживаются только языковые функции, реализованные в Visual Studio 2017. При сборке с помощью более старых наборов инструментов платформы среда Visual Studio использует соответствующий компилятор. Выберите более новый набор инструментов платформы Windows XP, чтобы воспользоваться реализованными в этой версии компилятора дополнительными возможностями C++.

- **Удаленная отладка**

   Инструменты удаленной отладки для Visual Studio не поддерживают удаленную отладку в Windows XP или Windows Server 2003. Для отладки приложения локально или удаленно в Windows XP или Windows Server 2003 используйте отладчик из более старой версии Visual Studio. Аналогично отладке приложения в Windows Vista, которое является целевым объектом среды выполнения набора инструментов платформы, но не целью удаленной отладки.

- **Статический анализ**

   Наборы инструментов платформы для Windows XP не поддерживают статический анализ, так как примечания SAL для пакета SDK Windows 7 и библиотек времени выполнения несовместимы. Вы по-прежнему можете выполнять статический анализ в приложении, которое поддерживает Windows XP или Windows Server 2003. Временно переключите решение на набор инструментов платформы по умолчанию для анализа, а затем переключитесь обратно на набор инструментов платформы Windows XP для сборки приложения.

- **Отладка графики DirectX**

   Так как отладчик графики не поддерживает API Direct3D 9, он не может использоваться для отладки приложений, использующих Direct3D в Windows XP или Windows Server 2003. Однако если приложение реализует альтернативный модуль подготовки отчетов на основе интерфейсов API Direct3D 10 или Direct3D 11, можно использовать графический отладчик для диагностики проблем.

- **Сборка HLSL**

   По умолчанию набор средств Windows XP не компилирует файлы исходного кода HLSL. Для компиляции файлов HLSL загрузите и установите пакет SDK DirectX за июнь 2010 года, а затем включите его в каталоги VC проекта. Дополнительные сведения см. в разделе "Пакет SDK DirectX не регистрирует пути включения и пути к библиотекам в Visual Studio 2010" на [странице загрузки пакета SDK DirectX за июнь 2010 года](https://www.microsoft.com/download/details.aspx?displaylang=en&id=6812).
