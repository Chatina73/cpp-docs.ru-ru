---
title: Настройка программ для Windows XP
description: Установка и использование наборов инструментов C++ Windows XP в Visual Studio.
ms.date: 03/16/2020
ms.assetid: 1e4487b3-d815-4123-878b-5718b22f0fd5
ms.openlocfilehash: 09fe1a511c92f999e02646b9e606a3631a175215
ms.sourcegitcommit: 9c2b3df9b837879cd17932ae9f61cdd142078260
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2020
ms.locfileid: "92919375"
---
# <a name="configuring-programs-for-windows-xp"></a>Настройка программ для Windows XP

Visual Studio поддерживает несколько наборов инструментов платформы. Это означает, что можно использовать операционные системы и библиотеки среды выполнения, которые не поддерживаются набором инструментов по умолчанию. Например, путем переключения набора инструментов платформы вы можете использовать компилятор Visual Studio 2017 C++, чтобы создавать приложения для Windows XP и Windows Server 2003. Вы также можете применять наборы инструментов для старых платформ, чтобы обеспечивать совместимость прежнего кода на двоичном уровне, пользуясь при этом последними возможностями интегрированной среды разработки Visual Studio.

::: moniker range="msvc-160"

Набор инструментов v142, поставляемый в Visual Studio 2019 и более поздних версий, не поддерживает создание кода для Windows XP. Поддержка разработки Windows XP с помощью набора инструментов v141_xp в Visual Studio 2017 доступна как отдельный компонент в установщике Visual Studio Installer.

::: moniker-end

## <a name="install-the-windows-xp-platform-toolset"></a>Установка набора инструментов платформы Windows XP

::: moniker range="<=msvc-150"

Чтобы получить набор инструментов платформы Visual Studio 2017 и компоненты для Windows XP и Windows Server 2003, запустите Visual Studio Installer. При первоначальной установке Visual Studio или при изменении существующей установки убедитесь, что выбрана рабочая нагрузка **Разработка классических приложений на C++** . В списке дополнительных компонентов для этой рабочей нагрузки выберите **Поддержка Windows XP для C++** , а затем **Установить** или **Изменить**.

::: moniker-end

::: moniker range="msvc-160"

Чтобы получить набор инструментов платформы v141_xp и компоненты для Windows XP и Windows Server 2003, запустите Visual Studio Installer. При первоначальной установке Visual Studio или при изменении существующей установки убедитесь, что выбрана рабочая нагрузка **Разработка классических приложений на C++** . На вкладке **Отдельные компоненты** в разделе **Компиляторы, средства сборки и среды выполнения** выберите **Поддержка C++ Windows XP для средств VS 2017 (v141) \[не рекомендуется]** , а затем выберите **Установить** или **Изменить**.

::: moniker-end

## <a name="windows-xp-targeting-experience"></a>Нацеливание на Windows XP

Набор инструментов для платформы Windows XP, включенный в Visual Studio, является версией пакета SDK для Windows 7, но использует текущий компилятор Visual Studio 2017 C++. Он также присваивает свойствам проекта соответствующие значения по умолчанию. Например, он задает спецификацию совместимого компоновщика для нисходящего нацеливания. В Windows XP и Windows Server 2003 могут работать только классические приложения Windows, созданные с помощью набора средств платформы Windows XP. Эти приложения также могут работать в более новых операционных системах Windows.

### <a name="to-target-windows-xp"></a>Нацеливание на Windows XP

1. В **обозревателе решений** откройте контекстное меню своего проекта и выберите пункт **Свойства**.

1. В диалоговом окне **Страницы свойств** проекта выберите **Свойства конфигурации** > **Общие**. Задайте в качестве значения свойства **Набор инструментов платформы** нужный набор инструментов Windows XP. Например, выберите **Visual Studio 2017 — Windows XP (v141_xp)** , чтобы создать код для Windows XP и Windows Server 2003 с помощью компилятора Microsoft C++ в Visual Studio 2017.

### <a name="c-runtime-support"></a>Поддержка среды выполнения C++

Помимо набора инструментов платформы Windows XP, несколько библиотек включают поддержку среды выполнения для Windows XP и Windows Server 2003. Это следующие библиотеки: библиотека времени выполнения C (CRT), стандартная библиотека C++, библиотека шаблонных классов ATL, библиотека среды выполнения с параллелизмом (ConCRT), библиотека параллельных шаблонов (PPL), библиотека Microsoft Foundation Class (MFC) и библиотека C++ AMP (C++ Accelerated Massive Programming). Поддерживаются следующие минимальные версии этих операционных систем: Windows XP с пакетом обновления 3 (SP3) для x86, Windows XP с пакетом обновления 2 (SP2) для x64 и Windows Server 2003 c пакетом обновления 2 (SP2) как для x86, так и для x64.

Эти библиотеки поддерживаются наборами инструментов платформ, устанавливаемыми вместе с Visual Studio, в зависимости от целевой платформы:

|Библиотека|Набор инструментов платформы по умолчанию для классических приложений Windows|Набор инструментов платформы по умолчанию для приложений Store|Набор инструментов платформы Windows XP для Windows XP и Windows Server 2003|
|---|---|---|---|
|CRT - библиотека|X|X|X|
|Стандартная библиотека C++|X|X|X|
|ATL|X|X|X|
|ConCRT/PPL|X|X|X|
|MFC|X||X|
|C++ AMP|X|X||

> [!NOTE]
> Приложения, написанные на C++/CLI и предназначенные для платформы .NET Framework 4, выполняются в Windows XP и Windows Server 2003.

### <a name="differences-between-the-toolsets"></a>Различия между наборами инструментов

Из-за различий в поддержке платформ и библиотек процесс разработки приложений с помощью набора инструментов платформы Windows XP не так многофункционален, как в случае с приложениями, использующими набор инструментов платформы Visual Studio по умолчанию.

- **Возможности языка C++**

   В приложениях, использующих набор инструментов платформы v110\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2012. В приложениях, использующих набор инструментов платформы v120\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2013. В приложениях, использующих набор инструментов платформы v140\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2015. В приложениях, использующих набор инструментов платформы v141\_xp, поддерживаются только те возможности языка C++, которые реализованы в Visual Studio 2017. При сборке с помощью более старых наборов инструментов платформы среда Visual Studio использует соответствующий компилятор. Выберите более новый набор инструментов платформы Windows XP, чтобы воспользоваться реализованными в этой версии компилятора дополнительными возможностями C++.

- **Удаленная отладка**

   Инструменты удаленной отладки для Visual Studio не поддерживают удаленную отладку в Windows XP или Windows Server 2003. Для локальной или удаленной отладки приложения, выполняющегося в Windows XP или Windows Server 2003, можно использовать отладчик из более ранней версии Visual Studio. Ситуация здесь схожа с отладкой приложений в Windows Vista, которые могут являться целью выполнения для набора инструментов платформы, но не могут являться целью удаленной отладки.

- **Статический анализ**

   Наборы инструментов платформы для Windows XP не поддерживают статический анализ, так как примечания SAL для пакета SDK Windows 7 и библиотек времени выполнения несовместимы. Вы по-прежнему можете выполнять статический анализ в приложении, которое поддерживает Windows XP или Windows Server 2003. Вы можете временно переключиться на набор инструментов платформы по умолчанию для анализа решения, а затем вернуться к набору инструментов платформы Windows XP для сборки приложения.

- **Отладка графики DirectX**

   Так как отладчик графики не поддерживает API Direct3D 9, его нельзя применять для отладки приложений, использующих Direct3D, в Windows XP или Windows Server 2003. Однако если в приложении реализован альтернативный отрисовщик на основе API Direct3D 10 или Direct3D 11, с помощью отладчика графики можно диагностировать проблемы.

- **Сборка HLSL**

   По умолчанию набор инструментов Windows XP не компилирует файлы с исходным кодом HLSL. Для компиляции файлов HLSL загрузите и установите пакет SDK DirectX за июнь 2010 года, а затем включите его в каталоги VC проекта. Дополнительные сведения см. в разделе "Пакет SDK DirectX не регистрирует пути включения и пути к библиотекам в Visual Studio 2010" на [странице загрузки пакета SDK DirectX за июнь 2010 года](https://www.microsoft.com/download/details.aspx?displaylang=en&id=6812).
