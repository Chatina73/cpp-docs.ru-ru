---
title: Структура UNWIND_INFO
ms.date: 11/04/2016
ms.assetid: f0aee906-a1b9-44cc-a8ad-463637bd5411
ms.openlocfilehash: 0130d30c314a7736ffaf24753a2e6fdf9ad55b12
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2018
ms.locfileid: "50517043"
---
# <a name="struct-unwindinfo"></a>Структура UNWIND_INFO

Информационная структура очищения данных используется для записи эффектов функция имеет указатель стека и сохранения защищенных регистров в стек.

|||
|-|-|
|UBYTE: 3|Версия|
|UBYTE: 5|Флаги|
|UBYTE|Размер пролога|
|UBYTE|Число кодов очистки.|
|UBYTE: 4|Регистр кадра|
|UBYTE: 4|Смещение регистра кадров (масштабировать)|
|USHORT \* n|Массив кодов очистки|
|переменная|Может быть формы (1) или (2) ниже|

(1) обработчик исключений

|||
|-|-|
|ULONG|Адрес обработчика исключений|
|Переменная|Обработчик конкретного языка данных (необязательно)|

(2) по цепочке раскрутки

|||
|-|-|
|ULONG|Начальный адрес функции|
|ULONG|Конечный адрес функции|
|ULONG|Адрес очистки|

Структура UNWIND_INFO должна быть DWORD выравнивания в памяти. Значение каждого поля, выглядит следующим образом:

- **Version**

   Номер версии для очистки данных, в данный момент 1.

- **флаги**

   В настоящее время определены три флага:

   |Flag|Описание|
   |-|-|
   |`UNW_FLAG_EHANDLER`| Функция имеет обработчик исключений, который должен быть вызван при поиске функций, которые необходимо изучить исключения.|
   |`UNW_FLAG_UHANDLER`| Функция имеет обработчик завершения, который должен вызываться при очистке исключения.|
   |`UNW_FLAG_CHAININFO`| Это раскрутки, структура не является первичной для процедуры. Вместо этого связанных данных раскрутки запись представляет собой содержание предыдущей записи RUNTIME_FUNCTION. Отображается следующий текст объяснения по цепочке очистки структуры. Если этот флаг установлен, необходимо очистить флаги UNW_FLAG_EHANDLER и UNW_FLAG_UHANDLER. Кроме того кадр регистра и исправлена стека выделения поля должны иметь те же значения, как и в основной раскрутки.|

- **Размер пролога**

   Длина пролога функции в байтах.

- **Число кодов очистки.**

   Это количество мест в массиве кодов очистки. Обратите внимание, что некоторые коды (например, UWOP_SAVE_NONVOL) очистки требуют больше одного слота в массиве.

- **Регистр кадра**

   Если не равен нулю, то функция использует указатель кадра и это поле — это количество защищенных регистр, используемый в качестве указателя кадра, используя ту же кодировку поле сведений об операции узлов UNWIND_CODE.

- **Смещение (масштабировать) регистра кадра**

   Если поле регистра кадра не равно нулю, то это масштабированное смещение от RSP, который применяется к FP reg после его установки. Действительное значение FP reg устанавливается значение RSP + 16 \* это число, что позволяет смещения от 0 до 240. Это разрешает направление FP reg в середину локального выделения стека для динамических кадров стека, обеспечивая лучшую плотность кода через более коротких инструкций (Дополнительные инструкции можно использовать для смещения 8-разрядное знаковое число).

- **Массив кодов очистки**

   Это массив элементов, объясняет влияние пролога на неизменяемые регистры и RSP. См. в разделе об использовании UNWIND_CODE для значений отдельных элементов. Для выравнивания этот массив всегда будет содержать четное число записей с потенциально неиспользуемой последней записью (в этом случае массив будет иметь один длиннее, чем указано по числу полей кодов очистки).

- **Адрес обработчика исключений**

   Это указатель на обработчик конкретного языка исключения или завершения любой из этих функций (Если флаг UNW_FLAG_CHAININFO снят и один из флагов UNW_FLAG_EHANDLER или UNW_FLAG_UHANDLER имеет значение).

- **Обработчик конкретного языка данных**

   Это данные обработчика исключений конкретного языка функции. Формат этих данных не указано и полностью определяется обработчик используется конкретное исключение.

- **Связанные сведения об очистке:**

   Если установлен флаг UNW_FLAG_CHAININFO структура UNWIND_INFO завершается с тремя UWORDs.  Эти UWORDs представляют данные RUNTIME_FUNCTION для функции в цепочке очистки.

## <a name="see-also"></a>См. также

[Данные раскрутки для обработки исключений и поддержки отладчика](../build/unwind-data-for-exception-handling-debugger-support.md)