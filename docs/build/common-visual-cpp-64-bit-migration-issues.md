---
title: Общие вопросы использования Visual C++ для 64-разрядных систем
ms.date: 05/06/2019
helpviewer_keywords:
- 64-bit programming [C++], migration
- 64-bit compiler [C++], migration
- porting 32-bit code to 64-bit code
- migration [C++], 64-bit code issues
- 32-bit code porting [C++]
- 64-bit applications [C++]
- 64-bit compiler [C++], porting 32-bit code
- Win64 [C++]
ms.assetid: d17fb838-7513-4e2d-8b27-a1666f17ad76
ms.openlocfilehash: 68f4dc4276c5cbce687477ca25ec69f0cb544acb
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87229861"
---
# <a name="common-visual-c-64-bit-migration-issues"></a>Общие вопросы использования Visual C++ для 64-разрядных систем

При использовании компилятора Microsoft C++ (MSVC) для создания приложений, запуск которых планируется в 64-разрядной версии ОС Windows, следует знать следующее:

- В 64-разрядных версиях Windows **`int`** и **`long`** являются 32-разрядными значениями. В программах, которые планируется компилировать для 64-разрядных платформ, не следует назначать указателям 32-разрядные переменные. В 64-разрядных платформах указатели являются 64-разрядными, поэтому значение указателя будет усечено, если назначить ему 32-разрядную переменную.

- В 64-разрядных версиях Windows `size_t`, `time_t` и `ptrdiff_t` являются 64-разрядными значениями.

- В версии Visual Studio 2005 и более ранних `time_t` является 32-разрядным значением в 32-разрядных версиях Windows. Теперь `time_t` по умолчанию представляет собой 64-разрядное целое число. Дополнительные сведения см. в разделе [Управление временем](../c-runtime-library/time-management.md).

   Следует знать, где ваш код принимает значение **`int`** и обрабатывает его как значение `size_t` или `time_t`. Разрядность может превысить 32 бита. В этом случае данные будут усечены при их возвращении в хранилище **`int`** .

Модификатор %x (шестнадцатеричный формат **`int`** ) `printf` не будет действовать в 64-разрядных версиях Windows ожидаемым образом. Он будет обрабатывать только первые 32 бита передаваемого ему значения.

- Для отображения 32-разрядных целочисленных типов в шестнадцатеричном формате используйте модификатор %I32x.

- Для отображения 64-разрядных целочисленных типов в шестнадцатеричном формате используйте модификатор %I64x.

- Модификатор %p (шестнадцатеричный формат для указателя) в 64-разрядных версиях Windows действует правильно.

Дополнительные сведения можно найти в разделе

- [Параметры компилятора MSVC](reference/compiler-options.md)

- [Советы по миграции](/windows/win32/WinProg64/migration-tips)

## <a name="see-also"></a>См. также

[Настройка проектов C++ для 64-разрядных целевых объектов с архитектурой x64](configuring-programs-for-64-bit-visual-cpp.md)<br/>
[Руководство по переносу и обновлению Visual C++](../porting/visual-cpp-porting-and-upgrading-guide.md)
