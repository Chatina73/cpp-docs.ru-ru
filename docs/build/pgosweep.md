---
title: pgosweep
description: Используйте команду pgosweep для записи данных профиля в PGC-файл и использования в профильной оптимизации.
ms.date: 10/23/2020
helpviewer_keywords:
- pgosweep program
- profile-guided optimizations, pgosweep
ms.openlocfilehash: be96d0f092ff65867c304ddf5eb41c0754f6e4be
ms.sourcegitcommit: bf54b407169900bb668c85a67b31dbc0f069fe65
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2020
ms.locfileid: "92497177"
---
# <a name="pgosweep"></a>pgosweep

Используется в профильной оптимизации для записи всех данных профиля из выполняющейся программы в PGC-файл.

## <a name="syntax"></a>Синтаксис

> **`pgosweep`** [ *options* ] *image* *pgcfile*

### <a name="parameters"></a>Параметры

*options*\
(Необязательно) Допустимые значения для *options* :

- **`/?`** или **`/help`**  — выводит справочное сообщение.

- **`/reset`** сбрасывает счетчики до нуля после очистки. Поведение по умолчанию.

- **`/pid:n`** очищает только указанный идентификатор PID, где *n*  — номер PID.

- **`/wait`** ожидает завершения процесса с указанным PID перед сбором данных счетчика.

- **`/onlyzero`** не сохраняет PGC-файл, только нулевые значения счетчиков.

- **`/pause`** приостанавливает сбор данных счетчиков в системе.

- **`/resume`** возобновляет сбор данных счетчиков в системе.

- **`/noreset`** сохраняет счетчик в структурах данных среды выполнения.

*image*\
Полный путь к файлу EXE или DLL, созданному с помощью параметра [`/GENPROFILE`](reference/genprofile-fastgenprofile-generate-profiling-instrumented-build.md), [`/FASTGENPROFILE`](reference/genprofile-fastgenprofile-generate-profiling-instrumented-build.md) или [`/LTCG:PGINSTRUMENT`](reference/ltcg-link-time-code-generation.md).

*pgcfile*\
Файл PGC, в который эта команда записывает счетчики данных.

## <a name="remarks"></a>Remarks

Команда **`pgosweep`** работает с программами, созданными с помощью параметра [`/GENPROFILE` или `/FASTGENPROFILE`](reference/genprofile-fastgenprofile-generate-profiling-instrumented-build.md) либо устаревшего параметра [`/LTCG:PGINSTRUMENT`](reference/ltcg-link-time-code-generation.md). Она прерывает выполнение программы и записывает данные профиля в новый PGC-файл. По умолчанию команда сбрасывает счетчики после каждой операции записи. Если указать параметр **`/noreset`** , команда будет записывать значения, но не будет сбрасывать их в выполняющейся программе. Этот параметр приводит к дублированию данных при последующем извлечении данных профиля.

Альтернативный вариант использования **`pgosweep`**  — получение данных профиля только для нормального режима работы приложения. Например, можно выполнить команду **`pgosweep`** сразу же после запуска приложения и удалить этот файл. Эта команда удаляет данные профиля, связанные с запуском. После этого можно выполнить **`pgosweep`** перед завершением работы приложения. В результате будут собраны данные профиля только с момента, когда пользователь получил возможность взаимодействовать с программой.

При присвоении имени PGC-файлу (с помощью параметра *pgcfile* ) можно использовать стандартный формат, то есть *`appname!n.pgc`* , где *n*  — увеличивающееся числовое значение для каждого файла. При использовании такого формата компилятор автоматически находит данные на этапе **`/LTCG /USEPROFILE`** или **`/LTCG:PGO`** . Если стандартный формат не применяется, необходимо использовать параметр [`pgomgr`](pgomgr.md) для слияния файлов PGC.

> [!NOTE]
> Это средство можно запустить только из командной строки разработчика Visual Studio. Его нельзя запустить из системной командной строки или проводника.

Сведения о записи данных профиля из исполняемого файла см. здесь: [`PgoAutoSweep`](pgoautosweep.md).

## <a name="example"></a>Пример

В этом примере команда **`pgosweep`** записывает текущие данные профиля для *`myapp.exe`* в файл *`myapp!1.pgc`* .

`pgosweep myapp.exe myapp!1.pgc`

## <a name="see-also"></a>См. также статью

[Профильная оптимизация](profile-guided-optimizations.md)\
[PgoAutoSweep](pgoautosweep.md)
