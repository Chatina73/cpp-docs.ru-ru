---
title: Виды библиотек DLL
ms.date: 11/04/2016
helpviewer_keywords:
- MFC DLLs [C++], types
- DLLs [C++], types
- DLLs [C++], MFC
ms.assetid: f6a30db9-6138-4b2c-90cc-a17855e499a6
ms.openlocfilehash: fb63814161fb72121a34d2857b6fada3866e505a
ms.sourcegitcommit: bff17488ac5538b8eaac57156a4d6f06b37d6b7f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2019
ms.locfileid: "57424812"
---
# <a name="kinds-of-dlls"></a>Виды библиотек DLL

Этот раздел содержит сведения, помогающие определить, какие библиотеки DLL для построения.

##  <a name="_core_the_different_kinds_of_dlls_available_with_visual_c.2b2b"></a> Различные доступные виды библиотек DLL

С помощью Visual C++, можно построить библиотеки DLL Win32 на C или C++, следует использовать библиотеки Microsoft Foundation Class (MFC). Можно создать проект библиотеки MFC DLL с помощью мастера приложений Win32.

Сама библиотека MFC доступна в библиотеках статической компоновки или в библиотеках DLL, с помощью мастера MFC DLL. Если библиотека DLL использует MFC, Visual C++ поддерживает три различных скрипта разработки библиотеки DLL:

- Построение обычной библиотеки DLL MFC, статически скомпонованной с MFC

- Построение обычной библиотеки DLL MFC, динамически скомпонованной с MFC

- Построение библиотеки DLL расширения MFC, которая всегда динамически скомпонована с MFC

### <a name="what-do-you-want-to-know-more-about"></a>Дополнительные сведения

- [Несовместимые с MFC библиотеки DLL: обзор](../build/non-mfc-dlls-overview.md)

- [Обычные библиотеки DLL MFC, статически компонуемые с MFC](../build/regular-dlls-statically-linked-to-mfc.md)

- [Обычные библиотеки DLL MFC, динамически компонуемые с MFC](../build/regular-dlls-dynamically-linked-to-mfc.md)

- [Библиотеки DLL для расширения MFC: обзор](../build/extension-dlls-overview.md)

- [Какой тип используемой библиотеки DLL](#_core_which_kind_of_dll_to_use)

##  <a name="_core_which_kind_of_dll_to_use"></a> Выбор типа используемой библиотеки DLL

Если библиотека DLL использует MFC, Visual C++ можно используйте для построения не - MFC библиотеки DLL Win32. Компоновка библиотеки DLL с MFC (статически или динамически) занимает значительное место на диске и памяти. Не нужно связывать с MFC, если библиотека DLL фактически не использует MFC.

Если библиотека DLL будет использовать MFC, а также будет использоваться приложениями MFC или не являющихся MFC, необходимо построить обычную библиотеку DLL MFC, динамически скомпонованную с MFC или обычной библиотеки DLL MFC, статически скомпонованную с MFC. В большинстве случаев вам удобнее использовать обычную библиотеку DLL MFC, динамически скомпонованную с MFC, так как размер файла библиотеки DLL будет намного меньше и экономия оперативной памяти при использовании общей версии MFC могут оказаться значительными. При статической компоновке с MFC, размер файла библиотеки DLL будет иметь больший размер и может предпринимать объем оперативной памяти, так как он загружает его собственной закрытой копии кода библиотеки MFC.

Построение библиотеки DLL, динамически скомпонованную с MFC происходит быстрее, чем построение библиотеки DLL, статически скомпонованную с MFC, поскольку нет необходимости связывать саму библиотеку MFC. Это особенно справедливо в отладочных построениях, где компоновщик выполняет сжатие отладочной информации. Путем связывания с библиотекой DLL, которая уже содержит отладочную информацию, есть уменьшить объем отладочной информации путем ее сжатия в библиотеки DLL.

Один недостаток динамической компоновки с MFC заключается в необходимости распространения общих DLL-файлов Mfcx0.dll и Msvcrxx.dll (или подобных файлов) с данной библиотекой DLL. Библиотеки MFC DLL является Свободно распространяемыми, но вы по-прежнему необходимо установить библиотеки DLL в программу установки. Кроме того необходимо предоставить Msvcrxx.dll, содержащий библиотеки времени выполнения C, который используется как программы и самими библиотеками MFC DLL.

Если библиотека DLL будет использоваться только с исполняемыми приложениями MFC, необходимо выбрать между построением обычной библиотеки DLL MFC или библиотеки DLL расширения MFC. Если библиотека DLL реализует классы многократного использования существующих классов MFC или необходимо передать объекты, производные от приложения и библиотеки DLL, необходимо построить библиотеки DLL расширения MFC.

Если библиотека DLL динамически скомпонована с MFC, библиотеки MFC DLL могут быть распространены с данной библиотекой DLL. Эта архитектура особенно полезна для совместного использования библиотеки классов несколькими исполняемыми файлами для экономии дискового пространства и минимизации использования памяти.

До версии 4.0 Visual C++ поддерживал только два вида библиотек DLL, которые использовали MFC: Библиотеки USRDLL и AFXDLL. Обычные библиотеки DLL MFC, статически компонуемые с MFC имеют те же характеристики, как бывший USRDLL. Библиотеки DLL расширения MFC имеют те же характеристики, что AFXDLL.

### <a name="what-do-you-want-to-know-more-about"></a>Дополнительные сведения

- [Несовместимые с MFC библиотеки DLL: обзор](../build/non-mfc-dlls-overview.md)

- [Обычные библиотеки DLL MFC, статически компонуемые с MFC](../build/regular-dlls-statically-linked-to-mfc.md)

- [Обычные библиотеки DLL MFC, динамически компонуемые с MFC](../build/regular-dlls-dynamically-linked-to-mfc.md)

- [Библиотеки DLL для расширения MFC: обзор](../build/extension-dlls-overview.md)

## <a name="see-also"></a>См. также

[DLL в Visual C++](../build/dlls-in-visual-cpp.md)
