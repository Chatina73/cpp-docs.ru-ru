---
title: Развертывание, запуск и отладка проекта C++ для Linux в Visual Studio
description: Компиляция, выполнение и отладка кода в удаленной системе в проекте C++ для Linux в Visual Studio.
ms.date: 06/07/2019
ms.assetid: f7084cdb-17b1-4960-b522-f84981bea879
ms.openlocfilehash: 707915a502aafefee47af7e84b534e06ba678b3d
ms.sourcegitcommit: 8adabe177d557c74566c13145196c11cef5d10d4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/10/2019
ms.locfileid: "66821618"
---
# <a name="deploy-run-and-debug-your-linux-project"></a>Развертывание, запуск и отладка проекта Linux

::: moniker range="vs-2015"

Поддержка Linux реализована в Visual Studio версии 2017 и выше.

::: moniker-end

После создания проекта Linux для C++ в Visual Studio и подключения к проекту с помощью [диспетчера подключений Linux](connect-to-your-remote-linux-computer.md) можно запускать и отлаживать проект. Компиляция, выполнение и отладка кода осуществляются в удаленной системе.

::: moniker range="vs-2019"

**Visual Studio 2019 версии 16.1** Вы можете использовать разные системы Linux для отладки и сборки. Укажите компьютер сборки на странице свойств **Общие** и отладьте компьютер на странице свойств **Отладка**.

::: moniker-end

Существует несколько способов взаимодействия с проектом Linux и его отладки.

- Использование традиционных средств Visual Studio, таких как точки останова, окна контрольных значений и наведение указателя мыши на переменную. С их помощью вы можете выполнять отладку так, как вы делаете это для других типов проектов.

- Просмотрите выходные данные целевого компьютера в окне консоли Linux. Консоль можно также использовать для отправки входных данных на целевой компьютер.

## <a name="debug-your-linux-project"></a>Отладка проекта Linux

1. Выберите режим отладки на странице свойств **Отладка**.

   
   
   ::: moniker range="vs-2019"

   GDB используется для отладки приложений на платформе Linux. При отладке в целевой системе (не WSL) GDB может работать в двух разных режимах, которые можно указать с помощью параметра **Режим отладки** на странице свойств **Отладка** проекта:

   ![Параметры GDB](media/vs2019-debugger-settings.png)

   ::: moniker-end

   ::: moniker range="vs-2017"

   GDB используется для отладки приложений на платформе Linux. GDB может работать в двух разных режимах, которые выбираются в параметре **Режим отладки** на странице свойств **Отладка** проекта:

   ![Параметры GDB](media/vs2017-debugger-settings.png)

   ::: moniker-end


   - В режиме **gdbserver** GDB выполняется в локальной среде, подключенной к gdbserver в удаленной системе.  Обратите внимание, что это единственный режим, который поддерживает окно консоли Linux.

   - В режиме **gdb** в Visual Studio отладчик запускает GDB в удаленной системе. Это лучший вариант, если локальная версия GDB несовместима с версией, установленной на целевом компьютере. |

   > [!NOTE]
   > Если не удается попасть в точки останова в режиме отладки gdbserver, попробуйте gdb режим. gdb сначала следует [установить](download-install-and-setup-the-linux-development-workload.md) в удаленной целевой системе.

1. Выберите удаленную целевую систему, используя стандартную панель инструментов **Отладка** в Visual Studio.

   Если удаленная целевая система доступна, вы определите ее по имени или IP-адресу.

   ![Удаленная целевая система](media/remote_target.png)

   Если вы еще не подключились к удаленной целевой системе, вы увидите инструкции по использованию [диспетчера подключений Linux](connect-to-your-remote-linux-computer.md) для подключения к удаленной целевой системе.

   ![Удаленная архитектура](media/architecture.png)

1. Задайте точку останова, щелкнув в левом поле код, который будет выполняться.

   В строке кода, где вы задали точку останова, появится красная точка.

1. Нажмите клавишу **F5** (или **Отладка > Начать отладку**), чтобы начать отладку.

   При запуске отладки приложение компилируется на удаленном целевом компьютере и после этого запускается. Ошибки компиляции будут показаны в окне **Список ошибок**.

   Если ошибок нет, приложение запустится, и по достижении точки останова отладчик остановится.

   ![Попадание в точку останова](media/hit_breakpoint.png)

   Теперь можно работать с приложением в его текущем состоянии, просматривать переменные и пошагово выполнять код, нажимая командные клавиши, такие как **F10** или **F11**.

1. Если для взаимодействия с приложением вы хотите использовать консоль Linux, выберите **Отладка > Консоль Linux**.

   ![Меню "Консоль Linux"](media/consolemenu.png)

   Эта консоль отображает выходные данные консоли с целевого компьютера, а также принимает входные данные и отправляет их на целевой компьютер.

   ![Окно "Консоль Linux"](media/consolewindow.png)

## <a name="configure-other-debugging-options"></a>Настройка других параметров отладки

- Аргументы командной строки можно передать в исполняемый файл с помощью элемента **Аргументы программы** на странице свойств **Отладка** проекта.

   ![Аргументы командной строки программы](media/settings_programarguments.png)

- Специальные параметры отладчика можно передать в GDB с помощью записи **Дополнительные команды отладчика**.  Например, можно игнорировать сигналы SIGILL (недопустимая инструкция).  Для этого можно использовать команду **handle**.  добавляя следующее в запись **Дополнительные команды отладчика**, как показано выше:

   `handle SIGILL nostop noprint`

## <a name="debug-with-attach-to-process"></a>Отладка с использованием присоединения к процессу

Страница свойств [Отладка](prop-pages/debugging-linux.md) для проектов Visual Studio и параметры **Launch.vs.json** для проектов CMake позволяют подключиться к выполняющемуся процессу. Если вам требуется расширенный контроль, можно поместить файл с именем `Microsoft.MIEngine.Options.xml` в корневой каталог решения или рабочей области. Вот простой пример:

```xml
<?xml version="1.0" encoding="utf-8"?>
<SupplementalLaunchOptions>
    <AttachOptions>
      <AttachOptionsForConnection AdditionalSOLibSearchPath="/home/user/solibs">
        <ServerOptions MIDebuggerPath="C:\Program Files (x86)\Microsoft Visual Studio\Preview\Enterprise\Common7\IDE\VC\Linux\bin\gdb\7.9\x86_64-linux-gnu-gdb.exe"
ExePath="C:\temp\ConsoleApplication17\ConsoleApplication17\bin\x64\Debug\ConsoleApplication17.out"/>
        <SetupCommands>
          <Command IgnoreFailures="true">-enable-pretty-printing</Command>
        </SetupCommands>
      </AttachOptionsForConnection>
    </AttachOptions>
</SupplementalLaunchOptions>
```

**AttachOptionsForConnection** имеет значительную часть атрибутов, которые могут потребоваться. Приведенный выше пример показывает, как указать расположение для поиска дополнительных библиотек .so. Дочерний элемент **ServerOptions** позволяет вместо этого подключиться к удаленному процессу с использованием gdbserver. Для этого необходимо указать локальный клиент gdb (экземпляр, предоставляемый с Visual Studio 2017, показан выше) и локальную копию двоичного файла с символами. Элемент **SetupCommands** позволяет передавать команды непосредственно в gdb. Все эти параметры доступны в [схеме LaunchOptions.xsd](https://github.com/Microsoft/MIEngine/blob/master/src/MICore/LaunchOptions.xsd) на сайте GitHub.

## <a name="next-steps"></a>Следующие шаги

- Для отладки устройств ARM в Linux см. записи блога: [Отладка встроенного устройства ARM в Visual Studio](https://blogs.msdn.microsoft.com/vcblog/2018/01/10/debugging-an-embedded-arm-device-in-visual-studio/).

## <a name="see-also"></a>См. также

[Свойства отладки C++ (Linux C++)](prop-pages/debugging-linux.md)
