---
title: Установка рабочей нагрузки Linux для проектов C++ в Visual Studio
description: Скачивание, установка и настройка рабочей нагрузки Linux для проектов C++ в Visual Studio.
ms.date: 06/11/2019
ms.assetid: e11b40b2-f3a4-4f06-b788-73334d58dfd9
ms.openlocfilehash: 719fb9a04c3b0090a1ae5442f881ba6b7d2136c5
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80077638"
---
# <a name="download-install-and-set-up-the-linux-workload"></a>Загрузка, установка и настройка рабочей нагрузки Linux

::: moniker range="vs-2015"

Проекты Linux поддерживаются в Visual Studio версии 2017 и выше.

::: moniker-end

::: moniker range=">=vs-2017"

Visual Studio IDE в Windows можно использовать для создания, редактирования и отладки проектов C++, которые выполняются в удаленной системе Linux, на виртуальной машине или в [подсистеме Windows для Linux](/windows/wsl/about).

Вы можете работать с имеющейся базой кода, где CMake не требуется преобразовывать в проект Visual Studio. Если база кода является кроссплатформенной, в Visual Studio можно создавать решения как для Windows, так и для Linux. Например, вы можете редактировать, создавать и отлаживать код в Windows с помощью Visual Studio, а затем быстро перенацелить проект для Linux на сборку и отладку в среде Linux. Файлы заголовков Linux автоматически копируются на локальный компьютер, где Visual Studio использует их для предоставления полной поддержки технологии IntelliSense (завершение операторов, "Перейти к определению" и т. д.).

Чтобы использовать любой из этих сценариев, требуется рабочая нагрузка **Разработка для Linux на C++** .

::: moniker-end

::: moniker range=">=vs-2017"

## <a name="visual-studio-setup"></a>Установка Visual Studio

1. В поле поиска Windows введите "Visual Studio Installer":

   ![Поле поиска Windows](media/visual-studio-installer-search.png)

2. Найдите установщик в разделе **Приложения** и дважды щелкните его. Когда откроется установщик, щелкните **Изменить** и перейдите на вкладку **Рабочие нагрузки**. Прокрутите вниз до раздела **Другие наборы инструментов** и выберите рабочую нагрузку **Разработка для Linux на C++** .

   ![Рабочая нагрузка "Разработка на Visual C++ для Linux"](media/linuxworkload.png)

1. Если вы используете внедренную платформу или платформу Интернета вещей, перейдите на панель **Installation details** (Сведения об установке) справа. В разделе **Разработка для Linux на C ++** разверните узел **Необязательные компоненты** и выберите нужные компоненты. Поддержка CMake для Linux включена по умолчанию.

1. Для продолжения установки нажмите кнопку **Изменить**.

## <a name="options-for-creating-a-linux-environment"></a>Варианты создания среды Linux

Если у вас нет компьютера Linux, можно создать виртуальную машину Linux в Azure. Дополнительные сведения см. в разделе [Краткое руководство. Создание виртуальной машины Linux на портале Azure](/azure/virtual-machines/linux/quick-create-portal).

В Windows 10 можно установить и настроить использование определенного дистрибутива Linux в подсистеме Windows для Linux (WSL). См. подробнее руководство по [установке подсистемы Windows для Linux в Windows 10](/windows/wsl/install-win10). Если не удается получить доступ к Microsoft Store, можете [вручную скачать пакеты дистрибутивов WSL](/windows/wsl/install-manual). WSL — это удобная среда консоли, которую не следует использовать для графических приложений.

::: moniker-end

::: moniker range="vs-2019"

Для проектов Linux в Visual Studio необходимо установить следующие зависимости в удаленной системе Linux или WSL:

- **Компилятор** — Visual Studio 2019 имеет встроенную поддержку GCC и [Clang](/cpp/build/clang-support-cmake?view=vs-2019).
- **gdb** — Visual Studio автоматически запускает gdb в системе Linux и использует внешний интерфейс отладчика Visual Studio для обеспечения полной отладки в Linux.
- **rsync** и **zip** — благодаря включению rsync и zip Visual Studio может извлекать файлы заголовков из системы Linux в файловую систему Windows для использования технологией IntelliSense.
- **make**
- **openssh-server** (только удаленные системы Linux) — Visual Studio подключается к удаленным системам Linux через безопасное SSH-соединение.
- **CMake** (только для проектов CMake) — вы можете установить [статически связанные двоичные файлы CMake для Linux](https://github.com/microsoft/CMake/releases).

В следующих командах предполагается, что вы используете g++ вместо Clang.

::: moniker-end

::: moniker range="vs-2017"

Для проектов Linux в Visual Studio необходимо установить следующие зависимости в удаленной системе Linux или WSL:

- **gcc** — в Visual Studio 2017 имеется встроенная поддержка GCC.
- **gdb** — Visual Studio автоматически запускает gdb в системе Linux и использует интерфейс отладчика Visual Studio для обеспечения полной отладки в Linux.
- **rsync** и **zip** — благодаря включению rsync и zip Visual Studio может извлекать файлы заголовков из системы Linux в файловую систему Windows для использования технологией IntelliSense.
- **make**
- **openssh-server** — Visual Studio подключается к удаленным системам Linux через защищенное SSH-соединение.
- **CMake** (только для проектов CMake) — вы можете установить [статически связанные двоичные файлы CMake для Linux](https://github.com/microsoft/CMake/releases).

::: moniker-end

::: moniker range="vs-2019"

## <a name="linux-setup-ubuntu-on-wsl"></a>Установка Linux: Использование Ubuntu в WSL

Если вы используете WSL, для сборки и отладки не обязательно добавлять удаленное подключение или настраивать SSH. Использование **zip** и **rsync** является обязательным для автоматической синхронизации заголовков Linux в Visual Studio и включения поддержки Intellisense. Если требуемые приложения отсутствуют, их можно установить следующим образом:

```bash
sudo apt-get install g++ gdb make rsync zip
```

::: moniker-end

::: moniker range=">=vs-2017"

## <a name="ubuntu-on-remote-linux-systems"></a>Использование Ubuntu в удаленных системах Linux

В целевой системе Linux нужно установить **openssh-server**, **g++** , **gdb** и **make**, а также запустить управляющую программу SSH. Использование **zip** и **rsync** необходимо для автоматической синхронизации удаленных заголовков на локальном компьютере, чтобы обеспечить поддержку Intellisense. Если эти приложения отсутствуют, их можно установить следующим образом.

1. В командной строке оболочки на компьютере Linux выполните следующую команду:

   ```bash
   sudo apt-get install openssh-server g++ gdb make rsync zip
   ```

   Для выполнения команды sudo вам может быть предложено ввести пароль учетной записи root.  Введите его и продолжите. После завершения будут установлены требуемые службы и средства.

1. Запустите службу ssh на компьютере Linux, выполнив следующую команду:

   ```bash
   sudo service ssh start
   ```

   Эта команда запустит службу в фоновом режиме в режиме готовности к принятию подключений.

::: moniker-end

::: moniker range="vs-2019"

## <a name="fedora-on-wsl"></a>Использование Fedora в WSL

В Fedora используются установщик пакетов **dnf**. Чтобы скачать **g++** , **gdb**, **make**, **rsync** и **zip**, выполните следующую команду:

   ```bash
   sudo dnf install gcc-g++ gdb rsync make zip
   ```

Использование **zip** и **rsync** является обязательным для автоматической синхронизации заголовков Linux в Visual Studio и включения поддержки Intellisense.

::: moniker-end

::: moniker range=">=vs-2017"

## <a name="fedora-on-remote-linux-systems"></a>Использование Fedora в удаленных системах Linux

На целевой машине под управлением Fedora используются установщик пакетов **dnf**. Чтобы скачать **openssh-server**, **g++** , **gdb**, **make**, **rsync** и **zip**, а затем перезапустить управляющую программу ssh, сделайте следующее:

1. В командной строке оболочки на компьютере Linux выполните следующую команду:

   ```bash
   sudo dnf install openssh-server gcc-g++ gdb make rsync zip
   ```

   Для выполнения команды sudo вам может быть предложено ввести пароль учетной записи root.  Введите его и продолжите. После завершения будут установлены требуемые службы и средства.

1. Запустите службу ssh на компьютере Linux, выполнив следующую команду:

   ```bash
   sudo systemctl start sshd
   ```

   Эта команда запустит службу в фоновом режиме в режиме готовности к принятию подключений.

::: moniker-end

::: moniker range="vs-2015"

Поддержка разработки для Linux на C++ в Visual Studio версии 2017 и выше.

::: moniker-end

## <a name="next-steps"></a>Следующие шаги

Теперь вы можете создать или открыть проект Linux, а также настроить его для выполнения в целевой системе. Дополнительные сведения можно найти в разделе

- [Создание проекта Linux](create-a-new-linux-project.md)
- [Настройка проекта Linux CMake](cmake-linux-project.md)
