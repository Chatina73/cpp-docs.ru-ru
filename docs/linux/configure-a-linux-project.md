---
title: Настройка проекта C++ для Linux в Visual Studio
ms.date: 11/12/2018
ms.assetid: 4d7c6adf-54b9-4b23-bd23-5de0c825b768
ms.openlocfilehash: 84b9242ad5af79ed48d716fb5a35db56428e9a98
ms.sourcegitcommit: 9e85c2e029d06b4c1c69837437468718b4d54908
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "57808369"
---
# <a name="configure-a-linux-project"></a>Настройка проекта Linux

Этот раздел описывает, как настроить проект C++ для Linux, основанный на шаблоне проекта Linux, в Visual Studio. Сведения о проектах CMake Linux в Visual Studio см. в разделе [Настройка проекта Linux CMake](cmake-linux-project.md).

## <a name="general-settings"></a>Общие параметры

Можно настраивать различные параметры проекта Linux с помощью Visual Studio.  Чтобы просмотреть эти параметры, выберите меню **Проект > Свойства** или щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите в контекстном меню пункт **Свойства**. Появятся параметры **Общие**.

![Общая конфигурация](media/settings_general.png)

По умолчанию исполняемый файл (OUT-файл) создается с помощью инструмента.  Чтобы построить статическую или динамическую библиотеку или использовать существующий файл Makefile, используйте раздел **Тип конфигурации**.

Дополнительные сведения о параметрах на страницах свойств см. в статье [Справочник по страницам свойств проекта Linux](prop-pages-linux.md).

## <a name="remote-settings"></a>Настройки удаленной системы

Чтобы изменить параметры, относящиеся к удаленному компьютеру Linux, настройте удаленные параметры, отображаемые в окне [Общие](prop-pages/general-linux.md):

- Чтобы изменить целевой компьютер Linux, используйте запись **Компьютер удаленной сборки**.  Это позволит выбрать одно из подключений, созданных ранее.  Чтобы создать новую запись, см. раздел [Подключение к удаленному компьютеру Linux](connect-to-your-remote-linux-computer.md).

- Параметр **Корневой каталог удаленной сборки** определяет корневой каталог, где выполняется сборка проекта на удаленном компьютере Linux.  По умолчанию это **~/projects**, пока не будет изменено.

- **Каталог проекта удаленной сборки** — это место, где будет выполняться сборка этого конкретного проекта на удаленном компьютере Linux.  По умолчанию это каталог **$(RemoteRootDir)/$(ProjectName)**, который будет развернут в каталог с именем текущего проекта в корневом каталоге, заданном выше.

> [!NOTE]
> Изменить компиляторы C и C++ или компоновщик и архиватор, которые используются для сборки проекта по умолчанию, можно в соответствующих записях в разделе **C/C++ > Общие** и разделе **Компоновщик > Общие**.  Например, здесь можно задать использование определенной версии GCC или даже компилятора Clang. Дополнительные сведения см. в статьях [Свойства C/C++ (Linux)](prop-pages/c-cpp-linux.md) и [Свойства компоновщика (Linux C++)](prop-pages/linker-linux.md).

## <a name="include-directories-and-intellisense-support"></a>Каталоги включаемых файлов и поддержка технологии IntelliSense

**Visual Studio 2017 версии 15.6 или более ранних версий**<br/>
По умолчанию Visual Studio не включает никакие системные файлы include с компьютера Linux.  Например, элементы из каталога **/usr/include** отсутствуют в Visual Studio.
Для полной поддержки [IntelliSense](/visualstudio/ide/using-intellisense) вы должны будете скопировать эти файлы в какое-нибудь место на компьютере разработки и указать Visual Studio это место.  Одним из вариантов является использование scp (безопасное копирование) для копирования файлов.  В Windows 10 можно использовать [Bash в Windows](https://msdn.microsoft.com/commandline/wsl/about) для выполнения команды scp.  В предыдущих версиях Windows можно использовать что-нибудь вроде [PSCP (PuTTY Secure Copy)](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html).

Можно скопировать файлы с помощью команды, аналогичной приведенной ниже:

`scp -r linux_username@remote_host:/usr/include .`

Конечно, нужно заменить **linux_username** и **remote_host** значениями, которые соответствуют вашей собственной среде.

После копирования файлов с помощью элемента **Каталоги VC++** в разделе "Свойства проекта" укажите Visual Studio, где можно искать дополнительные файлы include, которые только что были скопированы.

![Каталоги VC++](media/settings_directories.png)

**Visual Studio 2017 версии 15.7 и выше**<br/>
Сведения см. в разделе [IntelliSense для удаленных заголовков (Visual Studio 2017 15.7 и более поздние версии)](#remote_intellisense).

## <a name="copy-sources"></a>Копирование источников

Во время сборки исходные файлы на компьютере разработки копируются на компьютер Linux и компилируются там.  По умолчанию все источники в проекте Visual Studio копируются в расположения, заданные в параметрах выше.  Однако можно также добавить в список дополнительные источники или полностью отключить копирование источников, что используется по умолчанию для проекта Makefile.

- Параметр **Источники для копирования** определяет, какие источники копируются на удаленный компьютер.  По умолчанию **\@(SourcesToCopyRemotely)** применяется ко всем файлам исходного кода в проекте, за исключением файлов ресурсов (например, изображений).

- **Копирование источников** можно включать и отключать, чтобы разрешать или запрещать копирование исходных файлов на удаленный компьютер.

- Параметр **Дополнительные источники для копирования** позволяет добавлять дополнительные исходные файлы, которые будут скопированы в удаленную систему.  Вы можете задать список файлов, разделенных точкой с запятой, или использовать синтаксис **: =**, чтобы указать локальное и удаленное имя:

`C:\Projects\ConsoleApplication1\MyFile.cpp:=~/projects/ConsoleApplication1/ADifferentName.cpp;C:\Projects\ConsoleApplication1\MyFile2.cpp:=~/projects/ConsoleApplication1/ADifferentName2.cpp;`

## <a name="build-events"></a>События сборки

Так как вся компиляция происходит на удаленном компьютере, в раздел "События сборки" свойства проекта были добавлены некоторые дополнительные события сборки.  Это **удаленное событие перед сборкой**, **удаленное событие перед компоновкой** и **удаленное событие после сборки**, которые будут возникать на удаленном компьютере перед или после отдельных этапов процесса.

![События сборки](media/settings_buildevents.png)

## <a name="remote_intellisense"></a> IntelliSense для удаленных заголовков (Visual Studio 2017 15.7 и более поздние версии)

При добавлении нового подключения в **диспетчере подключений** Visual Studio автоматически обнаруживает каталоги включения (include) для компилятора на удаленной системе. Затем Visual Studio архивирует с помощью zip и копирует эти файлы в каталог на локальном компьютере Windows. После этого при каждом использовании данного соединения в проекте Visual Studio или CMake заголовки в этих каталогах используются для обеспечения поддержки технологии IntelliSense.

Для использования этой возможности необходимо, чтобы на компьютере Linux был установлен zip. Для установки zip можно использовать следующую команду пакетного менеджера apt-get:

```cmd
apt install zip
```

Для управления кэшем заголовка перейдите в меню **Сервис > Параметры, кроссплатформенный > Диспетчер соединений > Диспетчер удаленных заголовков IntelliSense**. Для обновления кэша заголовка после внесения изменений на компьютере Linux выберите удаленное подключение и нажмите **Обновить**. Нажмите **Удалить**, чтобы удалить заголовки, не удаляя само подключение. Выберите **Проводник**, чтобы открыть локальный каталог, в **проводнике**. К этой папке необходимо относиться как к папке только для чтения. Чтобы загрузить заголовки для существующего подключения, которое было создано до версии 15.3, выберите подключение, а затем **Загрузить**.

![Удаленный заголовок IntelliSense](media/remote-header-intellisense.png)

## <a name="see-also"></a>См. также

[Настройка компилятора и свойств сборки](../build/working-with-project-properties.md)<br/>
[Общие свойства C++ (Linux C++)](../linux/prop-pages/general-linux.md)<br/>
[Каталоги VC++ (Linux C++)](../linux/prop-pages/directories-linux.md)<br/>
[Свойства копирования источников проекта (Linux C++)](../linux/prop-pages/copy-sources-project.md)<br/>
[Свойства событий сборки (Linux C++)](../linux/prop-pages/build-events-linux.md)
