---
title: Настройка проекта C++ для Linux в Visual Studio
ms.date: 06/07/2019
ms.assetid: 4d7c6adf-54b9-4b23-bd23-5de0c825b768
ms.openlocfilehash: 5acd9edeef8f09f86c394c39939d8408821dd691
ms.sourcegitcommit: 8adabe177d557c74566c13145196c11cef5d10d4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/10/2019
ms.locfileid: "66821566"
---
# <a name="configure-a-linux-project"></a>Настройка проекта Linux

::: moniker range="vs-2015"

Поддержка Linux, доступные в Visual Studio 2017 и более поздних версий.

::: moniker-end

В этом разделе описываются способы настройки C++ проекта Linux, как описано в разделе [создайте C++ проекта Linux в Visual Studio](create-a-new-linux-project.md). Для проектов CMake Linux см. в разделе [Настройка проекта Linux CMake ](cmake-linux-project.md). 

Можно настроить проекта Linux для физического компьютера Linux, виртуальную машину, или [подсистема Windows для Linux](/windows/wsl/about) (WSL). 

::: moniker range="vs-2019"

**Visual Studio 2019 версии 16.1**:

- При нацеливании WSL, можно предотвратить операции копирования, которые необходимы для построения и IntelliSense при разработке для удаленных систем Linux.

- Можно указать отдельные целевые устройства Linux для сборки и отладки.

::: moniker-end

## <a name="general-settings"></a>Общие параметры

Чтобы просмотреть параметры конфигурации, выберите **проект > свойства** меню или щелкните правой кнопкой проект в **обозревателе решений** и выберите **свойства** из контекста меню. Появятся параметры **Общие**.

![Общая конфигурация](media/settings_general.png)

По умолчанию исполняемый файл (OUT-файл) создается с помощью инструмента. Для создания статической или динамической библиотеки или использовать существующий файл Makefile, используйте **тип конфигурации** параметр.

Дополнительные сведения о параметрах страницы свойств см. в разделе [Справочник по страницам свойств проекта Linux](prop-pages-linux.md).

## <a name="remote-settings"></a>Настройки удаленной системы

Чтобы изменить параметры, относящиеся к удаленному компьютеру Linux, настройте параметры удаленного, которые отображаются в разделе [Общие](prop-pages/general-linux.md).

- Чтобы указать удаленный компьютер Linux, используйте **компьютер удаленной сборки** запись. Это позволит выбрать одно из подключений, созданных ранее. Чтобы создать новую запись, см. в разделе [подключение к удаленному компьютеру Linux](connect-to-your-remote-linux-computer.md) раздел.

   ![Компьютер построения](media/remote-build-machine-vs2019.png)

   ::: moniker range="vs-2019"

   **Visual Studio 2019 версии 16.1**: Для подсистемы Windows для Linux, щелкните стрелку вниз для **набор инструментов платформы** и выберите **WSL_1_0**. Другие параметры удаленного взаимодействия исчезнет, и путь к WSL оболочку по умолчанию будет отображаться на их место:

   ![Компьютер сборки WSL](media/wsl-remote-vs2019.png)

   Если у вас есть side-by-side WSL установок, можно указать другой путь. Дополнительные сведения об управлении несколькими дистрибутивами, см. в разделе [управление и настройку подсистемы Windows для Linux](/windows/wsl/wsl-config#set-a-default-distribution).

   Можно указать другой целевой объект для отладки на **свойства конфигурации** > **Отладка** страницы.

   ::: moniker-end

- Параметр **Корневой каталог удаленной сборки** определяет корневой каталог, где выполняется сборка проекта на удаленном компьютере Linux. По умолчанию это **~/projects**, пока не будет изменено.

- **Каталог проекта удаленной сборки** — это место, где будет выполняться сборка этого конкретного проекта на удаленном компьютере Linux. По умолчанию это каталог **$(RemoteRootDir)/$(ProjectName)** , который будет развернут в каталог с именем текущего проекта в корневом каталоге, заданном выше.

> [!NOTE]
> Изменить компиляторы C и C++ или компоновщик и архиватор, которые используются для сборки проекта по умолчанию, можно в соответствующих записях в разделе **C/C++ > Общие** и разделе **Компоновщик > Общие**. Можно указать определенной версии GCC и Clang, например. Дополнительные сведения см. в статьях [Свойства C/C++ (Linux)](prop-pages/c-cpp-linux.md) и [Свойства компоновщика (Linux C++)](prop-pages/linker-linux.md).

## <a name="copy-sources-remote-systems-only"></a>Копирование источников (только для удаленных систем)

::: moniker range="vs-2019"

В этом разделе не применяется при нацеливании на WSL.

::: moniker-end

При создании в удаленных системах, исходные файлы на Компьютере разработки копируются на компьютер Linux и компилируются там. По умолчанию все источники в проекте Visual Studio копируются в расположения, заданные в параметрах выше. Однако можно также добавить в список дополнительные источники или полностью отключить копирование источников, что используется по умолчанию для проекта Makefile.

- Параметр **Источники для копирования** определяет, какие источники копируются на удаленный компьютер. По умолчанию **\@(SourcesToCopyRemotely)** применяется ко всем файлам исходного кода в проекте, за исключением файлов ресурсов (например, изображений).

- **Копирование источников** можно включать и отключать, чтобы разрешать или запрещать копирование исходных файлов на удаленный компьютер.

- Параметр **Дополнительные источники для копирования** позволяет добавлять дополнительные исходные файлы, которые будут скопированы в удаленную систему. Вы можете задать список файлов, разделенных точкой с запятой, или использовать синтаксис **: =** , чтобы указать локальное и удаленное имя:

`C:\Projects\ConsoleApplication1\MyFile.cpp:=~/projects/ConsoleApplication1/ADifferentName.cpp;C:\Projects\ConsoleApplication1\MyFile2.cpp:=~/projects/ConsoleApplication1/ADifferentName2.cpp;`

## <a name="build-events"></a>События сборки

Так как вся компиляция происходит на удаленном компьютере (или WSL), были добавлены некоторые дополнительные события сборки в раздел "события построения" в свойствах проекта. Это **удаленное событие перед сборкой**, **удаленное событие перед компоновкой** и **удаленное событие после сборки**, которые будут возникать на удаленном компьютере перед или после отдельных этапов процесса.

![События сборки](media/settings_buildevents.png)

## <a name="remote_intellisense"></a> IntelliSense для заголовков в удаленных системах

::: moniker range="vs-2019"

В этом разделе не применяется при нацеливании на WSL.

::: moniker-end

При добавлении нового подключения в **диспетчере подключений** Visual Studio автоматически обнаруживает каталоги включения (include) для компилятора на удаленной системе. Затем Visual Studio архивирует с помощью zip и копирует эти файлы в каталог на локальном компьютере Windows. После этого при каждом использовании данного соединения в проекте Visual Studio или CMake заголовки в этих каталогах используются для обеспечения поддержки технологии IntelliSense.

Для использования этой возможности необходимо, чтобы на компьютере Linux был установлен zip. Для установки zip можно использовать следующую команду пакетного менеджера apt-get:

```cmd
apt install zip
```

Для управления кэшем заголовка перейдите в меню **Сервис > Параметры, кроссплатформенный > Диспетчер соединений > Диспетчер удаленных заголовков IntelliSense**. Для обновления кэша заголовка после внесения изменений на компьютере Linux выберите удаленное подключение и нажмите **Обновить**. Нажмите **Удалить**, чтобы удалить заголовки, не удаляя само подключение. Выберите **Проводник**, чтобы открыть локальный каталог, в **проводнике**. К этой папке необходимо относиться как к папке только для чтения. Чтобы загрузить заголовки для существующего подключения, который был создан до Visual Studio 2017 версии 15.3, выберите подключение, а затем выберите **загрузить**.

::: moniker range="vs-2017"

![Удаленный заголовок IntelliSense](media/remote-header-intellisense.png)

::: moniker-end

::: moniker range="vs-2019"

![Удаленный заголовок IntelliSense](media/connection-manager-vs2019.png)

Вы можете включить ведение журнала для устранения проблем:

![Удаленное протоколирование](media/remote-logging-vs2019.png)

::: moniker-end

## <a name="see-also"></a>См. также

[Настройка компилятора и свойств сборки](../build/working-with-project-properties.md)<br/>
[Общие свойства C++ (Linux C++)](../linux/prop-pages/general-linux.md)<br/>
[Каталоги VC++ (Linux C++)](../linux/prop-pages/directories-linux.md)<br/>
[Свойства копирования источников проекта (Linux C++)](../linux/prop-pages/copy-sources-project.md)<br/>
[Свойства событий сборки (Linux C++)](../linux/prop-pages/build-events-linux.md)
