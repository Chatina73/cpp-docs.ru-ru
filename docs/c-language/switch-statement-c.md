---
title: 'Оператор :::no-loc(switch)::: (C)'
ms.date: 04/25/2020
f1_keywords:
- ':::no-loc(switch):::'
helpviewer_keywords:
- ':::no-loc(switch)::: keyword [C]'
ms.assetid: fbede014-23bd-4ab1-8094-c8d9d9cb963a
no-loc:
- ':::no-loc(switch):::'
- ':::no-loc(case):::'
- ':::no-loc(default):::'
- ':::no-loc(break):::'
ms.openlocfilehash: bdd6885f67728a3c81e395f05c33191156896ad9
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87220786"
---
# <a name="no-locswitch-statement-c"></a>Оператор `:::no-loc(switch):::` (C)

Операторы **`:::no-loc(switch):::`** и **`:::no-loc(case):::`** помогают управлять сложными условными операциями и операциями ветвления. Оператор **`:::no-loc(switch):::`** передает управление в оператор внутри своего тела.

## <a name="syntax"></a>Синтаксис

> *`selection-statement`* :\
> &nbsp;&nbsp;&nbsp;&nbsp; **`:::no-loc(switch)::: (`** &nbsp; *`expression`* &nbsp; **`)`** &nbsp; *`statement`*

> *`labeled-statement`* :\
> &nbsp;&nbsp;&nbsp;&nbsp; **`:::no-loc(case):::`** &nbsp; *`constant-expression`* &nbsp; **`:`** &nbsp; *`statement`* \
> &nbsp;&nbsp;&nbsp;&nbsp; **`:::no-loc(default):::`** &nbsp; **`:`** &nbsp; *`statement`*

## <a name="remarks"></a>Примечания

Оператор **`:::no-loc(switch):::`** передает управление одному из *`labeled-statement`* в своем теле в зависимости от значения *`expression`* .

Значения *`expression`* и значение каждого *`constant-expression`* должны иметь целочисленный тип. Выражение *`constant-expression`* должно иметь однозначное константное целочисленное значение во время компиляции.

Управление передается оператору **`:::no-loc(case):::`** , значение *`constant-expression`* которого соответствует значению выражения *`expression`* . Оператор **`:::no-loc(switch):::`** может содержать неограниченное число экземпляров **`:::no-loc(case):::`** . Однако значения ни одной из пар выражений *`constant-expression`* в одном операторе **`:::no-loc(switch):::`** не должны совпадать. Выполнение тела оператора **`:::no-loc(switch):::`** начинается с первого соответствующего оператора *`labeled-statement`* или после него. Выполнение продолжается до конца тела оператора или пока оператор **`:::no-loc(break):::`** не передаст управление за пределы тела.

Оператор **`:::no-loc(switch):::`** обычно используется следующим образом:

```C
:::no-loc(switch)::: ( expression )
{
    // declarations
    // . . .
    :::no-loc(case)::: constant_expression:
        // statements executed if the expression equals the
        // value of this constant_expression
        :::no-loc(break):::;
    :::no-loc(default)::::
        // statements executed if expression does not equal
        // any :::no-loc(case)::: constant_expression
}
```

Оператор **`:::no-loc(break):::`** можно использовать для завершения обработки определенного оператора с меткой в операторе **`:::no-loc(switch):::`** . Он выполняет ветвление до конца оператора **`:::no-loc(switch):::`** . Без оператора **`:::no-loc(break):::`** выполнение программы продолжается до следующего оператора с меткой. Операторы будут выполняться до достижения оператора **`:::no-loc(break):::`** или конца всего оператора. В некоторых случаях может требоваться именно такое поведение.

Оператор **`:::no-loc(default):::`** выполняется, если ни одно из значений **`:::no-loc(case):::`** *`constant-expression`* не равно значению *`expression`* . Если оператор **`:::no-loc(default):::`** не указан и соответствующий вариант **`:::no-loc(case):::`** не найден, ни один из операторов в теле оператора **`:::no-loc(switch):::`** не выполняется. Допускается не более одного оператора **`:::no-loc(default):::`** . Оператор **`:::no-loc(default):::`** не обязательно должен находиться в конце. Он может располагаться в любом месте тела оператора **`:::no-loc(switch):::`** . Метка **`:::no-loc(case):::`** или **`:::no-loc(default):::`** может располагаться только внутри оператора **`:::no-loc(switch):::`** .

Выражения **`:::no-loc(switch):::`** *`expression`* и **`:::no-loc(case):::`** *`constant-expression`* должны быть целочисленного типа. Значение каждого **`:::no-loc(case):::`** *`constant-expression`* в теле оператора должно быть уникальным.

Метки **`:::no-loc(case):::`** и **`:::no-loc(default):::`** тела оператора **`:::no-loc(switch):::`** имеют значения только при начальной проверке, которая определяет, с какого места тела оператора начинается выполнение. Операторы **`:::no-loc(switch):::`** могут быть вложенными. Любые статические переменные инициализируются до выполнения любых операторов **`:::no-loc(switch):::`** .

> [!NOTE]
> Объявления могут располагаться в начале составного оператора, образующего тело оператора **`:::no-loc(switch):::`** , но инициализации, включенные в объявления, не выполняются. Оператор **`:::no-loc(switch):::`** передает управление непосредственно в выполняемый оператор в теле, минуя все строки, содержащие инициализации.

В следующих примерах кода показаны операторы **`:::no-loc(switch):::`** :

```C
:::no-loc(switch):::( c )
{
    :::no-loc(case)::: 'A':
        capital_a++;
    :::no-loc(case)::: 'a':
        letter_a++;
    :::no-loc(default)::: :
        total++;
}
```

В этом примере, если переменная `c` равна `'A'`, выполняются все три оператора тела **`:::no-loc(switch):::`** , так как оператор **`:::no-loc(break):::`** перед следующим оператором **`:::no-loc(case):::`** отсутствует. Управления передается первому оператору (`capital_a++;`) и продолжается по-порядку во всей остальной части тела. Если переменная `c` равна `'a'`, увеличиваются значения переменных `letter_a` и `total`. Если переменная `c` не равна `'A'` или `'a'`, увеличивается только значение переменной `total`.

```C
:::no-loc(switch):::( i )
{
    :::no-loc(case)::: -1:
        n++;
        :::no-loc(break):::;
    :::no-loc(case)::: 0 :
        z++;
        :::no-loc(break):::;
    :::no-loc(case)::: 1 :
        p++;
        :::no-loc(break):::;
}
```

В этом примере оператор **`:::no-loc(break):::`** указан после каждого оператора тела **`:::no-loc(switch):::`** . Оператор **`:::no-loc(break):::`** вызывает принудительный выход из тела оператора после выполнения одного оператора. Если переменная `i` равна –1, увеличивается только значение переменной `n`. Оператор **`:::no-loc(break):::`** после оператора `n++;` передает управление за пределы тела оператора, минуя оставшиеся операторы. Аналогично, если переменная `i` равна 0, увеличивается только значение переменной `z`; если переменная `i` равна 1, увеличивается только значение переменной `p`. Заключительный оператор **`:::no-loc(break):::`** , строго говоря, не требуется, так как управление передается из тела в конце составного оператора. Он добавлен для единообразия.

Один оператор может содержать несколько меток **`:::no-loc(case):::`** , как показано в следующем примере:

```C
:::no-loc(switch):::( c )
{
    :::no-loc(case)::: 'a' :
    :::no-loc(case)::: 'b' :
    :::no-loc(case)::: 'c' :
    :::no-loc(case)::: 'd' :
    :::no-loc(case)::: 'e' :
    :::no-loc(case)::: 'f' :  convert_hex(c);
}
```

В этом примере, если *константное выражение* равно любой букве в диапазоне от `'a'` до `'f'`, вызывается функция `convert_hex`.

### <a name="microsoft-specific"></a>Специально для систем Майкрософт

Microsoft C не ограничивает количество значений **`:::no-loc(case):::`** в операторе **`:::no-loc(switch):::`** . Это число ограничивается только объемом доступной памяти. ANSI C требует, чтобы в операторе **`:::no-loc(switch):::`** можно было использовать не менее 257 меток **`:::no-loc(case):::`** .

В Microsoft C расширения Майкрософт по умолчанию (:::no-loc(default):::) включены. Используйте параметр компилятора [/Za](../build/reference/za-ze-disable-language-extensions.md) для отключения этих расширений.

## <a name="see-also"></a>См. также

[Оператор :::no-loc(switch)::: (C++)](../cpp/:::no-loc(switch):::-statement-cpp.md)
