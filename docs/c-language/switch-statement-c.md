---
title: switchОператор (C)
ms.date: 04/25/2020
f1_keywords:
- switch
helpviewer_keywords:
- switch keyword [C]
ms.assetid: fbede014-23bd-4ab1-8094-c8d9d9cb963a
no-loc:
- switch
- case
- default
- break
ms.openlocfilehash: 12163e85110092e3e372fa496cf42efd7574ea8d
ms.sourcegitcommit: 2bc15c5b36372ab01fa21e9bcf718fa22705814f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "82167680"
---
# <a name="opno-locswitch-statement-c"></a>switchОператор (C)

Операторы **switch** и **case** помогают управлять сложными условными операциями и ветвлением. **switch** Оператор передает управление оператору внутри его тела.

## <a name="syntax"></a>Синтаксис

*оператор выбора*:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;**`switch (`***expression* **`)`** *оператор* выражения

*оператор с меткой*:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;**`case`**  *Оператор константного выражения***`:`***statement*    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;**`default :`**  *баланс*

Управление передается оператору **case** , *константное выражение* которого соответствует значению ** switch (** *Expression* **)**. **switch** Инструкция может включать любое количество **case** экземпляров. Однако ни одна из case двух констант в одной **switch** инструкции не может иметь одинаковое значение. Выполнение тела оператора начинается с выбранного оператора. Он продолжается до конца тела или до тех пор, пока **break** оператор не передаст управление из тела.

Использование **switch** оператора обычно выглядит примерно так:

```C
switch ( expression )
{
    // declarations
    // . . .
    case constant_expression:
        // statements executed if the expression equals the
        // value of this constant_expression
        break;
    default:
        // statements executed if expression does not equal
        // any case constant_expression
}
```

**break** Оператор можно использовать для завершения обработки определенной помеченной инструкции в **switch** операторе. Он подразделяется на конец **switch** оператора. Без **break** этого программа переходит к следующему оператору с меткой, выполняя операторы до тех **break** пор, пока не будет достигнут конец оператора или. Это продолжение может быть предпочтительным в некоторых ситуациях.

Инструкция **default** выполняется, если **case** *константное выражение* не равно значению ** switch (** *выражение* **)**. Если инструкция не **default** найдена и не **case** найдено совпадений, то ни один из операторов в **switch** теле не будет выполнен. Может существовать не более одного **default** оператора. **default** Оператор не обязательно должен находиться в конце. Он может находиться в любом месте текста **switch** инструкции. Метка **case** или **default** может использоваться только внутри **switch** оператора.

Тип **switch** *выражения* и **case** *константное выражение* должны быть целочисленными. Значение каждого **case** *константного выражения* должно быть уникальным в теле оператора.

Метки **case** и **default** тела **switch** инструкции являются значимыми только в первоначальном тесте, который определяет, где начинается выполнение в теле оператора. **switch** операторы могут быть вложенными. Все статические переменные инициализируются перед выполнением в **switch** любых инструкциях.

> [!NOTE]
> Объявления могут находиться в заголовке составного оператора, формирующего **switch** тело, но инициализации, содержащиеся в объявлениях, не выполняются. **switch** Оператор передает управление непосредственно исполняемому оператору в теле, минуя строки, содержащие инициализации.

В следующих примерах показаны **switch** инструкции:

```C
switch( c )
{
    case 'A':
        capital_a++;
    case 'a':
        letter_a++;
    default :
        total++;
}
```

**switch** Все три оператора текста в этом примере выполняются `c` `'A'`, если равен, поскольку оператор не **break** отображается перед следующим. case Управления передается первому оператору (`capital_a++;`) и продолжается по-порядку во всей остальной части тела. Если переменная `c` равна `'a'`, увеличиваются значения переменных `letter_a` и `total`. Увеличивается `total` только в том случае `c` , если `'A'` не `'a'`равно или.

```C
switch( i )
{
    case -1:
        n++;
        break;
    case 0 :
        z++;
        break;
    case 1 :
        p++;
        break;
}
```

В этом примере **break** оператор следует за каждым оператором **switch** тела. **break** Оператор принудительно выполняет выход из тела оператора после выполнения одной инструкции. Если переменная `i` равна –1, увеличивается только значение переменной `n`. **break** Следующая инструкция `n++;` приводит к тому, что управление выполнением передается из тела инструкции, минуя оставшиеся инструкции. Аналогично, если переменная `i` равна 0, увеличивается только значение переменной `z`; если переменная `i` равна 1, увеличивается только значение переменной `p`. Последняя **break** инструкция не является строго необходимой, так как управление передается из тела в конце составного оператора. Он включается для обеспечения согласованности.

Одна инструкция может содержать несколько **case** меток, как показано в следующем примере:

```C
switch( c )
{
    case 'a' :
    case 'b' :
    case 'c' :
    case 'd' :
    case 'e' :
    case 'f' :  convert_hex(c);
}
```

В этом примере, если *константное выражение* равно любой букве в диапазоне от `'a'` до `'f'`, вызывается функция `convert_hex`.

### <a name="microsoft-specific"></a>Специально для систем Майкрософт

Microsoft C не ограничивает количество case значений в **switch** операторе. Это число ограничивается только объемом доступной памяти. ANSI C требует, case **switch** чтобы в инструкции было разрешено по крайней мере 257 меток.

default Для Microsoft C включено расширение Microsoft. Чтобы отключить эти расширения, используйте параметр компилятора [/Za](../build/reference/za-ze-disable-language-extensions.md) .

## <a name="see-also"></a>См. также

[switchОператор (C++)](../cpp/switch-statement-cpp.md)
