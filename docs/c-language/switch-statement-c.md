---
title: Оператор switch (C)
ms.date: 04/25/2020
f1_keywords:
- switch
helpviewer_keywords:
- switch keyword [C]
ms.assetid: fbede014-23bd-4ab1-8094-c8d9d9cb963a
no-loc:
- switch
- case
- default
- break
ms.openlocfilehash: eb18b6244318b595e67cc45f99dfcde314866f55
ms.sourcegitcommit: 6b749db14b4cf3a2b8d581fda6fdd8cb98bc3207
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "82825682"
---
# <a name="switch-statement-c"></a>Оператор `switch` (C)

Операторы __`switch`__ и __`case`__ помогают управлять сложными условными операциями и операциями ветвления. Оператор __`switch`__ передает управление в оператор внутри своего тела.

## <a name="syntax"></a>Синтаксис

> *`selection-statement`* :\
> &nbsp;&nbsp;&nbsp;&nbsp; __`switch (`__ &nbsp; *`expression`* &nbsp; __`)`__ &nbsp; *`statement`*

> *`labeled-statement`* :\
> &nbsp;&nbsp;&nbsp;&nbsp; __`case`__ &nbsp; *`constant-expression`* &nbsp; __`:`__ &nbsp; *`statement`* \
> &nbsp;&nbsp;&nbsp;&nbsp; __`default`__ &nbsp; __`:`__ &nbsp; *`statement`*

## <a name="remarks"></a>Примечания

Оператор __`switch`__ передает управление одному из *`labeled-statement`* в своем теле в зависимости от значения *`expression`* .

Значения *`expression`* и значение каждого *`constant-expression`* должны иметь целочисленный тип. Выражение *`constant-expression`* должно иметь однозначное константное целочисленное значение во время компиляции.

Управление передается оператору **`case`** , значение *`constant-expression`* которого соответствует значению выражения *`expression`* . Оператор __`switch`__ может содержать неограниченное число экземпляров __`case`__ . Однако значения ни одной из пар выражений *`constant-expression`* в одном операторе __`switch`__ не должны совпадать. Выполнение тела оператора __`switch`__ начинается с первого соответствующего оператора *`labeled-statement`* или после него. Выполнение продолжается до конца тела оператора или пока оператор __`break`__ не передаст управление за пределы тела.

Оператор __`switch`__ обычно используется следующим образом:

```C
switch ( expression )
{
    // declarations
    // . . .
    case constant_expression:
        // statements executed if the expression equals the
        // value of this constant_expression
        break;
    default:
        // statements executed if expression does not equal
        // any case constant_expression
}
```

Оператор __`break`__ можно использовать для завершения обработки определенного оператора с меткой в операторе __`switch`__ . Он выполняет ветвление до конца оператора __`switch`__ . Без оператора __`break`__ выполнение программы продолжается до следующего оператора с меткой. Операторы будут выполняться до достижения оператора __`break`__ или конца всего оператора. В некоторых случаях может требоваться именно такое поведение.

Оператор __`default`__ выполняется, если ни одно из значений __`case`__ *`constant-expression`* не равно значению *`expression`* . Если оператор __`default`__ не указан и соответствующий вариант __`case`__ не найден, ни один из операторов в теле оператора __`switch`__ не выполняется. Допускается не более одного оператора __`default`__ . Оператор __`default`__ не обязательно должен находиться в конце. Он может располагаться в любом месте тела оператора __`switch`__ . Метка __`case`__ или __`default`__ может располагаться только внутри оператора __`switch`__ .

Выражения __`switch`__ *`expression`* и __`case`__ *`constant-expression`* должны быть целочисленного типа. Значение каждого __`case`__ *`constant-expression`* в теле оператора должно быть уникальным.

Метки __`case`__ и __`default`__ тела оператора __`switch`__ имеют значения только при начальной проверке, которая определяет, с какого места тела оператора начинается выполнение. Операторы __`switch`__ могут быть вложенными. Любые статические переменные инициализируются до выполнения любых операторов __`switch`__ .

> [!NOTE]
> Объявления могут располагаться в начале составного оператора, образующего тело оператора __`switch`__ , но инициализации, включенные в объявления, не выполняются. Оператор __`switch`__ передает управление непосредственно в выполняемый оператор в теле, минуя все строки, содержащие инициализации.

В следующих примерах кода показаны операторы __`switch`__ :

```C
switch( c )
{
    case 'A':
        capital_a++;
    case 'a':
        letter_a++;
    default :
        total++;
}
```

В этом примере, если переменная `c` равна `'A'`, выполняются все три оператора тела __`switch`__ , так как оператор __`break`__ перед следующим оператором __`case`__ отсутствует. Управления передается первому оператору (`capital_a++;`) и продолжается по-порядку во всей остальной части тела. Если переменная `c` равна `'a'`, увеличиваются значения переменных `letter_a` и `total`. Если переменная `c` не равна `'A'` или `'a'`, увеличивается только значение переменной `total`.

```C
switch( i )
{
    case -1:
        n++;
        break;
    case 0 :
        z++;
        break;
    case 1 :
        p++;
        break;
}
```

В этом примере оператор __`break`__ указан после каждого оператора тела __`switch`__ . Оператор __`break`__ вызывает принудительный выход из тела оператора после выполнения одного оператора. Если переменная `i` равна –1, увеличивается только значение переменной `n`. Оператор __`break`__ после оператора `n++;` передает управление за пределы тела оператора, минуя оставшиеся операторы. Аналогично, если переменная `i` равна 0, увеличивается только значение переменной `z`; если переменная `i` равна 1, увеличивается только значение переменной `p`. Заключительный оператор __`break`__ , строго говоря, не требуется, так как управление передается из тела в конце составного оператора. Он добавлен для единообразия.

Один оператор может содержать несколько меток __`case`__ , как показано в следующем примере:

```C
switch( c )
{
    case 'a' :
    case 'b' :
    case 'c' :
    case 'd' :
    case 'e' :
    case 'f' :  convert_hex(c);
}
```

В этом примере, если *константное выражение* равно любой букве в диапазоне от `'a'` до `'f'`, вызывается функция `convert_hex`.

### <a name="microsoft-specific"></a>Специально для систем Майкрософт

Microsoft C не ограничивает количество значений __`case`__ в операторе __`switch`__ . Это число ограничивается только объемом доступной памяти. ANSI C требует, чтобы в операторе __`switch`__ можно было использовать не менее 257 меток __`case`__ .

В Microsoft C расширения Майкрософт по умолчанию (default) включены. Используйте параметр компилятора [/Za](../build/reference/za-ze-disable-language-extensions.md) для отключения этих расширений.

## <a name="see-also"></a>См. также

[Оператор switch (C++)](../cpp/switch-statement-cpp.md)
