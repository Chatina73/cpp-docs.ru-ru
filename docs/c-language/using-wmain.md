---
title: Использование wmain
ms.date: 11/04/2016
helpviewer_keywords:
- wmain function
ms.assetid: d0300812-adc4-40c6-bba3-b2da25468c80
ms.openlocfilehash: d467d50a7188cd665f64de8b6f0ce6e6a37df752
ms.sourcegitcommit: f4be868c0d1d78e550fba105d4d3c993743a1f4b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2019
ms.locfileid: "56148495"
---
# <a name="using-wmain"></a>Использование wmain

**Блок, относящийся только к системам Microsoft**

В модели программирования Юникода можно определить версию функции **main** для расширенных символов. Используйте **wmain** вместо **main**, если вам нужен переносимый код, соблюдающий модель программирования Юникода.

## <a name="syntax"></a>Синтаксис

```
wmain( int argc, wchar_t *argv[ ], wchar_t *envp[ ] )
```

## <a name="remarks"></a>Примечания

Формальные параметры для функции **wmain** объявляются в том же формате, что и для функции **main**. Затем можно передать в качестве аргументов "широкие" символы и указатель среды кодировки Юникод (необязательно) в программу. Параметры `argv` и `envp` для функции **wmain** относятся к типу `wchar_t*`. Например:

Если программа использует функцию **main**, окружение многобайтовой кодировки создается библиотекой времени выполнения при запуске программы. Копия среды для Юникода создается только при необходимости (например, для вызова функции `_wgetenv` или `_wputenv`). При первом вызове `_wputenv` или `_wgetenv`, если среда многобайтовой кодировки (MBCS) уже существует, создается соответствующая среда широкосимвольной строки, на которую затем указывает глобальная переменная `_wenviron`, представляющая собой широкосимвольную версию глобальной переменной `_environ`. В этот момент две копии среды (для многобайтовой кодировки и Юникода) существуют одновременно и поддерживаются операционной системой в течение всего срока жизни программы.

Аналогичным образом, если программа использует функцию **wmain**, при запуске программы создается окружение расширенных символов и ссылка на него сохраняется в глобальной переменной `_wenviron`. Среда многобайтовой кодировки MBCS (ASCII) создается при первом вызове функции `_putenv` или `getenv`, и на нее указывает глобальная переменная `_environ`.

Дополнительные сведения об окружении многобайтовой кодировки MBCS см. в разделе [Интернационализация](../c-runtime-library/internationalization.md) в *справочнике по библиотеке времени выполнения.*

**Завершение блока, относящегося только к системам Майкрософт**

## <a name="see-also"></a>См. также

[Функция main и выполнение программ](../c-language/main-function-and-program-execution.md)
