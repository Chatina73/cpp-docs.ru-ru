---
title: Преобразования типов с плавающей запятой
ms.date: 10/02/2019
helpviewer_keywords:
- converting floating point
- floating-point conversion
ms.assetid: 96804c8e-fa3b-4742-9006-0082ed9e57f2
ms.openlocfilehash: 72d0f95a6e48dcf0a5e8fea3757e85f9a03bf7e4
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87227898"
---
# <a name="conversions-from-floating-point-types"></a>Преобразования типов с плавающей запятой

Если значение с плавающей запятой преобразуется в другой тип с плавающей запятой и при этом может быть точно представлено в результирующем типе, оно не изменяется. Если исходное значение является числовым, но при этом не может быть представлено точно, результатом будет следующее более высокое или низкое значение, которое может быть представлено. Диапазон типов с плавающей запятой см. в разделе [Ограничения констант с плавающей запятой](../c-language/limits-on-floating-point-constants.md).

При преобразовании значения с плавающей запятой в целочисленный тип оно сначала усекается путем удаления дробной части. Если усеченное значение может быть представлено в результирующем типе, результатом должно быть это значение. Если значение не может быть представлено, результат не определен.

**Блок, относящийся только к системам Microsoft**

Компиляторы Майкрософт используют представление binary32 согласно IEEE-754 для значений типа **`float`** и представление binary64 для **`long double`** и **`double`** . Так как для **`long double`** и **`double`** используется одно и то же представление, они имеют одинаковый диапазон и точность.

Когда компилятор преобразует число с плавающей запятой типа **`double`** или **`long double`** в тип **`float`** , он округляет результат в соответствии с правилами среды для таких чисел (по умолчанию это округление до ближайшего целого с разрешением спорных ситуаций в сторону четного). Если числовое значение слишком велико или слишком мало для представления в виде значения типа **`float`** , результатом преобразования будет положительная или отрицательная бесконечность в зависимости от знака исходного значения, и одновременно создается исключение переполнения, если оно включено.

Для преобразования в целочисленный тип меньше **`long`** сначала значение преобразуется в тип **`long`** , а затем в результирующий тип.

При преобразовании в целочисленные типы не меньше **`long`** для значения, которое слишком велико или слишком мало для представления в результирующем типе, может возвращаться любое из следующих значений:

- Результатом может быть *значение-метка*, то есть представимое значение, максимально удаленное от нуля. Для типов со знаком это наименьшее представимое значение (0x800...0). Для типов без знака это наибольшее представимое значение (0xFF...F).

- Результат может *дополняться*, то есть значение, которое слишком велико для представления, преобразуется в наибольшее представимое значение, а значение, которое слишком мало для представления, преобразуются в наименьшее представимое значение. Одно из этих двух значений также используется в качестве значения-метки.

- При преобразовании в тип **`unsigned long`** или **`unsigned long long`** значения, выходящего за пределы соответствующего диапазона, результатом может быть некоторое значение, отличающееся от наибольшего или наименьшего представимого. Будет ли результат значением-меткой, дополненным значением или ни тем ни другим, зависит от параметров компилятора и целевой архитектуры. В будущих версиях компилятора может возвращаться дополненное значение или значение-метка, даже если в предыдущих версиях оно не возвращалось.

**Завершение блока, относящегося только к системам Майкрософт**

В следующей таблице перечислены преобразования из типов с плавающей запятой.

## <a name="table-of-conversions-from-floating-point-types"></a>Таблица преобразования типов с плавающей запятой

|Исходный тип|Кому|Метод|
|----------|--------|------------|
|**`float`**|**`char`**|Преобразование в **`long`** ; преобразование **`long`** в **`char`**|
|**`float`**|**`short`**|Преобразование в **`long`** ; преобразование **`long`** в **`short`**|
|**`float`**|**`int`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`int`** , результат не определен.|
|**`float`**|**`long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`long`** , результат не определен.|
|**`float`**|**`long long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`long long`** , результат не определен.|
|**`float`**|**`unsigned char`**|Преобразование в **`long`** ; преобразование **`long`** в **`unsigned char`**|
|**`float`**|**`unsigned short`**|Преобразование в **`long`** ; преобразование **`long`** в **`unsigned short`**|
|**`float`**|**`unsigned`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned`** , результат не определен.|
|**`float`**|**`unsigned long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned long`** , результат не определен.|
|**`float`**|**`unsigned long long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned long long`** , результат не определен.|
|**`float`**|**`double`**|Представление в качестве значения **`double`** .|
|**`float`**|**`long double`**|Представление в качестве значения **`long double`** .|
|**`double`**|**`char`**|Преобразование в **`float`** ; преобразование **`float`** в **`char`**|
|**`double`**|**`short`**|Преобразование в **`float`** ; преобразование **`float`** в **`short`**|
|**`double`**|**`int`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`int`** , результат не определен.|
|**`double`**|**`long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`long`** , результат не определен.|
|**`double`**|**`unsigned char`**|Преобразование в **`long`** ; преобразование **`long`** в **`unsigned char`**|
|**`double`**|**`unsigned short`**|Преобразование в **`long`** ; преобразование **`long`** в **`unsigned short`**|
|**`double`**|**`unsigned`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned`** , результат не определен.|
|**`double`**|**`unsigned long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned long`** , результат не определен.|
|**`double`**|**`unsigned long long`**|Усечение до десятичной запятой. Если результат слишком велик для представления в качестве значения **`unsigned long long`** , результат не определен.|
|**`double`**|**`float`**|Представление в качестве значения **`float`** . Если значение **`double`** невозможно точно представить с типом **`float`** , происходит потеря точности. Если значение слишком велико для представления в качестве значения **`float`** , результат не определен.|
|**`double`**|**`long double`**|Значение **`long double`** рассматривается как **`double`** .|

Преобразования из типа **`long double`** производятся так же, как из типа **`double`** .

## <a name="see-also"></a>См. также

[Преобразования присваиваний](../c-language/assignment-conversions.md)
